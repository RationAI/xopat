var EmpationAPI;(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{AbstractAPI:()=>c,EventSource:()=>n,HTTPError:()=>o,Logger:()=>l,RawAPI:()=>a,RootAPI:()=>v,RootContext:()=>f,STATUS_CODES:()=>s,ScopeAPI:()=>y,ScopeContext:()=>p,V3:()=>i,getJwtTokenExpiresTimeout:()=>u,parseJwtToken:()=>h,sleep:()=>d});var i={};t.r(i),t.d(i,{Apps:()=>g,Cases:()=>C,Examinations:()=>_,RationAI:()=>nt,Root:()=>ot,Scope:()=>M,Slides:()=>L,Storage:()=>A});class n{constructor(){this.events={}}addOnceHandler(t,e,i,n,s){const r=this;n=n||1;let o=0;const a=function(i){return o++,o===n&&r.removeHandler(t,a),e(i)};this.addHandler(t,a,i,s)}addHandler(t,e,i=null,s=0){let r=this.events[t];if(r||(this.events[t]=r=[]),e&&n.isFunction(e)){let t=r.length,n={handler:e,userData:i||null,priority:s||0};for(r[t]=n;t>0&&r[t-1].priority<r[t].priority;)r[t]=r[t-1],r[t-1]=n,t--}}removeHandler(t,e){const i=this.events[t],n=[];if(i&&Array.isArray(i)){for(let t=0;t<i.length;t++)i[t].handler!==e&&n.push(i[t]);this.events[t]=n}}numberOfHandlers(t){const e=this.events[t];return e?e.length:0}removeAllHandlers(t){if(t)this.events[t]=[];else for(const t in this.events)this.events[t]=[]}getHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){let n,s=e.length;for(n=0;n<s;n++)e[n]&&(i.eventSource=t,i.userData=e[n].userData,e[n].handler(i))}):null}getAwaitingHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){return new Promise((s=>{const r=e.length;!function o(a){if(a>=r||!e[a])return s("Resolved!"),null;i.eventSource=t,i.userData=e[a].userData;let c=e[a].handler(i);return c=c&&"promise"===n.type(c)?c:Promise.resolve(),c.then((()=>o(a+1)))}(0)}))}):null}raiseEvent(t,e){const i=this.getHandler(t);if(i)return i(this,e||{})}raiseEventAwaiting(t,e){const i=this.getAwaitingHandler(t);return i?i(this,e||{}):Promise.resolve("No handler for this event registered.")}static isFunction(t){return"function"===this.type(t)}static type(t){return null==t?String(t):this.class2type[t.toString()]||("function"==typeof t?"function":"object")}}n.class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};const s={100:"Continue",101:"Switching protocols",102:"Processing",103:"Early Hints",200:"Ok",201:"Created",202:"Accepted",203:"Non Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Too Long",414:"Request Uri Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"Im A Teapot",419:"Insufficient Space On Resource",420:"Method Failure",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"Http Version Not Supported",507:"Insufficient Storage",511:"Network Authentication Required"};var r=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class o extends Error{constructor(t,e,i){super(e||s[t]||`HTTP Code ${t}`),arguments.length>=3&&i&&Object.assign(this,i),this.name=function(t){const e=4==(t/100|0)||5==(t/100|0)?"error":"";return` ${String(s[t]||`HTTP Code ${t}`).replace(/error$/i,"")} ${e}`.split(" ").reduce(((t,e)=>t+(e?e.charAt(0).toUpperCase()+e.slice(1):"")))}(t),this.statusCode=t}}class a{constructor(t,e={}){this.url=t,this.options=e}_parseQueryParams(t){if(t){if("string"==typeof t)return t;if(t.constructor===Object||void 0===t.constructor)for(let e in t){null==t[e]&&delete t[e]}return`?${new URLSearchParams(t)}`}return""}_fetch(t,e){return r(this,void 0,void 0,(function*(){const i=yield fetch(t,{method:e.method,headers:e.headers,body:e.body});let n;try{n=yield i[e.responseType||"json"]()}catch(e){throw new o(500,`Failed to parse response data. Original status: ${i.status} | ${i.statusText}`,{url:t,error:e})}if(!i.ok)throw new o(i.status,i.statusText,n);return n}))}http(t,e){return r(this,void 0,void 0,(function*(){const i=!!e.body;return e.method=e.method||(i?"POST":"GET"),t.startsWith("/")||(t=`/${t}`),e.query=this._parseQueryParams(e.query),e.headers=e.headers||{},e.headers["Content-Type"]="application/json",e.body&&"string"!=typeof e.body?e.body=JSON.stringify(e.body):e.body=void 0,yield this._fetch(this.url+t+e.query,e)}))}}class c extends n{getCallerName(){const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,e)=>e;const{stack:e}=new Error;Error.prepareStackTrace=t;return(null==e?void 0:e[2])||"unknown context"}requires(t,e){if(!e)throw`ArgumentError[${this.getCallerName()}] ${t} is missing - required property!`}}function u(t){return 1e3*t.exp-Date.now()||3e5}function h(t){return JSON.parse(atob(t.split(".")[1]))}function d(t){return new Promise((e=>setTimeout(e,t)))}class l{static error(...t){console.error("E:EmpationAPI",...t)}static warn(...t){console.warn("W:EmpationAPI",...t)}static info(...t){console.info("I:EmpationAPI",...t)}static debug(...t){console.debug("D:EmpationAPI",...t)}}class f{}class v extends c{constructor(t){if(super(),this.accessToken=null,this._tokenExpires=0,this._rawToken="",!t.workbenchApiUrl)throw"WB Api url is required!";let e;e=t.apiRootPath?t.apiRootPath.startsWith("/")?`${t.workbenchApiUrl}${t.apiRootPath}`:`${t.workbenchApiUrl}/${t.apiRootPath}`:t.workbenchApiUrl,e.endsWith("/")&&(e=e.slice(0,-1)),this.options={apiUrl:e,workbenchApiUrl:t.workbenchApiUrl,anonymousUserId:t.anonymousUserId||"anonymous",apiRootPath:t.apiRootPath||""},this._userId=this.options.anonymousUserId,this.cached={}}from(t,e=!0){if(!t)return this.reset();this._rawToken=t,e=e&&!this.accessToken,this.accessToken=h(t);const i=u(this.accessToken);this._tokenExpires=Date.now()+i/2;const n=this.accessToken.sub;if(!n||n.length>50)throw"Invalid User ID! Must be valid string shorter than 50 characters!";this._userId=n,this.userId!==n&&e&&this.raiseEvent("init")}use(t,e=!0){if(e=e&&!this._userId,this.reset(),!t||t.length>50)throw"Invalid User ID! Must be valid string shorter than 50 characters!";this._userId=t,e&&this.raiseEvent("init_no_token")}reset(){this._rawToken="",this._tokenExpires=0,this.accessToken=null,this._userId=this.options.anonymousUserId,this.defaultScopeKey="",this.scopes.forEach((t=>t.reset())),this.scopes.clear(),this.raiseEvent("reset")}get userId(){return this._userId}get rawToken(){return this._rawToken}rawQuery(t,e){return i=this,n=void 0,r=function*(){if(!this._userId)throw"User must be configured to access Empaia API: either provide a valid 'anonymous' user ID through env variables, or configure the Root API with a valid token.";if(this._tokenExpires>0&&Date.now()>this._tokenExpires){const t={newToken:""};yield this.raiseEventAwaiting("token-refresh",t),this.from(t.newToken)}},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{c(r.next(t))}catch(t){e(t)}}function a(t){try{c(r.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}c((r=r.apply(i,n||[])).next())}));var i,n,s,r}}class p{}class y extends c{}var m=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class g extends f{constructor(t){super(),this.data=null,this._defaultApp=null,this.context=t}list(){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:{apps:null,tissues:null,stains:null,job_modes:null}})}))}query(t){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:t})}))}default(){return m(this,void 0,void 0,(function*(){this.data||(yield this.list());for(let t of this.data.items)if("MAP3"===t.name_short&&"rationai"===t.vendor_name){this._defaultApp=t;break}if(!this._defaultApp)throw"Default APP not present in the infrastructure! Was it imported?";return this._defaultApp}))}}const x=t=>("string"==typeof t&&(t=Number(t)),t),w=(t,e,i,n)=>{const s=new RegExp(e).exec(t);return!(!s||i<1||i>=s.length)&&s[i]===n};var b=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class I{constructor(t){this.customCases=null,this.caseHierarchy=null,this.caseTissues=null,this.caseStains=null,this.identifierSeparator="",this.hierarchySpec=[],this.context=t}use(t,e){this.hierarchySpec=e,this.identifierSeparator=t}getCustomCases(){return b(this,void 0,void 0,(function*(){return this.customCases||(this.customCases=(yield this.context.list()).items.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:this.getCaseHierarchyPath(t)})))),this.customCases}))}getCaseHierarchyPath(t){if(!this.identifierSeparator||!this.hierarchySpec)throw"ArgumentError[CaseExplorer] identifierSeparator or hierarchySpec is missing - required property!";let e=!1;return this.hierarchySpec.reduce(((i,n)=>{const s=this.getCaseValue(n,t),r=e?i:`${i}/${s}`;return"OTHER"===s&&(e=!0),r}),"")}getCase(t){return b(this,void 0,void 0,(function*(){let e;return this.customCases&&(e=this.customCases.find((e=>e.id===t))),e||(e=yield this.context.get(t)),Object.assign(Object.assign({},e),{pathInHierarchy:this.getCaseHierarchyPath(e)})}))}getCaseValue(t,e){switch(t){case"year":return this.getCaseYear(e);case"month":return this.getCaseMonth(e);case"day":return this.getCaseDay(e);case"description":return this.getCaseDescription(e);case"tissues":return this.getCaseTissues(e);case"stains":return this.getCaseStains(e);default:if("id_part_"===t.slice(0,8)&&!isNaN(Number(t.slice(8))))return this.getCaseIdentifierPart(e,Number(t.slice(8)));throw`KeyError[CaseExplorer] "${t}" is not supported!`}}evaluateCaseValue(t,e,i){const n=this.getCaseValue(t,i);switch(t){case"year":return this.evaulateCaseYear(n,e);case"month":return this.evaulateCaseMonth(n,e);case"day":return this.evaulateCaseDay(n,e);case"description":return this.evaluateCaseDescription(n,e);case"tissues":return this.evaluateCaseTissues(n,e);case"stains":return this.evaluateCaseStains(n,e);default:return this.evaulateCaseIdentifierPart(n,e)}}getCaseYear(t){return(e=t.created_at,new Date(1e3*x(e)).getFullYear()).toString();var e}getCaseMonth(t){return(e=t.created_at,new Date(1e3*x(e)).getMonth()).toString();var e}getCaseDay(t){return(e=t.created_at,new Date(1e3*x(e)).getDate()).toString();var e}getCaseIdentifierPart(t,e){if(!this.identifierSeparator)throw"ArgumentError[CaseExplorer] identifierSeparator is missing - required property!";const i=new RegExp(this.identifierSeparator).exec(t.local_id||"");if(!i)return"OTHER";if(e<1||e>=i.length)throw'KeyError[CaseExplorer] invalid key "id_part_<index>", group index is not valid!';return i[e]}getCaseDescription(t){return t.description||""}getCaseTissues(t){return Object.keys(t.tissues)}getCaseStains(t){return Object.keys(t.stains)}evaulateCaseYear(t,e){return t===e}evaulateCaseMonth(t,e){return t===e}evaulateCaseDay(t,e){return t===e}evaulateCaseIdentifierPart(t,e){return t===e}evaluateCaseDescription(t,e){return((t,e)=>{const i=e.split(" ").filter(Boolean).map((t=>`(?=.*\\b${t}\\b)`)),n=new RegExp(i.join(""),"gim");return null!==t.match(n)})(t,e)}evaluateCaseTissues(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}evaluateCaseStains(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}hierarchyLevel(t,e,i,n,s){if(e>=t.length)return{levelName:s,lastLevel:!0,items:i.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:n})))};const r=(o=i=>{const n=this.getCaseValue(t[e],i);return Array.isArray(n)?n[0]||"":n},i.reduce(((t,e)=>{var i;return(t[i=o(e)]||(t[i]=[])).push(e),t}),{}));var o;const a=Object.keys(r).map((i=>"OTHER"===i?this.hierarchyLevel(t,t.length,r[i],`${n}/${i}`,i):this.hierarchyLevel(t,e+1,r[i],`${n}/${i}`,i)));return{levelName:s,lastLevel:!1,items:a}}hierarchy(){return b(this,void 0,void 0,(function*(){if(!this.caseHierarchy){const t=yield this.getCustomCases();this.caseHierarchy=this.hierarchyLevel(this.hierarchySpec,0,t,"")}return this.caseHierarchy}))}search(t){return b(this,void 0,void 0,(function*(){let e=yield this.getCustomCases();return t.forEach((({key:t,value:i})=>e=e.filter((e=>this.evaluateCaseValue(t,i,e))))),e}))}tissues(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseTissues){const e=yield this.getCustomCases(),i=new Set;e.forEach((e=>Object.entries(e.tissues).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.add(t))))),this.caseTissues=[...i]}return this.caseTissues}))}stains(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseStains){const e=yield this.getCustomCases(),i=new Set;e.forEach((e=>Object.entries(e.stains).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.add(t))))),this.caseStains=[...i]}return this.caseStains}))}}var S=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class T{constructor(t){this.lastCaseId=null,this.data=null,this.slidesData=null,this.masksData=null,this.maskIdentifierSeparator="",this.maskIdentifierValue="",this.context=t}use(t,e){this.maskIdentifierSeparator=t,this.maskIdentifierValue=e}getAllSlides(t){return S(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.data||(this.data=(yield this.context.slides(t)).items),this.data}))}slides(t){return S(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.slidesData||(this.slidesData=(yield this.getAllSlides(t)).filter((t=>!w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.slidesData}))}masks(t){return S(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.masksData||(this.masksData=(yield this.getAllSlides(t)).filter((t=>w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.masksData}))}}var P=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class C extends f{constructor(t){super(),this.data=null,this.context=t,this.caseExplorer=new I(this),this.wsiExplorer=new T(this)}list(){return P(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/cases")),this.data}))}get(t){return P(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}`)}))}slides(t){return P(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}/slides`)}))}}var E=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class _ extends f{constructor(t){super(),this.data=null,this.context=t}create(t,e){return E(this,void 0,void 0,(function*(){const i=this.context;return i.requires("caseId",t),i.rawQuery("/examinations",{method:"PUT",body:{case_id:t,app_id:e}})}))}query(t,e,i){return E(this,void 0,void 0,(function*(){return this.context.rawQuery("/examinations/query",{method:"PUT",body:t,query:{skip:e,limit:i}})}))}get(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}`)}))}scope(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}/scope`,{method:"PUT"})}))}}var k=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class A extends p{constructor(t){super(),this.data=null,this.context=t}getRaw(){return k(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/app-ui-storage/user")),this.data}))}flush(){return k(this,void 0,void 0,(function*(){return this.data?yield this.context.rawQuery("/app-ui-storage/user",{method:"PUT",body:this.data}):null}))}get(t){return k(this,void 0,void 0,(function*(){const e=yield this.getRaw();return"string"==typeof e.content[t]?JSON.parse(e.content[t]):e.content[t]}))}set(t,e,i){return k(this,void 0,void 0,(function*(){const n=JSON.stringify(e),s=yield this.getRaw();s.content[t]=n,this.data=s,i&&this.flush()}))}erase(){return k(this,void 0,void 0,(function*(){this.data={content:{}},this.flush()}))}}var O=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class $ extends p{constructor(t){super(),this.context=t}upload(t,e={}){return O(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}create(t,e={}){return O(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}delete(t){return O(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/annotations/${t}`,{method:"DELETE"})}))}update(t,e,i={}){return O(this,void 0,void 0,(function*(){return yield this.delete(t),!i.externalIds&&e.id&&(i.externalIds=!0),yield this.create(e,i)}))}}var R=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class j extends p{constructor(t){super(),this.data=null,this.context=t}get(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}`)}))}create(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/collections",{method:"POST",body:t})}))}delete(t){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}`,{method:"DELETE"})}))}queryItems(t,e){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}/items/query`,{method:"PUT",body:e})}))}createItems(t,e){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items`,{method:"POST",body:Object.assign({},e)})}))}deleteItem(t,e){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items/${e}`,{method:"DELETE"})}))}}var U=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class D extends p{constructor(t){super(),this.data=null,this.context=t}getJobs(){return U(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/jobs")).items}))}get(t){return U(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/jobs/${t}`)}))}}var q=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class N extends y{constructor(t){super(),this.scopeContext=null,this._defaultExaminationId="",this._tokenRefetchInterval=null,this.activeExaminationId="",this.activeCaseId="",this.activeAppId="",this.context=t,this.raw=new a(this.context.options.apiUrl+N.apiPath),this.storage=new A(this),this.annotations=new $(this),this.collections=new j(this),this.jobs=new D(this)}use(t,e=void 0){return q(this,void 0,void 0,(function*(){this.requires("root::userId",this.context.userId);const i=e=>q(this,void 0,void 0,(function*(){let i=yield this.context.examinations.query({apps:[e],creators:[this.context.userId]});if(i.item_count>0){let t=i.items.find((t=>"OPEN"===t.state));if(t)return t}return yield this.context.examinations.create(t,e)}));let n;if(e?n=yield i(e):this._defaultExaminationId&&(n=yield this.context.examinations.get(this._defaultExaminationId)),!n){let t=yield this.context.apps.default();n=yield i(t.app_id),this._defaultExaminationId=n.id}yield this.from(n)}))}get scopeToken(){var t;return null===(t=this.scopeContext)||void 0===t?void 0:t.access_token}from(t){return q(this,void 0,void 0,(function*(){this.reset(),this.scopeContext=yield this.context.examinations.scope(t.id),this.activeCaseId=t.case_id,this.activeAppId=t.app_id,this.activeExaminationId=t.id;const e=u(h(this.scopeContext.access_token));this._tokenRefetchInterval=setInterval((()=>q(this,void 0,void 0,(function*(){this.scopeContext=yield this.context.examinations.scope(t.id)}))),e),this.raiseEvent("init")}))}reset(){this.activeExaminationId="",this.scopeContext=null,this._tokenRefetchInterval&&(clearInterval(this._tokenRefetchInterval),this._tokenRefetchInterval=null,this.raiseEvent("reset"))}rawQuery(t,e){var i,n;return q(this,void 0,void 0,(function*(){this.requires("this.scopeContext",this.scopeContext),(e=e||{}).headers=e.headers||{},e.headers.Authorization=`Bearer ${null===(i=this.scopeContext)||void 0===i?void 0:i.access_token}`,t&&!t.startsWith("/")&&(t=`/${t}`);try{return yield this.raw.http(`/${null===(n=this.scopeContext)||void 0===n?void 0:n.scope_id}${t}`,e)}catch(i){if(401===i.statusCode)return this.scopeContext=yield this.context.examinations.scope(this.activeExaminationId),yield this.raw.http(`/${this.scopeContext.scope_id}${t}`,e);throw i}}))}}N.apiPath="/v3/scopes";const M=N;var Q,J,H,V=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class L extends f{constructor(t){super(),this.data=null,this.context=t}slideInfo(t){return V(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/info`)}))}slideThumbnail(t,e,i,n){return V(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/thumbnail/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}slideLabel(t,e,i,n){return V(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/label/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}loadTile(t,e,i,n,s){return V(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/tile/level/${e}/tile/${i}/${n}`,{query:{image_format:s},responseType:"blob"})}))}}!function(t){t.USER="user",t.SCOPE="scope",t.JOB="job"}(Q||(Q={})),function(t){t.ANNOTATION="annotation",t.COLLECTION="collection",t.CLASS="class",t.PRIMITIVE="primitive",t.WSI="wsi",t.CASE="case",t.USER="user",t.SCOPE="scope",t.JOB="job"}(J||(J={})),function(t){t.Background="background",t.Params="params",t.Shader="shader",t.Visualization="visualization"}(H||(H={}));var F=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class z{constructor(t){this.data=null,this.defaultSlideMetadata={visualization:{}},this.defaultMaskMetadata={},this.context=t}getWsiMetadataItem(t,e=!0){return F(this,void 0,void 0,(function*(){let i=(yield this.context.query({references:[t]})).find((t=>t.data_type===(e?"slide":"mask")+"_metadata"));return i||(i=yield this.createWsiMetadataItem(t,e?this.defaultSlideMetadata:this.defaultMaskMetadata)),i}))}createWsiMetadataItem(t,e,i=!0){return F(this,void 0,void 0,(function*(){return yield this.context.createValue(e,`Metadata of ${i?"slide":"mask"} ${t}`,void 0,t,J.WSI,(i?"slide":"mask")+"_metadata")}))}getSlideMetadata(t){return F(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t)).value)}))}updateSlideMetadata(t,e){return F(this,void 0,void 0,(function*(){const i=yield this.getWsiMetadataItem(t);try{const t=yield this.context.update(i.id,Object.assign(Object.assign({},i),{value:JSON.stringify(e)}));return JSON.parse(t.value)}catch(t){return!1}}))}getShadersConfig(t){return F(this,void 0,void 0,(function*(){const e={};for(let i=0;i<t.length;i++){const n=yield this.context.visTemplates.getTemplate(H.Shader,t[i].shaderTemplate);e[t[i].id]=Object.assign(Object.assign({},n),{name:t[i].name||t[i].id,dataReferences:t[i].dataRefs})}return e}))}getVisualizations(t){var e;return F(this,void 0,void 0,(function*(){const i=(yield this.getSlideMetadata(t)).visualization;return{params:i.paramsTemplate&&(yield this.context.visTemplates.getTemplate(H.Params,i.paramsTemplate))||void 0,data:i.data,background:Object.assign(Object.assign({},i.background?yield this.context.visTemplates.getTemplate(H.Background,null===(e=i.background)||void 0===e?void 0:e.template):{}),{data:i.background&&i.background.dataRef}),visualizations:i.visualizations&&(yield Promise.all(i.visualizations.map((t=>F(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield this.context.visTemplates.getTemplate(H.Visualization,t.visTemplate)),{name:t.name,shaders:yield this.getShadersConfig(t.shaders)})}))))))}}))}getMaskMetadata(t){return F(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t,!1)).value)}))}}var W=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const B="vis_templates";class K{constructor(t){this.data=null,this.context=t}fetchTemplateItem(t,e){return W(this,void 0,void 0,(function*(){return(yield this.context.query({references:[null],data_types:[`${B}_${t}`]})).find((t=>t.name===e))}))}getTemplate(t,e){return W(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&JSON.parse(i.value)}))}createTemplate(t,e,i){return W(this,void 0,void 0,(function*(){return!(yield this.fetchTemplateItem(t,e))&&(yield this.context.createValue(i,`${e}`,void 0,void 0,void 0,`${B}_${t}`))}))}deleteTemplate(t,e){return W(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&(yield this.context.delete(i.id),!0)}))}}var G=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class Y{constructor(t){this.data=null,this.presetDataType="annot_presets",this.context=t}use(t){this.presetDataType=t}getPresetsItem(t=!1){return G(this,void 0,void 0,(function*(){if(!this.data||t){let t=(yield this.context.query({references:[null],data_types:[this.presetDataType]})).find((t=>!0));t||(t=yield this.createPresetsItem({presets:[]})),this.data=t}return this.data}))}createPresetsItem(t){return G(this,void 0,void 0,(function*(){return yield this.context.createValue(t,"Global annotation presets",void 0,void 0,void 0,this.presetDataType)}))}getAnnotPresets(t=!1){return G(this,void 0,void 0,(function*(){const e=yield this.getPresetsItem(t);return{presets:JSON.parse(e.value).presets,lastModifiedAt:e.modified_at}}))}mergePresets(t,e,i){const n=[...t];return e.forEach((t=>n.some((e=>e.id===t.id))||!t.createdAt||t.createdAt<=i?null:n.push(t))),n}updateAnnotPresets(t,e,i=!1){return G(this,void 0,void 0,(function*(){const n=yield this.getPresetsItem(!0),s=JSON.parse(n.value).presets;let r=t,o=!0;if(n.modified_at!==e){if(i)return{presets:s,successfulUpdate:!1,lastModifiedAt:n.modified_at};r=this.mergePresets(s,r,e),o=!1}try{const t=yield this.context.update(n.id,Object.assign(Object.assign({},n),{value:JSON.stringify({presets:r})}));return{presets:JSON.parse(t.value).presets,successfulUpdate:o,lastModifiedAt:t.modified_at}}catch(t){if(409===t.statusCode){const t=yield this.updateAnnotPresets(r,n.modified_at);return Object.assign(Object.assign({},t),{successfulUpdate:o})}throw t}}))}deleteAnnotPresets(){return G(this,void 0,void 0,(function*(){const t=yield this.getPresetsItem(!0);yield this.context.delete(t.id),this.data=null}))}}var X=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class Z{constructor(t){this.data=null,this.configDataType="app_job_config",this.context=t}use(t){this.configDataType=t}fetchJobConfigItem(t){return X(this,void 0,void 0,(function*(){return(yield this.context.query({references:[t],data_types:[this.configDataType]})).find(Boolean)}))}getJobConfig(t){return X(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&JSON.parse(e.value)}))}createJobConfig(t,e){return X(this,void 0,void 0,(function*(){return!(yield this.fetchJobConfigItem(t))&&(yield this.context.createValue(e,"Job config of App",void 0,t,J.JOB,this.configDataType))}))}deleteJobConfig(t){return X(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&(yield this.context.delete(e.id),!0)}))}}var tt=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class et{constructor(t){this.data=null,this.context=t,this.wsiMetadata=new z(this),this.visTemplates=new K(this),this.annotPresets=new Y(this),this.jobConfig=new Z(this)}get(t){return tt(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`)}))}getValue(t){return tt(this,void 0,void 0,(function*(){const e=yield this.get(t);if("string"===e.type)try{return JSON.parse(e.value)}catch(t){return e.value}return e.value}))}query(t){return tt(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/global-storage/query",{method:"PUT",body:t})).items}))}create(t){return tt(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/global-storage",{method:"POST",body:t})}))}createValue(t,e,i,n,s,r){return tt(this,void 0,void 0,(function*(){t=JSON.stringify(t);const o={name:e,description:i,creator_id:this.context.userId,creator_type:Q.USER,reference_id:n,reference_type:s,type:"string",value:t,data_type:r};return yield this.create(o)}))}update(t,e){return tt(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:e})}))}updateValue(t,e){return tt(this,void 0,void 0,(function*(){const i=yield this.context.rawQuery(`/global-storage/${t}`);return i.value=JSON.stringify(e),yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:i})}))}delete(t){return tt(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/global-storage/${t}`,{method:"DELETE"})}))}}class it{constructor(t){this.context=t,this.globalStorage=new et(this)}get userId(){return this.context.userId}rawQuery(t,e={}){return i=this,n=void 0,r=function*(){return this.context.rawQuery(`${it.relativeApiPath}${t}`,e)},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{c(r.next(t))}catch(t){e(t)}}function a(t){try{c(r.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}c((r=r.apply(i,n||[])).next())}));var i,n,s,r}}it.relativeApiPath="/rationai";const nt=it;var st=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class rt extends v{constructor(t){super(t),this.defaultScopeKey="",this.version="v3",this.rootURI=this.options.apiUrl+rt.apiPath,this.raw=new a(this.rootURI),this.rationai=new nt(this),this.apps=new g(this),this.cases=new C(this),this.examinations=new _(this),this.slides=new L(this),this.scopes=new Map}get defaultScope(){return this.scopes.get(this.defaultScopeKey)}newScopeFrom(t){return st(this,void 0,void 0,(function*(){const e=new M(this);return yield e.from(t),this.scopes.set(t.id,e),""===this.defaultScopeKey&&(this.defaultScopeKey=t.id),e}))}newScopeUse(t,e){return st(this,void 0,void 0,(function*(){const i=new M(this);return yield i.use(t,e),this.scopes.set(i.activeExaminationId,i),""===this.defaultScopeKey&&(this.defaultScopeKey=i.activeExaminationId),i}))}getScopeFrom(t){return st(this,void 0,void 0,(function*(){return this.scopes.get(t.id)||(yield this.newScopeFrom(t))}))}getScopeUse(t,e){return st(this,void 0,void 0,(function*(){const i=[...this.scopes.values()].filter((i=>i.activeCaseId===t&&(!e||i.activeAppId===e)));return i.length>0?i[0]:yield this.newScopeUse(t,e)}))}rawQuery(t,e={}){const i=Object.create(null,{rawQuery:{get:()=>super.rawQuery}});return st(this,void 0,void 0,(function*(){return yield i.rawQuery.call(this,t,e),(e=e||{}).headers=e.headers||{},e.headers["User-Id"]=this.userId,this.accessToken&&(e.headers.Authorization=e.headers.Authorization||`Bearer ${this.rawToken}`),this.raw.http(t,e)}))}}rt.apiPath="/v3";const ot=rt;EmpationAPI=e})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN0RSxHLENBRU0sV0FBQXdJLENBQVkzUSxFQUFnQm9GLEcsMENBQzlCLE1BQU13TCxFQUFpQixJQUFJaGMsS0FBS2dJLE9BQU9pVSxVQUFVMU8sUUFBUXJGLEdBQVFBLEVBQUl5SyxlQUFpQnZILEtBQVdvRixHQUFRdEksRUFBSTBLLGNBQWdCcEMsS0FDN0gsT0FBT3dMLEVBQWV4YixPQUFTLEVBQUl3YixFQUFlLFNBQVdoYyxLQUFLNmIsWUFBWXpRLEVBQVFvRixFQUMxRixHLENBRU0sUUFBQW5JLENBQVNyRCxFQUFrQnBCLEVBQW9CLENBQUMsRywwR0FRbEQsYUFQTSxFQUFNeUUsU0FBUSxVQUFDckQsRUFBVXBCLElBQy9CQSxFQUFVQSxHQUFXLENBQUMsR0FDZFcsUUFBVVgsRUFBUVcsU0FBVyxDQUFDLEVBQ3RDWCxFQUFRVyxRQUFRLFdBQWF2RSxLQUFLNEgsT0FDOUI1SCxLQUFLOEcsY0FDTGxELEVBQVFXLFFBQXVCLGNBQUlYLEVBQVFXLFFBQXVCLGVBQUssVUFBVXZFLEtBQUtvSSxZQUVuRnBJLEtBQUs2UyxJQUFJOU4sS0FBS0MsRUFBVXBCLEVBQ25DLEcsRUF0RU8sR0FBQWtQLFFBQVUsTSIsInNvdXJjZXMiOlsid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvZXZlbnRzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3N0YXR1cy1jb2Rlcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy9iYXNlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3Jvb3QudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvc2NvcGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9hcHBzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy9jYXNlLWV4cGxvcmVyLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvd3NpLWV4cGxvcmVyLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3QvY2FzZXMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9leGFtaW5hdGlvbnMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvc3RvcmFnZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9hbm5vdGF0aW9ucy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9jb2xsZWN0aW9ucy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9qb2JzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Njb3BlL3Njb3BlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1kYXRhLWNyZWF0b3ItdHlwZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbS1yZWZlcmVuY2UtdHlwZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL3R5cGVzL3RlbXBsYXRlLXR5cGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9zbGlkZXMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy93c2ktbWV0YWRhdGEudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy92aXN1YWxpemF0aW9uLXRlbXBsYXRlcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL2Fubm90LXByZXNldHMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy9qb2ItY29uZmlnLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3JhdGlvbmFpL3JhdGlvbmFpLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3Qvcm9vdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qKlxyXG4gKiBPcGVuU2VhZHJhZ29uIGluc3BpcmVkIGV2ZW50IHN5c3RlbSBmb3IgcmVkdWN0aW9uIG9mIGRlcGVuZGVuY2llcyBhbmQgdW5pZm9ybSBldmVudCBhcHByb2FjaFxyXG4gKi9cclxuXHJcbmV4cG9ydCB0eXBlIEV2ZW50SGFuZGxlciA9IChldmVudDogYW55KSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV2ZW50U291cmNlIHtcclxuICAgIGV2ZW50czoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhbiBldmVudCBoYW5kbGVyIHRvIGJlIHRyaWdnZXJlZCBvbmx5IG9uY2UgKG9yIGEgZ2l2ZW4gbnVtYmVyIG9mIHRpbWVzKVxyXG4gICAgICogZm9yIGEgZ2l2ZW4gZXZlbnQuIEl0IGlzIG5vdCByZW1vdmFibGUgd2l0aCByZW1vdmVIYW5kbGVyKCkuXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtFdmVudEhhbmRsZXJ9IGhhbmRsZXIgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gZXZlbnRcclxuICAgICAqIGlzIHRyaWdnZXJlZC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlckRhdGE9bnVsbF0gLSBBcmJpdHJhcnkgb2JqZWN0IHRvIGJlIHBhc3NlZCB1bmNoYW5nZWRcclxuICAgICAqIHRvIHRoZSBoYW5kbGVyLlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0aW1lcz0xXSAtIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaGFuZGxlIHRoZSBldmVudFxyXG4gICAgICogYmVmb3JlIHJlbW92aW5nIGl0LlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcmlvcml0eT0wXSAtIEhhbmRsZXIgcHJpb3JpdHkuIEJ5IGRlZmF1bHQsIGFsbCBwcmlvcml0aWVzIGFyZSAwLiBIaWdoZXIgbnVtYmVyID0gcHJpb3JpdHkuXHJcbiAgICAgKi9cclxuICAgIGFkZE9uY2VIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIsIHVzZXJEYXRhOiBvYmplY3QsIHRpbWVzOiBudW1iZXIsIHByaW9yaXR5OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICB0aW1lcyA9IHRpbWVzIHx8IDE7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICBjb25zdCBvbmNlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50OiBvYmplY3QpIHtcclxuICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgaWYgKGNvdW50ID09PSB0aW1lcykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5yZW1vdmVIYW5kbGVyKGV2ZW50TmFtZSwgb25jZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyKGV2ZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYWRkSGFuZGxlcihldmVudE5hbWUsIG9uY2VIYW5kbGVyLCB1c2VyRGF0YSwgcHJpb3JpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtFdmVudEhhbmRsZXJ9IGhhbmRsZXIgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFt1c2VyRGF0YT1udWxsXSAtIEFyYml0cmFyeSBvYmplY3QgdG8gYmUgcGFzc2VkIHVuY2hhbmdlZCB0byB0aGUgaGFuZGxlci5cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJpb3JpdHk9MF0gLSBIYW5kbGVyIHByaW9yaXR5LiBCeSBkZWZhdWx0LCBhbGwgcHJpb3JpdGllcyBhcmUgMC4gSGlnaGVyIG51bWJlciA9IHByaW9yaXR5LlxyXG4gICAgICovXHJcbiAgICBhZGRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIsIHVzZXJEYXRhOiBvYmplY3QgfCBudWxsID0gbnVsbCwgcHJpb3JpdHk6IG51bWJlciA9IDApIHtcclxuICAgICAgICBsZXQgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdO1xyXG4gICAgICAgIGlmICggIWV2ZW50cyApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdID0gZXZlbnRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggaGFuZGxlciAmJiBFdmVudFNvdXJjZS5pc0Z1bmN0aW9uKCBoYW5kbGVyICkgKSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGV2ZW50cy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBldmVudCA9IHsgaGFuZGxlcjogaGFuZGxlciwgdXNlckRhdGE6IHVzZXJEYXRhIHx8IG51bGwsIHByaW9yaXR5OiBwcmlvcml0eSB8fCAwIH07XHJcbiAgICAgICAgICAgIGV2ZW50c1sgaW5kZXggXSA9IGV2ZW50O1xyXG4gICAgICAgICAgICB3aGlsZSAoIGluZGV4ID4gMCAmJiBldmVudHNbIGluZGV4IC0gMSBdLnByaW9yaXR5IDwgZXZlbnRzWyBpbmRleCBdLnByaW9yaXR5ICkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRzWyBpbmRleCBdID0gZXZlbnRzWyBpbmRleCAtIDEgXTtcclxuICAgICAgICAgICAgICAgIGV2ZW50c1sgaW5kZXggLSAxIF0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYSBzcGVjaWZpYyBldmVudCBoYW5kbGVyIGZvciBhIGdpdmVuIGV2ZW50LlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCBmb3Igd2hpY2ggdGhlIGhhbmRsZXIgaXMgdG8gYmUgcmVtb3ZlZC5cclxuICAgICAqIEBwYXJhbSB7RXZlbnRIYW5kbGVyfSBoYW5kbGVyIC0gRnVuY3Rpb24gdG8gYmUgcmVtb3ZlZC5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlSGFuZGxlcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdLFxyXG4gICAgICAgICAgICBoYW5kbGVyczogRXZlbnRIYW5kbGVyW10gPSBbXTtcclxuICAgICAgICBpZiAoICFldmVudHMgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCBldmVudHMgKSApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBldmVudHNbaV0uaGFuZGxlciAhPT0gaGFuZGxlciApIHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVycy5wdXNoKCBldmVudHNbIGkgXSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzWyBldmVudE5hbWUgXSA9IGhhbmRsZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgYW1vdW50IG9mIGhhbmRsZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCB0byBpbnNwZWN0LlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gYW1vdW50IG9mIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBudW1iZXJPZkhhbmRsZXJzKGV2ZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdO1xyXG4gICAgICAgIGlmICggIWV2ZW50cyApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBldmVudHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGFsbCBldmVudCBoYW5kbGVycyBmb3IgYSBnaXZlbiBldmVudCB0eXBlLiBJZiBubyB0eXBlIGlzIGdpdmVuIGFsbFxyXG4gICAgICogZXZlbnQgaGFuZGxlcnMgZm9yIGV2ZXJ5IGV2ZW50IHR5cGUgYXJlIHJlbW92ZWQuXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IGZvciB3aGljaCBhbGwgaGFuZGxlcnMgYXJlIHRvIGJlIHJlbW92ZWQuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUFsbEhhbmRsZXJzKGV2ZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCBldmVudE5hbWUgKXtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdID0gW107XHJcbiAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCBldmVudFR5cGUgaW4gdGhpcy5ldmVudHMgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50c1sgZXZlbnRUeXBlIF0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGZ1bmN0aW9uIHdoaWNoIGl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFsbCBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LCBjYWxsaW5nIHRoZSBoYW5kbGVyIGZvciBlYWNoLlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCB0byBnZXQgaGFuZGxlcnMgZm9yLlxyXG4gICAgICovXHJcbiAgICBnZXRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGV2ZW50cyA9IHRoaXMuZXZlbnRzWyBldmVudE5hbWUgXTtcclxuICAgICAgICBpZiAoICFldmVudHMgfHwgIWV2ZW50cy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudHMgPSBldmVudHMubGVuZ3RoID09PSAxID9cclxuICAgICAgICAgICAgWyBldmVudHNbIDAgXSBdIDpcclxuICAgICAgICAgICAgQXJyYXkuYXBwbHkoIG51bGwsIGV2ZW50cyApO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoIHNvdXJjZTogYW55LCBhcmdzOiBhbnkgKSB7XHJcbiAgICAgICAgICAgIGxldCBpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIGlmICggZXZlbnRzWyBpIF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5ldmVudFNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnVzZXJEYXRhID0gZXZlbnRzWyBpIF0udXNlckRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzWyBpIF0uaGFuZGxlciggYXJncyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGZ1bmN0aW9uIHdoaWNoIGl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFsbCBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LFxyXG4gICAgICogY2FsbGluZyB0aGUgaGFuZGxlciBmb3IgZWFjaCBhbmQgYXdhaXRpbmcgYXN5bmMgb25lcy5cclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAtIE5hbWUgb2YgZXZlbnQgdG8gZ2V0IGhhbmRsZXJzIGZvci5cclxuICAgICAqL1xyXG4gICAgZ2V0QXdhaXRpbmdIYW5kbGVyKCBldmVudE5hbWUpIHtcclxuICAgICAgICBsZXQgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdO1xyXG4gICAgICAgIGlmICggIWV2ZW50cyB8fCAhZXZlbnRzLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5sZW5ndGggPT09IDEgP1xyXG4gICAgICAgICAgICBbIGV2ZW50c1sgMCBdIF0gOlxyXG4gICAgICAgICAgICBBcnJheS5hcHBseSggbnVsbCwgZXZlbnRzICk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoIHNvdXJjZSwgYXJncyApIHtcclxuICAgICAgICAgICAgLy8gV2UgcmV0dXJuIGEgcHJvbWlzZSB0aGF0IGdldHMgcmVzb2x2ZWQgYWZ0ZXIgYWxsIHRoZSBldmVudHMgZmluaXNoLlxyXG4gICAgICAgICAgICAvLyBSZXR1cm5pbmcgbG9vcCByZXN1bHQgaXMgbm90IGNvcnJlY3QsIGxvb3AgcHJvbWlzZXMgY2hhaW4gZHluYW1pY2FsbHlcclxuICAgICAgICAgICAgLy8gYW5kIG91dGVyIGNvZGUgY291bGQgcHJvY2VzcyBmaW5pc2hpbmcgbG9naWNzIGluIHRoZSBtaWRkbGUgb2YgZXZlbnQgbG9vcC5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvb3AoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGluZGV4ID49IGxlbmd0aCB8fCAhZXZlbnRzWyBpbmRleCBdICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFwiUmVzb2x2ZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5ldmVudFNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnVzZXJEYXRhID0gZXZlbnRzWyBpbmRleCBdLnVzZXJEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBldmVudHNbIGluZGV4IF0uaGFuZGxlciggYXJncyApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9ICghcmVzdWx0IHx8IEV2ZW50U291cmNlLnR5cGUocmVzdWx0KSAhPT0gXCJwcm9taXNlXCIpID8gUHJvbWlzZS5yZXNvbHZlKCkgOiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKCgpID0+IGxvb3AoaW5kZXggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsb29wKDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJpZ2dlciBhbiBldmVudCwgb3B0aW9uYWxseSBwYXNzaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24uXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50QXJncyAtIEV2ZW50LXNwZWNpZmljIGRhdGEuXHJcbiAgICAgKi9cclxuICAgIHJhaXNlRXZlbnQoIGV2ZW50TmFtZTogc3RyaW5nLCBldmVudEFyZ3M/OiBhbnkgKSB7XHJcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZ2V0SGFuZGxlciggZXZlbnROYW1lICk7XHJcbiAgICAgICAgaWYgKCBoYW5kbGVyICkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlciggdGhpcywgZXZlbnRBcmdzIHx8IHt9ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VyIGFuIGV2ZW50LCBvcHRpb25hbGx5IHBhc3NpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cclxuICAgICAqIFRoaXMgZXZlbnRzIGF3YWl0cyBldmVyeSBhc3luY2hyb25vdXMgb3IgcHJvbWlzZS1yZXR1cm5pbmcgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCB0byByZWdpc3Rlci5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudEFyZ3MgLSBFdmVudC1zcGVjaWZpYyBkYXRhLlxyXG4gICAgICogQHJldHVybiB7UHJvbWlzZXx1bmRlZmluZWR9IC0gUHJvbWlzZSByZXNvbHZlZCB1cG9uIHRoZSBldmVudCBjb21wbGV0aW9uLlxyXG4gICAgICovXHJcbiAgICByYWlzZUV2ZW50QXdhaXRpbmcoIGV2ZW50TmFtZSwgZXZlbnRBcmdzICkge1xyXG4gICAgICAgIC8vdW5jb21tZW50IGlmIHlvdSB3YW50IHRvIGdldCBhIGxvZyBvZiBhbGwgZXZlbnRzXHJcbiAgICAgICAgLy8kLmNvbnNvbGUubG9nKCBcIkF3YWl0aW5nIGV2ZW50IGZpcmVkOlwiLCBldmVudE5hbWUgKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXdhaXRpbmdIYW5kbGVyID0gdGhpcy5nZXRBd2FpdGluZ0hhbmRsZXIoZXZlbnROYW1lKTtcclxuICAgICAgICBpZiAoYXdhaXRpbmdIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdGluZ0hhbmRsZXIodGhpcywgZXZlbnRBcmdzIHx8IHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShcIk5vIGhhbmRsZXIgZm9yIHRoaXMgZXZlbnQgcmVnaXN0ZXJlZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNsYXNzMnR5cGUgPSB7XHJcbiAgICAgICAgJ1tvYmplY3QgQm9vbGVhbl0nOiAgICAgICAnYm9vbGVhbicsXHJcbiAgICAgICAgJ1tvYmplY3QgTnVtYmVyXSc6ICAgICAgICAnbnVtYmVyJyxcclxuICAgICAgICAnW29iamVjdCBTdHJpbmddJzogICAgICAgICdzdHJpbmcnLFxyXG4gICAgICAgICdbb2JqZWN0IEZ1bmN0aW9uXSc6ICAgICAgJ2Z1bmN0aW9uJyxcclxuICAgICAgICAnW29iamVjdCBBc3luY0Z1bmN0aW9uXSc6ICdmdW5jdGlvbicsXHJcbiAgICAgICAgJ1tvYmplY3QgUHJvbWlzZV0nOiAgICAgICAncHJvbWlzZScsXHJcbiAgICAgICAgJ1tvYmplY3QgQXJyYXldJzogICAgICAgICAnYXJyYXknLFxyXG4gICAgICAgICdbb2JqZWN0IERhdGVdJzogICAgICAgICAgJ2RhdGUnLFxyXG4gICAgICAgICdbb2JqZWN0IFJlZ0V4cF0nOiAgICAgICAgJ3JlZ2V4cCcsXHJcbiAgICAgICAgJ1tvYmplY3QgT2JqZWN0XSc6ICAgICAgICAnb2JqZWN0J1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRha2VuIGZyb20galF1ZXJ5IDEuNi4xXHJcbiAgICAgKiBAZnVuY3Rpb24gaXNGdW5jdGlvblxyXG4gICAgICogQG1lbWJlcm9mIE9wZW5TZWFkcmFnb25cclxuICAgICAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cuanF1ZXJ5LmNvbS8galF1ZXJ5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaXNGdW5jdGlvbiggb2JqOiBvYmplY3QgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZShvYmopID09PSBcImZ1bmN0aW9uXCI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGFrZW4gZnJvbSBqUXVlcnkgMS42LjFcclxuICAgICAqIEBmdW5jdGlvbiB0eXBlXHJcbiAgICAgKiBAbWVtYmVyb2YgT3BlblNlYWRyYWdvblxyXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cDovL3d3dy5qcXVlcnkuY29tLyBqUXVlcnl9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0eXBlKCBvYmo6IG9iamVjdCApIHtcclxuICAgICAgICByZXR1cm4gKCBvYmogPT09IG51bGwgKSB8fCAoIG9iaiA9PT0gdW5kZWZpbmVkICkgP1xyXG4gICAgICAgICAgICBTdHJpbmcoIG9iaiApIDpcclxuICAgICAgICAgICAgdGhpcy5jbGFzczJ0eXBlWyBvYmoudG9TdHJpbmcoKSBhcyBrZXlvZiB0eXBlb2YgdGhpcy5jbGFzczJ0eXBlXSB8fCAodHlwZW9mKG9iaikgPT09ICdmdW5jdGlvbicgPyBcImZ1bmN0aW9uXCIgOiBcIm9iamVjdFwiKVxyXG4gICAgfTtcclxufVxyXG4iLCIvLyBTb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9wcmV0dHltdWNoYnJ5Y2UvaHR0cC1zdGF0dXMtY29kZXMvYmxvYi9tYXN0ZXIvc3JjL3N0YXR1cy1jb2Rlcy50c1xyXG5leHBvcnQgY29uc3QgU1RBVFVTX0NPREVTID0ge1xyXG4gICAgMTAwOiAnQ29udGludWUnLFxyXG4gICAgMTAxOiAnU3dpdGNoaW5nIHByb3RvY29scycsXHJcbiAgICAxMDI6ICdQcm9jZXNzaW5nJyxcclxuICAgIDEwMzogJ0Vhcmx5IEhpbnRzJyxcclxuICAgIDIwMDogJ09rJyxcclxuICAgIDIwMTogJ0NyZWF0ZWQnLFxyXG4gICAgMjAyOiAnQWNjZXB0ZWQnLFxyXG4gICAgMjAzOiAnTm9uIEF1dGhvcml0YXRpdmUgSW5mb3JtYXRpb24nLFxyXG4gICAgMjA0OiAnTm8gQ29udGVudCcsXHJcbiAgICAyMDU6ICdSZXNldCBDb250ZW50JyxcclxuICAgIDIwNjogJ1BhcnRpYWwgQ29udGVudCcsXHJcbiAgICAyMDc6ICdNdWx0aSBTdGF0dXMnLFxyXG4gICAgMzAwOiAnTXVsdGlwbGUgQ2hvaWNlcycsXHJcbiAgICAzMDE6ICdNb3ZlZCBQZXJtYW5lbnRseScsXHJcbiAgICAzMDI6ICdNb3ZlZCBUZW1wb3JhcmlseScsXHJcbiAgICAzMDM6ICdTZWUgT3RoZXInLFxyXG4gICAgMzA0OiAnTm90IE1vZGlmaWVkJyxcclxuICAgIDMwNTogJ1VzZSBQcm94eScsXHJcbiAgICAzMDc6ICdUZW1wb3JhcnkgUmVkaXJlY3QnLFxyXG4gICAgMzA4OiAnUGVybWFuZW50IFJlZGlyZWN0JyxcclxuICAgIDQwMDogJ0JhZCBSZXF1ZXN0JyxcclxuICAgIDQwMTogJ1VuYXV0aG9yaXplZCcsXHJcbiAgICA0MDI6ICdQYXltZW50IFJlcXVpcmVkJyxcclxuICAgIDQwMzogJ0ZvcmJpZGRlbicsXHJcbiAgICA0MDQ6ICdOb3QgRm91bmQnLFxyXG4gICAgNDA1OiAnTWV0aG9kIE5vdCBBbGxvd2VkJyxcclxuICAgIDQwNjogJ05vdCBBY2NlcHRhYmxlJyxcclxuICAgIDQwNzogJ1Byb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkJyxcclxuICAgIDQwODogJ1JlcXVlc3QgVGltZW91dCcsXHJcbiAgICA0MDk6ICdDb25mbGljdCcsXHJcbiAgICA0MTA6ICdHb25lJyxcclxuICAgIDQxMTogJ0xlbmd0aCBSZXF1aXJlZCcsXHJcbiAgICA0MTI6ICdQcmVjb25kaXRpb24gRmFpbGVkJyxcclxuICAgIDQxMzogJ1JlcXVlc3QgVG9vIExvbmcnLFxyXG4gICAgNDE0OiAnUmVxdWVzdCBVcmkgVG9vIExvbmcnLFxyXG4gICAgNDE1OiAnVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZScsXHJcbiAgICA0MTY6ICdSZXF1ZXN0ZWQgUmFuZ2UgTm90IFNhdGlzZmlhYmxlJyxcclxuICAgIDQxNzogJ0V4cGVjdGF0aW9uIEZhaWxlZCcsXHJcbiAgICAvKipcclxuICAgICAqIE9mZmljaWFsIERvY3VtZW50YXRpb24gQCBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMjMyNCNzZWN0aW9uLTIuMy4yXHJcbiAgICAgKlxyXG4gICAgICogQW55IGF0dGVtcHQgdG8gYnJldyBjb2ZmZWUgd2l0aCBhIHRlYXBvdCBzaG91bGQgcmVzdWx0IGluIHRoZSBlcnJvciBjb2RlIFwiNDE4IEknbSBhIHRlYXBvdFwiLiBUaGUgcmVzdWx0aW5nIGVudGl0eSBib2R5IE1heSBiZSBzaG9ydCBhbmQgc3RvdXQuXHJcbiAgICAgKi9cclxuICAgIDQxODogJ0ltIEEgVGVhcG90JyxcclxuICAgIDQxOTogJ0luc3VmZmljaWVudCBTcGFjZSBPbiBSZXNvdXJjZScsXHJcbiAgICA0MjA6ICdNZXRob2QgRmFpbHVyZScsXHJcbiAgICA0MjE6ICdNaXNkaXJlY3RlZCBSZXF1ZXN0JyxcclxuICAgIDQyMjogJ1VucHJvY2Vzc2FibGUgRW50aXR5JyxcclxuICAgIDQyMzogJ0xvY2tlZCcsXHJcbiAgICA0MjQ6ICdGYWlsZWQgRGVwZW5kZW5jeScsXHJcbiAgICA0MjY6ICdVcGdyYWRlIFJlcXVpcmVkJyxcclxuICAgIDQyODogJ1ByZWNvbmRpdGlvbiBSZXF1aXJlZCcsXHJcbiAgICA0Mjk6ICdUb28gTWFueSBSZXF1ZXN0cycsXHJcbiAgICA0MzE6ICdSZXF1ZXN0IEhlYWRlciBGaWVsZHMgVG9vIExhcmdlJyxcclxuICAgIDQ1MTogJ1VuYXZhaWxhYmxlIEZvciBMZWdhbCBSZWFzb25zJyxcclxuICAgIDUwMDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXHJcbiAgICA1MDE6ICdOb3QgSW1wbGVtZW50ZWQnLFxyXG4gICAgNTAyOiAnQmFkIEdhdGV3YXknLFxyXG4gICAgNTAzOiAnU2VydmljZSBVbmF2YWlsYWJsZScsXHJcbiAgICA1MDQ6ICdHYXRld2F5IFRpbWVvdXQnLFxyXG4gICAgNTA1OiAnSHR0cCBWZXJzaW9uIE5vdCBTdXBwb3J0ZWQnLFxyXG4gICAgNTA3OiAnSW5zdWZmaWNpZW50IFN0b3JhZ2UnLFxyXG4gICAgNTExOiAnTmV0d29yayBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZCdcclxufTtcclxuIiwiaW1wb3J0IHtFdmVudFNvdXJjZX0gZnJvbSBcIi4vZXZlbnRzXCI7XHJcbmltcG9ydCB7IFNUQVRVU19DT0RFUyB9IGZyb20gJy4vc3RhdHVzLWNvZGVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW1wYXRpb25BUElPcHRpb25zIHtcclxuICAgIGFub255bW91c1VzZXJJZD86IHN0cmluZztcclxuICAgIHdvcmtiZW5jaEFwaVVybDogc3RyaW5nO1xyXG4gICAgYXBpUm9vdFBhdGg/OiBzdHJpbmc7XHJcbn1cclxuXHJcbnR5cGUgUmVzcG9uc2VUeXBlID0gXCJqc29uXCIgfCBcImJsb2JcIiB8IFwidGV4dFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSYXdPcHRpb25zIHtcclxuICAgIGJvZHk/OiBvYmplY3QgfCBzdHJpbmc7XHJcbiAgICBxdWVyeT86IGFueTtcclxuICAgIG1ldGhvZD86IHN0cmluZztcclxuICAgIGhlYWRlcnM/OiB7W2tleTogc3RyaW5nXTogc3RyaW5nfTtcclxuICAgIHJlc3BvbnNlVHlwZT86IFJlc3BvbnNlVHlwZTtcclxufVxyXG5cclxuLy9odHRwczovL2dpc3QuZ2l0aHViLmNvbS9Ub29UYWxsTmF0ZS80ZmQ2NDFmODIwZTEzMjU2OTU0ODdkZmQ4ODNlNTI4NVxyXG5mdW5jdGlvbiBodHRwRXJyb3JUb05hbWUoY29kZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHN1ZmZpeCA9IChjb2RlIC8gMTAwIHwgMCkgPT09IDQgfHwgKGNvZGUgLyAxMDAgfCAwKSA9PT0gNSA/ICdlcnJvcicgOiAnJztcclxuICAgIGxldCBuYW1lID0gYCAke1N0cmluZyhTVEFUVVNfQ09ERVNbY29kZSBhcyBrZXlvZiB0eXBlb2YgU1RBVFVTX0NPREVTXSB8fCBgSFRUUCBDb2RlICR7Y29kZX1gKS5yZXBsYWNlKC9lcnJvciQvaSwgJycpfSAke3N1ZmZpeH1gO1xyXG4gICAgcmV0dXJuIG5hbWUuc3BsaXQoXCIgXCIpLnJlZHVjZSgoYWNjLCBjKSA9PiBhY2NcclxuICAgICAgICArIChjID8gKGMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjLnNsaWNlKDEpKSA6IFwiXCIpKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhUVFBFcnJvciBleHRlbmRzIEVycm9yIHtcclxuXHJcbiAgICBzdGF0dXNDb2RlOiBudW1iZXI7XHJcbiAgICBba2V5OiBzdHJpbmddOiBhbnlcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY29kZTogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcsIGV4dHJhcz86IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8IFNUQVRVU19DT0RFU1tjb2RlIGFzIGtleW9mIHR5cGVvZiBTVEFUVVNfQ09ERVNdIHx8IGBIVFRQIENvZGUgJHtjb2RlfWApO1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMgJiYgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIC8vIG5vaW5zcGVjdGlvbiBUeXBlU2NyaXB0VmFsaWRhdGVUeXBlc1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGV4dHJhcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubmFtZSA9IGh0dHBFcnJvclRvTmFtZShjb2RlKTtcclxuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBjb2RlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJhd0FwaU9wdGlvbnMge31cclxuXHJcbmV4cG9ydCBjbGFzcyBSYXdBUEkge1xyXG4gICAgcHVibGljIHVybDogc3RyaW5nO1xyXG4gICAgcHVibGljIG9wdGlvbnM6IFJhd09wdGlvbnM7XHJcbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgb3B0aW9uczogUmF3QXBpT3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9wYXJzZVF1ZXJ5UGFyYW1zKHBhcmFtczogc3RyaW5nIHwge1trZXk6IHN0cmluZ106IHN0cmluZ30pIHtcclxuICAgICAgICBpZiAocGFyYW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiKSByZXR1cm4gcGFyYW1zO1xyXG5cclxuICAgICAgICAgICAgLy9jbGVhbnVwIHBsYWluIG9iamVjdHNcclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0IHx8IHBhcmFtcy5jb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrIGluIHBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSBwYXJhbXNba107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPT09IG51bGwgfHwgdiA9PT0gdW5kZWZpbmVkKSBkZWxldGUgcGFyYW1zW2tdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYD8ke25ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKX1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBfZmV0Y2godXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogb3B0aW9ucy5tZXRob2QsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogb3B0aW9ucy5ib2R5XHJcbiAgICAgICAgfSBhcyBSZXF1ZXN0SW5pdCk7XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2Vbb3B0aW9ucy5yZXNwb25zZVR5cGUgfHwgXCJqc29uXCJdKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSFRUUEVycm9yKDUwMCxcclxuICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgZGF0YS4gT3JpZ2luYWwgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c30gfCAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBIVFRQRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0LCByZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGh0dHAoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgaGFzQm9keSA9ICEhb3B0aW9ucy5ib2R5O1xyXG4gICAgICAgIG9wdGlvbnMubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgKGhhc0JvZHkgPyBcIlBPU1RcIiA6IFwiR0VUXCIpO1xyXG4gICAgICAgIGlmICghZW5kcG9pbnQuc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYC8ke2VuZHBvaW50fWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9wdGlvbnMucXVlcnkgPSB0aGlzLl9wYXJzZVF1ZXJ5UGFyYW1zKG9wdGlvbnMucXVlcnkpO1xyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcclxuICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYm9keSAmJiB0eXBlb2Ygb3B0aW9ucy5ib2R5ICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSk7XHJcbiAgICAgICAgfSBlbHNlIG9wdGlvbnMuYm9keSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ZldGNoKHRoaXMudXJsICsgZW5kcG9pbnQgKyBvcHRpb25zLnF1ZXJ5LCBvcHRpb25zKTtcclxuICAgIH1cclxufVxyXG5cclxuLy90b2RvIGNvbnNpZGVyIGltcGxlbWVudGluZyAnb2JzZXJ2ZScgbWV0aG9kIHRoYXQgcmVnaXN0ZXJzIGFuZCB3YXRjaGVzIGNlcnRhaW4gcHJvcGVydHkgbGlzdC4uXHJcbmV4cG9ydCBjbGFzcyBBYnN0cmFjdEFQSSBleHRlbmRzIEV2ZW50U291cmNlIHtcclxuICAgIC8vdG9kbyB0cnkgZmlndXJpbmcgb3V0IGhvdyB0byBwcmludCB0aGUgY2xhc3MgbmFtZSB0b29cclxuICAgIC8vaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjgwMzg5L2hvdy1kby15b3UtZmluZC1vdXQtdGhlLWNhbGxlci1mdW5jdGlvbi1pbi1qYXZhc2NyaXB0XHJcbiAgICBwcml2YXRlIGdldENhbGxlck5hbWUoKSB7XHJcbiAgICAgICAgLy8gR2V0IHN0YWNrIGFycmF5XHJcbiAgICAgICAgY29uc3Qgb3JpZyA9IEVycm9yLnByZXBhcmVTdGFja1RyYWNlO1xyXG4gICAgICAgIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gKGVycm9yLCBzdGFjaykgPT4gc3RhY2s7XHJcbiAgICAgICAgY29uc3QgeyBzdGFjayB9ID0gbmV3IEVycm9yKCk7XHJcbiAgICAgICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBvcmlnO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsZXIgPSBzdGFjaz8uWzJdO1xyXG4gICAgICAgIHJldHVybiBjYWxsZXIgPyBjYWxsZXIgOiAndW5rbm93biBjb250ZXh0JztcclxuICAgIH1cclxuXHJcbiAgICByZXF1aXJlcyhuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRocm93IGBBcmd1bWVudEVycm9yWyR7dGhpcy5nZXRDYWxsZXJOYW1lKCl9XSAke25hbWV9IGlzIG1pc3NpbmcgLSByZXF1aXJlZCBwcm9wZXJ0eSFgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG5leHBvcnQgaW50ZXJmYWNlIEp3dFRva2VuQmFzZSB7XHJcbiAgICBzdWI6IHN0cmluZyxcclxuICAgIGV4cDogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEp3dFRva2VuIGV4dGVuZHMgSnd0VG9rZW5CYXNlIHtcclxuICAgIGlhdDogbnVtYmVyO1xyXG4gICAganRpOiBzdHJpbmc7XHJcbiAgICBpc3M6IHN0cmluZztcclxuICAgIGF1ZDogc3RyaW5nO1xyXG4gICAgdHlwOiBzdHJpbmc7XHJcbiAgICBhenA6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEp3dFRva2VuRXhwaXJlc1RpbWVvdXQodG9rZW46IEp3dFRva2VuQmFzZSkge1xyXG4gICAgLy90aW1lb3V0IE9SIDMwMCBzZWNzXHJcbiAgICByZXR1cm4gdG9rZW4uZXhwKjFlMyAtIERhdGUubm93KCkgfHwgMzAwZTM7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NvcGVUb2tlbiBleHRlbmRzIEp3dFRva2VuQmFzZSB7XHJcbiAgICB0b2tlbl9pZDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUp3dFRva2VuKHRva2VuOiBzdHJpbmcpOiBKd3RUb2tlbkJhc2Uge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoYXRvYih0b2tlbi5zcGxpdCgnLicpWzFdKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbGVlcChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExvZ2dlciB7XHJcbiAgICBzdGF0aWMgZXJyb3IoLi4uYXJnczogYW55KTp2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRTpFbXBhdGlvbkFQSVwiLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyB3YXJuKC4uLmFyZ3M6IGFueSk6dm9pZCB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFwiVzpFbXBhdGlvbkFQSVwiLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBpbmZvKC4uLmFyZ3M6IGFueSk6dm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKFwiSTpFbXBhdGlvbkFQSVwiLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBkZWJ1ZyguLi5hcmdzOiBhbnkpOnZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJEOkVtcGF0aW9uQVBJXCIsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7QWJzdHJhY3RBUEksIEVtcGF0aW9uQVBJT3B0aW9ucywgUmF3QVBJLCBSYXdPcHRpb25zfSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCB7U2NvcGVBUEl9IGZyb20gXCIuL3Njb3BlXCI7XHJcbmltcG9ydCB7Z2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCwgSnd0VG9rZW5CYXNlLCBwYXJzZUp3dFRva2VufSBmcm9tIFwiLi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJvb3RDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjb250ZXh0OiBSb290QVBJO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRhdGE6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSb290QVBJT3B0aW9ucyB7XHJcbiAgICBhbm9ueW1vdXNVc2VySWQ6IHN0cmluZztcclxuICAgIHdvcmtiZW5jaEFwaVVybDogc3RyaW5nO1xyXG4gICAgYXBpVXJsOiBzdHJpbmc7XHJcbiAgICBhcGlSb290UGF0aDogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBCYXNlQVBJIGltcGxlbWVudHMgQWJzdHJhY3RBUEkgb3ZlciAvdlt2ZXJzaW9uXVxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUm9vdEFQSSBleHRlbmRzIEFic3RyYWN0QVBJIHtcclxuXHJcbiAgICAvLyBSYXdBUEkgaW1wbGVtZW50cyBhY2Nlc3MgdG8gdGhlIGh0dHAgZW5kcG9pbnRzXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmF3OiBSYXdBUEk7XHJcbiAgICAvLyBkZWZhdWx0IFNjb3BlQVBJIGltcGxlbWVudHMgQWJzdHJhY3RBUEkgb3ZlciAvdlt2ZXJzaW9uXS9zY29wZXNcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBkZWZhdWx0U2NvcGVLZXk6IHN0cmluZztcclxuXHJcbiAgICAvLyBNYXAgb2YgU2NvcGVBUEksIHRoYXQgaW1wbGVtZW50IEFic3RyYWN0QVBJIG92ZXIgL3ZbdmVyc2lvbl0vc2NvcGVzLCBhbGxvd3Mga2VlcGluZyBtdWx0aXBsZSBzY29wZXMgb3BlbiBhdCBvbmNlXHJcbiAgICBhYnN0cmFjdCBzY29wZXM6IE1hcDxzdHJpbmcsIFNjb3BlQVBJPjtcclxuXHJcbiAgICAvLyBQcm9wZXJ0aWVzXHJcbiAgICBhYnN0cmFjdCB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBhYnN0cmFjdCByb290VVJJOiBzdHJpbmc7XHJcbiAgICBvcHRpb25zOiBSb290QVBJT3B0aW9ucztcclxuICAgIGNhY2hlZDogb2JqZWN0O1xyXG4gICAgYWNjZXNzVG9rZW46IEp3dFRva2VuQmFzZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgX3VzZXJJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfdG9rZW5FeHBpcmVzOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfcmF3VG9rZW46IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEVtcGF0aW9uQVBJT3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmICghb3B0aW9ucy53b3JrYmVuY2hBcGlVcmwpIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJXQiBBcGkgdXJsIGlzIHJlcXVpcmVkIVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGFwaVVybDtcclxuICAgICAgICBpZiAoIW9wdGlvbnMuYXBpUm9vdFBhdGgpIHtcclxuICAgICAgICAgICAgYXBpVXJsID0gb3B0aW9ucy53b3JrYmVuY2hBcGlVcmw7XHJcbiAgICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy5hcGlSb290UGF0aC5zdGFydHNXaXRoKFwiL1wiKSkge1xyXG4gICAgICAgICAgICBhcGlVcmwgPSBgJHtvcHRpb25zLndvcmtiZW5jaEFwaVVybH0vJHtvcHRpb25zLmFwaVJvb3RQYXRofWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBpVXJsID0gYCR7b3B0aW9ucy53b3JrYmVuY2hBcGlVcmx9JHtvcHRpb25zLmFwaVJvb3RQYXRofWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcGlVcmwuZW5kc1dpdGgoJy8nKSkge1xyXG4gICAgICAgICAgICBhcGlVcmwgPSBhcGlVcmwuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFwaVVybCxcclxuICAgICAgICAgICAgd29ya2JlbmNoQXBpVXJsOiBvcHRpb25zLndvcmtiZW5jaEFwaVVybCxcclxuICAgICAgICAgICAgYW5vbnltb3VzVXNlcklkOiBvcHRpb25zLmFub255bW91c1VzZXJJZCB8fCAnYW5vbnltb3VzJyxcclxuICAgICAgICAgICAgYXBpUm9vdFBhdGg6IG9wdGlvbnMuYXBpUm9vdFBhdGggfHwgXCJcIixcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHRoaXMub3B0aW9ucy5hbm9ueW1vdXNVc2VySWQ7XHJcbiAgICAgICAgdGhpcy5jYWNoZWQgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZSB0aGUgVXNlciBhY3RvciBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIGFwaSB3aWxsXHJcbiAgICAgKiByZXNldCBpdCdzIHdob2xlIHN0YXRlLlxyXG4gICAgICogQHBhcmFtIHRva2VuIHNldHVwIGNvbnRleHQgZnJvbSBvYmplY3RcclxuICAgICAqIEBwYXJhbSB3aXRoRXZlbnRcclxuICAgICAqL1xyXG4gICAgZnJvbSh0b2tlbjogc3RyaW5nLCB3aXRoRXZlbnQ9dHJ1ZSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcmF3VG9rZW4gPSB0b2tlbjtcclxuICAgICAgICB3aXRoRXZlbnQgPSB3aXRoRXZlbnQgJiYgIXRoaXMuYWNjZXNzVG9rZW47IC8vZmlyZSBldmVudCBvbmx5IHdoZW4gd2UgY29uZmlndXJlIG5ldyBzZXNzaW9uXHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHBhcnNlSnd0VG9rZW4odG9rZW4pIGFzIEp3dFRva2VuQmFzZTtcclxuICAgICAgICBjb25zdCB0b2tlblRpbWVvdXQgPSBnZXRKd3RUb2tlbkV4cGlyZXNUaW1lb3V0KHRoaXMuYWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIHRoaXMuX3Rva2VuRXhwaXJlcyA9IERhdGUubm93KCkgKyB0b2tlblRpbWVvdXQgLyAyO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IHRoaXMuYWNjZXNzVG9rZW4uc3ViO1xyXG4gICAgICAgIGlmICghdXNlcklkIHx8IHVzZXJJZC5sZW5ndGggPiA1MCkgdGhyb3cgXCJJbnZhbGlkIFVzZXIgSUQhIE11c3QgYmUgdmFsaWQgc3RyaW5nIHNob3J0ZXIgdGhhbiA1MCBjaGFyYWN0ZXJzIVwiO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICBpZiAodGhpcy51c2VySWQgPT09IHVzZXJJZCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh3aXRoRXZlbnQpIHRoaXMucmFpc2VFdmVudCgnaW5pdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hhbmdlIHRoZSBVc2VyIGFjdG9yIGZvciB0aGUgQVBJLCB3aXRob3V0IHByb3ZpZGluZyB0b2tlbi4gVXNlZCBpbiBuby10b2tlbiBjb25maWd1cmF0aW9uLiBOb3RlOiB0aGUgYXBpIHdpbGxcclxuICAgICAqIHJlc2V0IGl0J3Mgd2hvbGUgc3RhdGUuXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gc2V0dXAgY29udGV4dCBmcm9tIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHdpdGhFdmVudFxyXG4gICAgICovXHJcbiAgICB1c2UodXNlcklkOiBzdHJpbmcsIHdpdGhFdmVudD10cnVlKTogdm9pZCB7XHJcbiAgICAgICAgd2l0aEV2ZW50ID0gd2l0aEV2ZW50ICYmICF0aGlzLl91c2VySWQ7IC8vZmlyZSBldmVudCBvbmx5IHdoZW4gd2UgY29uZmlndXJlIG5ldyBzZXNzaW9uXHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIGlmICghdXNlcklkIHx8IHVzZXJJZC5sZW5ndGggPiA1MCkgdGhyb3cgXCJJbnZhbGlkIFVzZXIgSUQhIE11c3QgYmUgdmFsaWQgc3RyaW5nIHNob3J0ZXIgdGhhbiA1MCBjaGFyYWN0ZXJzIVwiO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICBpZiAod2l0aEV2ZW50KSB0aGlzLnJhaXNlRXZlbnQoJ2luaXRfbm9fdG9rZW4nKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9yYXdUb2tlbiA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5FeHBpcmVzID0gMDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLl91c2VySWQgPSB0aGlzLm9wdGlvbnMuYW5vbnltb3VzVXNlcklkO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFNjb3BlS2V5ID0gXCJcIlxyXG4gICAgICAgIHRoaXMuc2NvcGVzLmZvckVhY2goKHNjcCkgPT4gc2NwLnJlc2V0KCkpO1xyXG4gICAgICAgIHRoaXMuc2NvcGVzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5yYWlzZUV2ZW50KCdyZXNldCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB1c2VySWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCByYXdUb2tlbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdUb2tlbjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zPzogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl91c2VySWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJVc2VyIG11c3QgYmUgY29uZmlndXJlZCB0byBhY2Nlc3MgRW1wYWlhIEFQSTogZWl0aGVyIHByb3ZpZGUgYSB2YWxpZCAnYW5vbnltb3VzJyB1c2VyIElEIHRocm91Z2ggZW52IHZhcmlhYmxlcywgb3IgY29uZmlndXJlIHRoZSBSb290IEFQSSB3aXRoIGEgdmFsaWQgdG9rZW4uXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fdG9rZW5FeHBpcmVzID4gMCAmJiBEYXRlLm5vdygpID4gdGhpcy5fdG9rZW5FeHBpcmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50T2JqZWN0ID0ge25ld1Rva2VuOiBcIlwifTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBldmVudCB0b2tlbi1yZWZyZXNoXHJcbiAgICAgICAgICAgICAqIEF3YWl0aW5nIGV2ZW50LiBQcm92aWRlIG5ld1Rva2VuIHZhbHVlIGluIHRoZSBldmVudCBoYW5kbGVyIGFyZ3VtZW50IHBhcmFtcyBvYmplY3RcclxuICAgICAgICAgICAgICogZm9yIHRoZSByb290IEFQSSB0byBjb25zdW1lLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yYWlzZUV2ZW50QXdhaXRpbmcoJ3Rva2VuLXJlZnJlc2gnLCBldmVudE9iamVjdCk7XHJcbiAgICAgICAgICAgIHRoaXMuZnJvbShldmVudE9iamVjdC5uZXdUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IHtBYnN0cmFjdEFQSSwgUmF3QVBJLCBSYXdPcHRpb25zfSBmcm9tIFwiLi9iYXNlXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2NvcGVDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjb250ZXh0OiBTY29wZUFQSTtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBkYXRhOiBhbnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTY29wZSBCaW5kcyBFeGFtaW5hdGlvbiBhbmQgVXNlci5cclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTY29wZUFQSSBleHRlbmRzIEFic3RyYWN0QVBJIHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmF3OiBSYXdBUEk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2UgdGhlIGFjdGl2ZSBTY29wZSBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIHNjb3BlIHN0YXRlIHdpbGwgcmVzZXQuXHJcbiAgICAgKiBAcGFyYW0gY2FzZUlkIGNhc2UgaWQgLSBtYW5hZ2VzIHRoZSBhY3RpdmUgc2NvcGVcclxuICAgICAqIEBwYXJhbSBhcHBJZCBtYW5hZ2VzIHRoZSBhY3RpdmUgc2NvcGUgdGhyb3VnaCBleGFtaW5hdGlvbjx1c2VyLCBhcHA+XHJcbiAgICAgKiAgICAgICAgICBpZiB1bmRlZmluZWQsIHRoZSBleGFtaW5hdGlvbiBpcyBtYW5hZ2VkIGludGVybmFsbHlcclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgdXNlKGNhc2VJZDogc3RyaW5nLCBhcHBJZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2UgdGhlIGFjdGl2ZSBTY29wZSBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIHNjb3BlIHN0YXRlIHdpbGwgcmVzZXQuXHJcbiAgICAgKiBAcGFyYW0gZXhhbWluYXRpb24gc2V0dXAgY29udGV4dCBmcm9tIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBmcm9tKGV4YW1pbmF0aW9uOiBvYmplY3QpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIGFic3RyYWN0IHJlc2V0KCk6IHZvaWQ7XHJcblxyXG4gICAgYWJzdHJhY3QgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9ucz86IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT47XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCB7Um9vdEFQSSwgUm9vdENvbnRleHR9IGZyb20gXCIuLi8uLi9yb290XCI7XHJcbmltcG9ydCBSb290IGZyb20gXCIuL3Jvb3RcIjtcclxuaW1wb3J0IHtBcHBMaXN0fSBmcm9tIFwiLi90eXBlcy9hcHAtbGlzdFwiO1xyXG5pbXBvcnQge0FwcFF1ZXJ5fSBmcm9tIFwiLi90eXBlcy9hcHAtcXVlcnlcIjtcclxuaW1wb3J0IHtBcHBPdXRwdXR9IGZyb20gXCIuL3R5cGVzL2FwcC1vdXRwdXRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcHMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdEFQSTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBBcHBMaXN0IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9kZWZhdWx0QXBwOiBBcHBPdXRwdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxpc3QoKTogUHJvbWlzZTxBcHBMaXN0PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcHMvcXVlcnknLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgYXBwczogbnVsbCxcclxuICAgICAgICAgICAgICAgIHRpc3N1ZXM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdGFpbnM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBqb2JfbW9kZXM6IG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pIGFzIEFwcExpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcXVlcnkocXVlcnk6IEFwcFF1ZXJ5KTogUHJvbWlzZTxBcHBMaXN0PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcHMvcXVlcnknLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgYm9keTogcXVlcnlcclxuICAgICAgICB9KSBhcyBBcHBMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlZmF1bHQoKTogUHJvbWlzZTxBcHBPdXRwdXQ+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGF0YSkgYXdhaXQgdGhpcy5saXN0KCk7XHJcbiAgICAgICAgZm9yIChsZXQgYXBwIG9mIHRoaXMuZGF0YSEuaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKGFwcC5uYW1lX3Nob3J0ID09PSBcIk1BUDNcIiAmJiBhcHAudmVuZG9yX25hbWUgPT09IFwicmF0aW9uYWlcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmYXVsdEFwcCA9IGFwcDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5fZGVmYXVsdEFwcCkgdGhyb3cgXCJEZWZhdWx0IEFQUCBub3QgcHJlc2VudCBpbiB0aGUgaW5mcmFzdHJ1Y3R1cmUhIFdhcyBpdCBpbXBvcnRlZD9cIjtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdEFwcDtcclxuICAgIH1cclxufVxyXG4iLCJjb25zdCBnZXROdW1iZXIgPSAodmFyaWFibGU6IHN0cmluZyB8IG51bWJlcikgPT4ge1xyXG4gIGlmICh0eXBlb2YgdmFyaWFibGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICB2YXJpYWJsZSA9IE51bWJlcih2YXJpYWJsZSlcclxuICB9XHJcblxyXG4gIHJldHVybiB2YXJpYWJsZVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0WWVhckZyb21FcG9jaFRpbWUgPSAoZXBvY2hUaW1lOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoZ2V0TnVtYmVyKGVwb2NoVGltZSkgKiAxMDAwKS5nZXRGdWxsWWVhcigpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRNb250aEZyb21FcG9jaFRpbWUgPSAoZXBvY2hUaW1lOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoZ2V0TnVtYmVyKGVwb2NoVGltZSkgKiAxMDAwKS5nZXRNb250aCgpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXREYXlGcm9tRXBvY2hUaW1lID0gKGVwb2NoVGltZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKGdldE51bWJlcihlcG9jaFRpbWUpICogMTAwMCkuZ2V0RGF0ZSgpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYXRjaFN0cmluZ09uU2VwYXJhdG9yR3JvdXAgPSAoc3RyOiBzdHJpbmcsIHNlcGFyYXRvcjogc3RyaW5nLCBncm91cElkeDogbnVtYmVyLCB2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgY29uc3QgbWF0Y2hlcyA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yKS5leGVjKHN0cilcclxuICAgICAgaWYoIW1hdGNoZXMgfHwgZ3JvdXBJZHggPCAxIHx8IGdyb3VwSWR4ID49IG1hdGNoZXMubGVuZ3RoKSBcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgcmV0dXJuIG1hdGNoZXNbZ3JvdXBJZHhdID09PSB2YWx1ZVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbWF0Y2hTdHJpbmdPblRva2VucyA9IChzdHJpbmdUb01hdGNoOiBzdHJpbmcsIHRva2VuU3RyaW5nOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCB0b2tlbnMgPSB0b2tlblN0cmluZ1xyXG4gICAgLnNwbGl0KCcgJylcclxuICAgIC5maWx0ZXIoQm9vbGVhbilcclxuICAgIC5tYXAodG9rZW4gPT4gYCg/PS4qXFxcXGIke3Rva2VufVxcXFxiKWApO1xyXG5cclxuY29uc3Qgc2VhcmNoVGVybVJlZ2V4ID0gbmV3IFJlZ0V4cCh0b2tlbnMuam9pbignJyksICdnaW0nKTtcclxucmV0dXJuIHN0cmluZ1RvTWF0Y2gubWF0Y2goc2VhcmNoVGVybVJlZ2V4KSAhPT0gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdyb3VwQnkgPSA8VCwgSyBleHRlbmRzIGtleW9mIGFueT4oYXJyOiBUW10sIGtleTogKGk6IFQpID0+IEspID0+XHJcbiAgYXJyLnJlZHVjZSgoZ3JvdXBzLCBpdGVtKSA9PiB7XHJcbiAgICAoZ3JvdXBzW2tleShpdGVtKV0gfHw9IFtdKS5wdXNoKGl0ZW0pO1xyXG4gICAgcmV0dXJuIGdyb3VwcztcclxuICB9LCB7fSBhcyBSZWNvcmQ8SywgVFtdPik7IiwiaW1wb3J0IENhc2VzIGZyb20gXCIuLi9yb290L2Nhc2VzXCI7XHJcbmltcG9ydCB7IENhc2UgfSBmcm9tIFwiLi4vcm9vdC90eXBlcy9jYXNlXCI7XHJcbmltcG9ydCB7IENhc2VIIH0gZnJvbSBcIi4vdHlwZXMvY2FzZS1oXCI7XHJcbmltcG9ydCB7IENhc2VIaWVyYXJjaHkgfSBmcm9tIFwiLi90eXBlcy9jYXNlLWhpZXJhcmNoeS1yZXN1bHRcIjtcclxuaW1wb3J0IHsgQ2FzZVNlYXJjaFBhcmFtcyB9IGZyb20gXCIuL3R5cGVzL2Nhc2Utc2VhcmNoLXBhcmFtc1wiO1xyXG5pbXBvcnQgeyBnZXREYXlGcm9tRXBvY2hUaW1lLCBnZXRNb250aEZyb21FcG9jaFRpbWUsIGdldFllYXJGcm9tRXBvY2hUaW1lLCBncm91cEJ5LCBtYXRjaFN0cmluZ09uVG9rZW5zIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbmV4cG9ydCB0eXBlIENhc2VUaXNzdWVzU3RhaW5zID0ge1xyXG4gIG5hbWU6IHN0cmluZyxcclxuICBsb2NOYW1lOiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhc2VFeHBsb3JlciB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogQ2FzZXM7XHJcbiAgICBwcm90ZWN0ZWQgY3VzdG9tQ2FzZXM6IENhc2VIW10gfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBjYXNlSGllcmFyY2h5OiBDYXNlSGllcmFyY2h5IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcm90ZWN0ZWQgY2FzZVRpc3N1ZXM6IENhc2VUaXNzdWVzU3RhaW5zW10gfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBjYXNlU3RhaW5zOiBDYXNlVGlzc3Vlc1N0YWluc1tdIHwgbnVsbCA9IG51bGw7IFxyXG5cclxuICAgIGlkZW50aWZpZXJTZXBhcmF0b3I6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBoaWVyYXJjaHlTcGVjOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENhc2VzKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICB1c2UoaWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nLCBoaWVyYXJjaHlTcGVjOiBzdHJpbmdbXSk6IHZvaWQge1xyXG4gICAgICB0aGlzLmhpZXJhcmNoeVNwZWMgPSBoaWVyYXJjaHlTcGVjO1xyXG4gICAgICB0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IgPSBpZGVudGlmaWVyU2VwYXJhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q3VzdG9tQ2FzZXMoKSB7XHJcbiAgICAgIGlmKCF0aGlzLmN1c3RvbUNhc2VzKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21DYXNlcyA9IChhd2FpdCB0aGlzLmNvbnRleHQubGlzdCgpKS5pdGVtcy5tYXAoKGNhc2VPYmopID0+IHtcclxuICAgICAgICAgIHJldHVybiB7Li4uY2FzZU9iaiwgcGF0aEluSGllcmFyY2h5OiB0aGlzLmdldENhc2VIaWVyYXJjaHlQYXRoKGNhc2VPYmopfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuY3VzdG9tQ2FzZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FzZUhpZXJhcmNoeVBhdGgoY2FzZU9iajogQ2FzZSkge1xyXG4gICAgICBpZighdGhpcy5pZGVudGlmaWVyU2VwYXJhdG9yIHx8ICF0aGlzLmhpZXJhcmNoeVNwZWMpIHtcclxuICAgICAgICB0aHJvdyBgQXJndW1lbnRFcnJvcltDYXNlRXhwbG9yZXJdIGlkZW50aWZpZXJTZXBhcmF0b3Igb3IgaGllcmFyY2h5U3BlYyBpcyBtaXNzaW5nIC0gcmVxdWlyZWQgcHJvcGVydHkhYFxyXG4gICAgICB9XHJcbiAgICAgIGxldCBwYXRoRmluaXNoZWQgPSBmYWxzZVxyXG4gICAgICByZXR1cm4gdGhpcy5oaWVyYXJjaHlTcGVjLnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZ2V0Q2FzZVZhbHVlKGN1cnIsIGNhc2VPYmopO1xyXG5cclxuICAgICAgICBjb25zdCByZXR1cm5WYWwgPSBwYXRoRmluaXNoZWQgPyBwcmV2IDogYCR7cHJldn0vJHt2YWx9YFxyXG4gICAgICAgIGlmKHZhbCA9PT0gXCJPVEhFUlwiKSB7XHJcbiAgICAgICAgICBwYXRoRmluaXNoZWQgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXR1cm5WYWw7XHJcbiAgICAgIH0sIFwiXCIpXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Q2FzZShjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8Q2FzZUg+IHtcclxuICAgICAgbGV0IGNhc2VPYmo6IENhc2UgfCB1bmRlZmluZWQ7XHJcbiAgICAgIGlmKHRoaXMuY3VzdG9tQ2FzZXMpIHtcclxuICAgICAgICBjYXNlT2JqID0gdGhpcy5jdXN0b21DYXNlcy5maW5kKChjcykgPT4gY3MuaWQgPT09IGNhc2VJZClcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYoIWNhc2VPYmopIHtcclxuICAgICAgICBjYXNlT2JqID0gYXdhaXQgdGhpcy5jb250ZXh0LmdldChjYXNlSWQpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7Li4uY2FzZU9iaiwgcGF0aEluSGllcmFyY2h5OiB0aGlzLmdldENhc2VIaWVyYXJjaHlQYXRoKGNhc2VPYmopfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2FzZVZhbHVlKGtleTogc3RyaW5nLCBjczogQ2FzZSkge1xyXG4gICAgICBzd2l0Y2goa2V5KSB7XHJcbiAgICAgICAgY2FzZSBcInllYXJcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZVllYXIoY3MpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJtb250aFwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlTW9udGgoY3MpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJkYXlcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZURheShjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRlc2NyaXB0aW9uXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldENhc2VEZXNjcmlwdGlvbihjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcInRpc3N1ZXNcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZVRpc3N1ZXMoY3MpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJzdGFpbnNcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZVN0YWlucyhjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgaWYoa2V5LnNsaWNlKDAsIDgpID09PSBcImlkX3BhcnRfXCIgJiYgIWlzTmFOKE51bWJlcihrZXkuc2xpY2UoOCkpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlSWRlbnRpZmllclBhcnQoY3MsIE51bWJlcihrZXkuc2xpY2UoOCkpKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhyb3cgYEtleUVycm9yW0Nhc2VFeHBsb3Jlcl0gXFxcIiR7a2V5fVxcXCIgaXMgbm90IHN1cHBvcnRlZCFgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VWYWx1ZShrZXk6IHN0cmluZywgZXZhbFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSwgY3M6IENhc2UpIHtcclxuICAgICAgY29uc3QgY2FzZVZhbHVlID0gdGhpcy5nZXRDYXNlVmFsdWUoa2V5LCBjcylcclxuICAgICAgc3dpdGNoKGtleSkge1xyXG4gICAgICAgIGNhc2UgXCJ5ZWFyXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZVllYXIoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcIm1vbnRoXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZU1vbnRoKGNhc2VWYWx1ZSBhcyBzdHJpbmcsIGV2YWxWYWx1ZSBhcyBzdHJpbmcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJkYXlcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlRGF5KGNhc2VWYWx1ZSBhcyBzdHJpbmcsIGV2YWxWYWx1ZSBhcyBzdHJpbmcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJkZXNjcmlwdGlvblwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNhc2VEZXNjcmlwdGlvbihjYXNlVmFsdWUgYXMgc3RyaW5nLCBldmFsVmFsdWUgYXMgc3RyaW5nKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwidGlzc3Vlc1wiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNhc2VUaXNzdWVzKGNhc2VWYWx1ZSBhcyBzdHJpbmdbXSwgZXZhbFZhbHVlIGFzIChzdHJpbmcgfHN0cmluZ1tdKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcInN0YWluc1wiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNhc2VTdGFpbnMoY2FzZVZhbHVlIGFzIHN0cmluZ1tdLCBldmFsVmFsdWUgYXMgKHN0cmluZyB8c3RyaW5nW10pKVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAvLyBhbnkgaW52YWxpZCBrZXkgd2lsbCBiZSBjYXVnaHQgaW4gZ2V0Q2FzZVZhbHVlIGNhbGxcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZUlkZW50aWZpZXJQYXJ0KGNhc2VWYWx1ZSBhcyBzdHJpbmcsIGV2YWxWYWx1ZSBhcyBzdHJpbmcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlWWVhcihjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBnZXRZZWFyRnJvbUVwb2NoVGltZShjcy5jcmVhdGVkX2F0KS50b1N0cmluZygpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VNb250aChjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBnZXRNb250aEZyb21FcG9jaFRpbWUoY3MuY3JlYXRlZF9hdCkudG9TdHJpbmcoKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlRGF5KGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGdldERheUZyb21FcG9jaFRpbWUoY3MuY3JlYXRlZF9hdCkudG9TdHJpbmcoKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlSWRlbnRpZmllclBhcnQoY3M6IENhc2UsIHBhcnRJZHg6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgIGlmKCF0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IpIHtcclxuICAgICAgICB0aHJvdyBgQXJndW1lbnRFcnJvcltDYXNlRXhwbG9yZXJdIGlkZW50aWZpZXJTZXBhcmF0b3IgaXMgbWlzc2luZyAtIHJlcXVpcmVkIHByb3BlcnR5IWBcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwYXJ0cyA9IG5ldyBSZWdFeHAodGhpcy5pZGVudGlmaWVyU2VwYXJhdG9yKS5leGVjKGNzLmxvY2FsX2lkIHx8IFwiXCIpXHJcbiAgICAgIGlmKCFwYXJ0cykgXHJcbiAgICAgICAgcmV0dXJuIFwiT1RIRVJcIlxyXG4gICAgICBpZihwYXJ0SWR4IDwgMSB8fCBwYXJ0SWR4ID49IHBhcnRzLmxlbmd0aClcclxuICAgICAgICB0aHJvdyBgS2V5RXJyb3JbQ2FzZUV4cGxvcmVyXSBpbnZhbGlkIGtleSBcXFwiaWRfcGFydF88aW5kZXg+XFxcIiwgZ3JvdXAgaW5kZXggaXMgbm90IHZhbGlkIWBcclxuICAgICAgcmV0dXJuIHBhcnRzW3BhcnRJZHhdXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VEZXNjcmlwdGlvbihjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBjcy5kZXNjcmlwdGlvbiB8fCBcIlwiXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VUaXNzdWVzKGNzOiBDYXNlKTogc3RyaW5nW10ge1xyXG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoY3MudGlzc3VlcylcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0Q2FzZVN0YWlucyhjczogQ2FzZSk6IHN0cmluZ1tdIHtcclxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGNzLnN0YWlucylcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV2YXVsYXRlQ2FzZVllYXIodmFsdWU6IHN0cmluZywgZXZhbFZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YXVsYXRlQ2FzZU1vbnRoKHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gZXZhbFZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VEYXkodmFsdWU6IHN0cmluZywgZXZhbFZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YXVsYXRlQ2FzZUlkZW50aWZpZXJQYXJ0KHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gZXZhbFZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VEZXNjcmlwdGlvbih2YWx1ZTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gbWF0Y2hTdHJpbmdPblRva2Vucyh2YWx1ZSwgZXZhbFZhbHVlKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VUaXNzdWVzKHZhbHVlOiBzdHJpbmdbXSwgZXZhbFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgICBpZighKGV2YWxWYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgIGV2YWxWYWx1ZSA9IFtldmFsVmFsdWVdO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEFMTCBzZWFyY2hlZCB0aXNzdWVzIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgICAgcmV0dXJuIGV2YWxWYWx1ZS5ldmVyeSgodGlzc3VlKSA9PiB2YWx1ZS5pbmNsdWRlcyh0aXNzdWUpKVxyXG5cclxuICAgICAgLy8gU09NRSBzZWFyY2hlZCB0aXNzdWVzIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgICAgLy8gcmV0dXJuIGV2YWxWYWx1ZS5zb21lKCh0aXNzdWUpID0+IHZhbHVlLmluY2x1ZGVzKHRpc3N1ZSkpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YWx1YXRlQ2FzZVN0YWlucyh2YWx1ZTogc3RyaW5nW10sIGV2YWxWYWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pOiBib29sZWFuIHtcclxuICAgICAgaWYoIShldmFsVmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICBldmFsVmFsdWUgPSBbZXZhbFZhbHVlXTtcclxuICAgICAgfVxyXG4gICAgICAvLyBBTEwgc2VhcmNoZWQgc3RhaW5zIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgICAgcmV0dXJuIGV2YWxWYWx1ZS5ldmVyeSgoc3RhaW4pID0+IHZhbHVlLmluY2x1ZGVzKHN0YWluKSlcclxuXHJcbiAgICAgIC8vIFNPTUUgc2VhcmNoZWQgc3RhaW5zIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgICAgLy8gcmV0dXJuIGV2YWxWYWx1ZS5zb21lKChzdGFpbikgPT4gdmFsdWUuaW5jbHVkZXMoc3RhaW4pKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGllcmFyY2h5TGV2ZWwoa2V5czogc3RyaW5nW10sIGtleUlkeDogbnVtYmVyLCBjYXNlczogQ2FzZVtdLCBjdXJyZW50SGllcmFyY2h5UGF0aDogc3RyaW5nLCBuYW1lPzogc3RyaW5nKTogQ2FzZUhpZXJhcmNoeSB7XHJcbiAgICAgIGlmIChrZXlJZHggPj0ga2V5cy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4geyBsZXZlbE5hbWU6IG5hbWUsIGxhc3RMZXZlbDogdHJ1ZSwgaXRlbXM6IGNhc2VzLm1hcCgoY2FzZU9iaikgPT4geyByZXR1cm4gey4uLmNhc2VPYmosIHBhdGhJbkhpZXJhcmNoeTogY3VycmVudEhpZXJhcmNoeVBhdGh9fSl9XHJcbiAgICAgIH1cclxuICAgICAgLy8gZ3JvdXBpbmcgYnkgYXJyYXkgdmFsdWVzKHRpc3N1ZXMsIHN0YWlucykgaXMgbm90IGV4cGVjdGVkLCBidXQgd29ya3MgYnkgZ3JvdXBpbmcgb24gZmlyc3QgdmFsdWUgb2YgYXJyYXlcclxuICAgICAgY29uc3QgZ3JvdXBzID0gZ3JvdXBCeShjYXNlcywgKGNzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldENhc2VWYWx1ZShrZXlzW2tleUlkeF0sIGNzKTtcclxuICAgICAgICBpZihBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHZhbHVlWzBdIHx8IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IGl0ZW1zID0gT2JqZWN0LmtleXMoZ3JvdXBzKS5tYXAoKG5hbWUpID0+IHtcclxuICAgICAgICBpZihuYW1lID09PSBcIk9USEVSXCIpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmhpZXJhcmNoeUxldmVsKGtleXMsIGtleXMubGVuZ3RoLCBncm91cHNbbmFtZV0sIGAke2N1cnJlbnRIaWVyYXJjaHlQYXRofS8ke25hbWV9YCwgbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmhpZXJhcmNoeUxldmVsKGtleXMsIGtleUlkeCArIDEsIGdyb3Vwc1tuYW1lXSwgYCR7Y3VycmVudEhpZXJhcmNoeVBhdGh9LyR7bmFtZX1gLCBuYW1lKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHJldHVybiB7IGxldmVsTmFtZTogbmFtZSwgbGFzdExldmVsOiBmYWxzZSwgaXRlbXM6IGl0ZW1zIH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaGllcmFyY2h5KCk6IFByb21pc2U8Q2FzZUhpZXJhcmNoeT4ge1xyXG4gICAgICBpZighdGhpcy5jYXNlSGllcmFyY2h5KSB7XHJcbiAgICAgICAgY29uc3QgY2FzZXMgPSBhd2FpdCB0aGlzLmdldEN1c3RvbUNhc2VzKCk7XHJcbiAgICAgICAgdGhpcy5jYXNlSGllcmFyY2h5ID0gdGhpcy5oaWVyYXJjaHlMZXZlbCh0aGlzLmhpZXJhcmNoeVNwZWMsIDAsIGNhc2VzLCBcIlwiKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5jYXNlSGllcmFyY2h5O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlYXJjaChxdWVyeTogQ2FzZVNlYXJjaFBhcmFtc1tdKTogUHJvbWlzZTxDYXNlSFtdPiB7XHJcbiAgICAgIGxldCBmaWx0ZXJlZENhc2VzID0gYXdhaXQgdGhpcy5nZXRDdXN0b21DYXNlcygpO1xyXG4gICAgICBxdWVyeS5mb3JFYWNoKCh7a2V5LCB2YWx1ZX0pID0+IGZpbHRlcmVkQ2FzZXMgPSBmaWx0ZXJlZENhc2VzLmZpbHRlcigoY3MpID0+IHRoaXMuZXZhbHVhdGVDYXNlVmFsdWUoa2V5LCB2YWx1ZSwgY3MpKSk7XHJcblxyXG4gICAgICByZXR1cm4gZmlsdGVyZWRDYXNlcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0aXNzdWVzKGxvY2FsaXphdGlvbjogc3RyaW5nID0gXCJFTlwiKTogUHJvbWlzZTxDYXNlVGlzc3Vlc1N0YWluc1tdPiB7XHJcbiAgICAgIGlmKCF0aGlzLmNhc2VUaXNzdWVzKSB7XHJcbiAgICAgICAgY29uc3QgY2FzZXMgPSBhd2FpdCB0aGlzLmdldEN1c3RvbUNhc2VzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFsbFRpc3N1ZXM6IFNldDxDYXNlVGlzc3Vlc1N0YWlucz4gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgY2FzZXMuZm9yRWFjaCgoYykgPT4gT2JqZWN0LmVudHJpZXMoYy50aXNzdWVzKS5tYXAoKFt0aXNOYW1lLCB0aXNWYWx1ZV06IFtzdHJpbmcsIGFueV0pID0+ICh7bmFtZTogdGlzTmFtZSwgbG9jTmFtZTogdGlzVmFsdWVbbG9jYWxpemF0aW9uXX0pKS5mb3JFYWNoKCh0KSA9PiBhbGxUaXNzdWVzLmFkZCh0KSkpO1xyXG4gICAgICAgIHRoaXMuY2FzZVRpc3N1ZXMgPSBbLi4uYWxsVGlzc3Vlc107XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuY2FzZVRpc3N1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3RhaW5zKGxvY2FsaXphdGlvbjogc3RyaW5nID0gXCJFTlwiKTogUHJvbWlzZTxDYXNlVGlzc3Vlc1N0YWluc1tdPiB7XHJcbiAgICAgIGlmKCF0aGlzLmNhc2VTdGFpbnMpIHtcclxuICAgICAgICBjb25zdCBjYXNlcyA9IGF3YWl0IHRoaXMuZ2V0Q3VzdG9tQ2FzZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWxsU3RhaW5zOiBTZXQ8Q2FzZVRpc3N1ZXNTdGFpbnM+ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGNhc2VzLmZvckVhY2goKGMpID0+IE9iamVjdC5lbnRyaWVzKGMuc3RhaW5zKS5tYXAoKFtzdG5OYW1lLCBzdG5WYWx1ZV06IFtzdHJpbmcsIGFueV0pID0+ICh7bmFtZTogc3RuTmFtZSwgbG9jTmFtZTogc3RuVmFsdWVbbG9jYWxpemF0aW9uXX0pKS5mb3JFYWNoKChzKSA9PiBhbGxTdGFpbnMuYWRkKHMpKSk7XHJcbiAgICAgICAgdGhpcy5jYXNlU3RhaW5zID0gWy4uLmFsbFN0YWluc107XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuY2FzZVN0YWlucztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQ2FzZXMgZnJvbSBcIi4uL3Jvb3QvY2FzZXNcIjtcclxuaW1wb3J0IHsgU2xpZGUgfSBmcm9tIFwiLi4vcm9vdC90eXBlcy9zbGlkZVwiO1xyXG5pbXBvcnQgeyBtYXRjaFN0cmluZ09uU2VwYXJhdG9yR3JvdXAgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV3NpRXhwbG9yZXIge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IENhc2VzO1xyXG4gICAgcHJvdGVjdGVkIGxhc3RDYXNlSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IFNsaWRlW10gfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBzbGlkZXNEYXRhOiBTbGlkZVtdIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcm90ZWN0ZWQgbWFza3NEYXRhOiBTbGlkZVtdIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgbWFza0lkZW50aWZpZXJTZXBhcmF0b3I6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBtYXNrSWRlbnRpZmllclZhbHVlOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENhc2VzKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICB1c2UobWFza0lkZW50aWZpZXJTZXBhcmF0b3I6IHN0cmluZywgbWFza0lkZW50aWZpZXJWYWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubWFza0lkZW50aWZpZXJTZXBhcmF0b3IgPSBtYXNrSWRlbnRpZmllclNlcGFyYXRvcjtcclxuICAgICAgdGhpcy5tYXNrSWRlbnRpZmllclZhbHVlID0gbWFza0lkZW50aWZpZXJWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldEFsbFNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVbXT4ge1xyXG4gICAgICBpZiAodGhpcy5sYXN0Q2FzZUlkICE9PSBjYXNlSWQgfHwgIXRoaXMuZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IChhd2FpdCB0aGlzLmNvbnRleHQuc2xpZGVzKGNhc2VJZCkpLml0ZW1zO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmRhdGFcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzbGlkZXMoY2FzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlW10+IHtcclxuICAgICAgaWYgKHRoaXMubGFzdENhc2VJZCAhPT0gY2FzZUlkIHx8ICF0aGlzLnNsaWRlc0RhdGEpIHtcclxuICAgICAgICB0aGlzLnNsaWRlc0RhdGEgPSAoYXdhaXQgdGhpcy5nZXRBbGxTbGlkZXMoY2FzZUlkKSkuZmlsdGVyKChzbGlkZSkgPT4geyBcclxuICAgICAgICAgIHJldHVybiAhbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwKHNsaWRlLmxvY2FsX2lkIHx8IFwiXCIsIHRoaXMubWFza0lkZW50aWZpZXJTZXBhcmF0b3IsIDEsIHRoaXMubWFza0lkZW50aWZpZXJWYWx1ZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5zbGlkZXNEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1hc2tzKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxTbGlkZVtdPiB7XHJcbiAgICAgIGlmICh0aGlzLmxhc3RDYXNlSWQgIT09IGNhc2VJZCB8fCAhdGhpcy5tYXNrc0RhdGEpIHtcclxuICAgICAgICB0aGlzLm1hc2tzRGF0YSA9IChhd2FpdCB0aGlzLmdldEFsbFNsaWRlcyhjYXNlSWQpKS5maWx0ZXIoKHNsaWRlKSA9PiB7IFxyXG4gICAgICAgICAgcmV0dXJuIG1hdGNoU3RyaW5nT25TZXBhcmF0b3JHcm91cChzbGlkZS5sb2NhbF9pZCB8fCBcIlwiLCB0aGlzLm1hc2tJZGVudGlmaWVyU2VwYXJhdG9yLCAxLCB0aGlzLm1hc2tJZGVudGlmaWVyVmFsdWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMubWFza3NEYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7Um9vdEFQSSwgUm9vdENvbnRleHR9IGZyb20gXCIuLi8uLi9yb290XCI7XHJcbmltcG9ydCBDYXNlRXhwbG9yZXIgZnJvbSBcIi4uL2V4dGVuc2lvbnMvY2FzZS1leHBsb3JlclwiO1xyXG5pbXBvcnQgV3NpRXhwbG9yZXIgZnJvbSBcIi4uL2V4dGVuc2lvbnMvd3NpLWV4cGxvcmVyXCI7XHJcbmltcG9ydCBSb290IGZyb20gXCIuL3Jvb3RcIjtcclxuaW1wb3J0IHsgQ2FzZSB9IGZyb20gXCIuL3R5cGVzL2Nhc2VcIjtcclxuaW1wb3J0IHtDYXNlTGlzdH0gZnJvbSBcIi4vdHlwZXMvY2FzZS1saXN0XCI7XHJcbmltcG9ydCB7IFNsaWRlTGlzdCB9IGZyb20gXCIuL3R5cGVzL3NsaWRlLWxpc3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhc2VzIGV4dGVuZHMgUm9vdENvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogQ2FzZUxpc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjYXNlRXhwbG9yZXI6IENhc2VFeHBsb3JlcjtcclxuICAgIHdzaUV4cGxvcmVyOiBXc2lFeHBsb3JlcjtcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcbiAgICAgICAgdGhpcy5jYXNlRXhwbG9yZXIgPSBuZXcgQ2FzZUV4cGxvcmVyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMud3NpRXhwbG9yZXIgPSBuZXcgV3NpRXhwbG9yZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbGlzdCgpOiBQcm9taXNlPENhc2VMaXN0PiB7XHJcbiAgICAgICAgaWYoIXRoaXMuZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9jYXNlcycpIGFzIENhc2VMaXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldChjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8Q2FzZT4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jYXNlcy8ke2Nhc2VJZH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzbGlkZXMoY2FzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlTGlzdD4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jYXNlcy8ke2Nhc2VJZH0vc2xpZGVzYCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtSb290Q29udGV4dH0gZnJvbSBcIi4uLy4uL3Jvb3RcIjtcclxuaW1wb3J0IFJvb3QgZnJvbSBcIi4vcm9vdFwiO1xyXG5pbXBvcnQge1xyXG4gICAgV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb25cclxufSBmcm9tIFwiLi90eXBlcy93b3JrYmVuY2gtc2VydmljZS1hcGktdi0zLWN1c3RvbS1tb2RlbHMtZXhhbWluYXRpb25zLWV4YW1pbmF0aW9uXCI7XHJcbmltcG9ydCB7RXhhbWluYXRpb25RdWVyeX0gZnJvbSBcIi4vdHlwZXMvZXhhbWluYXRpb24tcXVlcnlcIjtcclxuaW1wb3J0IHtFeGFtaW5hdGlvbkxpc3R9IGZyb20gXCIuL3R5cGVzL2V4YW1pbmF0aW9uLWxpc3RcIjtcclxuaW1wb3J0IHtTY29wZVRva2VuQW5kU2NvcGVJZH0gZnJvbSBcIi4vdHlwZXMvc2NvcGUtdG9rZW4tYW5kLXNjb3BlLWlkXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeGFtaW5hdGlvbnMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdDtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBFeGFtaW5hdGlvbkxpc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ6IHN0cmluZyk6IFByb21pc2U8V29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24+IHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcy5jb250ZXh0O1xyXG4gICAgICAgIHNlbGYucmVxdWlyZXMoJ2Nhc2VJZCcsIGNhc2VJZCk7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucmF3UXVlcnkoJy9leGFtaW5hdGlvbnMnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgIGNhc2VfaWQ6IGNhc2VJZCxcclxuICAgICAgICAgICAgICAgIGFwcF9pZDogYXBwSWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHF1ZXJ5KHF1ZXJ5OiBFeGFtaW5hdGlvblF1ZXJ5LCBza2lwPzogbnVtYmVyIHwgdW5kZWZpbmVkLCBsaW1pdD86IG51bWJlciB8IHVuZGVmaW5lZCk6IFByb21pc2U8RXhhbWluYXRpb25MaXN0PiB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICByZXR1cm4gc2VsZi5yYXdRdWVyeShgL2V4YW1pbmF0aW9ucy9xdWVyeWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgYm9keTogcXVlcnksXHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7c2tpcCwgbGltaXR9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0KGV4YW1pbmF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8V29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24+IHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcy5jb250ZXh0O1xyXG4gICAgICAgIHNlbGYucmVxdWlyZXMoJ2V4YW1pbmF0aW9uSWQnLCBleGFtaW5hdGlvbklkKTtcclxuICAgICAgICByZXR1cm4gc2VsZi5yYXdRdWVyeShgL2V4YW1pbmF0aW9ucy8ke2V4YW1pbmF0aW9uSWR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2NvcGUoZXhhbWluYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxTY29wZVRva2VuQW5kU2NvcGVJZD4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgc2VsZi5yZXF1aXJlcygnZXhhbWluYXRpb25JZCcsIGV4YW1pbmF0aW9uSWQpO1xyXG4gICAgICAgIHJldHVybiBzZWxmLnJhd1F1ZXJ5KGAvZXhhbWluYXRpb25zLyR7ZXhhbWluYXRpb25JZH0vc2NvcGVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tIFwiLi4vLi4vc2NvcGVcIjtcclxuaW1wb3J0IFNjb3BlIGZyb20gXCIuL3Njb3BlXCI7XHJcbmltcG9ydCB7IEFwcFVpU3RvcmFnZSB9IGZyb20gXCIuL3R5cGVzL2FwcC11aS1zdG9yYWdlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yYWdlIGV4dGVuZHMgU2NvcGVDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBBcHBVaVN0b3JhZ2UgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRSYXcoKTogUHJvbWlzZTxBcHBVaVN0b3JhZ2U+IHtcclxuICAgICAgICBpZighdGhpcy5kYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcC11aS1zdG9yYWdlL3VzZXInKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhIGFzIEFwcFVpU3RvcmFnZVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZsdXNoKCk6IFByb21pc2U8QXBwVWlTdG9yYWdlIHwgbnVsbD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcC11aS1zdG9yYWdlL3VzZXInLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgYm9keTogdGhpcy5kYXRhXHJcbiAgICAgICAgfSkgYXMgQXBwVWlTdG9yYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldChrZXk6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0UmF3KClcclxuICAgICAgICBpZih0eXBlb2YgZGF0YS5jb250ZW50W2tleV0gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YS5jb250ZW50W2tleV0gYXMgc3RyaW5nKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGEuY29udGVudFtrZXldXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBmbHVzaD86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZVJhdyA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKVxyXG4gICAgICAgIGNvbnN0IGRhdGFSYXcgPSBhd2FpdCB0aGlzLmdldFJhdygpXHJcbiAgICAgICAgZGF0YVJhdy5jb250ZW50W2tleV0gPSB2YWx1ZVJhd1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGFSYXdcclxuXHJcbiAgICAgICAgaWYgKGZsdXNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmx1c2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZXJhc2UoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0ge2NvbnRlbnQ6e319XHJcbiAgICAgICAgdGhpcy5mbHVzaCgpXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2NvcGVDb250ZXh0IH0gZnJvbSBcIi4uLy4uL3Njb3BlXCI7XHJcbmltcG9ydCBTY29wZSBmcm9tIFwiLi9zY29wZVwiO1xyXG5pbXBvcnQge1BvaW50QW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9pbnQtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge0xpbmVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9saW5lLWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtBcnJvd0Fubm90YXRpb259IGZyb20gXCIuL3R5cGVzL2Fycm93LWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtDaXJjbGVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9jaXJjbGUtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1JlY3RhbmdsZUFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3JlY3RhbmdsZS1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UG9seWdvbkFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3BvbHlnb24tYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RQb2ludEFubm90YXRpb25zfSBmcm9tIFwiLi90eXBlcy9wb3N0LXBvaW50LWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdExpbmVBbm5vdGF0aW9uc30gZnJvbSBcIi4vdHlwZXMvcG9zdC1saW5lLWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdEFycm93QW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtYXJyb3ctYW5ub3RhdGlvbnNcIjtcclxuaW1wb3J0IHtQb3N0Q2lyY2xlQW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtY2lyY2xlLWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdFJlY3RhbmdsZUFubm90YXRpb25zfSBmcm9tIFwiLi90eXBlcy9wb3N0LXJlY3RhbmdsZS1hbm5vdGF0aW9uc1wiO1xyXG5pbXBvcnQge1Bvc3RQb2x5Z29uQW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtcG9seWdvbi1hbm5vdGF0aW9uc1wiO1xyXG5pbXBvcnQge1Bvc3RQb2ludEFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3Bvc3QtcG9pbnQtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RMaW5lQW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9zdC1saW5lLWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtQb3N0QXJyb3dBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LWFycm93LWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtQb3N0Q2lyY2xlQW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9zdC1jaXJjbGUtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RSZWN0YW5nbGVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LXJlY3RhbmdsZS1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UG9zdFBvbHlnb25Bbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LXBvbHlnb24tYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge0Fubm90YXRpb25MaXN0UmVzcG9uc2V9IGZyb20gXCIuL3R5cGVzL2Fubm90YXRpb24tbGlzdC1yZXNwb25zZVwiO1xyXG5pbXBvcnQge0lkT2JqZWN0fSBmcm9tIFwiLi90eXBlcy9pZC1vYmplY3RcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEFubm90YXRpb25RdWVyeVBhcmFtcyB7XHJcbiAgICBpc1JvaT86IGJvb2xlYW47XHJcbiAgICBleHRlcm5hbElkcz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFubm90YXRpb25zIGV4dGVuZHMgU2NvcGVDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiB1bmRlZmluZWQ7IC8vdW51c2VkXHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogU2NvcGUpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQb3N0IG11bHRpcGxlIGFubm90YXRpb25zIGFzIG9uZS4gSW5yZWFsaXR5IHRoZSBzYW1lIGVuZHBvaW50IGFzIGNyZWF0ZSguLi4pXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHVwbG9hZChkYXRhOiBQb3N0UG9pbnRBbm5vdGF0aW9ucyB8IFBvc3RMaW5lQW5ub3RhdGlvbnMgfCBQb3N0QXJyb3dBbm5vdGF0aW9ucyB8IFBvc3RDaXJjbGVBbm5vdGF0aW9ucyB8IFBvc3RSZWN0YW5nbGVBbm5vdGF0aW9ucyB8IFBvc3RQb2x5Z29uQW5ub3RhdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgb3B0aW9uczogUG9zdEFubm90YXRpb25RdWVyeVBhcmFtcyA9IHt9XHJcbiAgICApOiBQcm9taXNlPEFubm90YXRpb25MaXN0UmVzcG9uc2U+IHtcclxuICAgICAgICAvL3RoZSBzYW1lIGFzIGNyZWF0ZSBidXQgZm9yIHR5cGVzIGl0cyBzaW1wbGVyIHRvIHNwbGl0XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2Fubm90YXRpb25zJywge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBxdWVyeTogb3B0aW9ucyxcclxuICAgICAgICAgICAgYm9keTogdGhpcy5kYXRhXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW4gYW5ub3RhdGlvbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgY3JlYXRlKGRhdGE6IFBvc3RQb2ludEFubm90YXRpb24gfCBQb3N0TGluZUFubm90YXRpb24gfCBQb3N0QXJyb3dBbm5vdGF0aW9uIHwgUG9zdENpcmNsZUFubm90YXRpb24gfCBQb3N0UmVjdGFuZ2xlQW5ub3RhdGlvbiB8IFBvc3RQb2x5Z29uQW5ub3RhdGlvbixcclxuICAgICAgICAgICAgICAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge31cclxuICAgICk6IFByb21pc2U8KFBvaW50QW5ub3RhdGlvbiB8IExpbmVBbm5vdGF0aW9uIHwgQXJyb3dBbm5vdGF0aW9uIHwgQ2lyY2xlQW5ub3RhdGlvbiB8IFJlY3RhbmdsZUFubm90YXRpb24gfCBQb2x5Z29uQW5ub3RhdGlvbik+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYW5ub3RhdGlvbnMnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIHF1ZXJ5OiBvcHRpb25zLFxyXG4gICAgICAgICAgICBib2R5OiB0aGlzLmRhdGFcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8SWRPYmplY3Q+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvYW5ub3RhdGlvbnMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZShcclxuICAgICAgICBpZDogc3RyaW5nLFxyXG4gICAgICAgIGRhdGE6IFBvc3RQb2ludEFubm90YXRpb24gfCBQb3N0TGluZUFubm90YXRpb24gfCBQb3N0QXJyb3dBbm5vdGF0aW9uIHwgUG9zdENpcmNsZUFubm90YXRpb24gfCBQb3N0UmVjdGFuZ2xlQW5ub3RhdGlvbiB8IFBvc3RQb2x5Z29uQW5ub3RhdGlvbixcclxuICAgICAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge30sXHJcbiAgICApOiBQcm9taXNlPChQb2ludEFubm90YXRpb24gfCBMaW5lQW5ub3RhdGlvbiB8IEFycm93QW5ub3RhdGlvbiB8IENpcmNsZUFubm90YXRpb24gfCBSZWN0YW5nbGVBbm5vdGF0aW9uIHwgUG9seWdvbkFubm90YXRpb24pPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGUoaWQpO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUgbWlnaHQgY2FycnkgaWQgYnV0IHVzZXIgZm9yZ290IHRvIHNldCBleHRlcm5hbCBJRHMgdG8gdHJ1ZVxyXG4gICAgICAgIGlmICghb3B0aW9ucy5leHRlcm5hbElkcyAmJiBkYXRhLmlkKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZXJuYWxJZHMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2NvcGVDb250ZXh0IH0gZnJvbSBcIi4uLy4uL3Njb3BlXCI7XHJcbmltcG9ydCBTY29wZSBmcm9tIFwiLi9zY29wZVwiO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSBcIi4vdHlwZXMvY29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBJdGVtUXVlcnkgfSBmcm9tIFwiLi90eXBlcy9pdGVtLXF1ZXJ5XCI7XHJcbmltcG9ydCB7IEl0ZW1RdWVyeUxpc3QgfSBmcm9tIFwiLi90eXBlcy9pdGVtLXF1ZXJ5LWxpc3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxlY3Rpb25zIGV4dGVuZHMgU2NvcGVDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBDb2xsZWN0aW9uIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogU2NvcGUpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0KGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTxDb2xsZWN0aW9uPiB7XHJcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbjogQ29sbGVjdGlvbiA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjcmVhdGUoY29sbGVjdGlvbjogQ29sbGVjdGlvbik6IFByb21pc2U8Q29sbGVjdGlvbj4ge1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRDb2xsZWN0aW9uOiBDb2xsZWN0aW9uID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY29sbGVjdGlvbnNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IGNvbGxlY3Rpb24sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGNyZWF0ZWRDb2xsZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZShjb2xsZWN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHF1ZXJ5SXRlbXMoY29sbGVjdGlvbklkOiBzdHJpbmcsIHF1ZXJ5OiBJdGVtUXVlcnkpOiBQcm9taXNlPEl0ZW1RdWVyeUxpc3Q+IHtcclxuICAgICAgICBjb25zdCBxdWVyeVJlc3VsdDogSXRlbVF1ZXJ5TGlzdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfS9pdGVtcy9xdWVyeWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBib2R5OiBxdWVyeSxcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICByZXR1cm4gcXVlcnlSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY3JlYXRlSXRlbXMoY29sbGVjdGlvbklkOiBzdHJpbmcsIGl0ZW1zOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb25JZH0vaXRlbXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgIC4uLml0ZW1zLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVJdGVtKGNvbGxlY3Rpb25JZDogc3RyaW5nLCBpdGVtSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfS9pdGVtcy8ke2l0ZW1JZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tIFwiLi4vLi4vc2NvcGVcIjtcclxuaW1wb3J0IFNjb3BlIGZyb20gXCIuL3Njb3BlXCI7XHJcbmltcG9ydCB7IEpvYiB9IGZyb20gXCIuL3R5cGVzL2pvYlwiO1xyXG5pbXBvcnQgeyBKb2JMaXN0IH0gZnJvbSBcIi4vdHlwZXMvam9iLWxpc3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEpvYnMgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFNjb3BlO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IEpvYltdIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogU2NvcGUpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Sm9icygpOiBQcm9taXNlPEpvYltdPiB7XHJcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9qb2JzJykgYXMgSm9iTGlzdCkuaXRlbXNcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXQoam9iSWQ6IHN0cmluZyk6IFByb21pc2U8Sm9iPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9qb2JzLyR7am9iSWR9YCkgYXMgSm9iO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7U2NvcGVBUEl9IGZyb20gXCIuLi8uLi9zY29wZVwiO1xyXG5pbXBvcnQge1Jhd0FQSSwgUmF3T3B0aW9uc30gZnJvbSBcIi4uLy4uL2Jhc2VcIjtcclxuaW1wb3J0IHtTY29wZVRva2VuQW5kU2NvcGVJZH0gZnJvbSBcIi4uL3Jvb3QvdHlwZXMvc2NvcGUtdG9rZW4tYW5kLXNjb3BlLWlkXCI7XHJcbmltcG9ydCB7XHJcbiAgICBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvblxyXG59IGZyb20gXCIuLi9yb290L3R5cGVzL3dvcmtiZW5jaC1zZXJ2aWNlLWFwaS12LTMtY3VzdG9tLW1vZGVscy1leGFtaW5hdGlvbnMtZXhhbWluYXRpb25cIjtcclxuaW1wb3J0IFJvb3QgZnJvbSBcIi4uL3Jvb3Qvcm9vdFwiO1xyXG5pbXBvcnQgU3RvcmFnZSBmcm9tIFwiLi9zdG9yYWdlXCI7XHJcbmltcG9ydCB7Z2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCwgcGFyc2VKd3RUb2tlbiwgU2NvcGVUb2tlbn0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XHJcbmltcG9ydCBBbm5vdGF0aW9ucyBmcm9tIFwiLi9hbm5vdGF0aW9uc1wiO1xyXG5pbXBvcnQgQ29sbGVjdGlvbnMgZnJvbSBcIi4vY29sbGVjdGlvbnNcIjtcclxuaW1wb3J0IEpvYnMgZnJvbSBcIi4vam9ic1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NvcGUgZXh0ZW5kcyBTY29wZUFQSSB7XHJcbiAgICBzdGF0aWMgYXBpUGF0aCA9ICcvdjMvc2NvcGVzJztcclxuXHJcbiAgICAvLyBJbnRlcmZhY2VcclxuICAgIHJhdzogUmF3QVBJO1xyXG4gICAgY29udGV4dDogUm9vdDtcclxuICAgIHN0b3JhZ2U6IFN0b3JhZ2U7XHJcbiAgICBhbm5vdGF0aW9uczogQW5ub3RhdGlvbnM7XHJcbiAgICBjb2xsZWN0aW9uczogQ29sbGVjdGlvbnM7XHJcbiAgICBqb2JzOiBKb2JzO1xyXG5cclxuICAgIC8vIEFkZGl0aW9uYWxcclxuICAgIHNjb3BlQ29udGV4dDogU2NvcGVUb2tlbkFuZFNjb3BlSWQgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX2RlZmF1bHRFeGFtaW5hdGlvbklkOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgcHJpdmF0ZSBfdG9rZW5SZWZldGNoSW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgYWN0aXZlRXhhbWluYXRpb25JZDogc3RyaW5nID0gXCJcIjtcclxuICAgIGFjdGl2ZUNhc2VJZDogc3RyaW5nID0gXCJcIjtcclxuICAgIGFjdGl2ZUFwcElkOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJvb3QpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5yYXcgPSBuZXcgUmF3QVBJKHRoaXMuY29udGV4dC5vcHRpb25zLmFwaVVybCArIFNjb3BlLmFwaVBhdGgpO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBTdG9yYWdlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBuZXcgQW5ub3RhdGlvbnModGhpcyk7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9ucyh0aGlzKTtcclxuICAgICAgICB0aGlzLmpvYnMgPSBuZXcgSm9icyh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1c2UoY2FzZUlkOiBzdHJpbmcsIGFwcElkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvL3RvZG8gY29uc2lkZXIgY2FjaGluZ1xyXG5cclxuICAgICAgICB0aGlzLnJlcXVpcmVzKFwicm9vdDo6dXNlcklkXCIsIHRoaXMuY29udGV4dC51c2VySWQpO1xyXG5cclxuICAgICAgICBjb25zdCBmaW5kRXhhbWluYXRpb24gPSBhc3luYyAoYXBwSWQ6IHN0cmluZyk6XHJcbiAgICAgICAgICAgIFByb21pc2U8V29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24+ID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBleGFtaW5hdGlvbnMgPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICAgIGFwcHM6IFthcHBJZF0sXHJcbiAgICAgICAgICAgICAgICBjcmVhdG9yczogW3RoaXMuY29udGV4dC51c2VySWRdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoZXhhbWluYXRpb25zLml0ZW1fY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXhhbWluYXRpb24gPSBleGFtaW5hdGlvbnMuaXRlbXMuZmluZChleCA9PiBleC5zdGF0ZSA9PT0gXCJPUEVOXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4YW1pbmF0aW9uKSByZXR1cm4gZXhhbWluYXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5leGFtaW5hdGlvbnMuY3JlYXRlKGNhc2VJZCwgYXBwSWQpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBleGFtaW5hdGlvbjtcclxuICAgICAgICBpZiAoYXBwSWQpIHtcclxuICAgICAgICAgICAgZXhhbWluYXRpb24gPSBhd2FpdCBmaW5kRXhhbWluYXRpb24oYXBwSWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fZGVmYXVsdEV4YW1pbmF0aW9uSWQpIHtcclxuICAgICAgICAgICAgZXhhbWluYXRpb24gPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLmdldCh0aGlzLl9kZWZhdWx0RXhhbWluYXRpb25JZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWV4YW1pbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIGxldCBhcHAgPSBhd2FpdCB0aGlzLmNvbnRleHQuYXBwcy5kZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV4YW1pbmF0aW9uID0gYXdhaXQgZmluZEV4YW1pbmF0aW9uKGFwcC5hcHBfaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0RXhhbWluYXRpb25JZCA9IGV4YW1pbmF0aW9uLmlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5mcm9tKGV4YW1pbmF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2NvcGVUb2tlbigpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlQ29udGV4dD8uYWNjZXNzX3Rva2VuO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZyb20oZXhhbWluYXRpb246IFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVDYXNlSWQgPSBleGFtaW5hdGlvbi5jYXNlX2lkO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQXBwSWQgPSBleGFtaW5hdGlvbi5hcHBfaWQ7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVFeGFtaW5hdGlvbklkID0gZXhhbWluYXRpb24uaWQ7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBwYXJzZUp3dFRva2VuKHRoaXMuc2NvcGVDb250ZXh0LmFjY2Vzc190b2tlbikgYXMgU2NvcGVUb2tlbjtcclxuICAgICAgICBjb25zdCB0aW1lb3V0ID0gZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCh0b2tlbik7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgdGhpcy5yYWlzZUV2ZW50KCdpbml0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVFeGFtaW5hdGlvbklkID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNjb3BlQ29udGV4dCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Rva2VuUmVmZXRjaEludGVydmFsKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICB0aGlzLl90b2tlblJlZmV0Y2hJbnRlcnZhbCA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vdG9kbyBjbGVhciBhbGwgY2FjaGVkIGRhdGFcclxuICAgICAgICAgICAgdGhpcy5yYWlzZUV2ZW50KCdyZXNldCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zPzogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgdGhpcy5yZXF1aXJlcygndGhpcy5zY29wZUNvbnRleHQnLCB0aGlzLnNjb3BlQ29udGV4dCk7XHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQmVhcmVyICR7dGhpcy5zY29wZUNvbnRleHQ/LmFjY2Vzc190b2tlbn1gO1xyXG4gICAgICAgIGlmIChlbmRwb2ludCAmJiAhZW5kcG9pbnQuc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYC8ke2VuZHBvaW50fWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yYXcuaHR0cChgLyR7dGhpcy5zY29wZUNvbnRleHQ/LnNjb3BlX2lkfSR7ZW5kcG9pbnR9YCwgb3B0aW9ucyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5zdGF0dXNDb2RlID09PSA0MDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZSh0aGlzLmFjdGl2ZUV4YW1pbmF0aW9uSWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmF3Lmh0dHAoYC8ke3RoaXMuc2NvcGVDb250ZXh0LnNjb3BlX2lkfSR7ZW5kcG9pbnR9YCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlICovXHJcbmV4cG9ydCBlbnVtIEdsb2JhbERhdGFDcmVhdG9yVHlwZSB7XHJcbiAgVVNFUiA9IFwidXNlclwiLFxyXG4gIFNDT1BFID0gXCJzY29wZVwiLFxyXG4gIEpPQiA9IFwiam9iXCJcclxufSIsIi8qIHRzbGludDpkaXNhYmxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlICovXHJcbmV4cG9ydCBlbnVtIEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlIHtcclxuICBBTk5PVEFUSU9OID0gXCJhbm5vdGF0aW9uXCIsXHJcbiAgQ09MTEVDVElPTiA9IFwiY29sbGVjdGlvblwiLFxyXG4gIENMQVNTID0gXCJjbGFzc1wiLFxyXG4gIFBSSU1JVElWRSA9IFwicHJpbWl0aXZlXCIsXHJcbiAgV1NJID0gXCJ3c2lcIixcclxuICBDQVNFID0gXCJjYXNlXCIsXHJcbiAgVVNFUiA9IFwidXNlclwiLFxyXG4gIFNDT1BFID0gXCJzY29wZVwiLFxyXG4gIEpPQiA9IFwiam9iXCJcclxufSIsIi8qIHRzbGludDpkaXNhYmxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlICovXHJcbmV4cG9ydCBlbnVtIFRlbXBsYXRlVHlwZSB7XHJcbiAgQmFja2dyb3VuZCA9ICdiYWNrZ3JvdW5kJyxcclxuICBQYXJhbXMgPSAncGFyYW1zJyxcclxuICBTaGFkZXIgPSAnc2hhZGVyJyxcclxuICBWaXN1YWxpemF0aW9uID0gJ3Zpc3VhbGl6YXRpb24nXHJcbn0iLCJpbXBvcnQge1Jvb3RBUEksIFJvb3RDb250ZXh0fSBmcm9tIFwiLi4vLi4vcm9vdFwiO1xyXG5pbXBvcnQgUm9vdCBmcm9tIFwiLi9yb290XCI7XHJcbmltcG9ydCB7IFNsaWRlIH0gZnJvbSBcIi4vdHlwZXMvc2xpZGVcIjtcclxuaW1wb3J0IHsgU2xpZGVJbmZvIH0gZnJvbSBcIi4vdHlwZXMvc2xpZGUtaW5mb1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVzIGV4dGVuZHMgUm9vdENvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogU2xpZGVJbmZvIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzbGlkZUluZm8oc2xpZGVJZDogc3RyaW5nKTogUHJvbWlzZTxTbGlkZUluZm8+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvc2xpZGVzLyR7c2xpZGVJZH0vaW5mb2ApXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2xpZGVUaHVtYm5haWwoc2xpZGVJZDogc3RyaW5nLCBtYXhXaWR0aDogbnVtYmVyLCBtYXhIZWlnaHQ6IG51bWJlciwgZm9ybWF0Pzogc3RyaW5nKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3NsaWRlcy8ke3NsaWRlSWR9L3RodW1ibmFpbC9tYXhfc2l6ZS8ke21heFdpZHRofS8ke21heEhlaWdodH1gLCB7XHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZV9mb3JtYXQ6IGZvcm1hdFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6IFwiYmxvYlwiXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzbGlkZUxhYmVsKHNsaWRlSWQ6IHN0cmluZywgbWF4V2lkdGg6IG51bWJlciwgbWF4SGVpZ2h0OiBudW1iZXIsIGZvcm1hdD86IHN0cmluZyk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9zbGlkZXMvJHtzbGlkZUlkfS9sYWJlbC9tYXhfc2l6ZS8ke21heFdpZHRofS8ke21heEhlaWdodH1gLCB7XHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZV9mb3JtYXQ6IGZvcm1hdFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6IFwiYmxvYlwiXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkVGlsZShzbGlkZUlkOiBzdHJpbmcsIGxldmVsOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCBmb3JtYXQ/OiBzdHJpbmcpOiBQcm9taXNlPEJsb2I+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvc2xpZGVzLyR7c2xpZGVJZH0vdGlsZS9sZXZlbC8ke2xldmVsfS90aWxlLyR7eH0vJHt5fWAsIHtcclxuICAgICAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgICAgICAgIGltYWdlX2Zvcm1hdDogZm9ybWF0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJibG9iXCJcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBHbG9iYWxTdG9yYWdlIGZyb20gXCIuLi9yYXRpb25haS9nbG9iYWwtc3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBHbG9iYWxJdGVtIH0gZnJvbSBcIi4uL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtXCI7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlIH0gZnJvbSBcIi4uL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtLXJlZmVyZW5jZS10eXBlXCI7XHJcbmltcG9ydCB7IE1hc2tNZXRhZGF0YSB9IGZyb20gXCIuL3R5cGVzL21hc2stbWV0YWRhdGFcIjtcclxuaW1wb3J0IHsgU2hhZGVyLCBTbGlkZU1ldGFkYXRhIH0gZnJvbSBcIi4vdHlwZXMvc2xpZGUtbWV0YWRhdGFcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVUeXBlIH0gZnJvbSBcIi4vdHlwZXMvdGVtcGxhdGUtdHlwZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV3NpTWV0YWRhdGEge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2U7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogR2xvYmFsSXRlbSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgZGVmYXVsdFNsaWRlTWV0YWRhdGE6IFNsaWRlTWV0YWRhdGEgPSB7IHZpc3VhbGl6YXRpb246IHt9IH1cclxuICAgIHByaXZhdGUgZGVmYXVsdE1hc2tNZXRhZGF0YTogTWFza01ldGFkYXRhID0ge31cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBHbG9iYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTbGlkZVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0V3NpTWV0YWRhdGFJdGVtKHdzaUlkOiBzdHJpbmcsIGlzU2xpZGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICAgIGxldCBtZXRhZGF0YSA9IChhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoe3JlZmVyZW5jZXM6IFt3c2lJZF19KSkuZmluZCgocCkgPT4gcC5kYXRhX3R5cGUgPT09IGAke2lzU2xpZGUgPyBcInNsaWRlXCIgOiBcIm1hc2tcIn1fbWV0YWRhdGFgKTtcclxuICAgICAgaWYgKCFtZXRhZGF0YSkge1xyXG4gICAgICAgIG1ldGFkYXRhID0gIGF3YWl0IHRoaXMuY3JlYXRlV3NpTWV0YWRhdGFJdGVtKHdzaUlkLCBpc1NsaWRlID8gdGhpcy5kZWZhdWx0U2xpZGVNZXRhZGF0YSA6IHRoaXMuZGVmYXVsdE1hc2tNZXRhZGF0YSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbWV0YWRhdGFcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZVdzaU1ldGFkYXRhSXRlbSh3c2lJZDogc3RyaW5nLCB2YWx1ZTogYW55LCBpc1NsaWRlOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8R2xvYmFsSXRlbT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5jcmVhdGVWYWx1ZSh2YWx1ZSwgYE1ldGFkYXRhIG9mICR7aXNTbGlkZSA/IFwic2xpZGVcIiA6IFwibWFza1wifSAke3dzaUlkfWAsIHVuZGVmaW5lZCwgd3NpSWQsIEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlLldTSSwgYCR7aXNTbGlkZSA/IFwic2xpZGVcIiA6IFwibWFza1wifV9tZXRhZGF0YWApXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0U2xpZGVNZXRhZGF0YShzbGlkZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlTWV0YWRhdGE+IHtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoKGF3YWl0IHRoaXMuZ2V0V3NpTWV0YWRhdGFJdGVtKHNsaWRlSWQpKS52YWx1ZSBhcyBzdHJpbmcpXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlU2xpZGVNZXRhZGF0YShzbGlkZUlkOiBzdHJpbmcsIHZhbHVlOiBTbGlkZU1ldGFkYXRhKTogUHJvbWlzZTxTbGlkZU1ldGFkYXRhIHwgZmFsc2U+IHtcclxuICAgICAgY29uc3QgbWV0YWRhdGFJdGVtID0gYXdhaXQgdGhpcy5nZXRXc2lNZXRhZGF0YUl0ZW0oc2xpZGVJZCk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEl0ZW0gPSBhd2FpdCB0aGlzLmNvbnRleHQudXBkYXRlKG1ldGFkYXRhSXRlbS5pZCwgey4uLm1ldGFkYXRhSXRlbSwgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHZhbHVlKX0pXHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodXBkYXRlZEl0ZW0udmFsdWUpXHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0U2hhZGVyc0NvbmZpZyhzaGFkZXJzOiBTaGFkZXJbXSk6IFByb21pc2U8b2JqZWN0PiB7XHJcbiAgICAgIGNvbnN0IHNoYWRlcnNDb25maWcgPSB7fVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBzaGFkZXJUZW1wID0gYXdhaXQgdGhpcy5jb250ZXh0LnZpc1RlbXBsYXRlcy5nZXRUZW1wbGF0ZShUZW1wbGF0ZVR5cGUuU2hhZGVyLCBzaGFkZXJzW2ldLnNoYWRlclRlbXBsYXRlKTtcclxuICAgICAgICBzaGFkZXJzQ29uZmlnW3NoYWRlcnNbaV0uaWRdID0ge1xyXG4gICAgICAgICAgLi4uc2hhZGVyVGVtcCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHNoYWRlcnNbaV0ubmFtZSB8fCBzaGFkZXJzW2ldLmlkLFxyXG4gICAgICAgICAgICAgICAgZGF0YVJlZmVyZW5jZXM6IHNoYWRlcnNbaV0uZGF0YVJlZnMsXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzaGFkZXJzQ29uZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFZpc3VhbGl6YXRpb25zKHNsaWRlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgIGNvbnN0IHNsaWRlVmlzID0gKGF3YWl0IHRoaXMuZ2V0U2xpZGVNZXRhZGF0YShzbGlkZUlkKSkudmlzdWFsaXphdGlvbjtcclxuICAgICAgY29uc3QgdmlzdWFsaXphdGlvbnMgPSB7XHJcbiAgICAgICAgcGFyYW1zOiBzbGlkZVZpcy5wYXJhbXNUZW1wbGF0ZSA/IChhd2FpdCB0aGlzLmNvbnRleHQudmlzVGVtcGxhdGVzLmdldFRlbXBsYXRlKFRlbXBsYXRlVHlwZS5QYXJhbXMsIHNsaWRlVmlzLnBhcmFtc1RlbXBsYXRlKSB8fCB1bmRlZmluZWQpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGRhdGE6IHNsaWRlVmlzLmRhdGEsXHJcbiAgICAgICAgYmFja2dyb3VuZDoge1xyXG4gICAgICAgICAgLi4uKHNsaWRlVmlzLmJhY2tncm91bmQgPyBhd2FpdCB0aGlzLmNvbnRleHQudmlzVGVtcGxhdGVzLmdldFRlbXBsYXRlKFRlbXBsYXRlVHlwZS5CYWNrZ3JvdW5kLCBzbGlkZVZpcy5iYWNrZ3JvdW5kPy50ZW1wbGF0ZSkgOiB7fSksXHJcbiAgICAgICAgICBkYXRhOiBzbGlkZVZpcy5iYWNrZ3JvdW5kICYmIHNsaWRlVmlzLmJhY2tncm91bmQuZGF0YVJlZixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpc3VhbGl6YXRpb25zOiBzbGlkZVZpcy52aXN1YWxpemF0aW9ucyAmJiBhd2FpdCBQcm9taXNlLmFsbChzbGlkZVZpcy52aXN1YWxpemF0aW9ucy5tYXAoYXN5bmMgKHZpcykgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICh7XHJcbiAgICAgICAgICAgIC4uLmF3YWl0IHRoaXMuY29udGV4dC52aXNUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoVGVtcGxhdGVUeXBlLlZpc3VhbGl6YXRpb24sIHZpcy52aXNUZW1wbGF0ZSksXHJcbiAgICAgICAgICAgIG5hbWU6IHZpcy5uYW1lLFxyXG4gICAgICAgICAgICBzaGFkZXJzOiBhd2FpdCB0aGlzLmdldFNoYWRlcnNDb25maWcodmlzLnNoYWRlcnMpLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdmlzdWFsaXphdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTUFTS1xyXG5cclxuICAgIGFzeW5jIGdldE1hc2tNZXRhZGF0YShzbGlkZUlkOiBzdHJpbmcpOiBQcm9taXNlPE1hc2tNZXRhZGF0YT4ge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZSgoYXdhaXQgdGhpcy5nZXRXc2lNZXRhZGF0YUl0ZW0oc2xpZGVJZCwgZmFsc2UpKS52YWx1ZSBhcyBzdHJpbmcpXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tIFwiLi4vcmF0aW9uYWkvZ2xvYmFsLXN0b3JhZ2VcIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbSB9IGZyb20gXCIuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbVwiO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVR5cGUgfSBmcm9tIFwiLi90eXBlcy90ZW1wbGF0ZS10eXBlXCI7XHJcblxyXG5jb25zdCB0ZW1wbGF0ZXNHbG9iYWxJdGVtRGF0YVR5cGUgPSBcInZpc190ZW1wbGF0ZXNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlzdWFsaXphdGlvblRlbXBsYXRlcyB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogR2xvYmFsU3RvcmFnZTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBvYmplY3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBHbG9iYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmZXRjaFRlbXBsYXRlSXRlbSh0eXBlOiBUZW1wbGF0ZVR5cGUsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8R2xvYmFsSXRlbSB8IHVuZGVmaW5lZD4ge1xyXG4gICAgICByZXR1cm4gKGF3YWl0IHRoaXMuY29udGV4dC5xdWVyeSh7cmVmZXJlbmNlczogW251bGxdLCBkYXRhX3R5cGVzOiBbYCR7dGVtcGxhdGVzR2xvYmFsSXRlbURhdGFUeXBlfV8ke3R5cGV9YF19KSkuZmluZCgoaXRlbSkgPT4gaXRlbS5uYW1lID09PSBuYW1lKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFRlbXBsYXRlKHR5cGU6IFRlbXBsYXRlVHlwZSwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxvYmplY3QgfCBmYWxzZT4ge1xyXG4gICAgICBjb25zdCB0bXBsID0gYXdhaXQgdGhpcy5mZXRjaFRlbXBsYXRlSXRlbSh0eXBlLCBuYW1lKVxyXG4gICAgICBpZiAodG1wbCkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRtcGwudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjcmVhdGVUZW1wbGF0ZSh0eXBlOiBUZW1wbGF0ZVR5cGUsIG5hbWU6IHN0cmluZywgdmFsdWU6IG9iamVjdCk6IFByb21pc2U8b2JqZWN0IHwgZmFsc2U+IHtcclxuICAgICAgY29uc3QgZXhpc3RpbmdUbXBsID0gYXdhaXQgdGhpcy5mZXRjaFRlbXBsYXRlSXRlbSh0eXBlLCBuYW1lKVxyXG4gICAgICBpZiAoZXhpc3RpbmdUbXBsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQuY3JlYXRlVmFsdWUodmFsdWUsIGAke25hbWV9YCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYCR7dGVtcGxhdGVzR2xvYmFsSXRlbURhdGFUeXBlfV8ke3R5cGV9YClcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVUZW1wbGF0ZSh0eXBlOiBUZW1wbGF0ZVR5cGUsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICBjb25zdCBleGlzdGluZ1RtcGwgPSBhd2FpdCB0aGlzLmZldGNoVGVtcGxhdGVJdGVtKHR5cGUsIG5hbWUpXHJcbiAgICAgIGlmICghZXhpc3RpbmdUbXBsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5kZWxldGUoZXhpc3RpbmdUbXBsLmlkKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBIVFRQRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vc3JjL2Jhc2VcIjtcclxuaW1wb3J0IEdsb2JhbFN0b3JhZ2UgZnJvbSBcIi4uL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlXCI7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tIFwiLi4vcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW1cIjtcclxuaW1wb3J0IHsgQW5ub3RQcmVzZXQsIEFubm90UHJlc2V0T2JqZWN0IH0gZnJvbSBcIi4vdHlwZXMvYW5ub3QtcHJlc2V0XCI7XHJcblxyXG50eXBlIEFubm90UHJlc2V0R2V0UmVzdWx0ID0ge1xyXG4gIHByZXNldHM6IEFubm90UHJlc2V0W107XHJcbiAgbGFzdE1vZGlmaWVkQXQ6IG51bWJlcjtcclxufVxyXG5cclxudHlwZSBBbm5vdFByZXNldFVwZGF0ZVJlc3VsdCA9IHtcclxuICBwcmVzZXRzOiBBbm5vdFByZXNldFtdO1xyXG4gIHN1Y2Nlc3NmdWxVcGRhdGU6IGJvb2xlYW47XHJcbiAgbGFzdE1vZGlmaWVkQXQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5ub3RQcmVzZXRzIHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBHbG9iYWxTdG9yYWdlO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IEdsb2JhbEl0ZW0gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcHJlc2V0RGF0YVR5cGU6IHN0cmluZyA9IFwiYW5ub3RfcHJlc2V0c1wiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVzZWQgb25seSBpbiB0ZXN0c1xyXG4gICAgdXNlKHByZXNldERhdGFUeXBlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgdGhpcy5wcmVzZXREYXRhVHlwZSA9IHByZXNldERhdGFUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0UHJlc2V0c0l0ZW0oZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8R2xvYmFsSXRlbT4ge1xyXG4gICAgICBpZiAoIXRoaXMuZGF0YSB8fCBmcmVzaCkge1xyXG4gICAgICAgIGxldCBwcmVzZXRzSXRlbSA9IChhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoe3JlZmVyZW5jZXM6IFtudWxsXSwgZGF0YV90eXBlczogW3RoaXMucHJlc2V0RGF0YVR5cGVdfSkpLmZpbmQoKGl0ZW0pID0+IHRydWUpO1xyXG4gICAgICAgIGlmICghcHJlc2V0c0l0ZW0pIHtcclxuICAgICAgICAgIHByZXNldHNJdGVtID0gIGF3YWl0IHRoaXMuY3JlYXRlUHJlc2V0c0l0ZW0oe3ByZXNldHM6IFtdfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhID0gcHJlc2V0c0l0ZW07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlUHJlc2V0c0l0ZW0odmFsdWU6IEFubm90UHJlc2V0T2JqZWN0KTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQuY3JlYXRlVmFsdWUodmFsdWUsIGBHbG9iYWwgYW5ub3RhdGlvbiBwcmVzZXRzYCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcy5wcmVzZXREYXRhVHlwZSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRBbm5vdFByZXNldHMoZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8QW5ub3RQcmVzZXRHZXRSZXN1bHQ+IHtcclxuICAgICAgY29uc3QgcHJlc2V0SXRlbSA9IGF3YWl0IHRoaXMuZ2V0UHJlc2V0c0l0ZW0oZnJlc2gpO1xyXG4gICAgICByZXR1cm4ge3ByZXNldHM6IChKU09OLnBhcnNlKHByZXNldEl0ZW0udmFsdWUgYXMgc3RyaW5nKSBhcyBBbm5vdFByZXNldE9iamVjdCkucHJlc2V0cywgbGFzdE1vZGlmaWVkQXQ6IHByZXNldEl0ZW0ubW9kaWZpZWRfYXR9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWVyZ2VQcmVzZXRzKHByaW1hcnlBcnI6IEFubm90UHJlc2V0W10sIHNlY29uZGFyeUFycjogQW5ub3RQcmVzZXRbXSwgbG9jYWxWZXJzaW9uOiBudW1iZXIpOiBBbm5vdFByZXNldFtdIHtcclxuICAgICAgY29uc3QgbmV3QXJyID0gWy4uLnByaW1hcnlBcnJdO1xyXG4gICAgICAvLyBpdGVtIGZyb20gc2Vjb25kYXJ5IGFycmF5IGlzIHB1c2hlZCBvbmx5IGlmIGl0ZW0gd2l0aCB0aGUgc2FtZSBpZCBpcyBub3QgcHJlc2VudCBpbiBwcmltYXJ5IGFycmF5LCBhbmQgY3JlYXRlZEF0IGRhdGUgaXMgYmlnZ2VyIHRoYW4gbG9jYWxWZXJzaW9uIGRhdGUsIG1lYW5pbmcgaXRlbSBpcyBuZXdcclxuICAgICAgc2Vjb25kYXJ5QXJyLmZvckVhY2goKHNlY0l0ZW0pID0+ICgobmV3QXJyLnNvbWUoKHByaW1JdGVtKSA9PiBwcmltSXRlbS5pZCA9PT0gc2VjSXRlbS5pZCkgfHwgIXNlY0l0ZW0uY3JlYXRlZEF0IHx8IHNlY0l0ZW0uY3JlYXRlZEF0IDw9IGxvY2FsVmVyc2lvbikgPyBudWxsIDogbmV3QXJyLnB1c2goc2VjSXRlbSkpKVxyXG4gICAgcmV0dXJuIG5ld0FycjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGVBbm5vdFByZXNldHModmFsdWU6IEFubm90UHJlc2V0W10sIGxvY2FsVmVyc2lvbjogbnVtYmVyLCBmYWlsT25QYXJhbGxlbFVwZGF0ZTogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxBbm5vdFByZXNldFVwZGF0ZVJlc3VsdD4ge1xyXG4gICAgICAvLyBmZXRjaCBmcmVzaCBwcmVzZXRzXHJcbiAgICAgIGNvbnN0IHJlbW90ZVByZXNldHNJdGVtID0gYXdhaXQgdGhpcy5nZXRQcmVzZXRzSXRlbSh0cnVlKTtcclxuICAgICAgY29uc3QgcmVtb3RlUHJlc2V0cyA9IChKU09OLnBhcnNlKHJlbW90ZVByZXNldHNJdGVtLnZhbHVlIGFzIHN0cmluZykgYXMgQW5ub3RQcmVzZXRPYmplY3QpLnByZXNldHM7XHJcblxyXG4gICAgICBsZXQgbG9jYWxQcmVzZXRzID0gdmFsdWU7XHJcbiAgICAgIGxldCBzdWNjZXNzZnVsVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgIGlmKHJlbW90ZVByZXNldHNJdGVtLm1vZGlmaWVkX2F0ICE9PSBsb2NhbFZlcnNpb24pIHtcclxuICAgICAgICBpZihmYWlsT25QYXJhbGxlbFVwZGF0ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIHsgcHJlc2V0czogcmVtb3RlUHJlc2V0cywgc3VjY2Vzc2Z1bFVwZGF0ZTogZmFsc2UsIGxhc3RNb2RpZmllZEF0OiByZW1vdGVQcmVzZXRzSXRlbS5tb2RpZmllZF9hdH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbG9jYWxQcmVzZXRzID0gdGhpcy5tZXJnZVByZXNldHMocmVtb3RlUHJlc2V0cywgbG9jYWxQcmVzZXRzLCBsb2NhbFZlcnNpb24pO1xyXG4gICAgICAgIHN1Y2Nlc3NmdWxVcGRhdGUgPSBmYWxzZVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnVwZGF0ZShyZW1vdGVQcmVzZXRzSXRlbS5pZCwgey4uLnJlbW90ZVByZXNldHNJdGVtLCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoe3ByZXNldHM6IGxvY2FsUHJlc2V0c30pfSlcclxuICAgICAgICBjb25zdCB1cGRhdGVkUHJlc2V0cyA9ICAoSlNPTi5wYXJzZSh1cGRhdGVkSXRlbS52YWx1ZSkgYXMgQW5ub3RQcmVzZXRPYmplY3QpLnByZXNldHM7XHJcbiAgICAgICAgcmV0dXJuIHtwcmVzZXRzOiB1cGRhdGVkUHJlc2V0cywgc3VjY2Vzc2Z1bFVwZGF0ZTogc3VjY2Vzc2Z1bFVwZGF0ZSwgbGFzdE1vZGlmaWVkQXQ6IHVwZGF0ZWRJdGVtLm1vZGlmaWVkX2F0fVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYoKGUgYXMgSFRUUEVycm9yKS5zdGF0dXNDb2RlID09PSA0MDkpIHtcclxuICAgICAgICAgIGNvbnN0IHJldHJ5QXR0ZW1wdCA9ICBhd2FpdCB0aGlzLnVwZGF0ZUFubm90UHJlc2V0cyhsb2NhbFByZXNldHMsIHJlbW90ZVByZXNldHNJdGVtLm1vZGlmaWVkX2F0KTtcclxuICAgICAgICAgIHJldHVybiB7Li4ucmV0cnlBdHRlbXB0LCBzdWNjZXNzZnVsVXBkYXRlOiBzdWNjZXNzZnVsVXBkYXRlfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlQW5ub3RQcmVzZXRzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBjb25zdCBwcmVzZXRzSXRlbSA9IGF3YWl0IHRoaXMuZ2V0UHJlc2V0c0l0ZW0odHJ1ZSk7XHJcbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5kZWxldGUocHJlc2V0c0l0ZW0uaWQpO1xyXG4gICAgICB0aGlzLmRhdGEgPSBudWxsO1xyXG4gICAgfVxyXG4gIFxyXG59IiwiaW1wb3J0IEdsb2JhbFN0b3JhZ2UgZnJvbSBcIi4uL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlXCI7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tIFwiLi4vcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW1cIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUgfSBmcm9tIFwiLi4vcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEpvYkNvbmZpZyB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogR2xvYmFsU3RvcmFnZTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBvYmplY3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnRGF0YVR5cGU6IHN0cmluZyA9IFwiYXBwX2pvYl9jb25maWdcIjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBHbG9iYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvLyB1c2VkIG9ubHkgaW4gdGVzdHNcclxuICAgIHVzZShjb25maWdEYXRhVHlwZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuY29uZmlnRGF0YVR5cGUgPSBjb25maWdEYXRhVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGZldGNoSm9iQ29uZmlnSXRlbShhcHBJZDogc3RyaW5nKTogUHJvbWlzZTxHbG9iYWxJdGVtIHwgdW5kZWZpbmVkPiB7XHJcbiAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5jb250ZXh0LnF1ZXJ5KHtyZWZlcmVuY2VzOiBbYXBwSWRdLCBkYXRhX3R5cGVzOiBbdGhpcy5jb25maWdEYXRhVHlwZV19KSkuZmluZChCb29sZWFuKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEpvYkNvbmZpZyhhcHBJZDogc3RyaW5nKTogUHJvbWlzZTxvYmplY3QgfCBmYWxzZT4ge1xyXG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy5mZXRjaEpvYkNvbmZpZ0l0ZW0oYXBwSWQpXHJcbiAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoaXRlbS52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZUpvYkNvbmZpZyhhcHBJZDogc3RyaW5nLCB2YWx1ZTogb2JqZWN0KTogUHJvbWlzZTxvYmplY3QgfCBmYWxzZT4ge1xyXG4gICAgICBjb25zdCBleGlzdGluZ0NvbmZpZyA9IGF3YWl0IHRoaXMuZmV0Y2hKb2JDb25maWdJdGVtKGFwcElkKTtcclxuICAgICAgaWYgKGV4aXN0aW5nQ29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQuY3JlYXRlVmFsdWUodmFsdWUsIGBKb2IgY29uZmlnIG9mIEFwcGAsIHVuZGVmaW5lZCwgYXBwSWQsIEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlLkpPQiwgdGhpcy5jb25maWdEYXRhVHlwZSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVKb2JDb25maWcoYXBwSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICBjb25zdCBleGlzdGluZ0NvbmZpZyA9IGF3YWl0IHRoaXMuZmV0Y2hKb2JDb25maWdJdGVtKGFwcElkKVxyXG4gICAgICBpZiAoIWV4aXN0aW5nQ29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5kZWxldGUoZXhpc3RpbmdDb25maWcuaWQpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCBSYXRpb25BSSBmcm9tIFwiLi9yYXRpb25haVwiO1xyXG5pbXBvcnQgeyBHbG9iYWxJdGVtIH0gZnJvbSBcIi4vdHlwZXMvZ2xvYmFsLWl0ZW1cIjtcclxuaW1wb3J0IHsgR2xvYmFsU3RvcmFnZVF1ZXJ5IH0gZnJvbSBcIi4vdHlwZXMvZ2xvYmFsLXN0b3JhZ2UtcXVlcnlcIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbUxpc3QgfSBmcm9tIFwiLi90eXBlcy9nbG9iYWwtaXRlbS1saXN0XCI7XHJcbmltcG9ydCB7IFBvc3RHbG9iYWxJdGVtcyB9IGZyb20gXCIuL3R5cGVzL3Bvc3QtZ2xvYmFsLWl0ZW1zXCI7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1zIH0gZnJvbSBcIi4vdHlwZXMvZ2xvYmFsLWl0ZW1zXCI7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlIH0gZnJvbSBcIi4vdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGVcIjtcclxuaW1wb3J0IHsgUG9zdEdsb2JhbEl0ZW0gfSBmcm9tIFwiLi90eXBlcy9wb3N0LWdsb2JhbC1pdGVtXCI7XHJcbmltcG9ydCB7IEdsb2JhbERhdGFDcmVhdG9yVHlwZSB9IGZyb20gXCIuL3R5cGVzL2dsb2JhbC1kYXRhLWNyZWF0b3ItdHlwZVwiO1xyXG5pbXBvcnQgeyBQdXRHbG9iYWxJdGVtIH0gZnJvbSBcIi4vdHlwZXMvcHV0LWdsb2JhbC1pdGVtXCI7XHJcbmltcG9ydCBXc2lNZXRhZGF0YSBmcm9tIFwiLi4vZXh0ZW5zaW9ucy93c2ktbWV0YWRhdGFcIjtcclxuaW1wb3J0IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXMgZnJvbSBcIi4uL2V4dGVuc2lvbnMvdmlzdWFsaXphdGlvbi10ZW1wbGF0ZXNcIjtcclxuaW1wb3J0IEFubm90UHJlc2V0cyBmcm9tIFwiLi4vZXh0ZW5zaW9ucy9hbm5vdC1wcmVzZXRzXCI7XHJcbmltcG9ydCBKb2JDb25maWcgZnJvbSBcIi4uL2V4dGVuc2lvbnMvam9iLWNvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2xvYmFsU3RvcmFnZSB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUmF0aW9uQUk7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogR2xvYmFsSXRlbSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHdzaU1ldGFkYXRhOiBXc2lNZXRhZGF0YTtcclxuICAgIHZpc1RlbXBsYXRlczogVmlzdWFsaXphdGlvblRlbXBsYXRlcztcclxuICAgIGFubm90UHJlc2V0czogQW5ub3RQcmVzZXRzO1xyXG4gICAgam9iQ29uZmlnOiBKb2JDb25maWc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogUmF0aW9uQUkpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIHRoaXMud3NpTWV0YWRhdGEgPSBuZXcgV3NpTWV0YWRhdGEodGhpcylcclxuICAgICAgICB0aGlzLnZpc1RlbXBsYXRlcyA9IG5ldyBWaXN1YWxpemF0aW9uVGVtcGxhdGVzKHRoaXMpXHJcbiAgICAgICAgdGhpcy5hbm5vdFByZXNldHMgPSBuZXcgQW5ub3RQcmVzZXRzKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuam9iQ29uZmlnID0gbmV3IEpvYkNvbmZpZyh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXQoaXRlbUlkOiBzdHJpbmcpOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgICAgY29uc3QgZ2xvYmFsSXRlbTogR2xvYmFsSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2dsb2JhbC1zdG9yYWdlLyR7aXRlbUlkfWApO1xyXG4gICAgICByZXR1cm4gZ2xvYmFsSXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRWYWx1ZShpdGVtSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLmdldChpdGVtSWQpXHJcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoaXRlbS52YWx1ZSk7XHJcbiAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gaXRlbS52YWx1ZVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHF1ZXJ5KHF1ZXJ5OiBHbG9iYWxTdG9yYWdlUXVlcnkpOiBQcm9taXNlPEdsb2JhbEl0ZW1bXT4ge1xyXG4gICAgICBjb25zdCBkYXRhOiBHbG9iYWxJdGVtTGlzdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2dsb2JhbC1zdG9yYWdlL3F1ZXJ5YCwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgYm9keTogcXVlcnksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGRhdGEuaXRlbXNcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjcmVhdGUoaXRlbXM6IFBvc3RHbG9iYWxJdGVtcyk6IFByb21pc2U8R2xvYmFsSXRlbXM+IHtcclxuICAgICAgY29uc3QgY3JlYXRlZEl0ZW1zOiBHbG9iYWxJdGVtcyA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2dsb2JhbC1zdG9yYWdlYCwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgIGJvZHk6IGl0ZW1zLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiBjcmVhdGVkSXRlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY3JlYXRlVmFsdWUodmFsdWU6IGFueSwgbmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbj86IHN0cmluZywgcmVmZXJlbmNlX2lkPzogc3RyaW5nLCByZWZlcmVuY2VfdHlwZT86IEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlLCBkYXRhX3R5cGU/OiBzdHJpbmcpOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcblxyXG4gICAgICBjb25zdCBuZXdJdGVtOiBQb3N0R2xvYmFsSXRlbSA9IHtcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBjcmVhdG9yX2lkOiB0aGlzLmNvbnRleHQudXNlcklkLFxyXG4gICAgICAgICAgY3JlYXRvcl90eXBlOiBHbG9iYWxEYXRhQ3JlYXRvclR5cGUuVVNFUixcclxuICAgICAgICAgIHJlZmVyZW5jZV9pZDogcmVmZXJlbmNlX2lkLFxyXG4gICAgICAgICAgcmVmZXJlbmNlX3R5cGU6IHJlZmVyZW5jZV90eXBlLFxyXG4gICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcclxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcclxuICAgICAgICAgIGRhdGFfdHlwZTogZGF0YV90eXBlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZShuZXdJdGVtKSBhcyBHbG9iYWxJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZShpdGVtSWQ6IHN0cmluZywgaXRlbTogUHV0R2xvYmFsSXRlbSk6IFByb21pc2U8R2xvYmFsSXRlbT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbTogR2xvYmFsSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2dsb2JhbC1zdG9yYWdlLyR7aXRlbUlkfWAsIHtcclxuICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgIGJvZHk6IGl0ZW0sXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdXBkYXRlZEl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlVmFsdWUoaXRlbUlkOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgICAgY29uc3QgaXRlbTogR2xvYmFsSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2dsb2JhbC1zdG9yYWdlLyR7aXRlbUlkfWApO1xyXG4gICAgICBpdGVtLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvZ2xvYmFsLXN0b3JhZ2UvJHtpdGVtSWR9YCwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgYm9keTogaXRlbSxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB1cGRhdGVkSXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGUoaXRlbUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvZ2xvYmFsLXN0b3JhZ2UvJHtpdGVtSWR9YCwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge1Jhd09wdGlvbnN9IGZyb20gXCIuLi8uLi9iYXNlXCI7XHJcbmltcG9ydCBSb290IGZyb20gXCIuLi9yb290L3Jvb3RcIjtcclxuaW1wb3J0IEdsb2JhbFN0b3JhZ2UgZnJvbSBcIi4vZ2xvYmFsLXN0b3JhZ2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhdGlvbkFJIHtcclxuICAgIHN0YXRpYyByZWxhdGl2ZUFwaVBhdGggPSAnL3JhdGlvbmFpJztcclxuXHJcbiAgICBjb250ZXh0OiBSb290O1xyXG5cclxuICAgIC8vY3VzdG9tXHJcbiAgICBnbG9iYWxTdG9yYWdlOiBHbG9iYWxTdG9yYWdlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJvb3QpIHtcclxuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgICAgdGhpcy5nbG9iYWxTdG9yYWdlID0gbmV3IEdsb2JhbFN0b3JhZ2UodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzZXJJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQudXNlcklkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJhd1F1ZXJ5KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnM9e30pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQucmF3UXVlcnkoYCR7UmF0aW9uQUkucmVsYXRpdmVBcGlQYXRofSR7ZW5kcG9pbnR9YCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtFbXBhdGlvbkFQSU9wdGlvbnMsIFJhd0FQSSwgUmF3T3B0aW9uc30gZnJvbSBcIi4uLy4uL2Jhc2VcIjtcclxuaW1wb3J0IHtSb290QVBJfSBmcm9tIFwiLi4vLi4vcm9vdFwiO1xyXG5pbXBvcnQgU2NvcGUgZnJvbSBcIi4uL3Njb3BlL3Njb3BlXCI7XHJcbmltcG9ydCBBcHBzIGZyb20gXCIuL2FwcHNcIjtcclxuaW1wb3J0IENhc2VzIGZyb20gXCIuL2Nhc2VzXCI7XHJcbmltcG9ydCBFeGFtaW5hdGlvbnMgZnJvbSBcIi4vZXhhbWluYXRpb25zXCI7XHJcbmltcG9ydCBTbGlkZXMgZnJvbSBcIi4vc2xpZGVzXCI7XHJcbmltcG9ydCBSYXRpb25BSSBmcm9tIFwiLi4vcmF0aW9uYWkvcmF0aW9uYWlcIjtcclxuaW1wb3J0IHsgV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24gfSBmcm9tIFwiLi90eXBlcy93b3JrYmVuY2gtc2VydmljZS1hcGktdi0zLWN1c3RvbS1tb2RlbHMtZXhhbWluYXRpb25zLWV4YW1pbmF0aW9uXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb290IGV4dGVuZHMgUm9vdEFQSSB7XHJcbiAgICBzdGF0aWMgYXBpUGF0aCA9ICcvdjMnO1xyXG5cclxuICAgIC8vaW50ZXJmYWNlXHJcbiAgICBwcm90ZWN0ZWQgcmF3OiBSYXdBUEk7XHJcbiAgICBwcm90ZWN0ZWQgZGVmYXVsdFNjb3BlS2V5OiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgcmF0aW9uYWk6IFJhdGlvbkFJO1xyXG4gICAgdmVyc2lvbjogc3RyaW5nO1xyXG4gICAgcm9vdFVSSTogc3RyaW5nO1xyXG4gICAgXHJcbiAgICBzY29wZXM6IE1hcDxzdHJpbmcsIFNjb3BlPjtcclxuXHJcbiAgICAvL2N1c3RvbVxyXG4gICAgYXBwczogQXBwcztcclxuICAgIGNhc2VzOiBDYXNlcztcclxuICAgIGV4YW1pbmF0aW9uczogRXhhbWluYXRpb25zO1xyXG4gICAgc2xpZGVzOiBTbGlkZXM7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogRW1wYXRpb25BUElPcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gXCJ2M1wiO1xyXG4gICAgICAgIHRoaXMucm9vdFVSSSA9IHRoaXMub3B0aW9ucy5hcGlVcmwgKyBSb290LmFwaVBhdGg7XHJcbiAgICAgICAgdGhpcy5yYXcgPSBuZXcgUmF3QVBJKHRoaXMucm9vdFVSSSk7XHJcbiAgICAgICAgdGhpcy5yYXRpb25haSA9IG5ldyBSYXRpb25BSSh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5hcHBzID0gbmV3IEFwcHModGhpcyk7XHJcbiAgICAgICAgdGhpcy5jYXNlcyA9IG5ldyBDYXNlcyh0aGlzKTtcclxuICAgICAgICB0aGlzLmV4YW1pbmF0aW9ucyA9IG5ldyBFeGFtaW5hdGlvbnModGhpcyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXMgPSBuZXcgU2xpZGVzKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLnNjb3BlcyA9IG5ldyBNYXA8c3RyaW5nLCBTY29wZT4oKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGVmYXVsdFNjb3BlKCk6IFNjb3BlIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY29wZXMuZ2V0KHRoaXMuZGVmYXVsdFNjb3BlS2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIG5ld1Njb3BlRnJvbShleGFtaW5hdGlvbjogV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24pIHtcclxuICAgICAgICBjb25zdCBzY29wZSA9IG5ldyBTY29wZSh0aGlzKTtcclxuICAgICAgICBhd2FpdCBzY29wZS5mcm9tKGV4YW1pbmF0aW9uKTtcclxuICAgICAgICB0aGlzLnNjb3Blcy5zZXQoZXhhbWluYXRpb24uaWQsIHNjb3BlKTtcclxuICAgICAgICBpZih0aGlzLmRlZmF1bHRTY29wZUtleSA9PT0gXCJcIikgdGhpcy5kZWZhdWx0U2NvcGVLZXkgPSBleGFtaW5hdGlvbi5pZDtcclxuICAgICAgICByZXR1cm4gc2NvcGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBuZXdTY29wZVVzZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBzY29wZSA9IG5ldyBTY29wZSh0aGlzKTtcclxuICAgICAgICBhd2FpdCBzY29wZS51c2UoY2FzZUlkLCBhcHBJZCk7XHJcbiAgICAgICAgdGhpcy5zY29wZXMuc2V0KHNjb3BlLmFjdGl2ZUV4YW1pbmF0aW9uSWQsIHNjb3BlKTtcclxuICAgICAgICBpZih0aGlzLmRlZmF1bHRTY29wZUtleSA9PT0gXCJcIikgdGhpcy5kZWZhdWx0U2NvcGVLZXkgPSBzY29wZS5hY3RpdmVFeGFtaW5hdGlvbklkO1xyXG4gICAgICAgIHJldHVybiBzY29wZTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRTY29wZUZyb20oZXhhbWluYXRpb246IFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGVzLmdldChleGFtaW5hdGlvbi5pZCkgfHwgYXdhaXQgdGhpcy5uZXdTY29wZUZyb20oZXhhbWluYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFNjb3BlVXNlKGNhc2VJZDogc3RyaW5nLCBhcHBJZD86IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoaW5nU2NvcGVzID0gWy4uLnRoaXMuc2NvcGVzLnZhbHVlcygpXS5maWx0ZXIoKHNjcCkgPT4gc2NwLmFjdGl2ZUNhc2VJZCA9PT0gY2FzZUlkICYmIChhcHBJZCA/IHNjcC5hY3RpdmVBcHBJZCA9PT0gYXBwSWQgOiB0cnVlKSk7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nU2NvcGVzLmxlbmd0aCA+IDAgPyBtYXRjaGluZ1Njb3Blc1swXSA6IGF3YWl0IHRoaXMubmV3U2NvcGVVc2UoY2FzZUlkLCBhcHBJZClcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSYXdPcHRpb25zPXt9KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBhd2FpdCBzdXBlci5yYXdRdWVyeShlbmRwb2ludCwgb3B0aW9ucyk7XHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVyc1tcIlVzZXItSWRcIl0gPSB0aGlzLnVzZXJJZDtcclxuICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IG9wdGlvbnMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddIHx8IGBCZWFyZXIgJHt0aGlzLnJhd1Rva2VufWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5odHRwKGVuZHBvaW50LCBvcHRpb25zKTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiRXZlbnRTb3VyY2UiLCJldmVudHMiLCJhZGRPbmNlSGFuZGxlciIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJ1c2VyRGF0YSIsInRpbWVzIiwicHJpb3JpdHkiLCJzZWxmIiwidGhpcyIsImNvdW50Iiwib25jZUhhbmRsZXIiLCJldmVudCIsInJlbW92ZUhhbmRsZXIiLCJhZGRIYW5kbGVyIiwiaXNGdW5jdGlvbiIsImluZGV4IiwibGVuZ3RoIiwiaGFuZGxlcnMiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwicHVzaCIsIm51bWJlck9mSGFuZGxlcnMiLCJyZW1vdmVBbGxIYW5kbGVycyIsImV2ZW50VHlwZSIsImdldEhhbmRsZXIiLCJhcHBseSIsInNvdXJjZSIsImFyZ3MiLCJldmVudFNvdXJjZSIsImdldEF3YWl0aW5nSGFuZGxlciIsIlByb21pc2UiLCJyZXNvbHZlIiwibG9vcCIsInJlc3VsdCIsInR5cGUiLCJ0aGVuIiwicmFpc2VFdmVudCIsImV2ZW50QXJncyIsInJhaXNlRXZlbnRBd2FpdGluZyIsImF3YWl0aW5nSGFuZGxlciIsIlN0cmluZyIsImNsYXNzMnR5cGUiLCJ0b1N0cmluZyIsIlNUQVRVU19DT0RFUyIsIkhUVFBFcnJvciIsIkVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJleHRyYXMiLCJzdXBlciIsImFyZ3VtZW50cyIsImFzc2lnbiIsIm5hbWUiLCJzdWZmaXgiLCJyZXBsYWNlIiwic3BsaXQiLCJyZWR1Y2UiLCJhY2MiLCJjIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImh0dHBFcnJvclRvTmFtZSIsInN0YXR1c0NvZGUiLCJSYXdBUEkiLCJjb25zdHJ1Y3RvciIsInVybCIsIm9wdGlvbnMiLCJfcGFyc2VRdWVyeVBhcmFtcyIsInBhcmFtcyIsInVuZGVmaW5lZCIsImsiLCJ2IiwiVVJMU2VhcmNoUGFyYW1zIiwiX2ZldGNoIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwicmVzcG9uc2VUeXBlIiwiZSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJlcnJvciIsIm9rIiwiaHR0cCIsImVuZHBvaW50IiwiaGFzQm9keSIsInN0YXJ0c1dpdGgiLCJxdWVyeSIsIkpTT04iLCJzdHJpbmdpZnkiLCJBYnN0cmFjdEFQSSIsImdldENhbGxlck5hbWUiLCJvcmlnIiwicHJlcGFyZVN0YWNrVHJhY2UiLCJzdGFjayIsInJlcXVpcmVzIiwiZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCIsInRva2VuIiwiZXhwIiwiRGF0ZSIsIm5vdyIsInBhcnNlSnd0VG9rZW4iLCJwYXJzZSIsImF0b2IiLCJzbGVlcCIsIm1zIiwic2V0VGltZW91dCIsIkxvZ2dlciIsImNvbnNvbGUiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwiUm9vdENvbnRleHQiLCJSb290QVBJIiwiYWNjZXNzVG9rZW4iLCJfdG9rZW5FeHBpcmVzIiwiX3Jhd1Rva2VuIiwid29ya2JlbmNoQXBpVXJsIiwiYXBpVXJsIiwiYXBpUm9vdFBhdGgiLCJlbmRzV2l0aCIsImFub255bW91c1VzZXJJZCIsIl91c2VySWQiLCJjYWNoZWQiLCJmcm9tIiwid2l0aEV2ZW50IiwicmVzZXQiLCJ0b2tlblRpbWVvdXQiLCJ1c2VySWQiLCJzdWIiLCJ1c2UiLCJkZWZhdWx0U2NvcGVLZXkiLCJzY29wZXMiLCJmb3JFYWNoIiwic2NwIiwiY2xlYXIiLCJyYXdUb2tlbiIsInJhd1F1ZXJ5IiwiZXZlbnRPYmplY3QiLCJuZXdUb2tlbiIsIlNjb3BlQ29udGV4dCIsIlNjb3BlQVBJIiwiQXBwcyIsImNvbnRleHQiLCJkYXRhIiwiX2RlZmF1bHRBcHAiLCJsaXN0IiwiYXBwcyIsInRpc3N1ZXMiLCJzdGFpbnMiLCJqb2JfbW9kZXMiLCJhcHAiLCJpdGVtcyIsIm5hbWVfc2hvcnQiLCJ2ZW5kb3JfbmFtZSIsImdldE51bWJlciIsInZhcmlhYmxlIiwiTnVtYmVyIiwibWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwIiwic3RyIiwic2VwYXJhdG9yIiwiZ3JvdXBJZHgiLCJtYXRjaGVzIiwiUmVnRXhwIiwiZXhlYyIsIkNhc2VFeHBsb3JlciIsImN1c3RvbUNhc2VzIiwiY2FzZUhpZXJhcmNoeSIsImNhc2VUaXNzdWVzIiwiY2FzZVN0YWlucyIsImlkZW50aWZpZXJTZXBhcmF0b3IiLCJoaWVyYXJjaHlTcGVjIiwiZ2V0Q3VzdG9tQ2FzZXMiLCJtYXAiLCJjYXNlT2JqIiwicGF0aEluSGllcmFyY2h5IiwiZ2V0Q2FzZUhpZXJhcmNoeVBhdGgiLCJwYXRoRmluaXNoZWQiLCJwcmV2IiwiY3VyciIsInZhbCIsImdldENhc2VWYWx1ZSIsInJldHVyblZhbCIsImdldENhc2UiLCJjYXNlSWQiLCJmaW5kIiwiY3MiLCJpZCIsImdldENhc2VZZWFyIiwiZ2V0Q2FzZU1vbnRoIiwiZ2V0Q2FzZURheSIsImdldENhc2VEZXNjcmlwdGlvbiIsImdldENhc2VUaXNzdWVzIiwiZ2V0Q2FzZVN0YWlucyIsImlzTmFOIiwiZ2V0Q2FzZUlkZW50aWZpZXJQYXJ0IiwiZXZhbHVhdGVDYXNlVmFsdWUiLCJldmFsVmFsdWUiLCJjYXNlVmFsdWUiLCJldmF1bGF0ZUNhc2VZZWFyIiwiZXZhdWxhdGVDYXNlTW9udGgiLCJldmF1bGF0ZUNhc2VEYXkiLCJldmFsdWF0ZUNhc2VEZXNjcmlwdGlvbiIsImV2YWx1YXRlQ2FzZVRpc3N1ZXMiLCJldmFsdWF0ZUNhc2VTdGFpbnMiLCJldmF1bGF0ZUNhc2VJZGVudGlmaWVyUGFydCIsImVwb2NoVGltZSIsImNyZWF0ZWRfYXQiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsInBhcnRJZHgiLCJwYXJ0cyIsImxvY2FsX2lkIiwiZGVzY3JpcHRpb24iLCJrZXlzIiwic3RyaW5nVG9NYXRjaCIsInRva2VuU3RyaW5nIiwidG9rZW5zIiwiZmlsdGVyIiwiQm9vbGVhbiIsInNlYXJjaFRlcm1SZWdleCIsImpvaW4iLCJtYXRjaCIsIm1hdGNoU3RyaW5nT25Ub2tlbnMiLCJldmVyeSIsInRpc3N1ZSIsImluY2x1ZGVzIiwic3RhaW4iLCJoaWVyYXJjaHlMZXZlbCIsImtleUlkeCIsImNhc2VzIiwiY3VycmVudEhpZXJhcmNoeVBhdGgiLCJsZXZlbE5hbWUiLCJsYXN0TGV2ZWwiLCJncm91cHMiLCJpdGVtIiwiaGllcmFyY2h5Iiwic2VhcmNoIiwiZmlsdGVyZWRDYXNlcyIsImxvY2FsaXphdGlvbiIsImFsbFRpc3N1ZXMiLCJTZXQiLCJlbnRyaWVzIiwidGlzTmFtZSIsInRpc1ZhbHVlIiwibG9jTmFtZSIsInQiLCJhZGQiLCJhbGxTdGFpbnMiLCJzdG5OYW1lIiwic3RuVmFsdWUiLCJzIiwiV3NpRXhwbG9yZXIiLCJsYXN0Q2FzZUlkIiwic2xpZGVzRGF0YSIsIm1hc2tzRGF0YSIsIm1hc2tJZGVudGlmaWVyU2VwYXJhdG9yIiwibWFza0lkZW50aWZpZXJWYWx1ZSIsImdldEFsbFNsaWRlcyIsInNsaWRlcyIsInNsaWRlIiwibWFza3MiLCJDYXNlcyIsImNhc2VFeHBsb3JlciIsIndzaUV4cGxvcmVyIiwiRXhhbWluYXRpb25zIiwiY3JlYXRlIiwiYXBwSWQiLCJjYXNlX2lkIiwiYXBwX2lkIiwic2tpcCIsImxpbWl0IiwiZXhhbWluYXRpb25JZCIsInNjb3BlIiwiU3RvcmFnZSIsImdldFJhdyIsImZsdXNoIiwiY29udGVudCIsInNldCIsInZhbHVlUmF3IiwiZGF0YVJhdyIsImVyYXNlIiwiQW5ub3RhdGlvbnMiLCJ1cGxvYWQiLCJ1cGRhdGUiLCJkZWxldGUiLCJleHRlcm5hbElkcyIsIkNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbklkIiwiY29sbGVjdGlvbiIsInF1ZXJ5SXRlbXMiLCJjcmVhdGVJdGVtcyIsImRlbGV0ZUl0ZW0iLCJpdGVtSWQiLCJKb2JzIiwiZ2V0Sm9icyIsImpvYklkIiwiU2NvcGUiLCJzY29wZUNvbnRleHQiLCJfZGVmYXVsdEV4YW1pbmF0aW9uSWQiLCJfdG9rZW5SZWZldGNoSW50ZXJ2YWwiLCJhY3RpdmVFeGFtaW5hdGlvbklkIiwiYWN0aXZlQ2FzZUlkIiwiYWN0aXZlQXBwSWQiLCJyYXciLCJhcGlQYXRoIiwic3RvcmFnZSIsImFubm90YXRpb25zIiwiY29sbGVjdGlvbnMiLCJqb2JzIiwiZmluZEV4YW1pbmF0aW9uIiwiZXhhbWluYXRpb25zIiwiY3JlYXRvcnMiLCJpdGVtX2NvdW50IiwiZXhhbWluYXRpb24iLCJleCIsInN0YXRlIiwiZGVmYXVsdCIsInNjb3BlVG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJ0aW1lb3V0Iiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwic2NvcGVfaWQiLCJHbG9iYWxEYXRhQ3JlYXRvclR5cGUiLCJHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSIsIlRlbXBsYXRlVHlwZSIsIlNsaWRlcyIsInNsaWRlSW5mbyIsInNsaWRlSWQiLCJzbGlkZVRodW1ibmFpbCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiZm9ybWF0IiwiaW1hZ2VfZm9ybWF0Iiwic2xpZGVMYWJlbCIsImxvYWRUaWxlIiwibGV2ZWwiLCJ4IiwieSIsIldzaU1ldGFkYXRhIiwiZGVmYXVsdFNsaWRlTWV0YWRhdGEiLCJ2aXN1YWxpemF0aW9uIiwiZGVmYXVsdE1hc2tNZXRhZGF0YSIsImdldFdzaU1ldGFkYXRhSXRlbSIsIndzaUlkIiwiaXNTbGlkZSIsIm1ldGFkYXRhIiwicmVmZXJlbmNlcyIsInAiLCJkYXRhX3R5cGUiLCJjcmVhdGVXc2lNZXRhZGF0YUl0ZW0iLCJjcmVhdGVWYWx1ZSIsIldTSSIsImdldFNsaWRlTWV0YWRhdGEiLCJ1cGRhdGVTbGlkZU1ldGFkYXRhIiwibWV0YWRhdGFJdGVtIiwidXBkYXRlZEl0ZW0iLCJnZXRTaGFkZXJzQ29uZmlnIiwic2hhZGVycyIsInNoYWRlcnNDb25maWciLCJzaGFkZXJUZW1wIiwidmlzVGVtcGxhdGVzIiwiZ2V0VGVtcGxhdGUiLCJTaGFkZXIiLCJzaGFkZXJUZW1wbGF0ZSIsImRhdGFSZWZlcmVuY2VzIiwiZGF0YVJlZnMiLCJnZXRWaXN1YWxpemF0aW9ucyIsInNsaWRlVmlzIiwicGFyYW1zVGVtcGxhdGUiLCJQYXJhbXMiLCJiYWNrZ3JvdW5kIiwiQmFja2dyb3VuZCIsInRlbXBsYXRlIiwiZGF0YVJlZiIsInZpc3VhbGl6YXRpb25zIiwiYWxsIiwidmlzIiwiVmlzdWFsaXphdGlvbiIsInZpc1RlbXBsYXRlIiwiZ2V0TWFza01ldGFkYXRhIiwidGVtcGxhdGVzR2xvYmFsSXRlbURhdGFUeXBlIiwiVmlzdWFsaXphdGlvblRlbXBsYXRlcyIsImZldGNoVGVtcGxhdGVJdGVtIiwiZGF0YV90eXBlcyIsInRtcGwiLCJjcmVhdGVUZW1wbGF0ZSIsImRlbGV0ZVRlbXBsYXRlIiwiZXhpc3RpbmdUbXBsIiwiQW5ub3RQcmVzZXRzIiwicHJlc2V0RGF0YVR5cGUiLCJnZXRQcmVzZXRzSXRlbSIsImZyZXNoIiwicHJlc2V0c0l0ZW0iLCJjcmVhdGVQcmVzZXRzSXRlbSIsInByZXNldHMiLCJnZXRBbm5vdFByZXNldHMiLCJwcmVzZXRJdGVtIiwibGFzdE1vZGlmaWVkQXQiLCJtb2RpZmllZF9hdCIsIm1lcmdlUHJlc2V0cyIsInByaW1hcnlBcnIiLCJzZWNvbmRhcnlBcnIiLCJsb2NhbFZlcnNpb24iLCJuZXdBcnIiLCJzZWNJdGVtIiwic29tZSIsInByaW1JdGVtIiwiY3JlYXRlZEF0IiwidXBkYXRlQW5ub3RQcmVzZXRzIiwiZmFpbE9uUGFyYWxsZWxVcGRhdGUiLCJyZW1vdGVQcmVzZXRzSXRlbSIsInJlbW90ZVByZXNldHMiLCJsb2NhbFByZXNldHMiLCJzdWNjZXNzZnVsVXBkYXRlIiwicmV0cnlBdHRlbXB0IiwiZGVsZXRlQW5ub3RQcmVzZXRzIiwiSm9iQ29uZmlnIiwiY29uZmlnRGF0YVR5cGUiLCJmZXRjaEpvYkNvbmZpZ0l0ZW0iLCJnZXRKb2JDb25maWciLCJjcmVhdGVKb2JDb25maWciLCJKT0IiLCJkZWxldGVKb2JDb25maWciLCJleGlzdGluZ0NvbmZpZyIsIkdsb2JhbFN0b3JhZ2UiLCJ3c2lNZXRhZGF0YSIsImFubm90UHJlc2V0cyIsImpvYkNvbmZpZyIsImdldFZhbHVlIiwicmVmZXJlbmNlX2lkIiwicmVmZXJlbmNlX3R5cGUiLCJuZXdJdGVtIiwiY3JlYXRvcl9pZCIsImNyZWF0b3JfdHlwZSIsIlVTRVIiLCJ1cGRhdGVWYWx1ZSIsIlJhdGlvbkFJIiwiZ2xvYmFsU3RvcmFnZSIsInJlbGF0aXZlQXBpUGF0aCIsIlJvb3QiLCJ2ZXJzaW9uIiwicm9vdFVSSSIsInJhdGlvbmFpIiwiTWFwIiwiZGVmYXVsdFNjb3BlIiwibmV3U2NvcGVGcm9tIiwibmV3U2NvcGVVc2UiLCJnZXRTY29wZUZyb20iLCJnZXRTY29wZVVzZSIsIm1hdGNoaW5nU2NvcGVzIiwidmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==