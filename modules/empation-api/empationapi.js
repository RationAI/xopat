var EmpationAPI;(()=>{var t={732:t=>{function e(t){return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}e.keys=()=>[],e.resolve=e,e.id=732,t.exports=e}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";i.r(n),i.d(n,{AbstractAPI:()=>u,EventSource:()=>e,HTTPError:()=>o,Logger:()=>l,RawAPI:()=>a,RootAPI:()=>p,RootContext:()=>f,STATUS_CODES:()=>s,ScopeAPI:()=>y,ScopeContext:()=>v,V3:()=>t,getJwtTokenExpiresTimeout:()=>c,parseJwtToken:()=>d,sleep:()=>h});var t={};i.r(t),i.d(t,{Apps:()=>g,Cases:()=>C,Examinations:()=>_,RationAI:()=>rt,Root:()=>lt,Scope:()=>J,Slides:()=>B,Storage:()=>O});class e{constructor(){this.events={}}addOnceHandler(t,e,i,n,s){const r=this;n=n||1;let o=0;const a=function(i){return o++,o===n&&r.removeHandler(t,a),e(i)};this.addHandler(t,a,i,s)}addHandler(t,i,n=null,s=0){let r=this.events[t];if(r||(this.events[t]=r=[]),i&&e.isFunction(i)){let t=r.length,e={handler:i,userData:n||null,priority:s||0};for(r[t]=e;t>0&&r[t-1].priority<r[t].priority;)r[t]=r[t-1],r[t-1]=e,t--}}removeHandler(t,e){const i=this.events[t],n=[];if(i&&Array.isArray(i)){for(let t=0;t<i.length;t++)i[t].handler!==e&&n.push(i[t]);this.events[t]=n}}numberOfHandlers(t){const e=this.events[t];return e?e.length:0}removeAllHandlers(t){if(t)this.events[t]=[];else for(const t in this.events)this.events[t]=[]}getHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){let n,s=e.length;for(n=0;n<s;n++)e[n]&&(i.eventSource=t,i.userData=e[n].userData,e[n].handler(i))}):null}getAwaitingHandler(t){let i=this.events[t];return i&&i.length?(i=1===i.length?[i[0]]:Array.apply(null,i),function(t,n){return new Promise((s=>{const r=i.length;!function o(a){if(a>=r||!i[a])return s("Resolved!"),null;n.eventSource=t,n.userData=i[a].userData;let u=i[a].handler(n);return u=u&&"promise"===e.type(u)?u:Promise.resolve(),u.then((()=>o(a+1)))}(0)}))}):null}raiseEvent(t,e){const i=this.getHandler(t);if(i)return i(this,e||{})}raiseEventAwaiting(t,e){const i=this.getAwaitingHandler(t);return i?i(this,e||{}):Promise.resolve("No handler for this event registered.")}static isFunction(t){return"function"===this.type(t)}static type(t){return null==t?String(t):this.class2type[t.toString()]||("function"==typeof t?"function":"object")}}e.class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};const s={100:"Continue",101:"Switching protocols",102:"Processing",103:"Early Hints",200:"Ok",201:"Created",202:"Accepted",203:"Non Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Too Long",414:"Request Uri Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"Im A Teapot",419:"Insufficient Space On Resource",420:"Method Failure",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"Http Version Not Supported",507:"Insufficient Storage",511:"Network Authentication Required"};var r=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class o extends Error{constructor(t,e,i){super(e||s[t]||`HTTP Code ${t}`),arguments.length>=3&&i&&Object.assign(this,i),this.name=function(t){const e=4==(t/100|0)||5==(t/100|0)?"error":"";return` ${String(s[t]||`HTTP Code ${t}`).replace(/error$/i,"")} ${e}`.split(" ").reduce(((t,e)=>t+(e?e.charAt(0).toUpperCase()+e.slice(1):"")))}(t),this.statusCode=t}}class a{constructor(t,e={}){this.url=t,this.options=e}_parseQueryParams(t){if(t){if("string"==typeof t)return t;if(t.constructor===Object||void 0===t.constructor)for(let e in t){null==t[e]&&delete t[e]}return`?${new URLSearchParams(t)}`}return""}_fetch(t,e){return r(this,void 0,void 0,(function*(){const i=yield fetch(t,{method:e.method,headers:e.headers,body:e.body});let n;try{n=yield i[e.responseType||"json"]()}catch(e){throw new o(500,`Failed to parse response data. Original status: ${i.status} | ${i.statusText}`,{url:t,error:e})}if(!i.ok)throw new o(i.status,i.statusText,{payload:n});return n}))}http(t,e){return r(this,void 0,void 0,(function*(){const i=!!e.body;return e.method=e.method||(i?"POST":"GET"),t.startsWith("/")||(t=`/${t}`),e.query=this._parseQueryParams(e.query),e.headers=e.headers||{},e.headers["Content-Type"]="application/json",e.body&&"string"!=typeof e.body?e.body=JSON.stringify(e.body):e.body=void 0,yield this._fetch(this.url+t+e.query,e)}))}}class u extends e{getCallerName(){const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,e)=>e;const{stack:e}=new Error;Error.prepareStackTrace=t;return(null==e?void 0:e[2])||"unknown context"}requires(t,e){if(!e)throw`ArgumentError[${this.getCallerName()}] ${t} is missing - required property!`}}function c(t){return 1e3*t.exp-Date.now()||3e5}function d(t){return JSON.parse(atob(t.split(".")[1]))}function h(t){return new Promise((e=>setTimeout(e,t)))}class l{static error(...t){console.error("E:EmpationAPI",...t)}static warn(...t){console.warn("W:EmpationAPI",...t)}static info(...t){console.info("I:EmpationAPI",...t)}static debug(...t){console.debug("D:EmpationAPI",...t)}}class f{}class p extends u{constructor(t){if(super(),this.accessToken=null,this._tokenExpires=0,this._rawToken="",!t.workbenchApiUrl)throw"WB Api url is required!";let e;e=t.apiRootPath?t.apiRootPath.startsWith("/")?`${t.workbenchApiUrl}${t.apiRootPath}`:`${t.workbenchApiUrl}/${t.apiRootPath}`:t.workbenchApiUrl,e.endsWith("/")&&(e=e.slice(0,-1)),this.options={apiUrl:e,workbenchApiUrl:t.workbenchApiUrl,anonymousUserId:t.anonymousUserId||"anonymous",apiRootPath:t.apiRootPath||""},this._userId=this.options.anonymousUserId,this.cached={}}from(t,e=!0){if(!t)return this.reset();this._rawToken=t,e=e&&!this.accessToken,this.accessToken=d(t);const i=c(this.accessToken);this._tokenExpires=Date.now()+i/2;let n=this.accessToken.sub;if(!n)throw"Invalid User ID! Must be valid string shorter than 50 characters!";n.length>50&&(console.warn("User ID exceeded 50 characters! Using User ID shortened to first 50 characters!"),n=n.slice(0,50)),this.userId!==n&&(this._userId=n,e&&this.raiseEvent("init"))}use(t,e=!0){if(e=e&&!this._userId,this.reset(),!t||t.length>50)throw"Invalid User ID! Must be valid string shorter than 50 characters!";this._userId=t,e&&this.raiseEvent("init_no_token")}reset(){this._rawToken="",this._tokenExpires=0,this.accessToken=null,this._userId=this.options.anonymousUserId,this.defaultScopeKey="",this.scopes.forEach((t=>t.reset())),this.scopes.clear(),this.raiseEvent("reset")}get userId(){return this._userId}get rawToken(){return this._rawToken}rawQuery(t,e){return i=this,n=void 0,r=function*(){if(!this._userId)throw"User must be configured to access Empaia API: either provide a valid 'anonymous' user ID through env variables, or configure the Root API with a valid token.";if(this._tokenExpires>0&&Date.now()>this._tokenExpires){const t={newToken:""};yield this.raiseEventAwaiting("token-refresh",t),this.from(t.newToken)}},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{u(r.next(t))}catch(t){e(t)}}function a(t){try{u(r.throw(t))}catch(t){e(t)}}function u(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}u((r=r.apply(i,n||[])).next())}));var i,n,s,r}}class v{}class y extends u{}var m=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class g extends f{constructor(t){super(),this.data=null,this._defaultApp=null,this.context=t}list(){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:{apps:null,tissues:null,stains:null,job_modes:null}})}))}query(t){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:t})}))}default(){return m(this,void 0,void 0,(function*(){this.data||(yield this.list());for(let t of this.data.items)if("MAP3"===t.name_short&&"rationai"===t.vendor_name){this._defaultApp=t;break}if(!this._defaultApp)throw"Default APP not present in the infrastructure! Was it imported?";return this._defaultApp}))}}const x=t=>("string"==typeof t&&(t=Number(t)),t),w=(t,e,i,n)=>{const s=new RegExp(e).exec(t);return!(!s||i<1||i>=s.length)&&s[i]===n};var b=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class I{constructor(t,e){this.customCases=null,this.caseHierarchy=null,this.caseTissues=null,this.caseStains=null,this.identifierSeparator="",this.hierarchySpec=[],this.hierarchyNameOverrides={},this.context=t,this.integration=e}use(t,e,i={}){this.hierarchySpec=e,this.identifierSeparator=t,this.hierarchyNameOverrides=i}getCustomCases(){return b(this,void 0,void 0,(function*(){return this.customCases||(this.customCases=(yield this.context.list()).items.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:this.getCaseHierarchyPath(t)})))),this.customCases}))}getCaseHierarchyPath(t){if(!this.identifierSeparator||!this.hierarchySpec)throw"ArgumentError[CaseExplorer] identifierSeparator or hierarchySpec is missing - required property!";let e=!1;return this.hierarchySpec.reduce(((i,n)=>{const s=this.getCaseValue(n,t),r=e?i:`${i}/${s}`;return"OTHER"===s&&(e=!0),r}),"")}getCase(t){return b(this,void 0,void 0,(function*(){let e;return this.customCases&&(e=this.customCases.find((e=>e.id===t))),e||(e=yield this.context.get(t)),Object.assign(Object.assign({},e),{pathInHierarchy:this.getCaseHierarchyPath(e)})}))}getCaseValue(t,e){switch(t){case"year":return this.getCaseYear(e);case"month":return this.getCaseMonth(e);case"day":return this.getCaseDay(e);case"description":return this.getCaseDescription(e);case"tissues":return this.getCaseTissues(e);case"stains":return this.getCaseStains(e);default:if("id_part_"===t.slice(0,8)&&!isNaN(Number(t.slice(8))))return this.getCaseIdentifierPart(e,Number(t.slice(8)));throw`KeyError[CaseExplorer] "${t}" is not supported!`}}evaluateCaseValue(t,e,i){const n=this.getCaseValue(t,i);switch(t){case"year":return this.evaulateCaseYear(n,e);case"month":return this.evaulateCaseMonth(n,e);case"day":return this.evaulateCaseDay(n,e);case"description":return this.evaluateCaseDescription(n,e);case"tissues":return this.evaluateCaseTissues(n,e);case"stains":return this.evaluateCaseStains(n,e);default:return this.evaulateCaseIdentifierPart(n,e)}}getCaseYear(t){return(e=t.created_at,new Date(1e3*x(e)).getFullYear()).toString();var e}getCaseMonth(t){return(e=t.created_at,new Date(1e3*x(e)).getMonth()).toString();var e}getCaseDay(t){return(e=t.created_at,new Date(1e3*x(e)).getDate()).toString();var e}getCaseIdentifierPart(t,e){if(!this.identifierSeparator)throw"ArgumentError[CaseExplorer] identifierSeparator is missing - required property!";const i=new RegExp(this.identifierSeparator).exec(t.local_id||"");if(!i)return"OTHER";if(e<1||e>=i.length)throw'KeyError[CaseExplorer] invalid key "id_part_<index>", group index is not valid!';return i[e]}getCaseDescription(t){return t.description||""}getCaseTissues(t){return Object.keys(t.tissues)}getCaseStains(t){return Object.keys(t.stains)}evaulateCaseYear(t,e){return t===e}evaulateCaseMonth(t,e){return t===e}evaulateCaseDay(t,e){return t===e}evaulateCaseIdentifierPart(t,e){return t===e}evaluateCaseDescription(t,e){return((t,e)=>{const i=e.split(" ").filter(Boolean).map((t=>`(?=.*\\b${t}\\b)`)),n=new RegExp(i.join(""),"gim");return null!==t.match(n)})(t,e)}evaluateCaseTissues(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}evaluateCaseStains(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}hierarchyLevel(t,e,i,n,s,r,o){return b(this,void 0,void 0,(function*(){if(e>=t.length)return{levelId:s,levelName:r,lastLevel:!0,parent:o,items:i.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:n})))};const a=(u=i=>{const n=this.getCaseValue(t[e],i);return Array.isArray(n)?n[0]||"":n},i.reduce(((t,e)=>{var i;return(t[i=u(e)]||(t[i]=[])).push(e),t}),{}));var u;const c={levelName:r,levelId:s,lastLevel:!1,items:[]};return c.items=yield Promise.all(Object.keys(a).map((i=>b(this,void 0,void 0,(function*(){var s;let r=(null===(s=this.hierarchyNameOverrides[t[e]])||void 0===s?void 0:s[i])||(yield this.integration.translatePathSpec(t[e],i))||i;if("OTHER"===i){const e=yield this.hierarchyLevel(t,t.length,a[i],`${n}/${r}`,i,r);return e.parent=c,e}const o=yield this.hierarchyLevel(t,e+1,a[i],`${n}/${r}`,i,r);return o.parent=c,o}))))),c}))}hierarchy(){return b(this,void 0,void 0,(function*(){if(!this.caseHierarchy){const t=yield this.getCustomCases();this.caseHierarchy=yield this.hierarchyLevel(this.hierarchySpec,0,t,"")}return this.caseHierarchy}))}search(t){return b(this,void 0,void 0,(function*(){let e=yield this.getCustomCases();return t.forEach((({key:t,value:i})=>e=e.filter((e=>this.evaluateCaseValue(t,i,e))))),e}))}tissues(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseTissues){const e=yield this.getCustomCases(),i=[];e.forEach((e=>Object.entries(e.tissues).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.push(t))))),this.caseTissues=[...new Map(i.map((t=>[JSON.stringify([t.name,t.locName]),t]))).values()]}return this.caseTissues}))}stains(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseStains){const e=yield this.getCustomCases(),i=[];e.forEach((e=>Object.entries(e.stains).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.push(t))))),this.caseStains=[...new Map(i.map((t=>[JSON.stringify([t.name,t.locName]),t]))).values()]}return this.caseStains}))}}var T=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class P{constructor(t,e){this.lastCaseId=null,this.data=null,this.slidesData=null,this.masksData=null,this.maskIdentifierSeparator="",this.maskIdentifierValue="",this.context=t,this.integration=e}use(t,e){this.maskIdentifierSeparator=t,this.maskIdentifierValue=e}getAllSlides(t){return T(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.data||(this.data=(yield this.context.slides(t)).items),this.data}))}slides(t){return T(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.slidesData||(this.slidesData=(yield this.getAllSlides(t)).filter((t=>!w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.slidesData}))}masks(t){return T(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.masksData||(this.masksData=(yield this.getAllSlides(t)).filter((t=>w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.masksData}))}}var S=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class C extends f{constructor(t){super(),this.data=null,this.context=t,this.caseExplorer=new I(this,t.integration),this.wsiExplorer=new P(this,t.integration)}list(){return S(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/cases")),this.data}))}get(t){return S(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}`)}))}slides(t){return S(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}/slides`)}))}}var E=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class _ extends f{constructor(t){super(),this.data=null,this.context=t}create(t,e){return E(this,void 0,void 0,(function*(){const i=this.context;return i.requires("caseId",t),i.rawQuery("/examinations",{method:"PUT",body:{case_id:t,app_id:e}})}))}query(t,e,i){return E(this,void 0,void 0,(function*(){return this.context.rawQuery("/examinations/query",{method:"PUT",body:t,query:{skip:e,limit:i}})}))}get(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}`)}))}scope(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}/scope`,{method:"PUT"})}))}}var $=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class O extends v{constructor(t){super(),this.data=null,this.context=t}getRaw(){return $(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/app-ui-storage/user")),this.data}))}flush(){return $(this,void 0,void 0,(function*(){return this.data?yield this.context.rawQuery("/app-ui-storage/user",{method:"PUT",body:this.data}):null}))}get(t){return $(this,void 0,void 0,(function*(){const e=yield this.getRaw();return"string"==typeof e.content[t]?JSON.parse(e.content[t]):e.content[t]}))}set(t,e,i){return $(this,void 0,void 0,(function*(){const n=JSON.stringify(e),s=yield this.getRaw();s.content[t]=n,this.data=s,i&&this.flush()}))}erase(){return $(this,void 0,void 0,(function*(){this.data={content:{}},this.flush()}))}}var k=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class A extends v{constructor(t){super(),this.context=t}query(t,e=!0){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations/query",{method:"PUT",query:{with_classes:e},body:t})}))}get(t,e=!0){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/annotations/${t}`,{query:{with_classes:e}})}))}createMany(t,e={}){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:t})}))}create(t,e={}){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:t})}))}deleteById(t){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/annotations/${t}`,{method:"DELETE"})}))}delete(t){return k(this,void 0,void 0,(function*(){if(!t.id)throw"Cannot delete annotation without ID property!";const e=yield this.deleteById(t.id);if(t.classes)for(let e of t.classes)e.id&&(yield this.deleteClass(e.id));return e}))}update(t,e,i={}){return k(this,void 0,void 0,(function*(){return yield this.deleteById(t),!i.externalIds&&e.id&&(i.externalIds=!0),yield this.create(e,i)}))}addClass(t){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/classes",{method:"POST",body:t})}))}addClassMany(t){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/classes",{method:"POST",body:t})}))}getClass(t){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/classes/${t}`)}))}deleteClass(t){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/classes/${t}`,{method:"DELETE"})}))}queryClasses(t){return k(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/classes/query",{method:"PUT",body:t})}))}}var U=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class N extends v{constructor(t){super(),this.data=null,this.context=t}get(t){return U(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}`)}))}create(t){return U(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/collections",{method:"POST",body:t})}))}delete(t){return U(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}`,{method:"DELETE"})}))}queryItems(t,e){return U(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}/items/query`,{method:"PUT",body:e})}))}createItems(t,e){return U(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items`,{method:"POST",body:Object.assign({},e)})}))}deleteItem(t,e){return U(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items/${e}`,{method:"DELETE"})}))}}var j=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class D extends v{constructor(t){super(),this.data=null,this.context=t}getJobs(){return j(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/jobs")).items}))}get(t){return j(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/jobs/${t}`)}))}}var R=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class Q extends v{constructor(t){super(),this.data=null,this.context=t}get(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}`)}))}post(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/pixelmaps",{method:"POST",body:t})}))}delete(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}`,{method:"DELETE"})}))}query(t){return R(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/pixelmaps/query",{method:"PUT",body:t})).items}))}getTile(t,e,i,n){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{responseType:"blob"})}))}uploadTile(t,e,i,n,s){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{method:"PUT",body:s})}))}deleteTile(t,e,i,n){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{method:"DELETE"})}))}bulkGetTile(t,e,i,n,s,r){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/start/${i}/${n}/end/${s}/${r}/data`,{responseType:"blob"})}))}bulkUploadTile(t,e,i,n,s,r,o){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/start/${i}/${n}/end/${s}/${r}/data`,{method:"PUT",body:o})}))}}var q=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class M extends y{constructor(t){super(),this.scopeContext=null,this._defaultExaminationId="",this._tokenRefetchInterval=null,this.activeExaminationId="",this.activeCaseId="",this.activeAppId="",this.context=t,this.raw=new a(this.context.options.apiUrl+M.apiPath),this.storage=new O(this),this.annotations=new A(this),this.collections=new N(this),this.jobs=new D(this),this.pixelmaps=new Q(this)}use(t,e=void 0){return q(this,void 0,void 0,(function*(){this.requires("root::userId",this.context.userId);const i=e=>q(this,void 0,void 0,(function*(){let i=yield this.context.examinations.query({apps:[e],creators:[this.context.userId]});if(i.item_count>0){let t=i.items.find((t=>"OPEN"===t.state));if(t)return t}return yield this.context.examinations.create(t,e)}));let n;if(e?n=yield i(e):this._defaultExaminationId&&(n=yield this.context.examinations.get(this._defaultExaminationId)),!n){let t=yield this.context.apps.default();n=yield i(t.app_id),this._defaultExaminationId=n.id}yield this.from(n)}))}get scopeToken(){var t;return(null===(t=this.scopeContext)||void 0===t?void 0:t.access_token)||""}get id(){var t;return(null===(t=this.scopeContext)||void 0===t?void 0:t.scope_id)||""}from(t){return q(this,void 0,void 0,(function*(){this.reset(),this.scopeContext=yield this.context.examinations.scope(t.id),this.activeCaseId=t.case_id,this.activeAppId=t.app_id,this.activeExaminationId=t.id;const e=c(d(this.scopeContext.access_token));this._tokenRefetchInterval=setInterval((()=>q(this,void 0,void 0,(function*(){this.scopeContext=yield this.context.examinations.scope(t.id)}))),e),this.raiseEvent("init")}))}reset(){this.activeExaminationId="",this.scopeContext=null,this._tokenRefetchInterval&&(clearInterval(this._tokenRefetchInterval),this._tokenRefetchInterval=null,this.raiseEvent("reset"))}rawQuery(t,e){var i,n;return q(this,void 0,void 0,(function*(){this.requires("this.scopeContext",this.scopeContext),(e=e||{}).headers=e.headers||{},e.headers.Authorization=`Bearer ${null===(i=this.scopeContext)||void 0===i?void 0:i.access_token}`,t&&!t.startsWith("/")&&(t=`/${t}`);try{return yield this.raw.http(`/${null===(n=this.scopeContext)||void 0===n?void 0:n.scope_id}${t}`,e)}catch(i){if(401===i.statusCode)return this.scopeContext=yield this.context.examinations.scope(this.activeExaminationId),yield this.raw.http(`/${this.scopeContext.scope_id}${t}`,e);throw i}}))}}M.apiPath="/v3/scopes";const J=M;var H,L,V,F=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class B extends f{constructor(t){super(),this.data=null,this.context=t}slideInfo(t){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/info`)}))}slideThumbnail(t,e,i,n){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/thumbnail/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}slideLabel(t,e,i,n){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/label/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}loadTile(t,e,i,n,s){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/tile/level/${e}/tile/${i}/${n}`,{query:{image_format:s},responseType:"blob"})}))}}!function(t){t.USER="user",t.SCOPE="scope",t.JOB="job"}(H||(H={})),function(t){t.ANNOTATION="annotation",t.COLLECTION="collection",t.CLASS="class",t.PRIMITIVE="primitive",t.WSI="wsi",t.CASE="case",t.USER="user",t.SCOPE="scope",t.JOB="job"}(L||(L={})),function(t){t.Background="background",t.Params="params",t.Shader="shader",t.Visualization="visualization"}(V||(V={}));var z=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class W{constructor(t){this.data=null,this.defaultSlideMetadata={visualization:{}},this.defaultMaskMetadata={},this.context=t}getWsiMetadataItem(t,e=!0){return z(this,void 0,void 0,(function*(){let i=(yield this.context.query({references:[t]})).find((t=>t.data_type===(e?"slide":"mask")+"_metadata"));return i||(i=yield this.createWsiMetadataItem(t,e?this.defaultSlideMetadata:this.defaultMaskMetadata)),i}))}createWsiMetadataItem(t,e,i=!0){return z(this,void 0,void 0,(function*(){return yield this.context.createValue(e,`Metadata of ${i?"slide":"mask"} ${t}`,void 0,t,L.WSI,(i?"slide":"mask")+"_metadata")}))}getSlideMetadata(t){return z(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t)).value)}))}updateSlideMetadata(t,e){return z(this,void 0,void 0,(function*(){const i=yield this.getWsiMetadataItem(t);try{const t=yield this.context.update(i.id,Object.assign(Object.assign({},i),{value:JSON.stringify(e)}));return JSON.parse(t.value)}catch(t){return!1}}))}getShadersConfig(t){return z(this,void 0,void 0,(function*(){const e={};for(let i=0;i<t.length;i++){const n=yield this.context.visTemplates.getTemplate(V.Shader,t[i].shaderTemplate);e[t[i].id]=Object.assign(Object.assign({},n),{name:t[i].name||t[i].id,dataReferences:t[i].dataRefs})}return e}))}getVisualizations(t){var e;return z(this,void 0,void 0,(function*(){const i=(yield this.getSlideMetadata(t)).visualization;return{params:i.paramsTemplate&&(yield this.context.visTemplates.getTemplate(V.Params,i.paramsTemplate))||void 0,data:i.data,background:Object.assign(Object.assign({},i.background?yield this.context.visTemplates.getTemplate(V.Background,null===(e=i.background)||void 0===e?void 0:e.template):{}),{data:i.background&&i.background.dataRef}),visualizations:i.visualizations&&(yield Promise.all(i.visualizations.map((t=>z(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield this.context.visTemplates.getTemplate(V.Visualization,t.visTemplate)),{name:t.name,shaders:yield this.getShadersConfig(t.shaders)})}))))))}}))}getMaskMetadata(t){return z(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t,!1)).value)}))}}var G=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};const K="vis_templates";class Y{constructor(t){this.data=null,this.context=t}fetchTemplateItem(t,e){return G(this,void 0,void 0,(function*(){return(yield this.context.query({references:[null],data_types:[`${K}_${t}`]})).find((t=>t.name===e))}))}getTemplate(t,e){return G(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&JSON.parse(i.value)}))}createTemplate(t,e,i){return G(this,void 0,void 0,(function*(){return!(yield this.fetchTemplateItem(t,e))&&(yield this.context.createValue(i,`${e}`,void 0,void 0,void 0,`${K}_${t}`))}))}deleteTemplate(t,e){return G(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&(yield this.context.delete(i.id),!0)}))}}var X=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class Z{constructor(t){this.data=null,this.presetDataType="annot_presets",this.context=t}use(t){this.presetDataType=t}getPresetsItem(t=!1){return X(this,void 0,void 0,(function*(){if(!this.data||t){let t=(yield this.context.query({references:[null],data_types:[this.presetDataType]})).find((t=>!0));t||(t=yield this.createPresetsItem({presets:[]})),this.data=t}return this.data}))}createPresetsItem(t){return X(this,void 0,void 0,(function*(){return yield this.context.createValue(t,"Global annotation presets",void 0,void 0,void 0,this.presetDataType)}))}getAnnotPresets(t=!1){return X(this,void 0,void 0,(function*(){const e=yield this.getPresetsItem(t);return{presets:JSON.parse(e.value).presets,lastModifiedAt:e.modified_at}}))}mergePresets(t,e,i){const n=[...t];return e.forEach((t=>n.some((e=>e.id===t.id))||!t.createdAt||t.createdAt<=i?null:n.push(t))),n}updateAnnotPresets(t,e,i=!1){return X(this,void 0,void 0,(function*(){const n=yield this.getPresetsItem(!0),s=JSON.parse(n.value).presets;let r=t,o=!0;if(n.modified_at!==e){if(i)return{presets:s,successfulUpdate:!1,lastModifiedAt:n.modified_at};r=this.mergePresets(s,r,e),o=!1}try{const t=yield this.context.update(n.id,Object.assign(Object.assign({},n),{value:JSON.stringify({presets:r})}));return{presets:JSON.parse(t.value).presets,successfulUpdate:o,lastModifiedAt:t.modified_at}}catch(t){if(409===t.statusCode){const t=yield this.updateAnnotPresets(r,n.modified_at);return Object.assign(Object.assign({},t),{successfulUpdate:o})}throw t}}))}deleteAnnotPresets(){return X(this,void 0,void 0,(function*(){const t=yield this.getPresetsItem(!0);yield this.context.delete(t.id),this.data=null}))}}var tt=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class et{constructor(t){this.data=null,this.configDataType="app_job_config",this.context=t}use(t){this.configDataType=t}fetchJobConfigItem(t){return tt(this,void 0,void 0,(function*(){return(yield this.context.query({references:[t],data_types:[this.configDataType]})).find(Boolean)}))}getJobConfig(t){return tt(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&JSON.parse(e.value)}))}createJobConfig(t,e){return tt(this,void 0,void 0,(function*(){return!(yield this.fetchJobConfigItem(t))&&(yield this.context.createValue(e,"Job config of App",void 0,t,L.JOB,this.configDataType))}))}deleteJobConfig(t){return tt(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&(yield this.context.delete(e.id),!0)}))}}var it=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class nt{constructor(t){this.data=null,this.context=t,this.wsiMetadata=new W(this),this.visTemplates=new Y(this),this.annotPresets=new Z(this),this.jobConfig=new et(this)}get(t){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`)}))}getValue(t){return it(this,void 0,void 0,(function*(){const e=yield this.get(t);if("string"===e.type)try{return JSON.parse(e.value)}catch(t){return e.value}return e.value}))}query(t){return it(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/global-storage/query",{method:"PUT",body:t})).items}))}create(t){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/global-storage",{method:"POST",body:t})}))}createValue(t,e,i,n,s,r){return it(this,void 0,void 0,(function*(){t=JSON.stringify(t);const o={name:e,description:i,creator_id:this.context.userId,creator_type:H.USER,reference_id:n,reference_type:s,type:"string",value:t,data_type:r};return yield this.create(o)}))}update(t,e){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:e})}))}updateValue(t,e){return it(this,void 0,void 0,(function*(){const i=yield this.context.rawQuery(`/global-storage/${t}`);return i.value=JSON.stringify(e),yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:i})}))}delete(t){return it(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/global-storage/${t}`,{method:"DELETE"})}))}}class st{constructor(t){this.context=t,this.globalStorage=new nt(this)}get userId(){return this.context.userId}rawQuery(t,e={}){return i=this,n=void 0,r=function*(){return this.context.rawQuery(`${st.relativeApiPath}${t}`,e)},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{u(r.next(t))}catch(t){e(t)}}function a(t){try{u(r.throw(t))}catch(t){e(t)}}function u(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}u((r=r.apply(i,n||[])).next())}));var i,n,s,r}}st.relativeApiPath="/rationai";const rt=st;class ot{constructor(t){if(void 0===t._context)throw Error("Private property not configured.");this.context=t._context,this.props=t}translatePathSpec(t,e){return i=this,n=void 0,r=function*(){return e},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{u(r.next(t))}catch(t){e(t)}}function a(t){try{u(r.throw(t))}catch(t){e(t)}}function u(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}u((r=r.apply(i,n||[])).next())}));var i,n,s,r}}var at=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class ut{constructor(){throw Error("Not instantiable.")}static register(t,e){return this.items.set(t,e),e}static get(t){return this.items.get(t)}}ut.items=new Map;const ct=ut;ct.register("default",ot),ct.register("lsaai",class extends ot{translatePathSpec(t,e){return at(this,void 0,void 0,(function*(){return this.context.accessToken&&this.props.userinfo?(this.userData||(yield this.parseUserInstitutionsAndProjects()),"id_part_1"===t?this.userData.institutions[e]||e:"id_part_2"===t&&this.userData.projects[e]||e):e}))}parseGroupName(t){if(!t)return{name:t,slug:t};const e=(t=decodeURIComponent(t).trim()).match(/^(.+)\.\s*([^.\s]{1,5})$/);return e&&3===e.length?{name:e[1].trim(),slug:e[2].trim()}:t.length>5?(console.warn("Invalid group name",t),{}):{name:t,slug:t}}parseUserInstitutionsAndProjects(){var t;return at(this,void 0,void 0,(function*(){const e=yield fetch(this.props.userinfo,{headers:{Authorization:`Bearer ${this.context.accessToken}`}}),i=yield e.text();if(!e.ok)throw new Error(`Failed to fetch user info! ${e.statusText}. ${i}`);const n=JSON.parse(i),s=this.userData={projects:{"":{label:"NO PROJECT",value:"",rights:["write"]}},institutions:{"":{label:"PUBLIC DATA",value:""}}};try{const e=n.eduperson_entitlement;if(e)for(const i of e){const e=i.match(/^.*?:group:ration_ai:([^#\n]*)/);if(e&&e.length>1){const i=null===(t=e[1])||void 0===t?void 0:t.split(":");if(i){const t=i.length,e=this.parseGroupName(i[0]),n=this.parseGroupName(t>1?i[1]:""),r=this.parseGroupName(t>2?i[2]:null);n.slug&&!s.institutions[n.slug]&&(s.institutions[n.slug]={label:n.name,value:n.slug}),e.slug&&!s.projects[e.slug]?s.projects[e.slug]={label:e.name,value:e.slug,rights:r?[r]:[]}:r&&e.slug&&s.projects[e.slug].rights.push(r.slug)}}else console.warn("Ignored entitlement",i)}else console.warn("User info data does not contain access information! Is OAUTH scope set correctly?")}catch(t){console.warn("Could not decide user authorization capabilities!",t)}}))}});var dt=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class ht extends p{constructor(t){super(t),this.defaultScopeKey="",this.version="v3",this.rootURI=this.options.apiUrl+ht.apiPath,this.raw=new a(this.rootURI),t.integrationOptions||(t.integrationOptions={}),t.integrationOptions._context=this;const e=t.integrationOptions.implementation||"default",i=ct.get(e);if(!i)throw new Error(`Could not instantiate integration provider ${e} - is it a valid name?`);this.integration=new i(t.integrationOptions),this.apps=new g(this),this.cases=new C(this),this.examinations=new _(this),this.slides=new B(this),this.rationai=new rt(this),this.scopes=new Map}get defaultScope(){return this.scopes.get(this.defaultScopeKey)}newScopeFrom(t){return dt(this,void 0,void 0,(function*(){const e=new J(this);return yield e.from(t),this.scopes.set(t.id,e),""===this.defaultScopeKey&&(this.defaultScopeKey=t.id),e}))}newScopeUse(t,e){return dt(this,void 0,void 0,(function*(){const i=new J(this);return yield i.use(t,e),this.scopes.set(i.activeExaminationId,i),""===this.defaultScopeKey&&(this.defaultScopeKey=i.activeExaminationId),i}))}getScopeFrom(t){return dt(this,void 0,void 0,(function*(){return this.scopes.get(t.id)||(yield this.newScopeFrom(t))}))}getScopeUse(t,e){return dt(this,void 0,void 0,(function*(){const i=[...this.scopes.values()].filter((i=>i.activeCaseId===t&&(!e||i.activeAppId===e)));return i.length>0?i[0]:yield this.newScopeUse(t,e)}))}rawQuery(t,e={}){const i=Object.create(null,{rawQuery:{get:()=>super.rawQuery}});return dt(this,void 0,void 0,(function*(){return yield i.rawQuery.call(this,t,e),(e=e||{}).headers=e.headers||{},e.headers["User-Id"]=this.userId,this.accessToken&&(e.headers.Authorization=e.headers.Authorization||`Bearer ${this.rawToken}`),this.raw.http(t,e)}))}}ht.apiPath="/v3";const lt=ht})(),EmpationAPI=n})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUt5SCxrQkFDUHpILEtBQUt5SCxnQkFBa0JzSixFQUFNd0QscUJBQ3hCeEQsQ0FDVCxHLENBRU0sWUFBQXNPLENBQ0pqSyxHLDBDQUVBLE9BQ0VwVixLQUFLMEgsT0FBTzdJLElBQUl1VyxFQUFZdlgsWUFBY21DLEtBQUttZixhQUFhL0osR0FFaEUsRyxDQUVNLFdBQUFrSyxDQUFZdFUsRUFBZ0J5RixHLDBDQUNoQyxNQUFNOE8sRUFBaUIsSUFBSXZmLEtBQUswSCxPQUFPMkgsVUFBVXBDLFFBQzlDckYsR0FDQ0EsRUFBSTRNLGVBQWlCeEosS0FDcEJ5RixHQUFRN0ksRUFBSTZNLGNBQWdCaEUsS0FFakMsT0FBTzhPLEVBQWUvZSxPQUFTLEVBQzNCK2UsRUFBZSxTQUNUdmYsS0FBS29mLFlBQVlwVSxFQUFReUYsRUFDckMsRyxDQUVNLFFBQUExSSxDQUFTckQsRUFBa0JuQixFQUFzQixDQUFDLEcsMEdBU3RELGFBUk0sRUFBTXdFLFNBQVEsVUFBQ3JELEVBQVVuQixJQUMvQkEsRUFBVUEsR0FBVyxDQUFDLEdBQ2RVLFFBQVVWLEVBQVFVLFNBQVcsQ0FBQyxFQUN0Q1YsRUFBUVUsUUFBUSxXQUFhakUsS0FBS3NILE9BQzlCdEgsS0FBS3dHLGNBQ1BqRCxFQUFRVSxRQUF1QixjQUM3QlYsRUFBUVUsUUFBdUIsZUFBSyxVQUFVakUsS0FBSzhILFlBRWhEOUgsS0FBSzBVLElBQUlqUSxLQUFLQyxFQUFVbkIsRUFDakMsRyxFQXZHTyxHQUFBb1IsUUFBVSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy8gbGF6eSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvZXZlbnRzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3N0YXR1cy1jb2Rlcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy9iYXNlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3Jvb3QudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvc2NvcGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9hcHBzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy9jYXNlLWV4cGxvcmVyLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvd3NpLWV4cGxvcmVyLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3QvY2FzZXMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9leGFtaW5hdGlvbnMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvc3RvcmFnZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9hbm5vdGF0aW9ucy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9jb2xsZWN0aW9ucy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9qb2JzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Njb3BlL3BpeGVsbWFwcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9zY29wZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yYXRpb25haS90eXBlcy9nbG9iYWwtZGF0YS1jcmVhdG9yLXR5cGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy90eXBlcy90ZW1wbGF0ZS10eXBlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3Qvc2xpZGVzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvd3NpLW1ldGFkYXRhLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvdmlzdWFsaXphdGlvbi10ZW1wbGF0ZXMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy9hbm5vdC1wcmVzZXRzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvam9iLWNvbmZpZy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yYXRpb25haS9nbG9iYWwtc3RvcmFnZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yYXRpb25haS9yYXRpb25haS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9pbnRlZ3JhdGlvbi9kZWZhdWx0LnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2ludGVncmF0aW9uL2ludGVncmF0aW9uLW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvaW50ZWdyYXRpb24vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvaW50ZWdyYXRpb24vbHNhYWkudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9yb290LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHdlYnBhY2tFbXB0eUFzeW5jQ29udGV4dChyZXEpIHtcblx0Ly8gSGVyZSBQcm9taXNlLnJlc29sdmUoKS50aGVuKCkgaXMgdXNlZCBpbnN0ZWFkIG9mIG5ldyBQcm9taXNlKCkgdG8gcHJldmVudFxuXHQvLyB1bmNhdWdodCBleGNlcHRpb24gcG9wcGluZyB1cCBpbiBkZXZ0b29sc1xuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9KTtcbn1cbndlYnBhY2tFbXB0eUFzeW5jQ29udGV4dC5rZXlzID0gKCkgPT4gKFtdKTtcbndlYnBhY2tFbXB0eUFzeW5jQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0VtcHR5QXN5bmNDb250ZXh0O1xud2VicGFja0VtcHR5QXN5bmNDb250ZXh0LmlkID0gNzMyO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrRW1wdHlBc3luY0NvbnRleHQ7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvKipcclxuICogT3BlblNlYWRyYWdvbiBpbnNwaXJlZCBldmVudCBzeXN0ZW0gZm9yIHJlZHVjdGlvbiBvZiBkZXBlbmRlbmNpZXMgYW5kIHVuaWZvcm0gZXZlbnQgYXBwcm9hY2hcclxuICovXHJcblxyXG5leHBvcnQgdHlwZSBFdmVudEhhbmRsZXIgPSAoZXZlbnQ6IGFueSkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBFdmVudFNvdXJjZSB7XHJcbiAgZXZlbnRzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge307XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhbiBldmVudCBoYW5kbGVyIHRvIGJlIHRyaWdnZXJlZCBvbmx5IG9uY2UgKG9yIGEgZ2l2ZW4gbnVtYmVyIG9mIHRpbWVzKVxyXG4gICAqIGZvciBhIGdpdmVuIGV2ZW50LiBJdCBpcyBub3QgcmVtb3ZhYmxlIHdpdGggcmVtb3ZlSGFuZGxlcigpLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAqIEBwYXJhbSB7RXZlbnRIYW5kbGVyfSBoYW5kbGVyIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIGV2ZW50XHJcbiAgICogaXMgdHJpZ2dlcmVkLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlckRhdGE9bnVsbF0gLSBBcmJpdHJhcnkgb2JqZWN0IHRvIGJlIHBhc3NlZCB1bmNoYW5nZWRcclxuICAgKiB0byB0aGUgaGFuZGxlci5cclxuICAgKiBAcGFyYW0ge051bWJlcn0gW3RpbWVzPTFdIC0gVGhlIG51bWJlciBvZiB0aW1lcyB0byBoYW5kbGUgdGhlIGV2ZW50XHJcbiAgICogYmVmb3JlIHJlbW92aW5nIGl0LlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJpb3JpdHk9MF0gLSBIYW5kbGVyIHByaW9yaXR5LiBCeSBkZWZhdWx0LCBhbGwgcHJpb3JpdGllcyBhcmUgMC4gSGlnaGVyIG51bWJlciA9IHByaW9yaXR5LlxyXG4gICAqL1xyXG4gIGFkZE9uY2VIYW5kbGVyKFxyXG4gICAgZXZlbnROYW1lOiBzdHJpbmcsXHJcbiAgICBoYW5kbGVyOiBFdmVudEhhbmRsZXIsXHJcbiAgICB1c2VyRGF0YTogb2JqZWN0LFxyXG4gICAgdGltZXM6IG51bWJlcixcclxuICAgIHByaW9yaXR5OiBudW1iZXIsXHJcbiAgKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRpbWVzID0gdGltZXMgfHwgMTtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBjb25zdCBvbmNlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudDogb2JqZWN0KSB7XHJcbiAgICAgIGNvdW50Kys7XHJcbiAgICAgIGlmIChjb3VudCA9PT0gdGltZXMpIHtcclxuICAgICAgICBzZWxmLnJlbW92ZUhhbmRsZXIoZXZlbnROYW1lLCBvbmNlSGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGhhbmRsZXIoZXZlbnQpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuYWRkSGFuZGxlcihldmVudE5hbWUsIG9uY2VIYW5kbGVyLCB1c2VyRGF0YSwgcHJpb3JpdHkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAtIE5hbWUgb2YgZXZlbnQgdG8gcmVnaXN0ZXIuXHJcbiAgICogQHBhcmFtIHtFdmVudEhhbmRsZXJ9IGhhbmRsZXIgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlckRhdGE9bnVsbF0gLSBBcmJpdHJhcnkgb2JqZWN0IHRvIGJlIHBhc3NlZCB1bmNoYW5nZWQgdG8gdGhlIGhhbmRsZXIuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcmlvcml0eT0wXSAtIEhhbmRsZXIgcHJpb3JpdHkuIEJ5IGRlZmF1bHQsIGFsbCBwcmlvcml0aWVzIGFyZSAwLiBIaWdoZXIgbnVtYmVyID0gcHJpb3JpdHkuXHJcbiAgICovXHJcbiAgYWRkSGFuZGxlcihcclxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxyXG4gICAgaGFuZGxlcjogRXZlbnRIYW5kbGVyLFxyXG4gICAgdXNlckRhdGE6IG9iamVjdCB8IG51bGwgPSBudWxsLFxyXG4gICAgcHJpb3JpdHk6IG51bWJlciA9IDAsXHJcbiAgKSB7XHJcbiAgICBsZXQgZXZlbnRzID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXTtcclxuICAgIGlmICghZXZlbnRzKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0gPSBldmVudHMgPSBbXTtcclxuICAgIH1cclxuICAgIGlmIChoYW5kbGVyICYmIEV2ZW50U291cmNlLmlzRnVuY3Rpb24oaGFuZGxlcikpIHtcclxuICAgICAgbGV0IGluZGV4ID0gZXZlbnRzLmxlbmd0aCxcclxuICAgICAgICBldmVudCA9IHtcclxuICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXIsXHJcbiAgICAgICAgICB1c2VyRGF0YTogdXNlckRhdGEgfHwgbnVsbCxcclxuICAgICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSB8fCAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgIGV2ZW50c1tpbmRleF0gPSBldmVudDtcclxuICAgICAgd2hpbGUgKGluZGV4ID4gMCAmJiBldmVudHNbaW5kZXggLSAxXS5wcmlvcml0eSA8IGV2ZW50c1tpbmRleF0ucHJpb3JpdHkpIHtcclxuICAgICAgICBldmVudHNbaW5kZXhdID0gZXZlbnRzW2luZGV4IC0gMV07XHJcbiAgICAgICAgZXZlbnRzW2luZGV4IC0gMV0gPSBldmVudDtcclxuICAgICAgICBpbmRleC0tO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgYSBzcGVjaWZpYyBldmVudCBoYW5kbGVyIGZvciBhIGdpdmVuIGV2ZW50LlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IGZvciB3aGljaCB0aGUgaGFuZGxlciBpcyB0byBiZSByZW1vdmVkLlxyXG4gICAqIEBwYXJhbSB7RXZlbnRIYW5kbGVyfSBoYW5kbGVyIC0gRnVuY3Rpb24gdG8gYmUgcmVtb3ZlZC5cclxuICAgKi9cclxuICByZW1vdmVIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIpIHtcclxuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0sXHJcbiAgICAgIGhhbmRsZXJzOiBFdmVudEhhbmRsZXJbXSA9IFtdO1xyXG4gICAgaWYgKCFldmVudHMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChldmVudHNbaV0uaGFuZGxlciAhPT0gaGFuZGxlcikge1xyXG4gICAgICAgICAgaGFuZGxlcnMucHVzaChldmVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gaGFuZGxlcnM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGFtb3VudCBvZiBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGluc3BlY3QuXHJcbiAgICogQHJldHVybnMge251bWJlcn0gYW1vdW50IG9mIGV2ZW50c1xyXG4gICAqL1xyXG4gIG51bWJlck9mSGFuZGxlcnMoZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICBpZiAoIWV2ZW50cykge1xyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIHJldHVybiBldmVudHMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIGFsbCBldmVudCBoYW5kbGVycyBmb3IgYSBnaXZlbiBldmVudCB0eXBlLiBJZiBubyB0eXBlIGlzIGdpdmVuIGFsbFxyXG4gICAqIGV2ZW50IGhhbmRsZXJzIGZvciBldmVyeSBldmVudCB0eXBlIGFyZSByZW1vdmVkLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IGZvciB3aGljaCBhbGwgaGFuZGxlcnMgYXJlIHRvIGJlIHJlbW92ZWQuXHJcbiAgICovXHJcbiAgcmVtb3ZlQWxsSGFuZGxlcnMoZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmIChldmVudE5hbWUpIHtcclxuICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChjb25zdCBldmVudFR5cGUgaW4gdGhpcy5ldmVudHMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudFR5cGVdID0gW107XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIGZ1bmN0aW9uIHdoaWNoIGl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFsbCBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LCBjYWxsaW5nIHRoZSBoYW5kbGVyIGZvciBlYWNoLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGdldCBoYW5kbGVycyBmb3IuXHJcbiAgICovXHJcbiAgZ2V0SGFuZGxlcihldmVudE5hbWU6IHN0cmluZykge1xyXG4gICAgbGV0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICBpZiAoIWV2ZW50cyB8fCAhZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGV2ZW50cyA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBbZXZlbnRzWzBdXSA6IEFycmF5LmFwcGx5KG51bGwsIGV2ZW50cyk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZTogYW55LCBhcmdzOiBhbnkpIHtcclxuICAgICAgbGV0IGksXHJcbiAgICAgICAgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDtcclxuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50c1tpXSkge1xyXG4gICAgICAgICAgYXJncy5ldmVudFNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgIGFyZ3MudXNlckRhdGEgPSBldmVudHNbaV0udXNlckRhdGE7XHJcbiAgICAgICAgICBldmVudHNbaV0uaGFuZGxlcihhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYSBmdW5jdGlvbiB3aGljaCBpdGVyYXRlcyB0aGUgbGlzdCBvZiBhbGwgaGFuZGxlcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudCxcclxuICAgKiBjYWxsaW5nIHRoZSBoYW5kbGVyIGZvciBlYWNoIGFuZCBhd2FpdGluZyBhc3luYyBvbmVzLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGdldCBoYW5kbGVycyBmb3IuXHJcbiAgICovXHJcbiAgZ2V0QXdhaXRpbmdIYW5kbGVyKGV2ZW50TmFtZSkge1xyXG4gICAgbGV0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICBpZiAoIWV2ZW50cyB8fCAhZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGV2ZW50cyA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBbZXZlbnRzWzBdXSA6IEFycmF5LmFwcGx5KG51bGwsIGV2ZW50cyk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UsIGFyZ3MpIHtcclxuICAgICAgLy8gV2UgcmV0dXJuIGEgcHJvbWlzZSB0aGF0IGdldHMgcmVzb2x2ZWQgYWZ0ZXIgYWxsIHRoZSBldmVudHMgZmluaXNoLlxyXG4gICAgICAvLyBSZXR1cm5pbmcgbG9vcCByZXN1bHQgaXMgbm90IGNvcnJlY3QsIGxvb3AgcHJvbWlzZXMgY2hhaW4gZHluYW1pY2FsbHlcclxuICAgICAgLy8gYW5kIG91dGVyIGNvZGUgY291bGQgcHJvY2VzcyBmaW5pc2hpbmcgbG9naWNzIGluIHRoZSBtaWRkbGUgb2YgZXZlbnQgbG9vcC5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDtcclxuICAgICAgICBmdW5jdGlvbiBsb29wKGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPj0gbGVuZ3RoIHx8ICFldmVudHNbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoJ1Jlc29sdmVkIScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFyZ3MuZXZlbnRTb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICBhcmdzLnVzZXJEYXRhID0gZXZlbnRzW2luZGV4XS51c2VyRGF0YTtcclxuICAgICAgICAgIGxldCByZXN1bHQgPSBldmVudHNbaW5kZXhdLmhhbmRsZXIoYXJncyk7XHJcbiAgICAgICAgICByZXN1bHQgPVxyXG4gICAgICAgICAgICAhcmVzdWx0IHx8IEV2ZW50U291cmNlLnR5cGUocmVzdWx0KSAhPT0gJ3Byb21pc2UnXHJcbiAgICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgICAgICAgIDogcmVzdWx0O1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKCgpID0+IGxvb3AoaW5kZXggKyAxKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvb3AoMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQsIG9wdGlvbmFsbHkgcGFzc2luZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudEFyZ3MgLSBFdmVudC1zcGVjaWZpYyBkYXRhLlxyXG4gICAqL1xyXG4gIHJhaXNlRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50QXJncz86IGFueSkge1xyXG4gICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZ2V0SGFuZGxlcihldmVudE5hbWUpO1xyXG4gICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgcmV0dXJuIGhhbmRsZXIodGhpcywgZXZlbnRBcmdzIHx8IHt9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUcmlnZ2VyIGFuIGV2ZW50LCBvcHRpb25hbGx5IHBhc3NpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cclxuICAgKiBUaGlzIGV2ZW50cyBhd2FpdHMgZXZlcnkgYXN5bmNocm9ub3VzIG9yIHByb21pc2UtcmV0dXJuaW5nIGZ1bmN0aW9uLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudEFyZ3MgLSBFdmVudC1zcGVjaWZpYyBkYXRhLlxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V8dW5kZWZpbmVkfSAtIFByb21pc2UgcmVzb2x2ZWQgdXBvbiB0aGUgZXZlbnQgY29tcGxldGlvbi5cclxuICAgKi9cclxuICByYWlzZUV2ZW50QXdhaXRpbmcoZXZlbnROYW1lLCBldmVudEFyZ3MpIHtcclxuICAgIC8vdW5jb21tZW50IGlmIHlvdSB3YW50IHRvIGdldCBhIGxvZyBvZiBhbGwgZXZlbnRzXHJcbiAgICAvLyQuY29uc29sZS5sb2coIFwiQXdhaXRpbmcgZXZlbnQgZmlyZWQ6XCIsIGV2ZW50TmFtZSApO1xyXG5cclxuICAgIGNvbnN0IGF3YWl0aW5nSGFuZGxlciA9IHRoaXMuZ2V0QXdhaXRpbmdIYW5kbGVyKGV2ZW50TmFtZSk7XHJcbiAgICBpZiAoYXdhaXRpbmdIYW5kbGVyKSB7XHJcbiAgICAgIHJldHVybiBhd2FpdGluZ0hhbmRsZXIodGhpcywgZXZlbnRBcmdzIHx8IHt9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoJ05vIGhhbmRsZXIgZm9yIHRoaXMgZXZlbnQgcmVnaXN0ZXJlZC4nKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjbGFzczJ0eXBlID0ge1xyXG4gICAgJ1tvYmplY3QgQm9vbGVhbl0nOiAnYm9vbGVhbicsXHJcbiAgICAnW29iamVjdCBOdW1iZXJdJzogJ251bWJlcicsXHJcbiAgICAnW29iamVjdCBTdHJpbmddJzogJ3N0cmluZycsXHJcbiAgICAnW29iamVjdCBGdW5jdGlvbl0nOiAnZnVuY3Rpb24nLFxyXG4gICAgJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nOiAnZnVuY3Rpb24nLFxyXG4gICAgJ1tvYmplY3QgUHJvbWlzZV0nOiAncHJvbWlzZScsXHJcbiAgICAnW29iamVjdCBBcnJheV0nOiAnYXJyYXknLFxyXG4gICAgJ1tvYmplY3QgRGF0ZV0nOiAnZGF0ZScsXHJcbiAgICAnW29iamVjdCBSZWdFeHBdJzogJ3JlZ2V4cCcsXHJcbiAgICAnW29iamVjdCBPYmplY3RdJzogJ29iamVjdCcsXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVGFrZW4gZnJvbSBqUXVlcnkgMS42LjFcclxuICAgKiBAZnVuY3Rpb24gaXNGdW5jdGlvblxyXG4gICAqIEBtZW1iZXJvZiBPcGVuU2VhZHJhZ29uXHJcbiAgICogQHNlZSB7QGxpbmsgaHR0cDovL3d3dy5qcXVlcnkuY29tLyBqUXVlcnl9XHJcbiAgICovXHJcbiAgc3RhdGljIGlzRnVuY3Rpb24ob2JqOiBvYmplY3QpIHtcclxuICAgIHJldHVybiB0aGlzLnR5cGUob2JqKSA9PT0gJ2Z1bmN0aW9uJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRha2VuIGZyb20galF1ZXJ5IDEuNi4xXHJcbiAgICogQGZ1bmN0aW9uIHR5cGVcclxuICAgKiBAbWVtYmVyb2YgT3BlblNlYWRyYWdvblxyXG4gICAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cuanF1ZXJ5LmNvbS8galF1ZXJ5fVxyXG4gICAqL1xyXG4gIHN0YXRpYyB0eXBlKG9iajogb2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkXHJcbiAgICAgID8gU3RyaW5nKG9iailcclxuICAgICAgOiB0aGlzLmNsYXNzMnR5cGVbb2JqLnRvU3RyaW5nKCkgYXMga2V5b2YgdHlwZW9mIHRoaXMuY2xhc3MydHlwZV0gfHxcclxuICAgICAgICAgICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nID8gJ2Z1bmN0aW9uJyA6ICdvYmplY3QnKTtcclxuICB9XHJcbn1cclxuIiwiLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vcHJldHR5bXVjaGJyeWNlL2h0dHAtc3RhdHVzLWNvZGVzL2Jsb2IvbWFzdGVyL3NyYy9zdGF0dXMtY29kZXMudHNcclxuZXhwb3J0IGNvbnN0IFNUQVRVU19DT0RFUyA9IHtcclxuICAxMDA6ICdDb250aW51ZScsXHJcbiAgMTAxOiAnU3dpdGNoaW5nIHByb3RvY29scycsXHJcbiAgMTAyOiAnUHJvY2Vzc2luZycsXHJcbiAgMTAzOiAnRWFybHkgSGludHMnLFxyXG4gIDIwMDogJ09rJyxcclxuICAyMDE6ICdDcmVhdGVkJyxcclxuICAyMDI6ICdBY2NlcHRlZCcsXHJcbiAgMjAzOiAnTm9uIEF1dGhvcml0YXRpdmUgSW5mb3JtYXRpb24nLFxyXG4gIDIwNDogJ05vIENvbnRlbnQnLFxyXG4gIDIwNTogJ1Jlc2V0IENvbnRlbnQnLFxyXG4gIDIwNjogJ1BhcnRpYWwgQ29udGVudCcsXHJcbiAgMjA3OiAnTXVsdGkgU3RhdHVzJyxcclxuICAzMDA6ICdNdWx0aXBsZSBDaG9pY2VzJyxcclxuICAzMDE6ICdNb3ZlZCBQZXJtYW5lbnRseScsXHJcbiAgMzAyOiAnTW92ZWQgVGVtcG9yYXJpbHknLFxyXG4gIDMwMzogJ1NlZSBPdGhlcicsXHJcbiAgMzA0OiAnTm90IE1vZGlmaWVkJyxcclxuICAzMDU6ICdVc2UgUHJveHknLFxyXG4gIDMwNzogJ1RlbXBvcmFyeSBSZWRpcmVjdCcsXHJcbiAgMzA4OiAnUGVybWFuZW50IFJlZGlyZWN0JyxcclxuICA0MDA6ICdCYWQgUmVxdWVzdCcsXHJcbiAgNDAxOiAnVW5hdXRob3JpemVkJyxcclxuICA0MDI6ICdQYXltZW50IFJlcXVpcmVkJyxcclxuICA0MDM6ICdGb3JiaWRkZW4nLFxyXG4gIDQwNDogJ05vdCBGb3VuZCcsXHJcbiAgNDA1OiAnTWV0aG9kIE5vdCBBbGxvd2VkJyxcclxuICA0MDY6ICdOb3QgQWNjZXB0YWJsZScsXHJcbiAgNDA3OiAnUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnLFxyXG4gIDQwODogJ1JlcXVlc3QgVGltZW91dCcsXHJcbiAgNDA5OiAnQ29uZmxpY3QnLFxyXG4gIDQxMDogJ0dvbmUnLFxyXG4gIDQxMTogJ0xlbmd0aCBSZXF1aXJlZCcsXHJcbiAgNDEyOiAnUHJlY29uZGl0aW9uIEZhaWxlZCcsXHJcbiAgNDEzOiAnUmVxdWVzdCBUb28gTG9uZycsXHJcbiAgNDE0OiAnUmVxdWVzdCBVcmkgVG9vIExvbmcnLFxyXG4gIDQxNTogJ1Vuc3VwcG9ydGVkIE1lZGlhIFR5cGUnLFxyXG4gIDQxNjogJ1JlcXVlc3RlZCBSYW5nZSBOb3QgU2F0aXNmaWFibGUnLFxyXG4gIDQxNzogJ0V4cGVjdGF0aW9uIEZhaWxlZCcsXHJcbiAgLyoqXHJcbiAgICogT2ZmaWNpYWwgRG9jdW1lbnRhdGlvbiBAIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMyMzI0I3NlY3Rpb24tMi4zLjJcclxuICAgKlxyXG4gICAqIEFueSBhdHRlbXB0IHRvIGJyZXcgY29mZmVlIHdpdGggYSB0ZWFwb3Qgc2hvdWxkIHJlc3VsdCBpbiB0aGUgZXJyb3IgY29kZSBcIjQxOCBJJ20gYSB0ZWFwb3RcIi4gVGhlIHJlc3VsdGluZyBlbnRpdHkgYm9keSBNYXkgYmUgc2hvcnQgYW5kIHN0b3V0LlxyXG4gICAqL1xyXG4gIDQxODogJ0ltIEEgVGVhcG90JyxcclxuICA0MTk6ICdJbnN1ZmZpY2llbnQgU3BhY2UgT24gUmVzb3VyY2UnLFxyXG4gIDQyMDogJ01ldGhvZCBGYWlsdXJlJyxcclxuICA0MjE6ICdNaXNkaXJlY3RlZCBSZXF1ZXN0JyxcclxuICA0MjI6ICdVbnByb2Nlc3NhYmxlIEVudGl0eScsXHJcbiAgNDIzOiAnTG9ja2VkJyxcclxuICA0MjQ6ICdGYWlsZWQgRGVwZW5kZW5jeScsXHJcbiAgNDI2OiAnVXBncmFkZSBSZXF1aXJlZCcsXHJcbiAgNDI4OiAnUHJlY29uZGl0aW9uIFJlcXVpcmVkJyxcclxuICA0Mjk6ICdUb28gTWFueSBSZXF1ZXN0cycsXHJcbiAgNDMxOiAnUmVxdWVzdCBIZWFkZXIgRmllbGRzIFRvbyBMYXJnZScsXHJcbiAgNDUxOiAnVW5hdmFpbGFibGUgRm9yIExlZ2FsIFJlYXNvbnMnLFxyXG4gIDUwMDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXHJcbiAgNTAxOiAnTm90IEltcGxlbWVudGVkJyxcclxuICA1MDI6ICdCYWQgR2F0ZXdheScsXHJcbiAgNTAzOiAnU2VydmljZSBVbmF2YWlsYWJsZScsXHJcbiAgNTA0OiAnR2F0ZXdheSBUaW1lb3V0JyxcclxuICA1MDU6ICdIdHRwIFZlcnNpb24gTm90IFN1cHBvcnRlZCcsXHJcbiAgNTA3OiAnSW5zdWZmaWNpZW50IFN0b3JhZ2UnLFxyXG4gIDUxMTogJ05ldHdvcmsgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBFdmVudFNvdXJjZSB9IGZyb20gJy4vZXZlbnRzJztcclxuaW1wb3J0IHsgU1RBVFVTX0NPREVTIH0gZnJvbSAnLi9zdGF0dXMtY29kZXMnO1xyXG5pbXBvcnQge0RlZmF1bHRJbnRlZ3JhdGlvbk9wdGlvbnN9IGZyb20gXCIuL3YzL2ludGVncmF0aW9uL2RlZmF1bHRcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW1wYXRpb25BUElPcHRpb25zIHtcclxuICBhbm9ueW1vdXNVc2VySWQ/OiBzdHJpbmc7XHJcbiAgd29ya2JlbmNoQXBpVXJsOiBzdHJpbmc7XHJcbiAgYXBpUm9vdFBhdGg/OiBzdHJpbmc7XHJcbiAgaW50ZWdyYXRpb25PcHRpb25zPzogRGVmYXVsdEludGVncmF0aW9uT3B0aW9uc1xyXG59XHJcblxyXG50eXBlIFJlc3BvbnNlVHlwZSA9ICdqc29uJyB8ICdibG9iJyB8ICd0ZXh0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmF3T3B0aW9ucyB7XHJcbiAgYm9keT86IG9iamVjdCB8IHN0cmluZztcclxuICBxdWVyeT86IGFueTtcclxuICBtZXRob2Q/OiBzdHJpbmc7XHJcbiAgaGVhZGVycz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XHJcbiAgcmVzcG9uc2VUeXBlPzogUmVzcG9uc2VUeXBlO1xyXG59XHJcblxyXG4vL2h0dHBzOi8vZ2lzdC5naXRodWIuY29tL1Rvb1RhbGxOYXRlLzRmZDY0MWY4MjBlMTMyNTY5NTQ4N2RmZDg4M2U1Mjg1XHJcbmZ1bmN0aW9uIGh0dHBFcnJvclRvTmFtZShjb2RlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gIGNvbnN0IHN1ZmZpeCA9XHJcbiAgICAoKGNvZGUgLyAxMDApIHwgMCkgPT09IDQgfHwgKChjb2RlIC8gMTAwKSB8IDApID09PSA1ID8gJ2Vycm9yJyA6ICcnO1xyXG4gIGxldCBuYW1lID0gYCAke1N0cmluZyhTVEFUVVNfQ09ERVNbY29kZSBhcyBrZXlvZiB0eXBlb2YgU1RBVFVTX0NPREVTXSB8fCBgSFRUUCBDb2RlICR7Y29kZX1gKS5yZXBsYWNlKC9lcnJvciQvaSwgJycpfSAke3N1ZmZpeH1gO1xyXG4gIHJldHVybiBuYW1lXHJcbiAgICAuc3BsaXQoJyAnKVxyXG4gICAgLnJlZHVjZShcclxuICAgICAgKGFjYywgYykgPT4gYWNjICsgKGMgPyBjLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYy5zbGljZSgxKSA6ICcnKSxcclxuICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIVFRQRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZTogbnVtYmVyO1xyXG4gIFtrZXk6IHN0cmluZ106IGFueTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKFxyXG4gICAgY29kZTogbnVtYmVyLFxyXG4gICAgbWVzc2FnZTogc3RyaW5nLFxyXG4gICAgZXh0cmFzPzogUmVjb3JkPHN0cmluZywgYW55PixcclxuICApIHtcclxuICAgIHN1cGVyKFxyXG4gICAgICBtZXNzYWdlIHx8XHJcbiAgICAgICAgU1RBVFVTX0NPREVTW2NvZGUgYXMga2V5b2YgdHlwZW9mIFNUQVRVU19DT0RFU10gfHxcclxuICAgICAgICBgSFRUUCBDb2RlICR7Y29kZX1gLFxyXG4gICAgKTtcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMgJiYgZXh0cmFzKSB7XHJcbiAgICAgIC8vIG5vaW5zcGVjdGlvbiBUeXBlU2NyaXB0VmFsaWRhdGVUeXBlc1xyXG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGV4dHJhcyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm5hbWUgPSBodHRwRXJyb3JUb05hbWUoY29kZSk7XHJcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBjb2RlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSYXdBcGlPcHRpb25zIHt9XHJcblxyXG5leHBvcnQgY2xhc3MgUmF3QVBJIHtcclxuICBwdWJsaWMgdXJsOiBzdHJpbmc7XHJcbiAgcHVibGljIG9wdGlvbnM6IFJhd09wdGlvbnM7XHJcbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJhd0FwaU9wdGlvbnMgPSB7fSkge1xyXG4gICAgdGhpcy51cmwgPSB1cmw7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfcGFyc2VRdWVyeVBhcmFtcyhwYXJhbXM6IHN0cmluZyB8IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcclxuICAgIGlmIChwYXJhbXMpIHtcclxuICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdzdHJpbmcnKSByZXR1cm4gcGFyYW1zO1xyXG5cclxuICAgICAgLy9jbGVhbnVwIHBsYWluIG9iamVjdHNcclxuICAgICAgaWYgKHBhcmFtcy5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0IHx8IHBhcmFtcy5jb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZm9yIChsZXQgayBpbiBwYXJhbXMpIHtcclxuICAgICAgICAgIGNvbnN0IHYgPSBwYXJhbXNba107XHJcbiAgICAgICAgICBpZiAodiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQpIGRlbGV0ZSBwYXJhbXNba107XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBgPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIF9mZXRjaCh1cmw6IHN0cmluZywgb3B0aW9uczogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICBtZXRob2Q6IG9wdGlvbnMubWV0aG9kLFxyXG4gICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IG9wdGlvbnMuYm9keSxcclxuICAgIH0gYXMgUmVxdWVzdEluaXQpO1xyXG5cclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXN1bHQgPSBhd2FpdCByZXNwb25zZVtvcHRpb25zLnJlc3BvbnNlVHlwZSB8fCAnanNvbiddKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRocm93IG5ldyBIVFRQRXJyb3IoXHJcbiAgICAgICAgNTAwLFxyXG4gICAgICAgIGBGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgZGF0YS4gT3JpZ2luYWwgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c30gfCAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgIGVycm9yOiBlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgSFRUUEVycm9yKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCwge1xyXG4gICAgICAgIHBheWxvYWQ6IHJlc3VsdFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBodHRwKGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgaGFzQm9keSA9ICEhb3B0aW9ucy5ib2R5O1xyXG4gICAgb3B0aW9ucy5tZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCAoaGFzQm9keSA/ICdQT1NUJyA6ICdHRVQnKTtcclxuICAgIGlmICghZW5kcG9pbnQuc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgIGVuZHBvaW50ID0gYC8ke2VuZHBvaW50fWA7XHJcbiAgICB9XHJcbiAgICBvcHRpb25zLnF1ZXJ5ID0gdGhpcy5fcGFyc2VRdWVyeVBhcmFtcyhvcHRpb25zLnF1ZXJ5KTtcclxuICAgIG9wdGlvbnMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcclxuICAgIG9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XHJcbiAgICBpZiAob3B0aW9ucy5ib2R5ICYmIHR5cGVvZiBvcHRpb25zLmJvZHkgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSk7XHJcbiAgICB9IGVsc2Ugb3B0aW9ucy5ib2R5ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIHJldHVybiBhd2FpdCB0aGlzLl9mZXRjaCh0aGlzLnVybCArIGVuZHBvaW50ICsgb3B0aW9ucy5xdWVyeSwgb3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcblxyXG4vL3RvZG8gY29uc2lkZXIgaW1wbGVtZW50aW5nICdvYnNlcnZlJyBtZXRob2QgdGhhdCByZWdpc3RlcnMgYW5kIHdhdGNoZXMgY2VydGFpbiBwcm9wZXJ0eSBsaXN0Li5cclxuZXhwb3J0IGNsYXNzIEFic3RyYWN0QVBJIGV4dGVuZHMgRXZlbnRTb3VyY2Uge1xyXG4gIC8vdG9kbyB0cnkgZmlndXJpbmcgb3V0IGhvdyB0byBwcmludCB0aGUgY2xhc3MgbmFtZSB0b29cclxuICAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI4MDM4OS9ob3ctZG8teW91LWZpbmQtb3V0LXRoZS1jYWxsZXItZnVuY3Rpb24taW4tamF2YXNjcmlwdFxyXG4gIHByaXZhdGUgZ2V0Q2FsbGVyTmFtZSgpIHtcclxuICAgIC8vIEdldCBzdGFjayBhcnJheVxyXG4gICAgY29uc3Qgb3JpZyA9IEVycm9yLnByZXBhcmVTdGFja1RyYWNlO1xyXG4gICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSAoZXJyb3IsIHN0YWNrKSA9PiBzdGFjaztcclxuICAgIGNvbnN0IHsgc3RhY2sgfSA9IG5ldyBFcnJvcigpO1xyXG4gICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBvcmlnO1xyXG5cclxuICAgIGNvbnN0IGNhbGxlciA9IHN0YWNrPy5bMl07XHJcbiAgICByZXR1cm4gY2FsbGVyID8gY2FsbGVyIDogJ3Vua25vd24gY29udGV4dCc7XHJcbiAgfVxyXG5cclxuICByZXF1aXJlcyhuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgdGhyb3cgYEFyZ3VtZW50RXJyb3JbJHt0aGlzLmdldENhbGxlck5hbWUoKX1dICR7bmFtZX0gaXMgbWlzc2luZyAtIHJlcXVpcmVkIHByb3BlcnR5IWA7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgSnd0VG9rZW5CYXNlIHtcclxuICBzdWI6IHN0cmluZztcclxuICBleHA6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBKd3RUb2tlbiBleHRlbmRzIEp3dFRva2VuQmFzZSB7XHJcbiAgaWF0OiBudW1iZXI7XHJcbiAganRpOiBzdHJpbmc7XHJcbiAgaXNzOiBzdHJpbmc7XHJcbiAgYXVkOiBzdHJpbmc7XHJcbiAgdHlwOiBzdHJpbmc7XHJcbiAgYXpwOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRKd3RUb2tlbkV4cGlyZXNUaW1lb3V0KHRva2VuOiBKd3RUb2tlbkJhc2UpIHtcclxuICAvL3RpbWVvdXQgT1IgMzAwIHNlY3NcclxuICByZXR1cm4gdG9rZW4uZXhwICogMWUzIC0gRGF0ZS5ub3coKSB8fCAzMDBlMztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY29wZVRva2VuIGV4dGVuZHMgSnd0VG9rZW5CYXNlIHtcclxuICB0b2tlbl9pZDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKd3RUb2tlbih0b2tlbjogc3RyaW5nKTogSnd0VG9rZW5CYXNlIHtcclxuICByZXR1cm4gSlNPTi5wYXJzZShhdG9iKHRva2VuLnNwbGl0KCcuJylbMV0pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExvZ2dlciB7XHJcbiAgc3RhdGljIGVycm9yKC4uLmFyZ3M6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc29sZS5lcnJvcignRTpFbXBhdGlvbkFQSScsIC4uLmFyZ3MpO1xyXG4gIH1cclxuICBzdGF0aWMgd2FybiguLi5hcmdzOiBhbnkpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUud2FybignVzpFbXBhdGlvbkFQSScsIC4uLmFyZ3MpO1xyXG4gIH1cclxuICBzdGF0aWMgaW5mbyguLi5hcmdzOiBhbnkpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUuaW5mbygnSTpFbXBhdGlvbkFQSScsIC4uLmFyZ3MpO1xyXG4gIH1cclxuICBzdGF0aWMgZGVidWcoLi4uYXJnczogYW55KTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmRlYnVnKCdEOkVtcGF0aW9uQVBJJywgLi4uYXJncyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFic3RyYWN0QVBJLCBFbXBhdGlvbkFQSU9wdGlvbnMsIFJhd0FQSSwgUmF3T3B0aW9ucyB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCB7IFNjb3BlQVBJIH0gZnJvbSAnLi9zY29wZSc7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCxcclxuICBKd3RUb2tlbkJhc2UsXHJcbiAgcGFyc2VKd3RUb2tlbixcclxufSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSb290Q29udGV4dCB7XHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGRhdGE6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSb290QVBJT3B0aW9ucyB7XHJcbiAgYW5vbnltb3VzVXNlcklkOiBzdHJpbmc7XHJcbiAgd29ya2JlbmNoQXBpVXJsOiBzdHJpbmc7XHJcbiAgYXBpVXJsOiBzdHJpbmc7XHJcbiAgYXBpUm9vdFBhdGg6IHN0cmluZztcclxufVxyXG5cclxuLy8gQmFzZUFQSSBpbXBsZW1lbnRzIEFic3RyYWN0QVBJIG92ZXIgL3ZbdmVyc2lvbl1cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJvb3RBUEkgZXh0ZW5kcyBBYnN0cmFjdEFQSSB7XHJcbiAgLy8gUmF3QVBJIGltcGxlbWVudHMgYWNjZXNzIHRvIHRoZSBodHRwIGVuZHBvaW50c1xyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCByYXc6IFJhd0FQSTtcclxuICAvLyBkZWZhdWx0IFNjb3BlQVBJIGltcGxlbWVudHMgQWJzdHJhY3RBUEkgb3ZlciAvdlt2ZXJzaW9uXS9zY29wZXNcclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGVmYXVsdFNjb3BlS2V5OiBzdHJpbmc7XHJcblxyXG4gIC8vIE1hcCBvZiBTY29wZUFQSSwgdGhhdCBpbXBsZW1lbnQgQWJzdHJhY3RBUEkgb3ZlciAvdlt2ZXJzaW9uXS9zY29wZXMsIGFsbG93cyBrZWVwaW5nIG11bHRpcGxlIHNjb3BlcyBvcGVuIGF0IG9uY2VcclxuICBhYnN0cmFjdCBzY29wZXM6IE1hcDxzdHJpbmcsIFNjb3BlQVBJPjtcclxuXHJcbiAgLy8gUHJvcGVydGllc1xyXG4gIGFic3RyYWN0IHZlcnNpb246IHN0cmluZztcclxuICBhYnN0cmFjdCByb290VVJJOiBzdHJpbmc7XHJcbiAgb3B0aW9uczogUm9vdEFQSU9wdGlvbnM7XHJcbiAgY2FjaGVkOiBvYmplY3Q7XHJcbiAgYWNjZXNzVG9rZW46IEp3dFRva2VuQmFzZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBwcml2YXRlIF91c2VySWQ6IHN0cmluZztcclxuICBwcml2YXRlIF90b2tlbkV4cGlyZXM6IG51bWJlciA9IDA7XHJcbiAgcHJpdmF0ZSBfcmF3VG9rZW46IHN0cmluZyA9ICcnO1xyXG5cclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3Iob3B0aW9uczogRW1wYXRpb25BUElPcHRpb25zKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIGlmICghb3B0aW9ucy53b3JrYmVuY2hBcGlVcmwpIHtcclxuICAgICAgdGhyb3cgJ1dCIEFwaSB1cmwgaXMgcmVxdWlyZWQhJztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYXBpVXJsO1xyXG4gICAgaWYgKCFvcHRpb25zLmFwaVJvb3RQYXRoKSB7XHJcbiAgICAgIGFwaVVybCA9IG9wdGlvbnMud29ya2JlbmNoQXBpVXJsO1xyXG4gICAgfSBlbHNlIGlmICghb3B0aW9ucy5hcGlSb290UGF0aC5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgICAgYXBpVXJsID0gYCR7b3B0aW9ucy53b3JrYmVuY2hBcGlVcmx9LyR7b3B0aW9ucy5hcGlSb290UGF0aH1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXBpVXJsID0gYCR7b3B0aW9ucy53b3JrYmVuY2hBcGlVcmx9JHtvcHRpb25zLmFwaVJvb3RQYXRofWA7XHJcbiAgICB9XHJcbiAgICBpZiAoYXBpVXJsLmVuZHNXaXRoKCcvJykpIHtcclxuICAgICAgYXBpVXJsID0gYXBpVXJsLnNsaWNlKDAsIC0xKTtcclxuICAgIH1cclxuICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgYXBpVXJsLFxyXG4gICAgICB3b3JrYmVuY2hBcGlVcmw6IG9wdGlvbnMud29ya2JlbmNoQXBpVXJsLFxyXG4gICAgICBhbm9ueW1vdXNVc2VySWQ6IG9wdGlvbnMuYW5vbnltb3VzVXNlcklkIHx8ICdhbm9ueW1vdXMnLFxyXG4gICAgICBhcGlSb290UGF0aDogb3B0aW9ucy5hcGlSb290UGF0aCB8fCAnJyxcclxuICAgIH07XHJcbiAgICB0aGlzLl91c2VySWQgPSB0aGlzLm9wdGlvbnMuYW5vbnltb3VzVXNlcklkO1xyXG4gICAgdGhpcy5jYWNoZWQgPSB7fTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoYW5nZSB0aGUgVXNlciBhY3RvciBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIGFwaSB3aWxsXHJcbiAgICogcmVzZXQgaXQncyB3aG9sZSBzdGF0ZS5cclxuICAgKiBAcGFyYW0gdG9rZW4gc2V0dXAgY29udGV4dCBmcm9tIG9iamVjdFxyXG4gICAqIEBwYXJhbSB3aXRoRXZlbnRcclxuICAgKi9cclxuICBmcm9tKHRva2VuOiBzdHJpbmcsIHdpdGhFdmVudCA9IHRydWUpOiB2b2lkIHtcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHRoaXMuX3Jhd1Rva2VuID0gdG9rZW47XHJcbiAgICB3aXRoRXZlbnQgPSB3aXRoRXZlbnQgJiYgIXRoaXMuYWNjZXNzVG9rZW47IC8vZmlyZSBldmVudCBvbmx5IHdoZW4gd2UgY29uZmlndXJlIG5ldyBzZXNzaW9uXHJcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gcGFyc2VKd3RUb2tlbih0b2tlbikgYXMgSnd0VG9rZW5CYXNlO1xyXG4gICAgY29uc3QgdG9rZW5UaW1lb3V0ID0gZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCh0aGlzLmFjY2Vzc1Rva2VuKTtcclxuICAgIHRoaXMuX3Rva2VuRXhwaXJlcyA9IERhdGUubm93KCkgKyB0b2tlblRpbWVvdXQgLyAyO1xyXG4gICAgbGV0IHVzZXJJZCA9IHRoaXMuYWNjZXNzVG9rZW4uc3ViO1xyXG4gICAgaWYgKCF1c2VySWQpXHJcbiAgICAgIHRocm93ICdJbnZhbGlkIFVzZXIgSUQhIE11c3QgYmUgdmFsaWQgc3RyaW5nIHNob3J0ZXIgdGhhbiA1MCBjaGFyYWN0ZXJzISc7XHJcbiAgICBpZiAodXNlcklkLmxlbmd0aCA+IDUwKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAnVXNlciBJRCBleGNlZWRlZCA1MCBjaGFyYWN0ZXJzISBVc2luZyBVc2VyIElEIHNob3J0ZW5lZCB0byBmaXJzdCA1MCBjaGFyYWN0ZXJzIScsXHJcbiAgICAgICk7XHJcbiAgICAgIHVzZXJJZCA9IHVzZXJJZC5zbGljZSgwLCA1MCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy51c2VySWQgPT09IHVzZXJJZCkgcmV0dXJuO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgaWYgKHdpdGhFdmVudCkgdGhpcy5yYWlzZUV2ZW50KCdpbml0Jyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGFuZ2UgdGhlIFVzZXIgYWN0b3IgZm9yIHRoZSBBUEksIHdpdGhvdXQgcHJvdmlkaW5nIHRva2VuLiBVc2VkIGluIG5vLXRva2VuIGNvbmZpZ3VyYXRpb24uIE5vdGU6IHRoZSBhcGkgd2lsbFxyXG4gICAqIHJlc2V0IGl0J3Mgd2hvbGUgc3RhdGUuXHJcbiAgICogQHBhcmFtIHRva2VuIHNldHVwIGNvbnRleHQgZnJvbSBvYmplY3RcclxuICAgKiBAcGFyYW0gd2l0aEV2ZW50XHJcbiAgICovXHJcbiAgdXNlKHVzZXJJZDogc3RyaW5nLCB3aXRoRXZlbnQgPSB0cnVlKTogdm9pZCB7XHJcbiAgICB3aXRoRXZlbnQgPSB3aXRoRXZlbnQgJiYgIXRoaXMuX3VzZXJJZDsgLy9maXJlIGV2ZW50IG9ubHkgd2hlbiB3ZSBjb25maWd1cmUgbmV3IHNlc3Npb25cclxuICAgIHRoaXMucmVzZXQoKTtcclxuICAgIGlmICghdXNlcklkIHx8IHVzZXJJZC5sZW5ndGggPiA1MClcclxuICAgICAgdGhyb3cgJ0ludmFsaWQgVXNlciBJRCEgTXVzdCBiZSB2YWxpZCBzdHJpbmcgc2hvcnRlciB0aGFuIDUwIGNoYXJhY3RlcnMhJztcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIGlmICh3aXRoRXZlbnQpIHRoaXMucmFpc2VFdmVudCgnaW5pdF9ub190b2tlbicpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9yYXdUb2tlbiA9ICcnO1xyXG4gICAgdGhpcy5fdG9rZW5FeHBpcmVzID0gMDtcclxuICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBudWxsO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdGhpcy5vcHRpb25zLmFub255bW91c1VzZXJJZDtcclxuICAgIHRoaXMuZGVmYXVsdFNjb3BlS2V5ID0gJyc7XHJcbiAgICB0aGlzLnNjb3Blcy5mb3JFYWNoKChzY3ApID0+IHNjcC5yZXNldCgpKTtcclxuICAgIHRoaXMuc2NvcGVzLmNsZWFyKCk7XHJcbiAgICB0aGlzLnJhaXNlRXZlbnQoJ3Jlc2V0Jyk7XHJcbiAgfVxyXG5cclxuICBnZXQgdXNlcklkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHJhd1Rva2VuKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmF3VG9rZW47XHJcbiAgfVxyXG5cclxuICBhc3luYyByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zPzogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PiB7XHJcbiAgICBpZiAoIXRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aHJvdyBcIlVzZXIgbXVzdCBiZSBjb25maWd1cmVkIHRvIGFjY2VzcyBFbXBhaWEgQVBJOiBlaXRoZXIgcHJvdmlkZSBhIHZhbGlkICdhbm9ueW1vdXMnIHVzZXIgSUQgdGhyb3VnaCBlbnYgdmFyaWFibGVzLCBvciBjb25maWd1cmUgdGhlIFJvb3QgQVBJIHdpdGggYSB2YWxpZCB0b2tlbi5cIjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fdG9rZW5FeHBpcmVzID4gMCAmJiBEYXRlLm5vdygpID4gdGhpcy5fdG9rZW5FeHBpcmVzKSB7XHJcbiAgICAgIGNvbnN0IGV2ZW50T2JqZWN0ID0geyBuZXdUb2tlbjogJycgfTtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBldmVudCB0b2tlbi1yZWZyZXNoXHJcbiAgICAgICAqIEF3YWl0aW5nIGV2ZW50LiBQcm92aWRlIG5ld1Rva2VuIHZhbHVlIGluIHRoZSBldmVudCBoYW5kbGVyIGFyZ3VtZW50IHBhcmFtcyBvYmplY3RcclxuICAgICAgICogZm9yIHRoZSByb290IEFQSSB0byBjb25zdW1lLlxyXG4gICAgICAgKi9cclxuICAgICAgYXdhaXQgdGhpcy5yYWlzZUV2ZW50QXdhaXRpbmcoJ3Rva2VuLXJlZnJlc2gnLCBldmVudE9iamVjdCk7XHJcbiAgICAgIHRoaXMuZnJvbShldmVudE9iamVjdC5uZXdUb2tlbik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFic3RyYWN0QVBJLCBSYXdBUEksIFJhd09wdGlvbnMgfSBmcm9tICcuL2Jhc2UnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNjb3BlQ29udGV4dCB7XHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGNvbnRleHQ6IFNjb3BlQVBJO1xyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBkYXRhOiBhbnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTY29wZSBCaW5kcyBFeGFtaW5hdGlvbiBhbmQgVXNlci5cclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTY29wZUFQSSBleHRlbmRzIEFic3RyYWN0QVBJIHtcclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmF3OiBSYXdBUEk7XHJcblxyXG4gIC8qKlxyXG4gICAqIENoYW5nZSB0aGUgYWN0aXZlIFNjb3BlIGZvciB0aGUgQVBJLiBOb3RlOiB0aGUgc2NvcGUgc3RhdGUgd2lsbCByZXNldC5cclxuICAgKiBAcGFyYW0gY2FzZUlkIGNhc2UgaWQgLSBtYW5hZ2VzIHRoZSBhY3RpdmUgc2NvcGVcclxuICAgKiBAcGFyYW0gYXBwSWQgbWFuYWdlcyB0aGUgYWN0aXZlIHNjb3BlIHRocm91Z2ggZXhhbWluYXRpb248dXNlciwgYXBwPlxyXG4gICAqICAgICAgICAgIGlmIHVuZGVmaW5lZCwgdGhlIGV4YW1pbmF0aW9uIGlzIG1hbmFnZWQgaW50ZXJuYWxseVxyXG4gICAqL1xyXG4gIGFic3RyYWN0IHVzZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAvKipcclxuICAgKiBDaGFuZ2UgdGhlIGFjdGl2ZSBTY29wZSBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIHNjb3BlIHN0YXRlIHdpbGwgcmVzZXQuXHJcbiAgICogQHBhcmFtIGV4YW1pbmF0aW9uIHNldHVwIGNvbnRleHQgZnJvbSBvYmplY3RcclxuICAgKi9cclxuICBhYnN0cmFjdCBmcm9tKGV4YW1pbmF0aW9uOiBvYmplY3QpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICBhYnN0cmFjdCByZXNldCgpOiB2b2lkO1xyXG5cclxuICBhYnN0cmFjdCByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zPzogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PjtcclxufVxyXG4iLCJpbXBvcnQgeyBSb290QVBJLCBSb290Q29udGV4dCB9IGZyb20gJy4uLy4uL3Jvb3QnO1xyXG5pbXBvcnQgUm9vdCBmcm9tICcuL3Jvb3QnO1xyXG5pbXBvcnQgeyBBcHBMaXN0IH0gZnJvbSAnLi90eXBlcy9hcHAtbGlzdCc7XHJcbmltcG9ydCB7IEFwcFF1ZXJ5IH0gZnJvbSAnLi90eXBlcy9hcHAtcXVlcnknO1xyXG5pbXBvcnQgeyBBcHBPdXRwdXQgfSBmcm9tICcuL3R5cGVzL2FwcC1vdXRwdXQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwcyBleHRlbmRzIFJvb3RDb250ZXh0IHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdEFQSTtcclxuICBwcm90ZWN0ZWQgZGF0YTogQXBwTGlzdCB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgX2RlZmF1bHRBcHA6IEFwcE91dHB1dCB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxpc3QoKTogUHJvbWlzZTxBcHBMaXN0PiB7XHJcbiAgICByZXR1cm4gKHRoaXMuZGF0YSA9IChhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9hcHBzL3F1ZXJ5Jywge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBib2R5OiB7XHJcbiAgICAgICAgYXBwczogbnVsbCxcclxuICAgICAgICB0aXNzdWVzOiBudWxsLFxyXG4gICAgICAgIHN0YWluczogbnVsbCxcclxuICAgICAgICBqb2JfbW9kZXM6IG51bGwsXHJcbiAgICAgIH0sXHJcbiAgICB9KSkgYXMgQXBwTGlzdCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBxdWVyeShxdWVyeTogQXBwUXVlcnkpOiBQcm9taXNlPEFwcExpc3Q+IHtcclxuICAgIHJldHVybiAodGhpcy5kYXRhID0gKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcHMvcXVlcnknLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgfSkpIGFzIEFwcExpc3QpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVmYXVsdCgpOiBQcm9taXNlPEFwcE91dHB1dD4ge1xyXG4gICAgaWYgKCF0aGlzLmRhdGEpIGF3YWl0IHRoaXMubGlzdCgpO1xyXG4gICAgZm9yIChsZXQgYXBwIG9mIHRoaXMuZGF0YSEuaXRlbXMpIHtcclxuICAgICAgaWYgKGFwcC5uYW1lX3Nob3J0ID09PSAnTUFQMycgJiYgYXBwLnZlbmRvcl9uYW1lID09PSAncmF0aW9uYWknKSB7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdEFwcCA9IGFwcDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLl9kZWZhdWx0QXBwKVxyXG4gICAgICB0aHJvdyAnRGVmYXVsdCBBUFAgbm90IHByZXNlbnQgaW4gdGhlIGluZnJhc3RydWN0dXJlISBXYXMgaXQgaW1wb3J0ZWQ/JztcclxuICAgIHJldHVybiB0aGlzLl9kZWZhdWx0QXBwO1xyXG4gIH1cclxufVxyXG4iLCIvKipcclxuICogVXNlIGZvciBjb252ZXJ0aW5nIHN0cmluZ3MgcmVwcmVzZW50aW5nIG51bWJlciB0byBhIG51bWJlci5cclxuICogQHBhcmFtIHZhcmlhYmxlIE51bWJlciBvciBzdHJpbmcgcmVwcmVzZW50aW5nIGEgbnVtYmVyLlxyXG4gKi9cclxuY29uc3QgZ2V0TnVtYmVyID0gKHZhcmlhYmxlOiBzdHJpbmcgfCBudW1iZXIpID0+IHtcclxuICBpZiAodHlwZW9mIHZhcmlhYmxlID09PSAnc3RyaW5nJykge1xyXG4gICAgdmFyaWFibGUgPSBOdW1iZXIodmFyaWFibGUpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHZhcmlhYmxlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFllYXJGcm9tRXBvY2hUaW1lID0gKGVwb2NoVGltZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKGdldE51bWJlcihlcG9jaFRpbWUpICogMTAwMCkuZ2V0RnVsbFllYXIoKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRNb250aEZyb21FcG9jaFRpbWUgPSAoZXBvY2hUaW1lOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoZ2V0TnVtYmVyKGVwb2NoVGltZSkgKiAxMDAwKS5nZXRNb250aCgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldERheUZyb21FcG9jaFRpbWUgPSAoZXBvY2hUaW1lOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoZ2V0TnVtYmVyKGVwb2NoVGltZSkgKiAxMDAwKS5nZXREYXRlKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogTWF0Y2ggc3RyaW5nIG9uIHNwZWNpZmljIHN1YnN0cmluZyBhbmQgdmFsdWUuXHJcbiAqIEBwYXJhbSBzdHIgU3RyaW5nIHZhbHVlLlxyXG4gKiBAcGFyYW0gc2VwYXJhdG9yIFJlZ2V4IHRoYXQgc2hvdWxkIG1hdGNoIHRoZSBwcm92aWRlZCB2YWx1ZS5cclxuICogQHBhcmFtIGdyb3VwSWR4IEluZGV4IG9mIGEgZ3JvdXAgbWF0Y2hlZCBieSB0aGUgcmVnZXguXHJcbiAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSB0aGUgbWF0Y2hlZCBncm91cCBzaG91bGQgaGF2ZS5cclxuICovXHJcbmV4cG9ydCBjb25zdCBtYXRjaFN0cmluZ09uU2VwYXJhdG9yR3JvdXAgPSAoXHJcbiAgc3RyOiBzdHJpbmcsXHJcbiAgc2VwYXJhdG9yOiBzdHJpbmcsXHJcbiAgZ3JvdXBJZHg6IG51bWJlcixcclxuICB2YWx1ZTogc3RyaW5nLFxyXG4pID0+IHtcclxuICBjb25zdCBtYXRjaGVzID0gbmV3IFJlZ0V4cChzZXBhcmF0b3IpLmV4ZWMoc3RyKTtcclxuICBpZiAoIW1hdGNoZXMgfHwgZ3JvdXBJZHggPCAxIHx8IGdyb3VwSWR4ID49IG1hdGNoZXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcbiAgcmV0dXJuIG1hdGNoZXNbZ3JvdXBJZHhdID09PSB2YWx1ZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNYXRjaCBzdHJpbmcgaWYgaXQgY29udGFpbnMgc29tZSBvZiB0aGUgc3BlY2lmaWVkIHRva2Vucy5cclxuICogQHBhcmFtIHN0cmluZ1RvTWF0Y2ggU3RyaW5nIHZhbHVlLlxyXG4gKiBAcGFyYW0gdG9rZW5TdHJpbmcgU3RyaW5nIGNvbnRhaW5pbmcgdG9rZW5zL3dvcmRzIHNwbGl0IGJ5IGEgXCIgXCIuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0Y2hTdHJpbmdPblRva2VucyA9IChcclxuICBzdHJpbmdUb01hdGNoOiBzdHJpbmcsXHJcbiAgdG9rZW5TdHJpbmc6IHN0cmluZyxcclxuKSA9PiB7XHJcbiAgY29uc3QgdG9rZW5zID0gdG9rZW5TdHJpbmdcclxuICAgIC5zcGxpdCgnICcpXHJcbiAgICAuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAubWFwKCh0b2tlbikgPT4gYCg/PS4qXFxcXGIke3Rva2VufVxcXFxiKWApO1xyXG5cclxuICBjb25zdCBzZWFyY2hUZXJtUmVnZXggPSBuZXcgUmVnRXhwKHRva2Vucy5qb2luKCcnKSwgJ2dpbScpO1xyXG4gIHJldHVybiBzdHJpbmdUb01hdGNoLm1hdGNoKHNlYXJjaFRlcm1SZWdleCkgIT09IG51bGw7XHJcbn07XHJcblxyXG4vKipcclxuICogR3JvdXAgYnkgZm9yIGphdmFzY3JpcHQgYXJyYXkuXHJcbiAqIEBwYXJhbSBhcnIgQXJyYXkgb2Ygb2JqZWN0cy5cclxuICogQHBhcmFtIGtleSBGdW5jdGlvbiB0byBnZXQgdmFsdWUgZnJvbSBvYmplY3QgYnkgd2hpY2ggdGhlIG9iamVjdHMgYXJlIGdyb3VwZWQuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ3JvdXBCeSA9IDxULCBLIGV4dGVuZHMga2V5b2YgYW55PihhcnI6IFRbXSwga2V5OiAoaTogVCkgPT4gSykgPT5cclxuICBhcnIucmVkdWNlKFxyXG4gICAgKGdyb3VwcywgaXRlbSkgPT4ge1xyXG4gICAgICAoZ3JvdXBzW2tleShpdGVtKV0gfHw9IFtdKS5wdXNoKGl0ZW0pO1xyXG4gICAgICByZXR1cm4gZ3JvdXBzO1xyXG4gICAgfSxcclxuICAgIHt9IGFzIFJlY29yZDxLLCBUW10+LFxyXG4gICk7XHJcblxyXG4vKipcclxuICogQ29uc3RydWN0b3IgVHlwZVxyXG4gKi9cclxuZXhwb3J0IHR5cGUgQ29uc3RydWN0b3I8VD4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xyXG5cclxuLyoqXHJcbiAqIExvYWQgZGVmYXVsdCBjbGFzcyBieSBhIHN0cmluZ1xyXG4gKiBAcGFyYW0gY2xhc3NQYXRoXHJcbiAqIEBwYXJhbSBuYW1lXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZENsYXNzPFQ+KGNsYXNzUGF0aDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgPSAnZGVmYXVsdCcpOiBQcm9taXNlPENvbnN0cnVjdG9yPFQ+PiB7XHJcbiAgY29uc3QgbW9kdWxlID0gYXdhaXQgaW1wb3J0KGNsYXNzUGF0aCk7XHJcbiAgY29uc3QgQ2xhc3NDb25zdHJ1Y3RvciA9IG1vZHVsZVtuYW1lXTtcclxuICBpZiAoQ2xhc3NDb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENsYXNzUGF0aCAke2NsYXNzUGF0aH0gZG9lcyBub3QgZXhwb3J0ICR7bmFtZX0hYCk7XHJcbiAgfVxyXG4gIHJldHVybiBDbGFzc0NvbnN0cnVjdG9yIGFzIENvbnN0cnVjdG9yPFQ+O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zdGFudGlhdGU8VD4ocHJvcHM6IGFueSwgY2xhc3NQYXRoOiBzdHJpbmcsIG5hbWU6IHN0cmluZyA9ICdkZWZhdWx0Jyk6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IENscyA9IGF3YWl0IGxvYWRDbGFzczxUPihjbGFzc1BhdGgsIG5hbWUpO1xyXG4gIHJldHVybiBuZXcgQ2xzKHByb3BzKTtcclxufVxyXG4iLCJpbXBvcnQgQ2FzZXMgZnJvbSAnLi4vcm9vdC9jYXNlcyc7XHJcbmltcG9ydCB7IENhc2UgfSBmcm9tICcuLi9yb290L3R5cGVzL2Nhc2UnO1xyXG5pbXBvcnQgeyBDYXNlSCB9IGZyb20gJy4vdHlwZXMvY2FzZS1oJztcclxuaW1wb3J0IHsgQ2FzZUhpZXJhcmNoeSB9IGZyb20gJy4vdHlwZXMvY2FzZS1oaWVyYXJjaHktcmVzdWx0JztcclxuaW1wb3J0IHsgQ2FzZVNlYXJjaFBhcmFtcyB9IGZyb20gJy4vdHlwZXMvY2FzZS1zZWFyY2gtcGFyYW1zJztcclxuaW1wb3J0IHtcclxuICBnZXREYXlGcm9tRXBvY2hUaW1lLFxyXG4gIGdldE1vbnRoRnJvbUVwb2NoVGltZSxcclxuICBnZXRZZWFyRnJvbUVwb2NoVGltZSxcclxuICBncm91cEJ5LFxyXG4gIG1hdGNoU3RyaW5nT25Ub2tlbnMsXHJcbn0gZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCB7QXV0aEludGVncmF0aW9ufSBmcm9tIFwiLi4vaW50ZWdyYXRpb25cIjtcclxuXHJcbmV4cG9ydCB0eXBlIENhc2VUaXNzdWVzU3RhaW5zID0ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBsb2NOYW1lOiBzdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBIaWVyYXJjaHlOYW1lT3ZlcnJpZGVzID0ge1xyXG4gIFtrZXk6IHN0cmluZ106IHtcclxuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FzZUV4cGxvcmVyIHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogQ2FzZXM7XHJcbiAgcHJvdGVjdGVkIGN1c3RvbUNhc2VzOiBDYXNlSFtdIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJvdGVjdGVkIGNhc2VIaWVyYXJjaHk6IENhc2VIaWVyYXJjaHkgfCBudWxsID0gbnVsbDtcclxuICBwcm90ZWN0ZWQgY2FzZVRpc3N1ZXM6IENhc2VUaXNzdWVzU3RhaW5zW10gfCBudWxsID0gbnVsbDtcclxuICBwcm90ZWN0ZWQgY2FzZVN0YWluczogQ2FzZVRpc3N1ZXNTdGFpbnNbXSB8IG51bGwgPSBudWxsO1xyXG4gIHByb3RlY3RlZCBpbnRlZ3JhdGlvbjogQXV0aEludGVncmF0aW9uO1xyXG5cclxuICBpZGVudGlmaWVyU2VwYXJhdG9yOiBzdHJpbmcgPSAnJztcclxuICBoaWVyYXJjaHlTcGVjOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGhpZXJhcmNoeU5hbWVPdmVycmlkZXM6IEhpZXJhcmNoeU5hbWVPdmVycmlkZXMgPSB7fTtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogQ2FzZXMsIGludGVncmF0aW9uOiBBdXRoSW50ZWdyYXRpb24pIHtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB0aGlzLmludGVncmF0aW9uID0gaW50ZWdyYXRpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb25maWd1cmUgQ2FzZUV4cGxvcmVyLlxyXG4gICAqIEBwYXJhbSBpZGVudGlmaWVyU2VwYXJhdG9yIFJlZ2V4IG1hdGNoaW5nIGxvY2FsX2lkIGFuZCBpdHMgcGFydHMuXHJcbiAgICogQHBhcmFtIGhpZXJhcmNoeVNwZWMgQXJyYXkgb2YgaGllcmFyY2h5IGtleXMgZGVmaW5pbmcgaGllcmFyY2h5LlxyXG4gICAqIEBwYXJhbSBoaWVyYXJjaHlOYW1lT3ZlcnJpZGVzIE92ZXJyaWRlIHNwZWNpZmljIHZhbHVlcyBvZiBzcGVjaWZpYyBrZXlzIHRvIHVzZSBhcyBuYW1lcyBpbiBoaWVyYXJjaHkuXHJcbiAgICovXHJcbiAgdXNlKFxyXG4gICAgaWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nLFxyXG4gICAgaGllcmFyY2h5U3BlYzogc3RyaW5nW10sXHJcbiAgICBoaWVyYXJjaHlOYW1lT3ZlcnJpZGVzOiBIaWVyYXJjaHlOYW1lT3ZlcnJpZGVzID0ge30sXHJcbiAgKTogdm9pZCB7XHJcbiAgICB0aGlzLmhpZXJhcmNoeVNwZWMgPSBoaWVyYXJjaHlTcGVjO1xyXG4gICAgdGhpcy5pZGVudGlmaWVyU2VwYXJhdG9yID0gaWRlbnRpZmllclNlcGFyYXRvcjtcclxuICAgIHRoaXMuaGllcmFyY2h5TmFtZU92ZXJyaWRlcyA9IGhpZXJhcmNoeU5hbWVPdmVycmlkZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGNhc2VzIGV4dGVuZGVkIHdpdGggcGF0aCBpbiB0aGUgc3BlY2lmaWVkIGhpZXJhcmNoeS5cclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdldEN1c3RvbUNhc2VzKCkge1xyXG4gICAgaWYgKCF0aGlzLmN1c3RvbUNhc2VzKSB7XHJcbiAgICAgIHRoaXMuY3VzdG9tQ2FzZXMgPSAoYXdhaXQgdGhpcy5jb250ZXh0Lmxpc3QoKSkuaXRlbXMubWFwKChjYXNlT2JqKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLmNhc2VPYmosXHJcbiAgICAgICAgICBwYXRoSW5IaWVyYXJjaHk6IHRoaXMuZ2V0Q2FzZUhpZXJhcmNoeVBhdGgoY2FzZU9iaiksXHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jdXN0b21DYXNlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgY2FzZSdzIHBhdGggaW4gdGhlIHNwZWNpZmllZCBoaWVyYXJjaHkuXHJcbiAgICogQHBhcmFtIGNhc2VPYmogRU1QQUlBIENhc2UuXHJcbiAgICovXHJcbiAgZ2V0Q2FzZUhpZXJhcmNoeVBhdGgoY2FzZU9iajogQ2FzZSkge1xyXG4gICAgaWYgKCF0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IgfHwgIXRoaXMuaGllcmFyY2h5U3BlYykge1xyXG4gICAgICB0aHJvdyBgQXJndW1lbnRFcnJvcltDYXNlRXhwbG9yZXJdIGlkZW50aWZpZXJTZXBhcmF0b3Igb3IgaGllcmFyY2h5U3BlYyBpcyBtaXNzaW5nIC0gcmVxdWlyZWQgcHJvcGVydHkhYDtcclxuICAgIH1cclxuICAgIGxldCBwYXRoRmluaXNoZWQgPSBmYWxzZTtcclxuICAgIHJldHVybiB0aGlzLmhpZXJhcmNoeVNwZWMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbCA9IHRoaXMuZ2V0Q2FzZVZhbHVlKGN1cnIsIGNhc2VPYmopO1xyXG5cclxuICAgICAgY29uc3QgcmV0dXJuVmFsID0gcGF0aEZpbmlzaGVkID8gcHJldiA6IGAke3ByZXZ9LyR7dmFsfWA7XHJcbiAgICAgIGlmICh2YWwgPT09ICdPVEhFUicpIHtcclxuICAgICAgICBwYXRoRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXR1cm5WYWw7XHJcbiAgICB9LCAnJyk7XHJcbiAgfVxyXG5cclxuICAvLyBwcml2YXRlIGFzeW5jIGdldENhc2VIaWVyYXJjaHlQYXRoKGNhc2VPYmo6IENhc2UpOiBQcm9taXNlPHtwYXRoSW5IaWVyYXJjaHk6IHN0cmluZywgaGllcmFyY2h5OiBDYXNlSEVsZW1lbnR9PiB7XHJcbiAgLy8gICBpZiAoIXRoaXMuaWRlbnRpZmllclNlcGFyYXRvciB8fCAhdGhpcy5oaWVyYXJjaHlTcGVjKSB7XHJcbiAgLy8gICAgIHRocm93IGBBcmd1bWVudEVycm9yW0Nhc2VFeHBsb3Jlcl0gaWRlbnRpZmllclNlcGFyYXRvciBvciBoaWVyYXJjaHlTcGVjIGlzIG1pc3NpbmcgLSByZXF1aXJlZCBwcm9wZXJ0eSFgO1xyXG4gIC8vICAgfVxyXG4gIC8vXHJcbiAgLy8gICBsZXQgY3VycmVudE5vZGUgPSB1bmRlZmluZWQ7XHJcbiAgLy8gICBjb25zdCByZXN1bHQgPSB7XHJcbiAgLy8gICAgIHBhdGhJbkhpZXJhcmNoeTogXCJcIixcclxuICAvLyAgICAgaGllcmFyY2h5OiBjdXJyZW50Tm9kZVxyXG4gIC8vICAgfTtcclxuICAvLyAgIGZvciAobGV0IHNwZWNLZXkgb2YgdGhpcy5oaWVyYXJjaHlTcGVjKSB7XHJcbiAgLy8gICAgIGNvbnN0IHZhbCA9IHRoaXMuZ2V0Q2FzZVZhbHVlKHNwZWNLZXksIGNhc2VPYmopO1xyXG4gIC8vICAgICBjb25zdCB0cmFuc2xhdGVkID0gdGhpcy5pbnRlZ3JhdGlvbi50cmFuc2xhdGVQYXRoU3BlYyhzcGVjS2V5LFxyXG4gIC8vICAgICAgICAgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpID8gdmFsIDogdmFsLnRvU3RyaW5nKCkpO1xyXG4gIC8vXHJcbiAgLy8gICAgIHJlc3VsdC5wYXRoSW5IaWVyYXJjaHkgPSBgJHtyZXN1bHQucGF0aEluSGllcmFyY2h5fS8ke3ZhbH1gO1xyXG4gIC8vICAgICBjdXJyZW50Tm9kZSA9IHtcclxuICAvLyAgICAgICBpZDogdmFsLFxyXG4gIC8vICAgICAgIG5hbWU6IHRyYW5zbGF0ZWQsXHJcbiAgLy8gICAgICAgY3VycmVudE5vZGU6IGN1cnJlbnROb2RlXHJcbiAgLy8gICAgIH07XHJcbiAgLy9cclxuICAvLyAgICAgaWYgKHZhbCA9PT0gJ09USEVSJykge1xyXG4gIC8vICAgICAgIGJyZWFrO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICB9XHJcbiAgLy8gICByZXR1cm4gcmVzdWx0O1xyXG4gIC8vIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBzaW5nbGUgY2FzZS5cclxuICAgKiBAcGFyYW0gY2FzZUlkIElEIG9mIGEgY2FzZS5cclxuICAgKi9cclxuICBhc3luYyBnZXRDYXNlKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxDYXNlSD4ge1xyXG4gICAgbGV0IGNhc2VPYmo6IENhc2UgfCB1bmRlZmluZWQ7XHJcbiAgICBpZiAodGhpcy5jdXN0b21DYXNlcykge1xyXG4gICAgICBjYXNlT2JqID0gdGhpcy5jdXN0b21DYXNlcy5maW5kKChjcykgPT4gY3MuaWQgPT09IGNhc2VJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFjYXNlT2JqKSB7XHJcbiAgICAgIGNhc2VPYmogPSBhd2FpdCB0aGlzLmNvbnRleHQuZ2V0KGNhc2VJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgLi4uY2FzZU9iaiwgcGF0aEluSGllcmFyY2h5OiB0aGlzLmdldENhc2VIaWVyYXJjaHlQYXRoKGNhc2VPYmopIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGNhc2UncyB2YWx1ZSwgY2FuIGJlIGEgc2ltcGxlIGF0dHJpYnV0ZSwgb3Igc29tZSBkZXJpdmVkIHZhbHVlLlxyXG4gICAqIEBwYXJhbSBrZXkgS2V5IHNwZWNpZnlpbmcgdmFsdWUgdGhhdCBjYW4gYmUgZXh0cmFjdGVkIGZyb20gYSBjYXNlLlxyXG4gICAqIEBwYXJhbSBjcyBDYXNlIG9iamVjdC5cclxuICAgKi9cclxuICBwcml2YXRlIGdldENhc2VWYWx1ZShrZXk6IHN0cmluZywgY3M6IENhc2UpIHtcclxuICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgIGNhc2UgJ3llYXInOiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZVllYXIoY3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vbnRoJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VNb250aChjcyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnZGF5Jzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VEYXkoY3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2Rlc2NyaXB0aW9uJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VEZXNjcmlwdGlvbihjcyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAndGlzc3Vlcyc6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlVGlzc3Vlcyhjcyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnc3RhaW5zJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VTdGFpbnMoY3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICBpZiAoa2V5LnNsaWNlKDAsIDgpID09PSAnaWRfcGFydF8nICYmICFpc05hTihOdW1iZXIoa2V5LnNsaWNlKDgpKSkpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldENhc2VJZGVudGlmaWVyUGFydChjcywgTnVtYmVyKGtleS5zbGljZSg4KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBgS2V5RXJyb3JbQ2FzZUV4cGxvcmVyXSBcXFwiJHtrZXl9XFxcIiBpcyBub3Qgc3VwcG9ydGVkIWA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV2YWx1YXRlcyBjYXNlJ3MgdmFsdWUgYWdhaW5zdCBhIHByb3ZpZGVkIHZhbHVlLlxyXG4gICAqIEBwYXJhbSBrZXkgS2V5IHNwZWNpZnlpbmcgdmFsdWUgdGhhdCBjYW4gYmUgZXh0cmFjdGVkIGZyb20gYSBjYXNlLlxyXG4gICAqIEBwYXJhbSBldmFsVmFsdWUgVmFsdWUgZm9yIGNvbXBhcmlzb24vZXZhbHVhdGlvbi5cclxuICAgKiBAcGFyYW0gY3MgQ2FzZSBvYmplY3QuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VWYWx1ZShcclxuICAgIGtleTogc3RyaW5nLFxyXG4gICAgZXZhbFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgIGNzOiBDYXNlLFxyXG4gICkge1xyXG4gICAgY29uc3QgY2FzZVZhbHVlID0gdGhpcy5nZXRDYXNlVmFsdWUoa2V5LCBjcyk7XHJcbiAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICBjYXNlICd5ZWFyJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZVllYXIoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnbW9udGgnOiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlTW9udGgoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnZGF5Jzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZURheShjYXNlVmFsdWUgYXMgc3RyaW5nLCBldmFsVmFsdWUgYXMgc3RyaW5nKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdkZXNjcmlwdGlvbic6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNhc2VEZXNjcmlwdGlvbihcclxuICAgICAgICAgIGNhc2VWYWx1ZSBhcyBzdHJpbmcsXHJcbiAgICAgICAgICBldmFsVmFsdWUgYXMgc3RyaW5nLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAndGlzc3Vlcyc6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNhc2VUaXNzdWVzKFxyXG4gICAgICAgICAgY2FzZVZhbHVlIGFzIHN0cmluZ1tdLFxyXG4gICAgICAgICAgZXZhbFZhbHVlIGFzIHN0cmluZyB8IHN0cmluZ1tdLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnc3RhaW5zJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQ2FzZVN0YWlucyhcclxuICAgICAgICAgIGNhc2VWYWx1ZSBhcyBzdHJpbmdbXSxcclxuICAgICAgICAgIGV2YWxWYWx1ZSBhcyBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAvLyBhbnkgaW52YWxpZCBrZXkgd2lsbCBiZSBjYXVnaHQgaW4gZ2V0Q2FzZVZhbHVlIGNhbGxcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmF1bGF0ZUNhc2VJZGVudGlmaWVyUGFydChcclxuICAgICAgICAgIGNhc2VWYWx1ZSBhcyBzdHJpbmcsXHJcbiAgICAgICAgICBldmFsVmFsdWUgYXMgc3RyaW5nLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q2FzZVllYXIoY3M6IENhc2UpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGdldFllYXJGcm9tRXBvY2hUaW1lKGNzLmNyZWF0ZWRfYXQpLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZU1vbnRoKGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBnZXRNb250aEZyb21FcG9jaFRpbWUoY3MuY3JlYXRlZF9hdCkudG9TdHJpbmcoKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRDYXNlRGF5KGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBnZXREYXlGcm9tRXBvY2hUaW1lKGNzLmNyZWF0ZWRfYXQpLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZUlkZW50aWZpZXJQYXJ0KGNzOiBDYXNlLCBwYXJ0SWR4OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgaWYgKCF0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IpIHtcclxuICAgICAgdGhyb3cgYEFyZ3VtZW50RXJyb3JbQ2FzZUV4cGxvcmVyXSBpZGVudGlmaWVyU2VwYXJhdG9yIGlzIG1pc3NpbmcgLSByZXF1aXJlZCBwcm9wZXJ0eSFgO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGFydHMgPSBuZXcgUmVnRXhwKHRoaXMuaWRlbnRpZmllclNlcGFyYXRvcikuZXhlYyhjcy5sb2NhbF9pZCB8fCAnJyk7XHJcbiAgICBpZiAoIXBhcnRzKSByZXR1cm4gJ09USEVSJztcclxuICAgIGlmIChwYXJ0SWR4IDwgMSB8fCBwYXJ0SWR4ID49IHBhcnRzLmxlbmd0aClcclxuICAgICAgdGhyb3cgYEtleUVycm9yW0Nhc2VFeHBsb3Jlcl0gaW52YWxpZCBrZXkgXFxcImlkX3BhcnRfPGluZGV4PlxcXCIsIGdyb3VwIGluZGV4IGlzIG5vdCB2YWxpZCFgO1xyXG4gICAgcmV0dXJuIHBhcnRzW3BhcnRJZHhdO1xyXG4gIH1cclxuICBwcml2YXRlIGdldENhc2VEZXNjcmlwdGlvbihjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gY3MuZGVzY3JpcHRpb24gfHwgJyc7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZVRpc3N1ZXMoY3M6IENhc2UpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoY3MudGlzc3Vlcyk7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZVN0YWlucyhjczogQ2FzZSk6IHN0cmluZ1tdIHtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhjcy5zdGFpbnMpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VZZWFyKHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IGV2YWxWYWx1ZTtcclxuICB9XHJcbiAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VNb250aCh2YWx1ZTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgfVxyXG4gIHByaXZhdGUgZXZhdWxhdGVDYXNlRGF5KHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IGV2YWxWYWx1ZTtcclxuICB9XHJcbiAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VJZGVudGlmaWVyUGFydChcclxuICAgIHZhbHVlOiBzdHJpbmcsXHJcbiAgICBldmFsVmFsdWU6IHN0cmluZyxcclxuICApOiBib29sZWFuIHtcclxuICAgIHJldHVybiB2YWx1ZSA9PT0gZXZhbFZhbHVlO1xyXG4gIH1cclxuICBwcml2YXRlIGV2YWx1YXRlQ2FzZURlc2NyaXB0aW9uKHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gbWF0Y2hTdHJpbmdPblRva2Vucyh2YWx1ZSwgZXZhbFZhbHVlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VUaXNzdWVzKFxyXG4gICAgdmFsdWU6IHN0cmluZ1tdLFxyXG4gICAgZXZhbFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICApOiBib29sZWFuIHtcclxuICAgIGlmICghKGV2YWxWYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICBldmFsVmFsdWUgPSBbZXZhbFZhbHVlXTtcclxuICAgIH1cclxuICAgIC8vIEFMTCBzZWFyY2hlZCB0aXNzdWVzIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIHJldHVybiBldmFsVmFsdWUuZXZlcnkoKHRpc3N1ZSkgPT4gdmFsdWUuaW5jbHVkZXModGlzc3VlKSk7XHJcblxyXG4gICAgLy8gU09NRSBzZWFyY2hlZCB0aXNzdWVzIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIC8vIHJldHVybiBldmFsVmFsdWUuc29tZSgodGlzc3VlKSA9PiB2YWx1ZS5pbmNsdWRlcyh0aXNzdWUpKVxyXG4gIH1cclxuICBwcml2YXRlIGV2YWx1YXRlQ2FzZVN0YWlucyhcclxuICAgIHZhbHVlOiBzdHJpbmdbXSxcclxuICAgIGV2YWxWYWx1ZTogc3RyaW5nIHwgc3RyaW5nW10sXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoIShldmFsVmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgZXZhbFZhbHVlID0gW2V2YWxWYWx1ZV07XHJcbiAgICB9XHJcbiAgICAvLyBBTEwgc2VhcmNoZWQgc3RhaW5zIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIHJldHVybiBldmFsVmFsdWUuZXZlcnkoKHN0YWluKSA9PiB2YWx1ZS5pbmNsdWRlcyhzdGFpbikpO1xyXG5cclxuICAgIC8vIFNPTUUgc2VhcmNoZWQgc3RhaW5zIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIC8vIHJldHVybiBldmFsVmFsdWUuc29tZSgoc3RhaW4pID0+IHZhbHVlLmluY2x1ZGVzKHN0YWluKSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlY3Vyc2l2ZWx5IGNvbnN0cnVjdHMgYSBoaWVyYXJjaHkgYnkgc2luZ2xlIGxldmVsc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgaGllcmFyY2h5TGV2ZWwoXHJcbiAgICBrZXlzOiBzdHJpbmdbXSxcclxuICAgIGtleUlkeDogbnVtYmVyLFxyXG4gICAgY2FzZXM6IENhc2VbXSxcclxuICAgIGN1cnJlbnRIaWVyYXJjaHlQYXRoOiBzdHJpbmcsXHJcbiAgICBpZD86IHN0cmluZyxcclxuICAgIG5hbWU/OiBzdHJpbmcsXHJcbiAgICBwYXJlbnQ/OiBDYXNlSGllcmFyY2h5LFxyXG4gICk6IFByb21pc2U8Q2FzZUhpZXJhcmNoeT4ge1xyXG4gICAgaWYgKGtleUlkeCA+PSBrZXlzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGxldmVsSWQ6IGlkLFxyXG4gICAgICAgIGxldmVsTmFtZTogbmFtZSxcclxuICAgICAgICBsYXN0TGV2ZWw6IHRydWUsXHJcbiAgICAgICAgcGFyZW50OiBwYXJlbnQsXHJcbiAgICAgICAgaXRlbXM6IGNhc2VzLm1hcCgoY2FzZU9iaikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHsgLi4uY2FzZU9iaiwgcGF0aEluSGllcmFyY2h5OiBjdXJyZW50SGllcmFyY2h5UGF0aCB9O1xyXG4gICAgICAgIH0pLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gZ3JvdXBpbmcgYnkgYXJyYXkgdmFsdWVzKHRpc3N1ZXMsIHN0YWlucykgaXMgbm90IGV4cGVjdGVkLCBidXQgd29ya3MgYnkgZ3JvdXBpbmcgb24gZmlyc3QgdmFsdWUgb2YgYXJyYXlcclxuICAgIGNvbnN0IGdyb3VwcyA9IGdyb3VwQnkoY2FzZXMsIChjcykgPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0Q2FzZVZhbHVlKGtleXNba2V5SWR4XSwgY3MpO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWVbMF0gfHwgJyc7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0OiBDYXNlSGllcmFyY2h5ID0ge1xyXG4gICAgICBsZXZlbE5hbWU6IG5hbWUsXHJcbiAgICAgIGxldmVsSWQ6IGlkLFxyXG4gICAgICBsYXN0TGV2ZWw6IGZhbHNlLFxyXG4gICAgICBpdGVtczogW10sXHJcbiAgICB9O1xyXG4gICAgcmVzdWx0Lml0ZW1zID0gYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoZ3JvdXBzKS5tYXAoYXN5bmMgKGl0ZW1JZCk6IFByb21pc2U8Q2FzZUhpZXJhcmNoeT4gPT4ge1xyXG4gICAgICBsZXQgb3ZlcnJpZGVOYW1lID1cclxuICAgICAgICAgIHRoaXMuaGllcmFyY2h5TmFtZU92ZXJyaWRlc1trZXlzW2tleUlkeF1dPy5baXRlbUlkXSB8fFxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5pbnRlZ3JhdGlvbi50cmFuc2xhdGVQYXRoU3BlYyhrZXlzW2tleUlkeF0sIGl0ZW1JZCkgfHxcclxuICAgICAgICAgIGl0ZW1JZDtcclxuXHJcbiAgICAgIGlmIChpdGVtSWQgPT09ICdPVEhFUicpIHtcclxuICAgICAgICBjb25zdCBjaGlsZCA9IGF3YWl0IHRoaXMuaGllcmFyY2h5TGV2ZWwoXHJcbiAgICAgICAgICAgIGtleXMsXHJcbiAgICAgICAgICAgIGtleXMubGVuZ3RoLFxyXG4gICAgICAgICAgICBncm91cHNbaXRlbUlkXSxcclxuICAgICAgICAgICAgYCR7Y3VycmVudEhpZXJhcmNoeVBhdGh9LyR7b3ZlcnJpZGVOYW1lfWAsXHJcbiAgICAgICAgICAgIGl0ZW1JZCxcclxuICAgICAgICAgICAgb3ZlcnJpZGVOYW1lLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY2hpbGQucGFyZW50ID0gcmVzdWx0O1xyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjaGlsZCA9IGF3YWl0IHRoaXMuaGllcmFyY2h5TGV2ZWwoXHJcbiAgICAgICAgICBrZXlzLFxyXG4gICAgICAgICAga2V5SWR4ICsgMSxcclxuICAgICAgICAgIGdyb3Vwc1tpdGVtSWRdLFxyXG4gICAgICAgICAgYCR7Y3VycmVudEhpZXJhcmNoeVBhdGh9LyR7b3ZlcnJpZGVOYW1lfWAsXHJcbiAgICAgICAgICBpdGVtSWQsXHJcbiAgICAgICAgICBvdmVycmlkZU5hbWUsXHJcbiAgICAgICk7XHJcbiAgICAgIGNoaWxkLnBhcmVudCA9IHJlc3VsdDtcclxuICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgfSkpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnN0cnVjdHMgYSBoaWVyYXJjaHkgYmFzZWQgb24gc3BlYyBjb25maWd1cmVkIGluIHRoZSBDYXNlRXhwbG9yZXIgY2xhc3MuXHJcbiAgICovXHJcbiAgYXN5bmMgaGllcmFyY2h5KCk6IFByb21pc2U8Q2FzZUhpZXJhcmNoeT4ge1xyXG4gICAgaWYgKCF0aGlzLmNhc2VIaWVyYXJjaHkpIHtcclxuICAgICAgY29uc3QgY2FzZXMgPSBhd2FpdCB0aGlzLmdldEN1c3RvbUNhc2VzKCk7XHJcbiAgICAgIHRoaXMuY2FzZUhpZXJhcmNoeSA9IGF3YWl0IHRoaXMuaGllcmFyY2h5TGV2ZWwoXHJcbiAgICAgICAgdGhpcy5oaWVyYXJjaHlTcGVjLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgY2FzZXMsXHJcbiAgICAgICAgJycsXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jYXNlSGllcmFyY2h5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VhcmNoIGNhc2VzLlxyXG4gICAqIEBwYXJhbSBxdWVyeSBTZWFyY2ggcXVlcnkuXHJcbiAgICovXHJcbiAgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBDYXNlU2VhcmNoUGFyYW1zW10pOiBQcm9taXNlPENhc2VIW10+IHtcclxuICAgIGxldCBmaWx0ZXJlZENhc2VzID0gYXdhaXQgdGhpcy5nZXRDdXN0b21DYXNlcygpO1xyXG4gICAgcXVlcnkuZm9yRWFjaChcclxuICAgICAgKHsga2V5LCB2YWx1ZSB9KSA9PlxyXG4gICAgICAgIChmaWx0ZXJlZENhc2VzID0gZmlsdGVyZWRDYXNlcy5maWx0ZXIoKGNzKSA9PlxyXG4gICAgICAgICAgdGhpcy5ldmFsdWF0ZUNhc2VWYWx1ZShrZXksIHZhbHVlLCBjcyksXHJcbiAgICAgICAgKSksXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBmaWx0ZXJlZENhc2VzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCB0aXNzdWVzIGluIGF2YWlsYWJsZSBjYXNlcy5cclxuICAgKiBAcGFyYW0gbG9jYWxpemF0aW9uIExhbmd1YWdlIG9mIHRpc3N1ZSBuYW1lcy5cclxuICAgKi9cclxuICBhc3luYyB0aXNzdWVzKGxvY2FsaXphdGlvbjogc3RyaW5nID0gJ0VOJyk6IFByb21pc2U8Q2FzZVRpc3N1ZXNTdGFpbnNbXT4ge1xyXG4gICAgaWYgKCF0aGlzLmNhc2VUaXNzdWVzKSB7XHJcbiAgICAgIGNvbnN0IGNhc2VzID0gYXdhaXQgdGhpcy5nZXRDdXN0b21DYXNlcygpO1xyXG5cclxuICAgICAgY29uc3QgYWxsVGlzc3VlczogQ2FzZVRpc3N1ZXNTdGFpbnNbXSA9IFtdO1xyXG4gICAgICBjYXNlcy5mb3JFYWNoKChjKSA9PlxyXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGMudGlzc3VlcylcclxuICAgICAgICAgIC5tYXAoKFt0aXNOYW1lLCB0aXNWYWx1ZV06IFtzdHJpbmcsIGFueV0pID0+ICh7XHJcbiAgICAgICAgICAgIG5hbWU6IHRpc05hbWUsXHJcbiAgICAgICAgICAgIGxvY05hbWU6IHRpc1ZhbHVlW2xvY2FsaXphdGlvbl0sXHJcbiAgICAgICAgICB9KSlcclxuICAgICAgICAgIC5mb3JFYWNoKCh0KSA9PiBhbGxUaXNzdWVzLnB1c2godCkpLFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmNhc2VUaXNzdWVzID0gW1xyXG4gICAgICAgIC4uLm5ldyBNYXAoXHJcbiAgICAgICAgICBhbGxUaXNzdWVzLm1hcCgodCkgPT4gW0pTT04uc3RyaW5naWZ5KFt0Lm5hbWUsIHQubG9jTmFtZV0pLCB0XSksXHJcbiAgICAgICAgKS52YWx1ZXMoKSxcclxuICAgICAgXTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmNhc2VUaXNzdWVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCBzdGFpbnMgaW4gYXZhaWxhYmxlIGNhc2VzLlxyXG4gICAqIEBwYXJhbSBsb2NhbGl6YXRpb24gTGFuZ3VhZ2Ugb2Ygc3RhaW5zIG5hbWVzLlxyXG4gICAqL1xyXG4gIGFzeW5jIHN0YWlucyhsb2NhbGl6YXRpb246IHN0cmluZyA9ICdFTicpOiBQcm9taXNlPENhc2VUaXNzdWVzU3RhaW5zW10+IHtcclxuICAgIGlmICghdGhpcy5jYXNlU3RhaW5zKSB7XHJcbiAgICAgIGNvbnN0IGNhc2VzID0gYXdhaXQgdGhpcy5nZXRDdXN0b21DYXNlcygpO1xyXG5cclxuICAgICAgY29uc3QgYWxsU3RhaW5zOiBDYXNlVGlzc3Vlc1N0YWluc1tdID0gW107XHJcbiAgICAgIGNhc2VzLmZvckVhY2goKGMpID0+XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoYy5zdGFpbnMpXHJcbiAgICAgICAgICAubWFwKChbc3RuTmFtZSwgc3RuVmFsdWVdOiBbc3RyaW5nLCBhbnldKSA9PiAoe1xyXG4gICAgICAgICAgICBuYW1lOiBzdG5OYW1lLFxyXG4gICAgICAgICAgICBsb2NOYW1lOiBzdG5WYWx1ZVtsb2NhbGl6YXRpb25dLFxyXG4gICAgICAgICAgfSkpXHJcbiAgICAgICAgICAuZm9yRWFjaCgocykgPT4gYWxsU3RhaW5zLnB1c2gocykpLFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmNhc2VTdGFpbnMgPSBbXHJcbiAgICAgICAgLi4ubmV3IE1hcChcclxuICAgICAgICAgIGFsbFN0YWlucy5tYXAoKHMpID0+IFtKU09OLnN0cmluZ2lmeShbcy5uYW1lLCBzLmxvY05hbWVdKSwgc10pLFxyXG4gICAgICAgICkudmFsdWVzKCksXHJcbiAgICAgIF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jYXNlU3RhaW5zO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2FzZXMgZnJvbSAnLi4vcm9vdC9jYXNlcyc7XHJcbmltcG9ydCB7IFNsaWRlIH0gZnJvbSAnLi4vcm9vdC90eXBlcy9zbGlkZSc7XHJcbmltcG9ydCB7IG1hdGNoU3RyaW5nT25TZXBhcmF0b3JHcm91cCB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQge0F1dGhJbnRlZ3JhdGlvbn0gZnJvbSBcIi4uL2ludGVncmF0aW9uXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXc2lFeHBsb3JlciB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IENhc2VzO1xyXG4gIHByb3RlY3RlZCBsYXN0Q2FzZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICBwcm90ZWN0ZWQgZGF0YTogU2xpZGVbXSB8IG51bGwgPSBudWxsO1xyXG4gIHByb3RlY3RlZCBzbGlkZXNEYXRhOiBTbGlkZVtdIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJvdGVjdGVkIG1hc2tzRGF0YTogU2xpZGVbXSB8IG51bGwgPSBudWxsO1xyXG4gIHByb3RlY3RlZCBpbnRlZ3JhdGlvbjogQXV0aEludGVncmF0aW9uO1xyXG5cclxuICBtYXNrSWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nID0gJyc7XHJcbiAgbWFza0lkZW50aWZpZXJWYWx1ZTogc3RyaW5nID0gJyc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENhc2VzLCBpbnRlZ3JhdGlvbjogQXV0aEludGVncmF0aW9uKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgdGhpcy5pbnRlZ3JhdGlvbiA9IGludGVncmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uZmlndXJlIFdzaUV4cGxvcmVyIHdpdGggcmVnZXggaWRlbnRpZnlpbmcgdGhlIGxvY2FsX2lkIHBhcnQgYW5kIHZhbHVlIHRoaXMgcGFydCBzaG91bGQgY29udGFpbiB0byBkaXN0aWd1aXNoIG1hc2tzIGFuZCBzbGlkZXMuXHJcbiAgICogQHBhcmFtIG1hc2tJZGVudGlmaWVyU2VwYXJhdG9yIFJlZ2V4IHNwZWNpZnlpbmcgcGFydCBvZiBsb2NhbF9pZCB0aGF0IHNob3VsZCBpZGVudGlmeSB0aGUgV1NJIHR5cGVcclxuICAgKiBAcGFyYW0gbWFza0lkZW50aWZpZXJWYWx1ZSBWYWx1ZSB0aGUgbG9jYWxfaWQgcGFydCBvZiBXU0kgc2hvdWxkIGhhdmUgdG8gaWRlbnRpZnkgdGhlIFdTSSBhcyBtYXNrXHJcbiAgICovXHJcbiAgdXNlKG1hc2tJZGVudGlmaWVyU2VwYXJhdG9yOiBzdHJpbmcsIG1hc2tJZGVudGlmaWVyVmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5tYXNrSWRlbnRpZmllclNlcGFyYXRvciA9IG1hc2tJZGVudGlmaWVyU2VwYXJhdG9yO1xyXG4gICAgdGhpcy5tYXNrSWRlbnRpZmllclZhbHVlID0gbWFza0lkZW50aWZpZXJWYWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGFsbCBXU0lzIG9mIGNhc2VcclxuICAgKiBAcGFyYW0gY2FzZUlkIElEIG9mIGNhc2VcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdldEFsbFNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVbXT4ge1xyXG4gICAgaWYgKHRoaXMubGFzdENhc2VJZCAhPT0gY2FzZUlkIHx8ICF0aGlzLmRhdGEpIHtcclxuICAgICAgdGhpcy5kYXRhID0gKGF3YWl0IHRoaXMuY29udGV4dC5zbGlkZXMoY2FzZUlkKSkuaXRlbXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIGFjdHVhbCBzbGlkZXMgb2YgY2FzZVxyXG4gICAqIEBwYXJhbSBjYXNlSWQgSUQgb2YgY2FzZVxyXG4gICAqL1xyXG4gIGFzeW5jIHNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVbXT4ge1xyXG4gICAgaWYgKHRoaXMubGFzdENhc2VJZCAhPT0gY2FzZUlkIHx8ICF0aGlzLnNsaWRlc0RhdGEpIHtcclxuICAgICAgdGhpcy5zbGlkZXNEYXRhID0gKGF3YWl0IHRoaXMuZ2V0QWxsU2xpZGVzKGNhc2VJZCkpLmZpbHRlcigoc2xpZGUpID0+IHtcclxuICAgICAgICByZXR1cm4gIW1hdGNoU3RyaW5nT25TZXBhcmF0b3JHcm91cChcclxuICAgICAgICAgIHNsaWRlLmxvY2FsX2lkIHx8ICcnLFxyXG4gICAgICAgICAgdGhpcy5tYXNrSWRlbnRpZmllclNlcGFyYXRvcixcclxuICAgICAgICAgIDEsXHJcbiAgICAgICAgICB0aGlzLm1hc2tJZGVudGlmaWVyVmFsdWUsXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zbGlkZXNEYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIG1hc2tzIG9mIGEgY2FzZVxyXG4gICAqIEBwYXJhbSBjYXNlSWQgSUQgb2YgY2FzZVxyXG4gICAqL1xyXG4gIGFzeW5jIG1hc2tzKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxTbGlkZVtdPiB7XHJcbiAgICBpZiAodGhpcy5sYXN0Q2FzZUlkICE9PSBjYXNlSWQgfHwgIXRoaXMubWFza3NEYXRhKSB7XHJcbiAgICAgIHRoaXMubWFza3NEYXRhID0gKGF3YWl0IHRoaXMuZ2V0QWxsU2xpZGVzKGNhc2VJZCkpLmZpbHRlcigoc2xpZGUpID0+IHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwKFxyXG4gICAgICAgICAgc2xpZGUubG9jYWxfaWQgfHwgJycsXHJcbiAgICAgICAgICB0aGlzLm1hc2tJZGVudGlmaWVyU2VwYXJhdG9yLFxyXG4gICAgICAgICAgMSxcclxuICAgICAgICAgIHRoaXMubWFza0lkZW50aWZpZXJWYWx1ZSxcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLm1hc2tzRGF0YTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUm9vdEFQSSwgUm9vdENvbnRleHQgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IENhc2VFeHBsb3JlciBmcm9tICcuLi9leHRlbnNpb25zL2Nhc2UtZXhwbG9yZXInO1xyXG5pbXBvcnQgV3NpRXhwbG9yZXIgZnJvbSAnLi4vZXh0ZW5zaW9ucy93c2ktZXhwbG9yZXInO1xyXG5pbXBvcnQgUm9vdCBmcm9tICcuL3Jvb3QnO1xyXG5pbXBvcnQgeyBDYXNlIH0gZnJvbSAnLi90eXBlcy9jYXNlJztcclxuaW1wb3J0IHsgQ2FzZUxpc3QgfSBmcm9tICcuL3R5cGVzL2Nhc2UtbGlzdCc7XHJcbmltcG9ydCB7IFNsaWRlTGlzdCB9IGZyb20gJy4vdHlwZXMvc2xpZGUtbGlzdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXNlcyBleHRlbmRzIFJvb3RDb250ZXh0IHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdEFQSTtcclxuICBwcm90ZWN0ZWQgZGF0YTogQ2FzZUxpc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY2FzZUV4cGxvcmVyOiBDYXNlRXhwbG9yZXI7XHJcbiAgd3NpRXhwbG9yZXI6IFdzaUV4cGxvcmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcbiAgICB0aGlzLmNhc2VFeHBsb3JlciA9IG5ldyBDYXNlRXhwbG9yZXIodGhpcywgY29udGV4dC5pbnRlZ3JhdGlvbik7XHJcbiAgICB0aGlzLndzaUV4cGxvcmVyID0gbmV3IFdzaUV4cGxvcmVyKHRoaXMsIGNvbnRleHQuaW50ZWdyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbGlzdCgpOiBQcm9taXNlPENhc2VMaXN0PiB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YSkge1xyXG4gICAgICB0aGlzLmRhdGEgPSAoYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvY2FzZXMnKSkgYXMgQ2FzZUxpc3Q7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0KGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxDYXNlPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY2FzZXMvJHtjYXNlSWR9YCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzbGlkZXMoY2FzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlTGlzdD4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2Nhc2VzLyR7Y2FzZUlkfS9zbGlkZXNgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUm9vdENvbnRleHQgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IFJvb3QgZnJvbSAnLi9yb290JztcclxuaW1wb3J0IHsgV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24gfSBmcm9tICcuL3R5cGVzL3dvcmtiZW5jaC1zZXJ2aWNlLWFwaS12LTMtY3VzdG9tLW1vZGVscy1leGFtaW5hdGlvbnMtZXhhbWluYXRpb24nO1xyXG5pbXBvcnQgeyBFeGFtaW5hdGlvblF1ZXJ5IH0gZnJvbSAnLi90eXBlcy9leGFtaW5hdGlvbi1xdWVyeSc7XHJcbmltcG9ydCB7IEV4YW1pbmF0aW9uTGlzdCB9IGZyb20gJy4vdHlwZXMvZXhhbWluYXRpb24tbGlzdCc7XHJcbmltcG9ydCB7IFNjb3BlVG9rZW5BbmRTY29wZUlkIH0gZnJvbSAnLi90eXBlcy9zY29wZS10b2tlbi1hbmQtc2NvcGUtaWQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhhbWluYXRpb25zIGV4dGVuZHMgUm9vdENvbnRleHQge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBSb290O1xyXG4gIHByb3RlY3RlZCBkYXRhOiBFeGFtaW5hdGlvbkxpc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGUoXHJcbiAgICBjYXNlSWQ6IHN0cmluZyxcclxuICAgIGFwcElkOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbj4ge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuY29udGV4dDtcclxuICAgIHNlbGYucmVxdWlyZXMoJ2Nhc2VJZCcsIGNhc2VJZCk7XHJcbiAgICByZXR1cm4gc2VsZi5yYXdRdWVyeSgnL2V4YW1pbmF0aW9ucycsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgYm9keToge1xyXG4gICAgICAgIGNhc2VfaWQ6IGNhc2VJZCxcclxuICAgICAgICBhcHBfaWQ6IGFwcElkLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBxdWVyeShcclxuICAgIHF1ZXJ5OiBFeGFtaW5hdGlvblF1ZXJ5LFxyXG4gICAgc2tpcD86IG51bWJlciB8IHVuZGVmaW5lZCxcclxuICAgIGxpbWl0PzogbnVtYmVyIHwgdW5kZWZpbmVkLFxyXG4gICk6IFByb21pc2U8RXhhbWluYXRpb25MaXN0PiB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcy5jb250ZXh0O1xyXG4gICAgcmV0dXJuIHNlbGYucmF3UXVlcnkoYC9leGFtaW5hdGlvbnMvcXVlcnlgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgICBxdWVyeTogeyBza2lwLCBsaW1pdCB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoXHJcbiAgICBleGFtaW5hdGlvbklkOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbj4ge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuY29udGV4dDtcclxuICAgIHNlbGYucmVxdWlyZXMoJ2V4YW1pbmF0aW9uSWQnLCBleGFtaW5hdGlvbklkKTtcclxuICAgIHJldHVybiBzZWxmLnJhd1F1ZXJ5KGAvZXhhbWluYXRpb25zLyR7ZXhhbWluYXRpb25JZH1gKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNjb3BlKGV4YW1pbmF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8U2NvcGVUb2tlbkFuZFNjb3BlSWQ+IHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICBzZWxmLnJlcXVpcmVzKCdleGFtaW5hdGlvbklkJywgZXhhbWluYXRpb25JZCk7XHJcbiAgICByZXR1cm4gc2VsZi5yYXdRdWVyeShgL2V4YW1pbmF0aW9ucy8ke2V4YW1pbmF0aW9uSWR9L3Njb3BlYCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQ29udGV4dCB9IGZyb20gJy4uLy4uL3Njb3BlJztcclxuaW1wb3J0IFNjb3BlIGZyb20gJy4vc2NvcGUnO1xyXG5pbXBvcnQgeyBBcHBVaVN0b3JhZ2UgfSBmcm9tICcuL3R5cGVzL2FwcC11aS1zdG9yYWdlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2UgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICBwcm90ZWN0ZWQgZGF0YTogQXBwVWlTdG9yYWdlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFNjb3BlKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFJhdygpOiBQcm9taXNlPEFwcFVpU3RvcmFnZT4ge1xyXG4gICAgaWYgKCF0aGlzLmRhdGEpIHtcclxuICAgICAgdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYXBwLXVpLXN0b3JhZ2UvdXNlcicpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YSBhcyBBcHBVaVN0b3JhZ2U7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmbHVzaCgpOiBQcm9taXNlPEFwcFVpU3RvcmFnZSB8IG51bGw+IHtcclxuICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcC11aS1zdG9yYWdlL3VzZXInLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGJvZHk6IHRoaXMuZGF0YSxcclxuICAgIH0pKSBhcyBBcHBVaVN0b3JhZ2U7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0UmF3KCk7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEuY29udGVudFtrZXldID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhLmNvbnRlbnRba2V5XSBhcyBzdHJpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhLmNvbnRlbnRba2V5XTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgZmx1c2g/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB2YWx1ZVJhdyA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIGNvbnN0IGRhdGFSYXcgPSBhd2FpdCB0aGlzLmdldFJhdygpO1xyXG4gICAgZGF0YVJhdy5jb250ZW50W2tleV0gPSB2YWx1ZVJhdztcclxuICAgIHRoaXMuZGF0YSA9IGRhdGFSYXc7XHJcblxyXG4gICAgaWYgKGZsdXNoKSB7XHJcbiAgICAgIHRoaXMuZmx1c2goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGVyYXNlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5kYXRhID0geyBjb250ZW50OiB7fSB9O1xyXG4gICAgdGhpcy5mbHVzaCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tICcuLi8uLi9zY29wZSc7XHJcbmltcG9ydCBTY29wZSBmcm9tICcuL3Njb3BlJztcclxuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gJy4vdHlwZXMvYW5ub3RhdGlvbidcclxuaW1wb3J0IHsgUG9zdFBvaW50QW5ub3RhdGlvbnMgfSBmcm9tICcuL3R5cGVzL3Bvc3QtcG9pbnQtYW5ub3RhdGlvbnMnO1xyXG5pbXBvcnQgeyBQb3N0TGluZUFubm90YXRpb25zIH0gZnJvbSAnLi90eXBlcy9wb3N0LWxpbmUtYW5ub3RhdGlvbnMnO1xyXG5pbXBvcnQgeyBQb3N0QXJyb3dBbm5vdGF0aW9ucyB9IGZyb20gJy4vdHlwZXMvcG9zdC1hcnJvdy1hbm5vdGF0aW9ucyc7XHJcbmltcG9ydCB7IFBvc3RDaXJjbGVBbm5vdGF0aW9ucyB9IGZyb20gJy4vdHlwZXMvcG9zdC1jaXJjbGUtYW5ub3RhdGlvbnMnO1xyXG5pbXBvcnQgeyBQb3N0UmVjdGFuZ2xlQW5ub3RhdGlvbnMgfSBmcm9tICcuL3R5cGVzL3Bvc3QtcmVjdGFuZ2xlLWFubm90YXRpb25zJztcclxuaW1wb3J0IHsgUG9zdFBvbHlnb25Bbm5vdGF0aW9ucyB9IGZyb20gJy4vdHlwZXMvcG9zdC1wb2x5Z29uLWFubm90YXRpb25zJztcclxuaW1wb3J0IHsgUG9zdFBvaW50QW5ub3RhdGlvbiB9IGZyb20gJy4vdHlwZXMvcG9zdC1wb2ludC1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgUG9zdExpbmVBbm5vdGF0aW9uIH0gZnJvbSAnLi90eXBlcy9wb3N0LWxpbmUtYW5ub3RhdGlvbic7XHJcbmltcG9ydCB7IFBvc3RBcnJvd0Fubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL3Bvc3QtYXJyb3ctYW5ub3RhdGlvbic7XHJcbmltcG9ydCB7IFBvc3RDaXJjbGVBbm5vdGF0aW9uIH0gZnJvbSAnLi90eXBlcy9wb3N0LWNpcmNsZS1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgUG9zdFJlY3RhbmdsZUFubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL3Bvc3QtcmVjdGFuZ2xlLWFubm90YXRpb24nO1xyXG5pbXBvcnQgeyBQb3N0UG9seWdvbkFubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL3Bvc3QtcG9seWdvbi1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgQW5ub3RhdGlvbkxpc3RSZXNwb25zZSB9IGZyb20gJy4vdHlwZXMvYW5ub3RhdGlvbi1saXN0LXJlc3BvbnNlJztcclxuaW1wb3J0IHsgSWRPYmplY3QgfSBmcm9tICcuL3R5cGVzL2lkLW9iamVjdCc7XHJcbmltcG9ydCB7QW5ub3RhdGlvbkxpc3R9IGZyb20gXCIuL3R5cGVzL2Fubm90YXRpb24tbGlzdFwiO1xyXG5pbXBvcnQge0Fubm90YXRpb25RdWVyeX0gZnJvbSBcIi4vdHlwZXMvYW5ub3RhdGlvbi1xdWVyeVwiO1xyXG5pbXBvcnQge0NsYXNzTGlzdFJlc3BvbnNlfSBmcm9tIFwiLi90eXBlcy9jbGFzcy1saXN0LXJlc3BvbnNlXCI7XHJcbmltcG9ydCB7Q2xhc3N9IGZyb20gXCIuL3R5cGVzL2NsYXNzXCI7XHJcbmltcG9ydCB7UG9zdENsYXNzTGlzdH0gZnJvbSBcIi4vdHlwZXMvcG9zdC1jbGFzcy1saXN0XCI7XHJcbmltcG9ydCB7UG9zdENsYXNzfSBmcm9tIFwiLi90eXBlcy9wb3N0LWNsYXNzXCI7XHJcbmltcG9ydCB7Q2xhc3NRdWVyeX0gZnJvbSBcIi4vdHlwZXMvY2xhc3MtcXVlcnlcIjtcclxuaW1wb3J0IHtDbGFzc0xpc3R9IGZyb20gXCIuL3R5cGVzL2NsYXNzLWxpc3RcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEFubm90YXRpb25RdWVyeVBhcmFtcyB7XHJcbiAgaXNSb2k/OiBib29sZWFuO1xyXG4gIGV4dGVybmFsSWRzPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5ub3RhdGlvbnMgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICBwcm90ZWN0ZWQgZGF0YTogdW5kZWZpbmVkOyAvL3VudXNlZFxyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBRdWVyeSBBbm5vdGF0aW9uc1xyXG4gICAqL1xyXG4gIGFzeW5jIHF1ZXJ5KGRhdGE6IEFubm90YXRpb25RdWVyeSwgd2l0aENsYXNzZXM6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxBbm5vdGF0aW9uTGlzdD4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2Fubm90YXRpb25zL3F1ZXJ5Jywge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBxdWVyeToge1xyXG4gICAgICAgIHdpdGhfY2xhc3Nlczogd2l0aENsYXNzZXNcclxuICAgICAgfSxcclxuICAgICAgYm9keTogZGF0YVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgQW5ub3RhdGlvbiBieSBJRFxyXG4gICAqL1xyXG4gIGFzeW5jIGdldChpZDogc3RyaW5nLCB3aXRoQ2xhc3NlczogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEFubm90YXRpb24+IHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9hbm5vdGF0aW9ucy8ke2lkfWAsIHtcclxuICAgICAgcXVlcnk6IHtcclxuICAgICAgICB3aXRoX2NsYXNzZXM6IHdpdGhDbGFzc2VzXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUG9zdCBtdWx0aXBsZSBhbm5vdGF0aW9ucyBhcyBvbmUuIEluIHJlYWxpdHkgdGhlIHNhbWUgZW5kcG9pbnQgYXMgY3JlYXRlKC4uLilcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVNYW55KFxyXG4gICAgZGF0YTpcclxuICAgICAgfCBQb3N0UG9pbnRBbm5vdGF0aW9uc1xyXG4gICAgICB8IFBvc3RMaW5lQW5ub3RhdGlvbnNcclxuICAgICAgfCBQb3N0QXJyb3dBbm5vdGF0aW9uc1xyXG4gICAgICB8IFBvc3RDaXJjbGVBbm5vdGF0aW9uc1xyXG4gICAgICB8IFBvc3RSZWN0YW5nbGVBbm5vdGF0aW9uc1xyXG4gICAgICB8IFBvc3RQb2x5Z29uQW5ub3RhdGlvbnMsXHJcbiAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge30sXHJcbiAgKTogUHJvbWlzZTxBbm5vdGF0aW9uTGlzdFJlc3BvbnNlPiB7XHJcbiAgICAvL3RoZSBzYW1lIGFzIGNyZWF0ZSBidXQgZm9yIHR5cGVzIGl0cyBzaW1wbGVyIHRvIHNwbGl0XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYW5ub3RhdGlvbnMnLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBxdWVyeTogb3B0aW9ucyxcclxuICAgICAgYm9keTogZGF0YSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGFuIGFubm90YXRpb24uXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlKFxyXG4gICAgZGF0YTpcclxuICAgICAgfCBQb3N0UG9pbnRBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdExpbmVBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdEFycm93QW5ub3RhdGlvblxyXG4gICAgICB8IFBvc3RDaXJjbGVBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdFJlY3RhbmdsZUFubm90YXRpb25cclxuICAgICAgfCBQb3N0UG9seWdvbkFubm90YXRpb24sXHJcbiAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge30sXHJcbiAgKTogUHJvbWlzZTxBbm5vdGF0aW9uPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYW5ub3RhdGlvbnMnLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBxdWVyeTogb3B0aW9ucyxcclxuICAgICAgYm9keTogZGF0YSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGVsZXRlIGFuIGFubm90YXRpb24uIERvZXMgbm90IHJlbW92ZSByZWxhdGVkIGNsYXNzZXMuXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxJZE9iamVjdD4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2Fubm90YXRpb25zLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWxldGUgYW4gYW5ub3RhdGlvbiB3aXRoIGl0cyBjbGFzc2VzIGlmIGRlZmluZWQuXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlKG9iamVjdDogQW5ub3RhdGlvbik6IFByb21pc2U8SWRPYmplY3Q+IHtcclxuICAgIGlmICghb2JqZWN0LmlkKSB7XHJcbiAgICAgIHRocm93IFwiQ2Fubm90IGRlbGV0ZSBhbm5vdGF0aW9uIHdpdGhvdXQgSUQgcHJvcGVydHkhXCI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWxldGVkID0gYXdhaXQgdGhpcy5kZWxldGVCeUlkKG9iamVjdC5pZCk7XHJcbiAgICBpZiAob2JqZWN0LmNsYXNzZXMpIHtcclxuICAgICAgZm9yIChsZXQgY2xzIG9mIG9iamVjdC5jbGFzc2VzKSB7XHJcbiAgICAgICAgaWYgKGNscy5pZCkgYXdhaXQgdGhpcy5kZWxldGVDbGFzcyhjbHMuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVsZXRlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBhbm5vdGF0aW9uOiBkZWxldGUgYW5kIHJlLWNyZWF0ZVxyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZShcclxuICAgIGlkOiBzdHJpbmcsXHJcbiAgICBkYXRhOlxyXG4gICAgICB8IFBvc3RQb2ludEFubm90YXRpb25cclxuICAgICAgfCBQb3N0TGluZUFubm90YXRpb25cclxuICAgICAgfCBQb3N0QXJyb3dBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdENpcmNsZUFubm90YXRpb25cclxuICAgICAgfCBQb3N0UmVjdGFuZ2xlQW5ub3RhdGlvblxyXG4gICAgICB8IFBvc3RQb2x5Z29uQW5ub3RhdGlvbixcclxuICAgIG9wdGlvbnM6IFBvc3RBbm5vdGF0aW9uUXVlcnlQYXJhbXMgPSB7fSxcclxuICApOiBQcm9taXNlPEFubm90YXRpb24+IHtcclxuICAgIGF3YWl0IHRoaXMuZGVsZXRlQnlJZChpZCk7XHJcblxyXG4gICAgLy8gdXBkYXRlIG1pZ2h0IGNhcnJ5IGlkIGJ1dCB1c2VyIGZvcmdvdCB0byBzZXQgZXh0ZXJuYWwgSURzIHRvIHRydWVcclxuICAgIGlmICghb3B0aW9ucy5leHRlcm5hbElkcyAmJiBkYXRhLmlkKSB7XHJcbiAgICAgIG9wdGlvbnMuZXh0ZXJuYWxJZHMgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXR0YWNoIGNsYXNzIHRvIGFuIGV4aXN0aW5nIGFubm90YXRpb25cclxuICAgKi9cclxuICBhc3luYyBhZGRDbGFzcyhkYXRhOiBQb3N0Q2xhc3MpOiBQcm9taXNlPENsYXNzPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvY2xhc3NlcycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IGRhdGEsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEF0dGFjaCBjbGFzc2VzIHRvIGV4aXN0aW5nIGFubm90YXRpb25zXHJcbiAgICovXHJcbiAgYXN5bmMgYWRkQ2xhc3NNYW55KGRhdGE6IFBvc3RDbGFzc0xpc3QpOiBQcm9taXNlPENsYXNzTGlzdFJlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvY2xhc3NlcycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IGRhdGEsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjbGFzcyBieSBpdHMgSURcclxuICAgKi9cclxuICBhc3luYyBnZXRDbGFzcyhpZDogc3RyaW5nKTogUHJvbWlzZTxDbGFzcz4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NsYXNzZXMvJHtpZH1gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSBjbGFzcyBieSBpdHMgSURcclxuICAgKi9cclxuICBhc3luYyBkZWxldGVDbGFzcyhpZDogc3RyaW5nKTogUHJvbWlzZTxJZE9iamVjdD4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NsYXNzZXMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFF1ZXJ5IGNsYXNzZXMgYnkgcHJvcGVydGllc1xyXG4gICAqL1xyXG4gIGFzeW5jIHF1ZXJ5Q2xhc3NlcyhkYXRhOiBDbGFzc1F1ZXJ5KTogUHJvbWlzZTxDbGFzc0xpc3Q+IHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9jbGFzc2VzL3F1ZXJ5Jywge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBib2R5OiBkYXRhXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2NvcGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vc2NvcGUnO1xyXG5pbXBvcnQgU2NvcGUgZnJvbSAnLi9zY29wZSc7XHJcbmltcG9ydCB7IENvbGxlY3Rpb24gfSBmcm9tICcuL3R5cGVzL2NvbGxlY3Rpb24nO1xyXG5pbXBvcnQgeyBJdGVtUXVlcnkgfSBmcm9tICcuL3R5cGVzL2l0ZW0tcXVlcnknO1xyXG5pbXBvcnQgeyBJdGVtUXVlcnlMaXN0IH0gZnJvbSAnLi90eXBlcy9pdGVtLXF1ZXJ5LWxpc3QnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sbGVjdGlvbnMgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICBwcm90ZWN0ZWQgZGF0YTogQ29sbGVjdGlvbiB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoY29sbGVjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPENvbGxlY3Rpb24+IHtcclxuICAgIGNvbnN0IGNvbGxlY3Rpb246IENvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9YCxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGNvbGxlY3Rpb247XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGUoY29sbGVjdGlvbjogQ29sbGVjdGlvbik6IFByb21pc2U8Q29sbGVjdGlvbj4ge1xyXG4gICAgY29uc3QgY3JlYXRlZENvbGxlY3Rpb246IENvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvY29sbGVjdGlvbnNgLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgYm9keTogY29sbGVjdGlvbixcclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZWRDb2xsZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlKGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb25JZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHF1ZXJ5SXRlbXMoXHJcbiAgICBjb2xsZWN0aW9uSWQ6IHN0cmluZyxcclxuICAgIHF1ZXJ5OiBJdGVtUXVlcnksXHJcbiAgKTogUHJvbWlzZTxJdGVtUXVlcnlMaXN0PiB7XHJcbiAgICBjb25zdCBxdWVyeVJlc3VsdDogSXRlbVF1ZXJ5TGlzdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb25JZH0vaXRlbXMvcXVlcnlgLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBib2R5OiBxdWVyeSxcclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHF1ZXJ5UmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlSXRlbXMoY29sbGVjdGlvbklkOiBzdHJpbmcsIGl0ZW1zOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfS9pdGVtc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IHtcclxuICAgICAgICAuLi5pdGVtcyxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlSXRlbShjb2xsZWN0aW9uSWQ6IHN0cmluZywgaXRlbUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb25JZH0vaXRlbXMvJHtpdGVtSWR9YCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tICcuLi8uLi9zY29wZSc7XHJcbmltcG9ydCBTY29wZSBmcm9tICcuL3Njb3BlJztcclxuaW1wb3J0IHsgSm9iIH0gZnJvbSAnLi90eXBlcy9qb2InO1xyXG5pbXBvcnQgeyBKb2JMaXN0IH0gZnJvbSAnLi90eXBlcy9qb2ItbGlzdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKb2JzIGV4dGVuZHMgU2NvcGVDb250ZXh0IHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogU2NvcGU7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IEpvYltdIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFNjb3BlKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEpvYnMoKTogUHJvbWlzZTxKb2JbXT4ge1xyXG4gICAgcmV0dXJuICgoYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvam9icycpKSBhcyBKb2JMaXN0KS5pdGVtcztcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldChqb2JJZDogc3RyaW5nKTogUHJvbWlzZTxKb2I+IHtcclxuICAgIHJldHVybiAoYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvam9icy8ke2pvYklkfWApKSBhcyBKb2I7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQ29udGV4dCB9IGZyb20gJy4uLy4uL3Njb3BlJztcclxuaW1wb3J0IFNjb3BlIGZyb20gJy4vc2NvcGUnO1xyXG5pbXBvcnQgeyBDb250aW51b3VzUGl4ZWxtYXAgfSBmcm9tICcuL3R5cGVzL2NvbnRpbnVvdXMtcGl4ZWxtYXAnO1xyXG5pbXBvcnQgeyBEaXNjcmV0ZVBpeGVsbWFwIH0gZnJvbSAnLi90eXBlcy9kaXNjcmV0ZS1waXhlbG1hcCc7XHJcbmltcG9ydCB7IElkT2JqZWN0IH0gZnJvbSAnLi90eXBlcy9pZC1vYmplY3QnO1xyXG5pbXBvcnQgeyBOb21pbmFsUGl4ZWxtYXAgfSBmcm9tICcuL3R5cGVzL25vbWluYWwtcGl4ZWxtYXAnO1xyXG5pbXBvcnQgeyBQaXhlbG1hcExpc3QgfSBmcm9tICcuL3R5cGVzL3BpeGVsbWFwLWxpc3QnO1xyXG5pbXBvcnQgeyBQaXhlbG1hcFF1ZXJ5IH0gZnJvbSAnLi90eXBlcy9waXhlbG1hcC1xdWVyeSc7XHJcblxyXG50eXBlIFBpeGVsbWFwID0gQ29udGludW91c1BpeGVsbWFwIHwgRGlzY3JldGVQaXhlbG1hcCB8IE5vbWluYWxQaXhlbG1hcDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBpeGVsbWFwcyBleHRlbmRzIFNjb3BlQ29udGV4dCB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IFNjb3BlO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBQaXhlbG1hcCB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQocGl4ZWxtYXBJZDogc3RyaW5nKTogUHJvbWlzZTxQaXhlbG1hcD4ge1xyXG4gICAgcmV0dXJuIChhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH1gLFxyXG4gICAgKSkgYXMgUGl4ZWxtYXA7XHJcbiAgfVxyXG5cclxuICBhc3luYyBwb3N0KFxyXG4gICAgcGl4ZWxtYXBzOiBQaXhlbG1hcHMsXHJcbiAgKTogUHJvbWlzZTxcclxuICAgIENvbnRpbnVvdXNQaXhlbG1hcCB8IERpc2NyZXRlUGl4ZWxtYXAgfCBOb21pbmFsUGl4ZWxtYXAgfCBQaXhlbG1hcExpc3RcclxuICA+IHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9waXhlbG1hcHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBib2R5OiBwaXhlbG1hcHMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZShwaXhlbG1hcElkOiBzdHJpbmcpOiBQcm9taXNlPElkT2JqZWN0PiB7XHJcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3BpeGVsbWFwcy8ke3BpeGVsbWFwSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgfSkpIGFzIElkT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcXVlcnkocXVlcnk6IFBpeGVsbWFwUXVlcnkpOiBQcm9taXNlPFBpeGVsbWFwW10+IHtcclxuICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3BpeGVsbWFwcy9xdWVyeWAsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgYm9keTogcXVlcnksXHJcbiAgICB9KSkgYXMgUGl4ZWxtYXBMaXN0O1xyXG4gICAgcmV0dXJuIHF1ZXJ5UmVzdWx0Lml0ZW1zO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VGlsZShcclxuICAgIHBpeGVsbWFwSWQ6IHN0cmluZyxcclxuICAgIGxldmVsOiBudW1iZXIsXHJcbiAgICB0aWxlWDogbnVtYmVyLFxyXG4gICAgdGlsZVk6IG51bWJlcixcclxuICApOiBQcm9taXNlPEJsb2I+IHtcclxuICAgIGNvbnN0IHRpbGUgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vJHt0aWxlWH0vJHt0aWxlWX0vZGF0YWAsXHJcbiAgICAgIHtcclxuICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJyxcclxuICAgICAgfSxcclxuICAgICk7XHJcbiAgICByZXR1cm4gdGlsZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwbG9hZFRpbGUoXHJcbiAgICBwaXhlbG1hcElkOiBzdHJpbmcsXHJcbiAgICBsZXZlbDogbnVtYmVyLFxyXG4gICAgdGlsZVg6IG51bWJlcixcclxuICAgIHRpbGVZOiBudW1iZXIsXHJcbiAgICB0aWxlOiBCbG9iLFxyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vJHt0aWxlWH0vJHt0aWxlWX0vZGF0YWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgIGJvZHk6IHRpbGUsXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZVRpbGUoXHJcbiAgICBwaXhlbG1hcElkOiBzdHJpbmcsXHJcbiAgICBsZXZlbDogbnVtYmVyLFxyXG4gICAgdGlsZVg6IG51bWJlcixcclxuICAgIHRpbGVZOiBudW1iZXIsXHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9waXhlbG1hcHMvJHtwaXhlbG1hcElkfS9sZXZlbC8ke2xldmVsfS9wb3NpdGlvbi8ke3RpbGVYfS8ke3RpbGVZfS9kYXRhYCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGJ1bGtHZXRUaWxlKFxyXG4gICAgcGl4ZWxtYXBJZDogc3RyaW5nLFxyXG4gICAgbGV2ZWw6IG51bWJlcixcclxuICAgIHN0YXJ0WDogbnVtYmVyLFxyXG4gICAgc3RhcnRZOiBudW1iZXIsXHJcbiAgICBlbmRYOiBudW1iZXIsXHJcbiAgICBlbmRZOiBudW1iZXIsXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICBjb25zdCB0aWxlcyA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9waXhlbG1hcHMvJHtwaXhlbG1hcElkfS9sZXZlbC8ke2xldmVsfS9wb3NpdGlvbi9zdGFydC8ke3N0YXJ0WH0vJHtzdGFydFl9L2VuZC8ke2VuZFh9LyR7ZW5kWX0vZGF0YWAsXHJcbiAgICAgIHtcclxuICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJyxcclxuICAgICAgfSxcclxuICAgICk7XHJcbiAgICByZXR1cm4gdGlsZXM7XHJcbiAgfVxyXG5cclxuICBhc3luYyBidWxrVXBsb2FkVGlsZShcclxuICAgIHBpeGVsbWFwSWQ6IHN0cmluZyxcclxuICAgIGxldmVsOiBudW1iZXIsXHJcbiAgICBzdGFydFg6IG51bWJlcixcclxuICAgIHN0YXJ0WTogbnVtYmVyLFxyXG4gICAgZW5kWDogbnVtYmVyLFxyXG4gICAgZW5kWTogbnVtYmVyLFxyXG4gICAgdGlsZXM6IEJsb2IsXHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9waXhlbG1hcHMvJHtwaXhlbG1hcElkfS9sZXZlbC8ke2xldmVsfS9wb3NpdGlvbi9zdGFydC8ke3N0YXJ0WH0vJHtzdGFydFl9L2VuZC8ke2VuZFh9LyR7ZW5kWX0vZGF0YWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgIGJvZHk6IHRpbGVzLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQVBJIH0gZnJvbSAnLi4vLi4vc2NvcGUnO1xyXG5pbXBvcnQgeyBSYXdBUEksIFJhd09wdGlvbnMgfSBmcm9tICcuLi8uLi9iYXNlJztcclxuaW1wb3J0IHsgU2NvcGVUb2tlbkFuZFNjb3BlSWQgfSBmcm9tICcuLi9yb290L3R5cGVzL3Njb3BlLXRva2VuLWFuZC1zY29wZS1pZCc7XHJcbmltcG9ydCB7IFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uIH0gZnJvbSAnLi4vcm9vdC90eXBlcy93b3JrYmVuY2gtc2VydmljZS1hcGktdi0zLWN1c3RvbS1tb2RlbHMtZXhhbWluYXRpb25zLWV4YW1pbmF0aW9uJztcclxuaW1wb3J0IFJvb3QgZnJvbSAnLi4vcm9vdC9yb290JztcclxuaW1wb3J0IFN0b3JhZ2UgZnJvbSAnLi9zdG9yYWdlJztcclxuaW1wb3J0IHtcclxuICBnZXRKd3RUb2tlbkV4cGlyZXNUaW1lb3V0LFxyXG4gIHBhcnNlSnd0VG9rZW4sXHJcbiAgU2NvcGVUb2tlbixcclxufSBmcm9tICcuLi8uLi91dGlscyc7XHJcbmltcG9ydCBBbm5vdGF0aW9ucyBmcm9tICcuL2Fubm90YXRpb25zJztcclxuaW1wb3J0IENvbGxlY3Rpb25zIGZyb20gJy4vY29sbGVjdGlvbnMnO1xyXG5pbXBvcnQgSm9icyBmcm9tICcuL2pvYnMnO1xyXG5pbXBvcnQgUGl4ZWxtYXBzIGZyb20gXCIuL3BpeGVsbWFwc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NvcGUgZXh0ZW5kcyBTY29wZUFQSSB7XHJcbiAgc3RhdGljIGFwaVBhdGggPSAnL3YzL3Njb3Blcyc7XHJcblxyXG4gIC8vIEludGVyZmFjZVxyXG4gIHJhdzogUmF3QVBJO1xyXG4gIGNvbnRleHQ6IFJvb3Q7XHJcbiAgc3RvcmFnZTogU3RvcmFnZTtcclxuICBhbm5vdGF0aW9uczogQW5ub3RhdGlvbnM7XHJcbiAgY29sbGVjdGlvbnM6IENvbGxlY3Rpb25zO1xyXG4gIGpvYnM6IEpvYnM7XHJcbiAgcGl4ZWxtYXBzOiBQaXhlbG1hcHM7XHJcblxyXG4gIC8vIEFkZGl0aW9uYWxcclxuICBzY29wZUNvbnRleHQ6IFNjb3BlVG9rZW5BbmRTY29wZUlkIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBfZGVmYXVsdEV4YW1pbmF0aW9uSWQ6IHN0cmluZyA9ICcnO1xyXG4gIHByaXZhdGUgX3Rva2VuUmVmZXRjaEludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xyXG5cclxuICBhY3RpdmVFeGFtaW5hdGlvbklkOiBzdHJpbmcgPSAnJztcclxuICBhY3RpdmVDYXNlSWQ6IHN0cmluZyA9ICcnO1xyXG4gIGFjdGl2ZUFwcElkOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB0aGlzLnJhdyA9IG5ldyBSYXdBUEkodGhpcy5jb250ZXh0Lm9wdGlvbnMuYXBpVXJsICsgU2NvcGUuYXBpUGF0aCk7XHJcbiAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgU3RvcmFnZSh0aGlzKTtcclxuICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBuZXcgQW5ub3RhdGlvbnModGhpcyk7XHJcbiAgICB0aGlzLmNvbGxlY3Rpb25zID0gbmV3IENvbGxlY3Rpb25zKHRoaXMpO1xyXG4gICAgdGhpcy5qb2JzID0gbmV3IEpvYnModGhpcyk7XHJcbiAgICB0aGlzLnBpeGVsbWFwcyA9IG5ldyBQaXhlbG1hcHModGhpcyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1c2UoXHJcbiAgICBjYXNlSWQ6IHN0cmluZyxcclxuICAgIGFwcElkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXHJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvL3RvZG8gY29uc2lkZXIgY2FjaGluZ1xyXG5cclxuICAgIHRoaXMucmVxdWlyZXMoJ3Jvb3Q6OnVzZXJJZCcsIHRoaXMuY29udGV4dC51c2VySWQpO1xyXG5cclxuICAgIGNvbnN0IGZpbmRFeGFtaW5hdGlvbiA9IGFzeW5jIChcclxuICAgICAgYXBwSWQ6IHN0cmluZyxcclxuICAgICk6IFByb21pc2U8V29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24+ID0+IHtcclxuICAgICAgbGV0IGV4YW1pbmF0aW9ucyA9IGF3YWl0IHRoaXMuY29udGV4dC5leGFtaW5hdGlvbnMucXVlcnkoe1xyXG4gICAgICAgIGFwcHM6IFthcHBJZF0sXHJcbiAgICAgICAgY3JlYXRvcnM6IFt0aGlzLmNvbnRleHQudXNlcklkXSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChleGFtaW5hdGlvbnMuaXRlbV9jb3VudCA+IDApIHtcclxuICAgICAgICBsZXQgZXhhbWluYXRpb24gPSBleGFtaW5hdGlvbnMuaXRlbXMuZmluZCgoZXgpID0+IGV4LnN0YXRlID09PSAnT1BFTicpO1xyXG4gICAgICAgIGlmIChleGFtaW5hdGlvbikgcmV0dXJuIGV4YW1pbmF0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLmNyZWF0ZShjYXNlSWQsIGFwcElkKTtcclxuICAgIH07XHJcblxyXG4gICAgbGV0IGV4YW1pbmF0aW9uO1xyXG4gICAgaWYgKGFwcElkKSB7XHJcbiAgICAgIGV4YW1pbmF0aW9uID0gYXdhaXQgZmluZEV4YW1pbmF0aW9uKGFwcElkKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5fZGVmYXVsdEV4YW1pbmF0aW9uSWQpIHtcclxuICAgICAgZXhhbWluYXRpb24gPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLmdldChcclxuICAgICAgICB0aGlzLl9kZWZhdWx0RXhhbWluYXRpb25JZCxcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWV4YW1pbmF0aW9uKSB7XHJcbiAgICAgIGxldCBhcHAgPSBhd2FpdCB0aGlzLmNvbnRleHQuYXBwcy5kZWZhdWx0KCk7XHJcbiAgICAgIGV4YW1pbmF0aW9uID0gYXdhaXQgZmluZEV4YW1pbmF0aW9uKGFwcC5hcHBfaWQpO1xyXG4gICAgICB0aGlzLl9kZWZhdWx0RXhhbWluYXRpb25JZCA9IGV4YW1pbmF0aW9uLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHRoaXMuZnJvbShleGFtaW5hdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXQgc2NvcGVUb2tlbigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuc2NvcGVDb250ZXh0Py5hY2Nlc3NfdG9rZW4gfHwgXCJcIjtcclxuICB9XHJcblxyXG4gIGdldCBpZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuc2NvcGVDb250ZXh0Py5zY29wZV9pZCB8fCBcIlwiO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnJvbShcclxuICAgIGV4YW1pbmF0aW9uOiBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbixcclxuICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMucmVzZXQoKTtcclxuICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICB0aGlzLmFjdGl2ZUNhc2VJZCA9IGV4YW1pbmF0aW9uLmNhc2VfaWQ7XHJcbiAgICB0aGlzLmFjdGl2ZUFwcElkID0gZXhhbWluYXRpb24uYXBwX2lkO1xyXG4gICAgdGhpcy5hY3RpdmVFeGFtaW5hdGlvbklkID0gZXhhbWluYXRpb24uaWQ7XHJcbiAgICBjb25zdCB0b2tlbiA9IHBhcnNlSnd0VG9rZW4odGhpcy5zY29wZUNvbnRleHQuYWNjZXNzX3Rva2VuKSBhcyBTY29wZVRva2VuO1xyXG4gICAgY29uc3QgdGltZW91dCA9IGdldEp3dFRva2VuRXhwaXJlc1RpbWVvdXQodG9rZW4pO1xyXG4gICAgdGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICB9LCB0aW1lb3V0KTtcclxuICAgIHRoaXMucmFpc2VFdmVudCgnaW5pdCcpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmFjdGl2ZUV4YW1pbmF0aW9uSWQgPSAnJztcclxuICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gbnVsbDtcclxuICAgIGlmICh0aGlzLl90b2tlblJlZmV0Y2hJbnRlcnZhbCkge1xyXG4gICAgICBjbGVhckludGVydmFsKHRoaXMuX3Rva2VuUmVmZXRjaEludGVydmFsKTtcclxuICAgICAgdGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwgPSBudWxsO1xyXG4gICAgICAvL3RvZG8gY2xlYXIgYWxsIGNhY2hlZCBkYXRhXHJcbiAgICAgIHRoaXMucmFpc2VFdmVudCgncmVzZXQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHJhd1F1ZXJ5KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM/OiBSYXdPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHRoaXMucmVxdWlyZXMoJ3RoaXMuc2NvcGVDb250ZXh0JywgdGhpcy5zY29wZUNvbnRleHQpO1xyXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XHJcbiAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9XHJcbiAgICAgIGBCZWFyZXIgJHt0aGlzLnNjb3BlQ29udGV4dD8uYWNjZXNzX3Rva2VufWA7XHJcbiAgICBpZiAoZW5kcG9pbnQgJiYgIWVuZHBvaW50LnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICBlbmRwb2ludCA9IGAvJHtlbmRwb2ludH1gO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJhdy5odHRwKFxyXG4gICAgICAgIGAvJHt0aGlzLnNjb3BlQ29udGV4dD8uc2NvcGVfaWR9JHtlbmRwb2ludH1gLFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGlmIChlLnN0YXR1c0NvZGUgPT09IDQwMSkge1xyXG4gICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShcclxuICAgICAgICAgIHRoaXMuYWN0aXZlRXhhbWluYXRpb25JZCxcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJhdy5odHRwKFxyXG4gICAgICAgICAgYC8ke3RoaXMuc2NvcGVDb250ZXh0LnNjb3BlX2lkfSR7ZW5kcG9pbnR9YCxcclxuICAgICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuZXhwb3J0IGVudW0gR2xvYmFsRGF0YUNyZWF0b3JUeXBlIHtcclxuICBVU0VSID0gJ3VzZXInLFxyXG4gIFNDT1BFID0gJ3Njb3BlJyxcclxuICBKT0IgPSAnam9iJyxcclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG5leHBvcnQgZW51bSBHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSB7XHJcbiAgQU5OT1RBVElPTiA9ICdhbm5vdGF0aW9uJyxcclxuICBDT0xMRUNUSU9OID0gJ2NvbGxlY3Rpb24nLFxyXG4gIENMQVNTID0gJ2NsYXNzJyxcclxuICBQUklNSVRJVkUgPSAncHJpbWl0aXZlJyxcclxuICBXU0kgPSAnd3NpJyxcclxuICBDQVNFID0gJ2Nhc2UnLFxyXG4gIFVTRVIgPSAndXNlcicsXHJcbiAgU0NPUEUgPSAnc2NvcGUnLFxyXG4gIEpPQiA9ICdqb2InLFxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlICovXHJcbmV4cG9ydCBlbnVtIFRlbXBsYXRlVHlwZSB7XHJcbiAgQmFja2dyb3VuZCA9ICdiYWNrZ3JvdW5kJyxcclxuICBQYXJhbXMgPSAncGFyYW1zJyxcclxuICBTaGFkZXIgPSAnc2hhZGVyJyxcclxuICBWaXN1YWxpemF0aW9uID0gJ3Zpc3VhbGl6YXRpb24nLFxyXG59XHJcbiIsImltcG9ydCB7IFJvb3RBUEksIFJvb3RDb250ZXh0IH0gZnJvbSAnLi4vLi4vcm9vdCc7XHJcbmltcG9ydCBSb290IGZyb20gJy4vcm9vdCc7XHJcbmltcG9ydCB7IFNsaWRlIH0gZnJvbSAnLi90eXBlcy9zbGlkZSc7XHJcbmltcG9ydCB7IFNsaWRlSW5mbyB9IGZyb20gJy4vdHlwZXMvc2xpZGUtaW5mbyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IFNsaWRlSW5mbyB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNsaWRlSW5mbyhzbGlkZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlSW5mbz4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3NsaWRlcy8ke3NsaWRlSWR9L2luZm9gKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNsaWRlVGh1bWJuYWlsKFxyXG4gICAgc2xpZGVJZDogc3RyaW5nLFxyXG4gICAgbWF4V2lkdGg6IG51bWJlcixcclxuICAgIG1heEhlaWdodDogbnVtYmVyLFxyXG4gICAgZm9ybWF0Pzogc3RyaW5nLFxyXG4gICk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9zbGlkZXMvJHtzbGlkZUlkfS90aHVtYm5haWwvbWF4X3NpemUvJHttYXhXaWR0aH0vJHttYXhIZWlnaHR9YCxcclxuICAgICAge1xyXG4gICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICBpbWFnZV9mb3JtYXQ6IGZvcm1hdCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNsaWRlTGFiZWwoXHJcbiAgICBzbGlkZUlkOiBzdHJpbmcsXHJcbiAgICBtYXhXaWR0aDogbnVtYmVyLFxyXG4gICAgbWF4SGVpZ2h0OiBudW1iZXIsXHJcbiAgICBmb3JtYXQ/OiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL3NsaWRlcy8ke3NsaWRlSWR9L2xhYmVsL21heF9zaXplLyR7bWF4V2lkdGh9LyR7bWF4SGVpZ2h0fWAsXHJcbiAgICAgIHtcclxuICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgaW1hZ2VfZm9ybWF0OiBmb3JtYXQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJyxcclxuICAgICAgfSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkVGlsZShcclxuICAgIHNsaWRlSWQ6IHN0cmluZyxcclxuICAgIGxldmVsOiBudW1iZXIsXHJcbiAgICB4OiBudW1iZXIsXHJcbiAgICB5OiBudW1iZXIsXHJcbiAgICBmb3JtYXQ/OiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL3NsaWRlcy8ke3NsaWRlSWR9L3RpbGUvbGV2ZWwvJHtsZXZlbH0vdGlsZS8ke3h9LyR7eX1gLFxyXG4gICAgICB7XHJcbiAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgIGltYWdlX2Zvcm1hdDogZm9ybWF0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tICcuLi9yYXRpb25haS9nbG9iYWwtc3RvcmFnZSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tICcuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlIH0gZnJvbSAnLi4vcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGUnO1xyXG5pbXBvcnQgeyBNYXNrTWV0YWRhdGEgfSBmcm9tICcuL3R5cGVzL21hc2stbWV0YWRhdGEnO1xyXG5pbXBvcnQgeyBTaGFkZXIsIFNsaWRlTWV0YWRhdGEgfSBmcm9tICcuL3R5cGVzL3NsaWRlLW1ldGFkYXRhJztcclxuaW1wb3J0IHsgVGVtcGxhdGVUeXBlIH0gZnJvbSAnLi90eXBlcy90ZW1wbGF0ZS10eXBlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdzaU1ldGFkYXRhIHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogR2xvYmFsU3RvcmFnZTtcclxuICBwcm90ZWN0ZWQgZGF0YTogR2xvYmFsSXRlbSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBwcml2YXRlIGRlZmF1bHRTbGlkZU1ldGFkYXRhOiBTbGlkZU1ldGFkYXRhID0geyB2aXN1YWxpemF0aW9uOiB7fSB9O1xyXG4gIHByaXZhdGUgZGVmYXVsdE1hc2tNZXRhZGF0YTogTWFza01ldGFkYXRhID0ge307XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICAvLyBTbGlkZVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBnbG9iYWwgaXRlbSBjb250YWluaW5nIG1ldGFkYXRhIG9mIFdTSS5cclxuICAgKiBAcGFyYW0gd3NpSWQgSUQgb2YgV1NJXHJcbiAgICogQHBhcmFtIGlzU2xpZGUgU3BlY2lmeSBpZiBXU0kgaXMgYSBzbGlkZSBvciBhIG1hc2tcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdldFdzaU1ldGFkYXRhSXRlbShcclxuICAgIHdzaUlkOiBzdHJpbmcsXHJcbiAgICBpc1NsaWRlOiBib29sZWFuID0gdHJ1ZSxcclxuICApOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgIGxldCBtZXRhZGF0YSA9IChhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoeyByZWZlcmVuY2VzOiBbd3NpSWRdIH0pKS5maW5kKFxyXG4gICAgICAocCkgPT4gcC5kYXRhX3R5cGUgPT09IGAke2lzU2xpZGUgPyAnc2xpZGUnIDogJ21hc2snfV9tZXRhZGF0YWAsXHJcbiAgICApO1xyXG4gICAgaWYgKCFtZXRhZGF0YSkge1xyXG4gICAgICBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuY3JlYXRlV3NpTWV0YWRhdGFJdGVtKFxyXG4gICAgICAgIHdzaUlkLFxyXG4gICAgICAgIGlzU2xpZGUgPyB0aGlzLmRlZmF1bHRTbGlkZU1ldGFkYXRhIDogdGhpcy5kZWZhdWx0TWFza01ldGFkYXRhLFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1ldGFkYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGdsb2JhbCBpdGVtIGNvbnRhaW5pbmcgbWV0YWRhdGEgb2YgV1NJLlxyXG4gICAqIEBwYXJhbSB3c2lJZCBJRCBvZiBXU0lcclxuICAgKiBAcGFyYW0gdmFsdWUgTWV0YWRhdGEgb2YgV1NJXHJcbiAgICogQHBhcmFtIGlzU2xpZGUgU3BlY2lmeSBpZiBXU0kgaXMgYSBzbGlkZSBvciBhIG1hc2tcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVdzaU1ldGFkYXRhSXRlbShcclxuICAgIHdzaUlkOiBzdHJpbmcsXHJcbiAgICB2YWx1ZTogYW55LFxyXG4gICAgaXNTbGlkZTogYm9vbGVhbiA9IHRydWUsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmNyZWF0ZVZhbHVlKFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgYE1ldGFkYXRhIG9mICR7aXNTbGlkZSA/ICdzbGlkZScgOiAnbWFzayd9ICR7d3NpSWR9YCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB3c2lJZCxcclxuICAgICAgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUuV1NJLFxyXG4gICAgICBgJHtpc1NsaWRlID8gJ3NsaWRlJyA6ICdtYXNrJ31fbWV0YWRhdGFgLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBtZXRhZGF0YSBvZiBzbGlkZSBXU0kuXHJcbiAgICogQHBhcmFtIHNsaWRlSWQgSUQgb2Ygc2xpZGUgV1NJXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0U2xpZGVNZXRhZGF0YShzbGlkZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlTWV0YWRhdGE+IHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKChhd2FpdCB0aGlzLmdldFdzaU1ldGFkYXRhSXRlbShzbGlkZUlkKSkudmFsdWUgYXMgc3RyaW5nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBtZXRhZGF0YSBvZiBzbGlkZSBXU0kuXHJcbiAgICogQHBhcmFtIHNsaWRlSWQgSUQgb2Ygc2xpZGUgV1NJXHJcbiAgICogQHBhcmFtIHZhbHVlIE5ldyBtZXRhZGF0YSBvZiBXU0lcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVTbGlkZU1ldGFkYXRhKFxyXG4gICAgc2xpZGVJZDogc3RyaW5nLFxyXG4gICAgdmFsdWU6IFNsaWRlTWV0YWRhdGEsXHJcbiAgKTogUHJvbWlzZTxTbGlkZU1ldGFkYXRhIHwgZmFsc2U+IHtcclxuICAgIGNvbnN0IG1ldGFkYXRhSXRlbSA9IGF3YWl0IHRoaXMuZ2V0V3NpTWV0YWRhdGFJdGVtKHNsaWRlSWQpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXBkYXRlZEl0ZW0gPSBhd2FpdCB0aGlzLmNvbnRleHQudXBkYXRlKG1ldGFkYXRhSXRlbS5pZCwge1xyXG4gICAgICAgIC4uLm1ldGFkYXRhSXRlbSxcclxuICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkodmFsdWUpLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodXBkYXRlZEl0ZW0udmFsdWUpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgbWV0aG9kIGdlbmVyYXRpbmcgc2hhZGVyIGNvbmZpZyBmb3IgdXNlci1jcmVhdGVkIHhPcGF0IHZpc3VhbGlzYXRpb25zXHJcbiAgICogQHBhcmFtIHNoYWRlcnMgQXJyYXkgb2Ygc2hhZGVyc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZ2V0U2hhZGVyc0NvbmZpZyhzaGFkZXJzOiBTaGFkZXJbXSk6IFByb21pc2U8b2JqZWN0PiB7XHJcbiAgICBjb25zdCBzaGFkZXJzQ29uZmlnID0ge307XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3Qgc2hhZGVyVGVtcCA9IGF3YWl0IHRoaXMuY29udGV4dC52aXNUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoXHJcbiAgICAgICAgVGVtcGxhdGVUeXBlLlNoYWRlcixcclxuICAgICAgICBzaGFkZXJzW2ldLnNoYWRlclRlbXBsYXRlLFxyXG4gICAgICApO1xyXG4gICAgICBzaGFkZXJzQ29uZmlnW3NoYWRlcnNbaV0uaWRdID0ge1xyXG4gICAgICAgIC4uLnNoYWRlclRlbXAsXHJcbiAgICAgICAgbmFtZTogc2hhZGVyc1tpXS5uYW1lIHx8IHNoYWRlcnNbaV0uaWQsXHJcbiAgICAgICAgZGF0YVJlZmVyZW5jZXM6IHNoYWRlcnNbaV0uZGF0YVJlZnMsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2hhZGVyc0NvbmZpZztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHVzZXItY3JlYXRlZCB4T3BhdCB2aXN1YWxpc2F0aW9ucyBvZiBhIHNsaWRlXHJcbiAgICogQHBhcmFtIHNsaWRlSWQgSUQgb2YgYSBzbGlkZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFZpc3VhbGl6YXRpb25zKHNsaWRlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBzbGlkZVZpcyA9IChhd2FpdCB0aGlzLmdldFNsaWRlTWV0YWRhdGEoc2xpZGVJZCkpLnZpc3VhbGl6YXRpb247XHJcbiAgICBjb25zdCB2aXN1YWxpemF0aW9ucyA9IHtcclxuICAgICAgcGFyYW1zOiBzbGlkZVZpcy5wYXJhbXNUZW1wbGF0ZVxyXG4gICAgICAgID8gKGF3YWl0IHRoaXMuY29udGV4dC52aXNUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoXHJcbiAgICAgICAgICAgIFRlbXBsYXRlVHlwZS5QYXJhbXMsXHJcbiAgICAgICAgICAgIHNsaWRlVmlzLnBhcmFtc1RlbXBsYXRlLFxyXG4gICAgICAgICAgKSkgfHwgdW5kZWZpbmVkXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgIGRhdGE6IHNsaWRlVmlzLmRhdGEsXHJcbiAgICAgIGJhY2tncm91bmQ6IHtcclxuICAgICAgICAuLi4oc2xpZGVWaXMuYmFja2dyb3VuZFxyXG4gICAgICAgICAgPyBhd2FpdCB0aGlzLmNvbnRleHQudmlzVGVtcGxhdGVzLmdldFRlbXBsYXRlKFxyXG4gICAgICAgICAgICAgIFRlbXBsYXRlVHlwZS5CYWNrZ3JvdW5kLFxyXG4gICAgICAgICAgICAgIHNsaWRlVmlzLmJhY2tncm91bmQ/LnRlbXBsYXRlLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICA6IHt9KSxcclxuICAgICAgICBkYXRhOiBzbGlkZVZpcy5iYWNrZ3JvdW5kICYmIHNsaWRlVmlzLmJhY2tncm91bmQuZGF0YVJlZixcclxuICAgICAgfSxcclxuICAgICAgdmlzdWFsaXphdGlvbnM6XHJcbiAgICAgICAgc2xpZGVWaXMudmlzdWFsaXphdGlvbnMgJiZcclxuICAgICAgICAoYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICBzbGlkZVZpcy52aXN1YWxpemF0aW9ucy5tYXAoYXN5bmMgKHZpcykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmNvbnRleHQudmlzVGVtcGxhdGVzLmdldFRlbXBsYXRlKFxyXG4gICAgICAgICAgICAgICAgVGVtcGxhdGVUeXBlLlZpc3VhbGl6YXRpb24sXHJcbiAgICAgICAgICAgICAgICB2aXMudmlzVGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgKSksXHJcbiAgICAgICAgICAgICAgbmFtZTogdmlzLm5hbWUsXHJcbiAgICAgICAgICAgICAgc2hhZGVyczogYXdhaXQgdGhpcy5nZXRTaGFkZXJzQ29uZmlnKHZpcy5zaGFkZXJzKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICkpLFxyXG4gICAgfTtcclxuICAgIHJldHVybiB2aXN1YWxpemF0aW9ucztcclxuICB9XHJcblxyXG4gIC8vIE1BU0tcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IG1ldGFkYXRhIG9mIG1hc2sgV1NJLlxyXG4gICAqIEBwYXJhbSBzbGlkZUlkIElEIG9mIG1hc2sgV1NJXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0TWFza01ldGFkYXRhKG1hc2tJZDogc3RyaW5nKTogUHJvbWlzZTxNYXNrTWV0YWRhdGE+IHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKFxyXG4gICAgICAoYXdhaXQgdGhpcy5nZXRXc2lNZXRhZGF0YUl0ZW0obWFza0lkLCBmYWxzZSkpLnZhbHVlIGFzIHN0cmluZyxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBHbG9iYWxTdG9yYWdlIGZyb20gJy4uL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlJztcclxuaW1wb3J0IHsgR2xvYmFsSXRlbSB9IGZyb20gJy4uL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtJztcclxuaW1wb3J0IHsgVGVtcGxhdGVUeXBlIH0gZnJvbSAnLi90eXBlcy90ZW1wbGF0ZS10eXBlJztcclxuXHJcbmNvbnN0IHRlbXBsYXRlc0dsb2JhbEl0ZW1EYXRhVHlwZSA9ICd2aXNfdGVtcGxhdGVzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpc3VhbGl6YXRpb25UZW1wbGF0ZXMge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBHbG9iYWxTdG9yYWdlO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBvYmplY3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogR2xvYmFsU3RvcmFnZSkge1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGdsb2JhbCBpdGVtIGNvbnRhaW5pbmcgdGVtcGxhdGUuXHJcbiAgICogQHBhcmFtIHR5cGUgVHlwZSBvZiB0aGUgdGVtcGxhdGUgKGJhY2tncm91bmcsIHBhcmFtcywgc2hhZGVyLCB2aXN1YWxpemF0aW9uKVxyXG4gICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHRlbXBsYXRlXHJcbiAgICovXHJcbiAgYXN5bmMgZmV0Y2hUZW1wbGF0ZUl0ZW0oXHJcbiAgICB0eXBlOiBUZW1wbGF0ZVR5cGUsXHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtIHwgdW5kZWZpbmVkPiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoe1xyXG4gICAgICAgIHJlZmVyZW5jZXM6IFtudWxsXSxcclxuICAgICAgICBkYXRhX3R5cGVzOiBbYCR7dGVtcGxhdGVzR2xvYmFsSXRlbURhdGFUeXBlfV8ke3R5cGV9YF0sXHJcbiAgICAgIH0pXHJcbiAgICApLmZpbmQoKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PT0gbmFtZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCB0ZW1wbGF0ZS5cclxuICAgKiBAcGFyYW0gdHlwZSBUeXBlIG9mIHRoZSB0ZW1wbGF0ZSAoYmFja2dyb3VuZywgcGFyYW1zLCBzaGFkZXIsIHZpc3VhbGl6YXRpb24pXHJcbiAgICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgdGVtcGxhdGVcclxuICAgKi9cclxuICBhc3luYyBnZXRUZW1wbGF0ZSh0eXBlOiBUZW1wbGF0ZVR5cGUsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8b2JqZWN0IHwgZmFsc2U+IHtcclxuICAgIGNvbnN0IHRtcGwgPSBhd2FpdCB0aGlzLmZldGNoVGVtcGxhdGVJdGVtKHR5cGUsIG5hbWUpO1xyXG4gICAgaWYgKHRtcGwpIHtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodG1wbC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgbmV3IHRlbXBsYXRlLlxyXG4gICAqIEBwYXJhbSB0eXBlIFR5cGUgb2YgdGhlIHRlbXBsYXRlIChiYWNrZ3JvdW5kLCBwYXJhbXMsIHNoYWRlciwgdmlzdWFsaXphdGlvbilcclxuICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSB0ZW1wbGF0ZVxyXG4gICAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSBvZiB0aGUgdGVtcGxhdGVcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVUZW1wbGF0ZShcclxuICAgIHR5cGU6IFRlbXBsYXRlVHlwZSxcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIHZhbHVlOiBvYmplY3QsXHJcbiAgKTogUHJvbWlzZTxvYmplY3QgfCBmYWxzZT4ge1xyXG4gICAgY29uc3QgZXhpc3RpbmdUbXBsID0gYXdhaXQgdGhpcy5mZXRjaFRlbXBsYXRlSXRlbSh0eXBlLCBuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ1RtcGwpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5jcmVhdGVWYWx1ZShcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIGAke25hbWV9YCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgYCR7dGVtcGxhdGVzR2xvYmFsSXRlbURhdGFUeXBlfV8ke3R5cGV9YCxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWxldGUgdGVtcGxhdGUuXHJcbiAgICogQHBhcmFtIHR5cGUgVHlwZSBvZiB0aGUgdGVtcGxhdGUgKGJhY2tncm91bmcsIHBhcmFtcywgc2hhZGVyLCB2aXN1YWxpemF0aW9uKVxyXG4gICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHRlbXBsYXRlXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlVGVtcGxhdGUodHlwZTogVGVtcGxhdGVUeXBlLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nVG1wbCA9IGF3YWl0IHRoaXMuZmV0Y2hUZW1wbGF0ZUl0ZW0odHlwZSwgbmFtZSk7XHJcbiAgICBpZiAoIWV4aXN0aW5nVG1wbCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZGVsZXRlKGV4aXN0aW5nVG1wbC5pZCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSFRUUEVycm9yIH0gZnJvbSAnLi4vLi4vLi4vc3JjL2Jhc2UnO1xyXG5pbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tICcuLi9yYXRpb25haS9nbG9iYWwtc3RvcmFnZSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tICcuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbSc7XHJcbmltcG9ydCB7IEFubm90UHJlc2V0LCBBbm5vdFByZXNldE9iamVjdCB9IGZyb20gJy4vdHlwZXMvYW5ub3QtcHJlc2V0JztcclxuXHJcbnR5cGUgQW5ub3RQcmVzZXRHZXRSZXN1bHQgPSB7XHJcbiAgcHJlc2V0czogQW5ub3RQcmVzZXRbXTtcclxuICBsYXN0TW9kaWZpZWRBdDogbnVtYmVyO1xyXG59O1xyXG5cclxudHlwZSBBbm5vdFByZXNldFVwZGF0ZVJlc3VsdCA9IHtcclxuICBwcmVzZXRzOiBBbm5vdFByZXNldFtdO1xyXG4gIHN1Y2Nlc3NmdWxVcGRhdGU6IGJvb2xlYW47XHJcbiAgbGFzdE1vZGlmaWVkQXQ6IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFubm90UHJlc2V0cyB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2U7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IEdsb2JhbEl0ZW0gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJvdGVjdGVkIHByZXNldERhdGFUeXBlOiBzdHJpbmcgPSAnYW5ub3RfcHJlc2V0cyc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb25maWd1cmUgQW5ub3RQcmVzZXRzIGNsYXNzIHdpdGggZGF0YSB0eXBlLiBEYXRhIHR5cGUgaXMgdXNlZCB0byBmaWx0ZXIgZ2xvYmFsIGl0ZW1zLlxyXG4gICAqIEBwYXJhbSBwcmVzZXREYXRhVHlwZSBEYXRhIHR5cGUgb2YgZ2xvYmFsIGl0ZW1zIHVzZWQgdG8gc3RvcmUgYW5ub3RhdGlvbiBwcmVzZXRzLlxyXG4gICAqL1xyXG4gIHVzZShwcmVzZXREYXRhVHlwZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLnByZXNldERhdGFUeXBlID0gcHJlc2V0RGF0YVR5cGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBnbG9iYWwgaXRlbSBjb250YWluaW5nIGFubm90YXRpb24gcHJlc2V0cyAob25seSBvbmUgc2hvdWxkIGV4aXN0KS5cclxuICAgKiBAcGFyYW0gZnJlc2ggRm9yY2UgZnJlc2ggZmV0Y2ggb2YgZ2xvYmFsIGl0ZW0sIG90aGVyd2lzZSBjYWNoZWQgdmVyc2lvbiBtaWdodCBiZSB1c2VkXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZXRQcmVzZXRzSXRlbShmcmVzaDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YSB8fCBmcmVzaCkge1xyXG4gICAgICBsZXQgcHJlc2V0c0l0ZW0gPSAoXHJcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnF1ZXJ5KHtcclxuICAgICAgICAgIHJlZmVyZW5jZXM6IFtudWxsXSxcclxuICAgICAgICAgIGRhdGFfdHlwZXM6IFt0aGlzLnByZXNldERhdGFUeXBlXSxcclxuICAgICAgICB9KVxyXG4gICAgICApLmZpbmQoKGl0ZW0pID0+IHRydWUpO1xyXG4gICAgICBpZiAoIXByZXNldHNJdGVtKSB7XHJcbiAgICAgICAgcHJlc2V0c0l0ZW0gPSBhd2FpdCB0aGlzLmNyZWF0ZVByZXNldHNJdGVtKHsgcHJlc2V0czogW10gfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kYXRhID0gcHJlc2V0c0l0ZW07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGdsb2JhbCBpdGVtIGNvbnRhaW5pbmcgYW5ub3RhdGlvbiBwcmVzZXRzIChvbmx5IG9uZSBzaG91bGQgZXhpc3QpLlxyXG4gICAqIEBwYXJhbSB2YWx1ZSBBbm5vdGF0aW9uIHByZXNldFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlUHJlc2V0c0l0ZW0oXHJcbiAgICB2YWx1ZTogQW5ub3RQcmVzZXRPYmplY3QsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmNyZWF0ZVZhbHVlKFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgYEdsb2JhbCBhbm5vdGF0aW9uIHByZXNldHNgLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB0aGlzLnByZXNldERhdGFUeXBlLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbm5vdGF0aW9uIHByZXNldHMuXHJcbiAgICogQHBhcmFtIGZyZXNoIEZvcmNlIGZyZXNoIGZldGNoXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QW5ub3RQcmVzZXRzKGZyZXNoOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPEFubm90UHJlc2V0R2V0UmVzdWx0PiB7XHJcbiAgICBjb25zdCBwcmVzZXRJdGVtID0gYXdhaXQgdGhpcy5nZXRQcmVzZXRzSXRlbShmcmVzaCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcmVzZXRzOiAoSlNPTi5wYXJzZShwcmVzZXRJdGVtLnZhbHVlIGFzIHN0cmluZykgYXMgQW5ub3RQcmVzZXRPYmplY3QpXHJcbiAgICAgICAgLnByZXNldHMsXHJcbiAgICAgIGxhc3RNb2RpZmllZEF0OiBwcmVzZXRJdGVtLm1vZGlmaWVkX2F0LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byBtZXJnZSBhbm5vdGF0aW9uIHByZXNldHMgZHVyaW5nIHBhcmFsbGVsIHVwZGF0ZXMuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBtZXJnZVByZXNldHMoXHJcbiAgICBwcmltYXJ5QXJyOiBBbm5vdFByZXNldFtdLFxyXG4gICAgc2Vjb25kYXJ5QXJyOiBBbm5vdFByZXNldFtdLFxyXG4gICAgbG9jYWxWZXJzaW9uOiBudW1iZXIsXHJcbiAgKTogQW5ub3RQcmVzZXRbXSB7XHJcbiAgICBjb25zdCBuZXdBcnIgPSBbLi4ucHJpbWFyeUFycl07XHJcbiAgICAvLyBpdGVtIGZyb20gc2Vjb25kYXJ5IGFycmF5IGlzIHB1c2hlZCBvbmx5IGlmIGl0ZW0gd2l0aCB0aGUgc2FtZSBpZCBpcyBub3QgcHJlc2VudCBpbiBwcmltYXJ5IGFycmF5LCBhbmQgY3JlYXRlZEF0IGRhdGUgaXMgYmlnZ2VyIHRoYW4gbG9jYWxWZXJzaW9uIGRhdGUsIG1lYW5pbmcgaXRlbSBpcyBuZXdcclxuICAgIHNlY29uZGFyeUFyci5mb3JFYWNoKChzZWNJdGVtKSA9PlxyXG4gICAgICBuZXdBcnIuc29tZSgocHJpbUl0ZW0pID0+IHByaW1JdGVtLmlkID09PSBzZWNJdGVtLmlkKSB8fFxyXG4gICAgICAhc2VjSXRlbS5jcmVhdGVkQXQgfHxcclxuICAgICAgc2VjSXRlbS5jcmVhdGVkQXQgPD0gbG9jYWxWZXJzaW9uXHJcbiAgICAgICAgPyBudWxsXHJcbiAgICAgICAgOiBuZXdBcnIucHVzaChzZWNJdGVtKSxcclxuICAgICk7XHJcbiAgICByZXR1cm4gbmV3QXJyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGFubm90YXRpb24gcHJlc2V0cy5cclxuICAgKiBAcGFyYW0gdmFsdWUgTmV3IHByZXNldHNcclxuICAgKiBAcGFyYW0gbG9jYWxWZXJzaW9uIExvY2FsIHZlcnNpb24gb2YgcHJlc2V0cyAobW9kaWZpZWRfYXQgYXR0cmlidXRlIG9mIGdsb2JhbCBpdGVtKVxyXG4gICAqIEBwYXJhbSBmYWlsT25QYXJhbGxlbFVwZGF0ZSBGb3JjZSB1cGRhdGUgZmFpbCBpZiBsb2NhbCB2ZXJzaW9uIGlzIG91dGRhdGVkXHJcbiAgICovXHJcbiAgYXN5bmMgdXBkYXRlQW5ub3RQcmVzZXRzKFxyXG4gICAgdmFsdWU6IEFubm90UHJlc2V0W10sXHJcbiAgICBsb2NhbFZlcnNpb246IG51bWJlcixcclxuICAgIGZhaWxPblBhcmFsbGVsVXBkYXRlOiBib29sZWFuID0gZmFsc2UsXHJcbiAgKTogUHJvbWlzZTxBbm5vdFByZXNldFVwZGF0ZVJlc3VsdD4ge1xyXG4gICAgLy8gZmV0Y2ggZnJlc2ggcHJlc2V0c1xyXG4gICAgY29uc3QgcmVtb3RlUHJlc2V0c0l0ZW0gPSBhd2FpdCB0aGlzLmdldFByZXNldHNJdGVtKHRydWUpO1xyXG4gICAgY29uc3QgcmVtb3RlUHJlc2V0cyA9IChcclxuICAgICAgSlNPTi5wYXJzZShyZW1vdGVQcmVzZXRzSXRlbS52YWx1ZSBhcyBzdHJpbmcpIGFzIEFubm90UHJlc2V0T2JqZWN0XHJcbiAgICApLnByZXNldHM7XHJcblxyXG4gICAgbGV0IGxvY2FsUHJlc2V0cyA9IHZhbHVlO1xyXG4gICAgbGV0IHN1Y2Nlc3NmdWxVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIGlmIChyZW1vdGVQcmVzZXRzSXRlbS5tb2RpZmllZF9hdCAhPT0gbG9jYWxWZXJzaW9uKSB7XHJcbiAgICAgIGlmIChmYWlsT25QYXJhbGxlbFVwZGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBwcmVzZXRzOiByZW1vdGVQcmVzZXRzLFxyXG4gICAgICAgICAgc3VjY2Vzc2Z1bFVwZGF0ZTogZmFsc2UsXHJcbiAgICAgICAgICBsYXN0TW9kaWZpZWRBdDogcmVtb3RlUHJlc2V0c0l0ZW0ubW9kaWZpZWRfYXQsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBsb2NhbFByZXNldHMgPSB0aGlzLm1lcmdlUHJlc2V0cyhcclxuICAgICAgICByZW1vdGVQcmVzZXRzLFxyXG4gICAgICAgIGxvY2FsUHJlc2V0cyxcclxuICAgICAgICBsb2NhbFZlcnNpb24sXHJcbiAgICAgICk7XHJcbiAgICAgIHN1Y2Nlc3NmdWxVcGRhdGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC51cGRhdGUocmVtb3RlUHJlc2V0c0l0ZW0uaWQsIHtcclxuICAgICAgICAuLi5yZW1vdGVQcmVzZXRzSXRlbSxcclxuICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoeyBwcmVzZXRzOiBsb2NhbFByZXNldHMgfSksXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCB1cGRhdGVkUHJlc2V0cyA9IChcclxuICAgICAgICBKU09OLnBhcnNlKHVwZGF0ZWRJdGVtLnZhbHVlKSBhcyBBbm5vdFByZXNldE9iamVjdFxyXG4gICAgICApLnByZXNldHM7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcHJlc2V0czogdXBkYXRlZFByZXNldHMsXHJcbiAgICAgICAgc3VjY2Vzc2Z1bFVwZGF0ZTogc3VjY2Vzc2Z1bFVwZGF0ZSxcclxuICAgICAgICBsYXN0TW9kaWZpZWRBdDogdXBkYXRlZEl0ZW0ubW9kaWZpZWRfYXQsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGlmICgoZSBhcyBIVFRQRXJyb3IpLnN0YXR1c0NvZGUgPT09IDQwOSkge1xyXG4gICAgICAgIGNvbnN0IHJldHJ5QXR0ZW1wdCA9IGF3YWl0IHRoaXMudXBkYXRlQW5ub3RQcmVzZXRzKFxyXG4gICAgICAgICAgbG9jYWxQcmVzZXRzLFxyXG4gICAgICAgICAgcmVtb3RlUHJlc2V0c0l0ZW0ubW9kaWZpZWRfYXQsXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4geyAuLi5yZXRyeUF0dGVtcHQsIHN1Y2Nlc3NmdWxVcGRhdGU6IHN1Y2Nlc3NmdWxVcGRhdGUgfTtcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGVsZXRlIGFubm90YXRpb24gcHJlc2V0cy5cclxuICAgKi9cclxuICBhc3luYyBkZWxldGVBbm5vdFByZXNldHMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBwcmVzZXRzSXRlbSA9IGF3YWl0IHRoaXMuZ2V0UHJlc2V0c0l0ZW0odHJ1ZSk7XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZGVsZXRlKHByZXNldHNJdGVtLmlkKTtcclxuICAgIHRoaXMuZGF0YSA9IG51bGw7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBHbG9iYWxTdG9yYWdlIGZyb20gJy4uL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlJztcclxuaW1wb3J0IHsgR2xvYmFsSXRlbSB9IGZyb20gJy4uL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtJztcclxuaW1wb3J0IHsgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUgfSBmcm9tICcuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbS1yZWZlcmVuY2UtdHlwZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKb2JDb25maWcge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBHbG9iYWxTdG9yYWdlO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBvYmplY3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJvdGVjdGVkIGNvbmZpZ0RhdGFUeXBlOiBzdHJpbmcgPSAnYXBwX2pvYl9jb25maWcnO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBHbG9iYWxTdG9yYWdlKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uZmlndXJlIEpvYkNvbmZpZyBjbGFzcyB3aXRoIGRhdGEgdHlwZS4gRGF0YSB0eXBlIGlzIHVzZWQgdG8gZmlsdGVyIGdsb2JhbCBpdGVtcy5cclxuICAgKiBAcGFyYW0gY29uZmlnRGF0YVR5cGUgRGF0YSB0eXBlIG9mIGdsb2JhbCBpdGVtcyB1c2VkIHRvIHN0b3JlIGpvYiBjb25maWdzLlxyXG4gICAqL1xyXG4gIHVzZShjb25maWdEYXRhVHlwZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLmNvbmZpZ0RhdGFUeXBlID0gY29uZmlnRGF0YVR5cGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBnbG9iYWwgaXRlbSBjb250YWluaW5nIGpvYiBjb25maWcgb2YgYW4gQXBwLlxyXG4gICAqIEBwYXJhbSBhcHBJZCBJRCBvZiBBcHBcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGZldGNoSm9iQ29uZmlnSXRlbShcclxuICAgIGFwcElkOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtIHwgdW5kZWZpbmVkPiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoe1xyXG4gICAgICAgIHJlZmVyZW5jZXM6IFthcHBJZF0sXHJcbiAgICAgICAgZGF0YV90eXBlczogW3RoaXMuY29uZmlnRGF0YVR5cGVdLFxyXG4gICAgICB9KVxyXG4gICAgKS5maW5kKEJvb2xlYW4pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGpvYiBjb25maWcgb2YgYW4gQXBwLlxyXG4gICAqIEBwYXJhbSBhcHBJZCBJRCBvZiBBcHBcclxuICAgKi9cclxuICBhc3luYyBnZXRKb2JDb25maWcoYXBwSWQ6IHN0cmluZyk6IFByb21pc2U8b2JqZWN0IHwgZmFsc2U+IHtcclxuICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLmZldGNoSm9iQ29uZmlnSXRlbShhcHBJZCk7XHJcbiAgICBpZiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtLnZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBqb2IgY29uZmlnIG9mIGFuIEFwcC5cclxuICAgKiBAcGFyYW0gYXBwSWQgSUQgb2YgQXBwXHJcbiAgICogQHBhcmFtIHZhbHVlIEpvYiBjb25maWcgb2YgYW4gQXBwXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlSm9iQ29uZmlnKGFwcElkOiBzdHJpbmcsIHZhbHVlOiBvYmplY3QpOiBQcm9taXNlPG9iamVjdCB8IGZhbHNlPiB7XHJcbiAgICBjb25zdCBleGlzdGluZ0NvbmZpZyA9IGF3YWl0IHRoaXMuZmV0Y2hKb2JDb25maWdJdGVtKGFwcElkKTtcclxuICAgIGlmIChleGlzdGluZ0NvbmZpZykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmNyZWF0ZVZhbHVlKFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgYEpvYiBjb25maWcgb2YgQXBwYCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICBhcHBJZCxcclxuICAgICAgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUuSk9CLFxyXG4gICAgICB0aGlzLmNvbmZpZ0RhdGFUeXBlLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSBqb2IgY29uZmlnIG9mIGFuIEFwcC5cclxuICAgKiBAcGFyYW0gYXBwSWQgSUQgb2YgQXBwXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlSm9iQ29uZmlnKGFwcElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nQ29uZmlnID0gYXdhaXQgdGhpcy5mZXRjaEpvYkNvbmZpZ0l0ZW0oYXBwSWQpO1xyXG4gICAgaWYgKCFleGlzdGluZ0NvbmZpZykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZGVsZXRlKGV4aXN0aW5nQ29uZmlnLmlkKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmF0aW9uQUkgZnJvbSAnLi9yYXRpb25haSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tICcuL3R5cGVzL2dsb2JhbC1pdGVtJztcclxuaW1wb3J0IHsgR2xvYmFsU3RvcmFnZVF1ZXJ5IH0gZnJvbSAnLi90eXBlcy9nbG9iYWwtc3RvcmFnZS1xdWVyeSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1MaXN0IH0gZnJvbSAnLi90eXBlcy9nbG9iYWwtaXRlbS1saXN0JztcclxuaW1wb3J0IHsgUG9zdEdsb2JhbEl0ZW1zIH0gZnJvbSAnLi90eXBlcy9wb3N0LWdsb2JhbC1pdGVtcyc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1zIH0gZnJvbSAnLi90eXBlcy9nbG9iYWwtaXRlbXMnO1xyXG5pbXBvcnQgeyBHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSB9IGZyb20gJy4vdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGUnO1xyXG5pbXBvcnQgeyBQb3N0R2xvYmFsSXRlbSB9IGZyb20gJy4vdHlwZXMvcG9zdC1nbG9iYWwtaXRlbSc7XHJcbmltcG9ydCB7IEdsb2JhbERhdGFDcmVhdG9yVHlwZSB9IGZyb20gJy4vdHlwZXMvZ2xvYmFsLWRhdGEtY3JlYXRvci10eXBlJztcclxuaW1wb3J0IHsgUHV0R2xvYmFsSXRlbSB9IGZyb20gJy4vdHlwZXMvcHV0LWdsb2JhbC1pdGVtJztcclxuaW1wb3J0IFdzaU1ldGFkYXRhIGZyb20gJy4uL2V4dGVuc2lvbnMvd3NpLW1ldGFkYXRhJztcclxuaW1wb3J0IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXMgZnJvbSAnLi4vZXh0ZW5zaW9ucy92aXN1YWxpemF0aW9uLXRlbXBsYXRlcyc7XHJcbmltcG9ydCBBbm5vdFByZXNldHMgZnJvbSAnLi4vZXh0ZW5zaW9ucy9hbm5vdC1wcmVzZXRzJztcclxuaW1wb3J0IEpvYkNvbmZpZyBmcm9tICcuLi9leHRlbnNpb25zL2pvYi1jb25maWcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2xvYmFsU3RvcmFnZSB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IFJhdGlvbkFJO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBHbG9iYWxJdGVtIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHdzaU1ldGFkYXRhOiBXc2lNZXRhZGF0YTtcclxuICB2aXNUZW1wbGF0ZXM6IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXM7XHJcbiAgYW5ub3RQcmVzZXRzOiBBbm5vdFByZXNldHM7XHJcbiAgam9iQ29uZmlnOiBKb2JDb25maWc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJhdGlvbkFJKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgdGhpcy53c2lNZXRhZGF0YSA9IG5ldyBXc2lNZXRhZGF0YSh0aGlzKTtcclxuICAgIHRoaXMudmlzVGVtcGxhdGVzID0gbmV3IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXModGhpcyk7XHJcbiAgICB0aGlzLmFubm90UHJlc2V0cyA9IG5ldyBBbm5vdFByZXNldHModGhpcyk7XHJcbiAgICB0aGlzLmpvYkNvbmZpZyA9IG5ldyBKb2JDb25maWcodGhpcyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoaXRlbUlkOiBzdHJpbmcpOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgIGNvbnN0IGdsb2JhbEl0ZW06IEdsb2JhbEl0ZW0gPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvZ2xvYmFsLXN0b3JhZ2UvJHtpdGVtSWR9YCxcclxuICAgICk7XHJcbiAgICByZXR1cm4gZ2xvYmFsSXRlbTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFZhbHVlKGl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLmdldChpdGVtSWQpO1xyXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtLnZhbHVlKTtcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBpdGVtLnZhbHVlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcXVlcnkocXVlcnk6IEdsb2JhbFN0b3JhZ2VRdWVyeSk6IFByb21pc2U8R2xvYmFsSXRlbVtdPiB7XHJcbiAgICBjb25zdCBkYXRhOiBHbG9iYWxJdGVtTGlzdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9nbG9iYWwtc3RvcmFnZS9xdWVyeWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YS5pdGVtcztcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZShpdGVtczogUG9zdEdsb2JhbEl0ZW1zKTogUHJvbWlzZTxHbG9iYWxJdGVtcz4ge1xyXG4gICAgY29uc3QgY3JlYXRlZEl0ZW1zOiBHbG9iYWxJdGVtcyA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9nbG9iYWwtc3RvcmFnZWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBib2R5OiBpdGVtcyxcclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZWRJdGVtcztcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZVZhbHVlKFxyXG4gICAgdmFsdWU6IGFueSxcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxyXG4gICAgcmVmZXJlbmNlX2lkPzogc3RyaW5nLFxyXG4gICAgcmVmZXJlbmNlX3R5cGU/OiBHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSxcclxuICAgIGRhdGFfdHlwZT86IHN0cmluZyxcclxuICApOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG5cclxuICAgIGNvbnN0IG5ld0l0ZW06IFBvc3RHbG9iYWxJdGVtID0ge1xyXG4gICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICAgIGNyZWF0b3JfaWQ6IHRoaXMuY29udGV4dC51c2VySWQsXHJcbiAgICAgIGNyZWF0b3JfdHlwZTogR2xvYmFsRGF0YUNyZWF0b3JUeXBlLlVTRVIsXHJcbiAgICAgIHJlZmVyZW5jZV9pZDogcmVmZXJlbmNlX2lkLFxyXG4gICAgICByZWZlcmVuY2VfdHlwZTogcmVmZXJlbmNlX3R5cGUsXHJcbiAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgIGRhdGFfdHlwZTogZGF0YV90eXBlLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuY3JlYXRlKG5ld0l0ZW0pKSBhcyBHbG9iYWxJdGVtO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlKGl0ZW1JZDogc3RyaW5nLCBpdGVtOiBQdXRHbG9iYWxJdGVtKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICBjb25zdCB1cGRhdGVkSXRlbTogR2xvYmFsSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9nbG9iYWwtc3RvcmFnZS8ke2l0ZW1JZH1gLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBib2R5OiBpdGVtLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICAgIHJldHVybiB1cGRhdGVkSXRlbTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZVZhbHVlKGl0ZW1JZDogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICBjb25zdCBpdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL2dsb2JhbC1zdG9yYWdlLyR7aXRlbUlkfWAsXHJcbiAgICApO1xyXG4gICAgaXRlbS52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIGNvbnN0IHVwZGF0ZWRJdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL2dsb2JhbC1zdG9yYWdlLyR7aXRlbUlkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgIGJvZHk6IGl0ZW0sXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHVwZGF0ZWRJdGVtO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlKGl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9nbG9iYWwtc3RvcmFnZS8ke2l0ZW1JZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUmF3T3B0aW9ucyB9IGZyb20gJy4uLy4uL2Jhc2UnO1xyXG5pbXBvcnQgUm9vdCBmcm9tICcuLi9yb290L3Jvb3QnO1xyXG5pbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tICcuL2dsb2JhbC1zdG9yYWdlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhdGlvbkFJIHtcclxuICBzdGF0aWMgcmVsYXRpdmVBcGlQYXRoID0gJy9yYXRpb25haSc7XHJcblxyXG4gIGNvbnRleHQ6IFJvb3Q7XHJcblxyXG4gIC8vY3VzdG9tXHJcbiAgZ2xvYmFsU3RvcmFnZTogR2xvYmFsU3RvcmFnZTtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIHRoaXMuZ2xvYmFsU3RvcmFnZSA9IG5ldyBHbG9iYWxTdG9yYWdlKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHVzZXJJZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC51c2VySWQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSYXdPcHRpb25zID0ge30pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYCR7UmF0aW9uQUkucmVsYXRpdmVBcGlQYXRofSR7ZW5kcG9pbnR9YCxcclxuICAgICAgb3B0aW9ucyxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7Um9vdEFQSX0gZnJvbSBcIi4uLy4uL3Jvb3RcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGVmYXVsdEludGVncmF0aW9uT3B0aW9ucyB7XHJcbiAgICBpbXBsZW1lbnRhdGlvbj86IHN0cmluZ1xyXG4gICAgX2NvbnRleHQ/OiBSb290QVBJXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbnRlZ3JhdGlvbiBjbGFzcyBwcm92aWRlcyBleHRlcm5hbCBpbmZvcm1hdGlvbiBhYm91dCB1c2VycyBhbmQgdGhlaXIgcmlnaHRzLFxyXG4gKiBhbmQgcmVsZXZhbnQgcmVsYXRlZCBleHRlcm5hbCBpbmZvcm1hdGlvblxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVmYXVsdEludGVncmF0aW9uPFQgZXh0ZW5kcyBEZWZhdWx0SW50ZWdyYXRpb25PcHRpb25zPiB7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgICBwcm90ZWN0ZWQgcHJvcHM6IFQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFQpIHtcclxuICAgICAgICBpZiAocHJvcHMuX2NvbnRleHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIlByaXZhdGUgcHJvcGVydHkgbm90IGNvbmZpZ3VyZWQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBwcm9wcy5fY29udGV4dDtcclxuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGxvY2FsIGlkIHBhcnRzIHRvIHRoZSBzcGVjaWZpYyBuYW1lIChzZWUgZXh0ZW5zaW9ucylcclxuICAgICAqIEBwYXJhbSBzcGVjS2V5IHNlZSBleHRlbnNpb24gb24gY2FzZSBoaWVyYXJjaHkga2V5cyAvIHNwZWNzXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdHJhbnNsYXRlUGF0aFNwZWMoc3BlY0tleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7QXV0aEludGVncmF0aW9ufSBmcm9tIFwiLi9pbmRleFwiO1xyXG5pbXBvcnQge0NvbnN0cnVjdG9yfSBmcm9tIFwiLi4vZXh0ZW5zaW9ucy91dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIEludGVncmF0aW9uIG1hbmFnZXIgLyBkZWFsZXJcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludGVncmF0aW9uTWFuYWdlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXRlbXM6IE1hcDxzdHJpbmcsIENvbnN0cnVjdG9yPEF1dGhJbnRlZ3JhdGlvbj4+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgdGhyb3cgRXJyb3IoXCJOb3QgaW5zdGFudGlhYmxlLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVnaXN0ZXIobmFtZTogc3RyaW5nLCBjbHM6IENvbnN0cnVjdG9yPEF1dGhJbnRlZ3JhdGlvbj4pOiBDb25zdHJ1Y3RvcjxBdXRoSW50ZWdyYXRpb24+IHtcclxuICAgICAgICB0aGlzLml0ZW1zLnNldChuYW1lLCBjbHMpO1xyXG4gICAgICAgIHJldHVybiBjbHM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldChuYW1lOiBzdHJpbmcpOiBDb25zdHJ1Y3RvcjxBdXRoSW50ZWdyYXRpb24+IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5nZXQobmFtZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IERlZmF1bHRJbnRlZ3JhdGlvbiwge0RlZmF1bHRJbnRlZ3JhdGlvbk9wdGlvbnN9IGZyb20gXCIuL2RlZmF1bHRcIjtcclxuaW1wb3J0IExTQUFJSW50ZWdyYXRpb24gZnJvbSBcIi4vbHNhYWlcIjtcclxuaW1wb3J0IEludGVncmF0aW9uTWFuYWdlciBmcm9tIFwiLi9pbnRlZ3JhdGlvbi1tYW5hZ2VyXCI7XHJcblxyXG5JbnRlZ3JhdGlvbk1hbmFnZXIucmVnaXN0ZXIoXCJkZWZhdWx0XCIsIERlZmF1bHRJbnRlZ3JhdGlvbik7XHJcbkludGVncmF0aW9uTWFuYWdlci5yZWdpc3RlcihcImxzYWFpXCIsIExTQUFJSW50ZWdyYXRpb24pO1xyXG5leHBvcnQgdHlwZSBBdXRoSW50ZWdyYXRpb24gPSBEZWZhdWx0SW50ZWdyYXRpb248RGVmYXVsdEludGVncmF0aW9uT3B0aW9ucz47XHJcbmV4cG9ydCB7SW50ZWdyYXRpb25NYW5hZ2VyfTtcclxuIiwiaW1wb3J0IERlZmF1bHRJbnRlZ3JhdGlvbiwge0RlZmF1bHRJbnRlZ3JhdGlvbk9wdGlvbnN9IGZyb20gXCIuL2RlZmF1bHRcIjtcclxuXHJcbmludGVyZmFjZSBMU0FBSUludGVncmF0aW9uT3B0aW9ucyBleHRlbmRzIERlZmF1bHRJbnRlZ3JhdGlvbk9wdGlvbnMge1xyXG4gICAgdXNlcmluZm86IHN0cmluZ1xyXG59XHJcblxyXG50eXBlIEdyb3VwTmFtZSA9IHtcclxuICAgIG5hbWU/OiBzdHJpbmcsXHJcbiAgICBzbHVnPzogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExTQUFJSW50ZWdyYXRpb24gZXh0ZW5kcyBEZWZhdWx0SW50ZWdyYXRpb248TFNBQUlJbnRlZ3JhdGlvbk9wdGlvbnM+IHtcclxuXHJcbiAgICBwcml2YXRlIHVzZXJEYXRhOiBhbnk7XHJcblxyXG4gICAgYXN5bmMgdHJhbnNsYXRlUGF0aFNwZWMoc3BlY0tleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBpZiAoIXRoaXMuY29udGV4dC5hY2Nlc3NUb2tlbiB8fCAhdGhpcy5wcm9wcy51c2VyaW5mbykge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMudXNlckRhdGEpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXJzZVVzZXJJbnN0aXR1dGlvbnNBbmRQcm9qZWN0cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNwZWNLZXkgPT09IFwiaWRfcGFydF8xXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlckRhdGEuaW5zdGl0dXRpb25zW3ZhbHVlXSB8fCB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNwZWNLZXkgPT09IFwiaWRfcGFydF8yXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlckRhdGEucHJvamVjdHNbdmFsdWVdIHx8IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZUdyb3VwTmFtZSAobmFtZTogc3RyaW5nKTogR3JvdXBOYW1lIHtcclxuICAgICAgICBpZiAoIW5hbWUpIHJldHVybiB7IG5hbWU6IG5hbWUsIHNsdWc6IG5hbWUgfVxyXG4gICAgICAgIG5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQobmFtZSkudHJpbSgpXHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBuYW1lLm1hdGNoKC9eKC4rKVxcLlxccyooW14uXFxzXXsxLDV9KSQvKVxyXG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbmFtZTogbWF0Y2hbMV0udHJpbSgpLCBzbHVnOiBtYXRjaFsyXS50cmltKCkgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFtZS5sZW5ndGggPiA1KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBncm91cCBuYW1lJywgbmFtZSlcclxuICAgICAgICAgICAgcmV0dXJuIHt9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IG5hbWU6IG5hbWUsIHNsdWc6IG5hbWUgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcGFyc2VVc2VySW5zdGl0dXRpb25zQW5kUHJvamVjdHMgKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5wcm9wcy51c2VyaW5mbywge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbnRleHQuYWNjZXNzVG9rZW59YFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8hICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0uICR7ZGF0YX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcblxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnVzZXJEYXRhID0ge1xyXG4gICAgICAgICAgICBwcm9qZWN0czoge1xyXG4gICAgICAgICAgICAgICAgJyc6IHsgbGFiZWw6ICdOTyBQUk9KRUNUJywgdmFsdWU6ICcnLCByaWdodHM6IFsnd3JpdGUnXSB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGluc3RpdHV0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgJyc6IHsgbGFiZWw6ICdQVUJMSUMgREFUQScsIHZhbHVlOiAnJ31cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdGxlbWVudHMgPSBwYXJzZWREYXRhLmVkdXBlcnNvbl9lbnRpdGxlbWVudFxyXG4gICAgICAgICAgICBpZiAoZW50aXRsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBBQVJDRzA2OSBmb3IgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgZW50aXRsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFyc2UgZ3JvdXAgKGluc3RpdHV0aW9uKSBoaWVyYXJjaHkgKHRvZG8gaGFyZGNvZGVkIC0gZW52ID8pXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBydWxlLm1hdGNoKC9eLio/Omdyb3VwOnJhdGlvbl9haTooW14jXFxuXSopLylcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cHMgPSBtYXRjaFsxXT8uc3BsaXQoJzonKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBncm91cHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3QgPSB0aGlzLnBhcnNlR3JvdXBOYW1lKGdyb3Vwc1swXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uID0gdGhpcy5wYXJzZUdyb3VwTmFtZShsZW5ndGggPiAxID8gZ3JvdXBzWzFdIDogJycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0cyA9IHRoaXMucGFyc2VHcm91cE5hbWUobGVuZ3RoID4gMiA/IGdyb3Vwc1syXSA6IG51bGwpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZ2FuaXphdGlvbi5zbHVnICYmICFyZXN1bHQuaW5zdGl0dXRpb25zW29yZ2FuaXphdGlvbi5zbHVnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pbnN0aXR1dGlvbnNbb3JnYW5pemF0aW9uLnNsdWddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogb3JnYW5pemF0aW9uLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcmdhbml6YXRpb24uc2x1Z1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9qZWN0LnNsdWcgJiYgIXJlc3VsdC5wcm9qZWN0c1twcm9qZWN0LnNsdWddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnByb2plY3RzW3Byb2plY3Quc2x1Z10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwcm9qZWN0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9qZWN0LnNsdWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0czogcmlnaHRzID8gW3JpZ2h0c10gOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJpZ2h0cyAmJiBwcm9qZWN0LnNsdWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHJvamVjdHNbcHJvamVjdC5zbHVnXS5yaWdodHMucHVzaChyaWdodHMuc2x1Zyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0lnbm9yZWQgZW50aXRsZW1lbnQnLCBydWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VzZXIgaW5mbyBkYXRhIGRvZXMgbm90IGNvbnRhaW4gYWNjZXNzIGluZm9ybWF0aW9uISBJcyBPQVVUSCBzY29wZSBzZXQgY29ycmVjdGx5PycpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGRlY2lkZSB1c2VyIGF1dGhvcml6YXRpb24gY2FwYWJpbGl0aWVzIScsIGUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVtcGF0aW9uQVBJT3B0aW9ucywgUmF3QVBJLCBSYXdPcHRpb25zIH0gZnJvbSAnLi4vLi4vYmFzZSc7XHJcbmltcG9ydCB7IFJvb3RBUEkgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IFNjb3BlIGZyb20gJy4uL3Njb3BlL3Njb3BlJztcclxuaW1wb3J0IEFwcHMgZnJvbSAnLi9hcHBzJztcclxuaW1wb3J0IENhc2VzIGZyb20gJy4vY2FzZXMnO1xyXG5pbXBvcnQgRXhhbWluYXRpb25zIGZyb20gJy4vZXhhbWluYXRpb25zJztcclxuaW1wb3J0IFNsaWRlcyBmcm9tICcuL3NsaWRlcyc7XHJcbmltcG9ydCBSYXRpb25BSSBmcm9tICcuLi9yYXRpb25haS9yYXRpb25haSc7XHJcbmltcG9ydCB7IFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uIH0gZnJvbSAnLi90eXBlcy93b3JrYmVuY2gtc2VydmljZS1hcGktdi0zLWN1c3RvbS1tb2RlbHMtZXhhbWluYXRpb25zLWV4YW1pbmF0aW9uJztcclxuXHJcbi8vIEltcG9ydGFudCB0byB0cmlnZ2VyIGFsbCB0aGUgaW5kZXggY29kZSFcclxuaW1wb3J0ICogYXMgSW50ZWdyYXRpb24gZnJvbSBcIi4uL2ludGVncmF0aW9uXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb290IGV4dGVuZHMgUm9vdEFQSSB7XHJcbiAgc3RhdGljIGFwaVBhdGggPSAnL3YzJztcclxuXHJcbiAgLy9pbnRlcmZhY2VcclxuICBwcm90ZWN0ZWQgcmF3OiBSYXdBUEk7XHJcbiAgcHJvdGVjdGVkIGRlZmF1bHRTY29wZUtleTogc3RyaW5nID0gJyc7XHJcbiAgdmVyc2lvbjogc3RyaW5nO1xyXG4gIHJvb3RVUkk6IHN0cmluZztcclxuXHJcbiAgaW50ZWdyYXRpb246IEludGVncmF0aW9uLkF1dGhJbnRlZ3JhdGlvbjtcclxuXHJcbiAgc2NvcGVzOiBNYXA8c3RyaW5nLCBTY29wZT47XHJcblxyXG4gIC8vY3VzdG9tXHJcbiAgYXBwczogQXBwcztcclxuICBjYXNlczogQ2FzZXM7XHJcbiAgZXhhbWluYXRpb25zOiBFeGFtaW5hdGlvbnM7XHJcbiAgc2xpZGVzOiBTbGlkZXM7XHJcbiAgcmF0aW9uYWk6IFJhdGlvbkFJO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBFbXBhdGlvbkFQSU9wdGlvbnMpIHtcclxuICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgdGhpcy52ZXJzaW9uID0gJ3YzJztcclxuICAgIHRoaXMucm9vdFVSSSA9IHRoaXMub3B0aW9ucy5hcGlVcmwgKyBSb290LmFwaVBhdGg7XHJcbiAgICB0aGlzLnJhdyA9IG5ldyBSYXdBUEkodGhpcy5yb290VVJJKTtcclxuXHJcblxyXG4gICAgaWYgKCFvcHRpb25zLmludGVncmF0aW9uT3B0aW9ucykge1xyXG4gICAgICBvcHRpb25zLmludGVncmF0aW9uT3B0aW9ucyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByaXZhdGUgdGhpcyBpbmplY3Rpb24gKGluc3RhbnRpYXRlIGhhcyBvbmx5IG9uZSBhcmd1bWVudClcclxuICAgIG9wdGlvbnMuaW50ZWdyYXRpb25PcHRpb25zLl9jb250ZXh0ID0gdGhpcztcclxuXHJcbiAgICBjb25zdCBwcm92aWRlciA9IG9wdGlvbnMuaW50ZWdyYXRpb25PcHRpb25zLmltcGxlbWVudGF0aW9uIHx8IFwiZGVmYXVsdFwiO1xyXG4gICAgY29uc3QgSW50ZWdyYXRpb25DbGFzcyA9IEludGVncmF0aW9uLkludGVncmF0aW9uTWFuYWdlci5nZXQocHJvdmlkZXIpO1xyXG4gICAgaWYgKCFJbnRlZ3JhdGlvbkNsYXNzKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGluc3RhbnRpYXRlIGludGVncmF0aW9uIHByb3ZpZGVyICR7cHJvdmlkZXJ9IC0gaXMgaXQgYSB2YWxpZCBuYW1lP2ApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbnRlZ3JhdGlvbiA9IG5ldyBJbnRlZ3JhdGlvbkNsYXNzKG9wdGlvbnMuaW50ZWdyYXRpb25PcHRpb25zKTtcclxuXHJcblxyXG5cclxuICAgIHRoaXMuYXBwcyA9IG5ldyBBcHBzKHRoaXMpO1xyXG4gICAgdGhpcy5jYXNlcyA9IG5ldyBDYXNlcyh0aGlzKTtcclxuICAgIHRoaXMuZXhhbWluYXRpb25zID0gbmV3IEV4YW1pbmF0aW9ucyh0aGlzKTtcclxuICAgIHRoaXMuc2xpZGVzID0gbmV3IFNsaWRlcyh0aGlzKTtcclxuICAgIHRoaXMucmF0aW9uYWkgPSBuZXcgUmF0aW9uQUkodGhpcyk7XHJcblxyXG4gICAgdGhpcy5zY29wZXMgPSBuZXcgTWFwPHN0cmluZywgU2NvcGU+KCk7XHJcbiAgfVxyXG5cclxuICBnZXQgZGVmYXVsdFNjb3BlKCk6IFNjb3BlIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLnNjb3Blcy5nZXQodGhpcy5kZWZhdWx0U2NvcGVLZXkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBuZXdTY29wZUZyb20oXHJcbiAgICBleGFtaW5hdGlvbjogV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24sXHJcbiAgKSB7XHJcbiAgICBjb25zdCBzY29wZSA9IG5ldyBTY29wZSh0aGlzKTtcclxuICAgIGF3YWl0IHNjb3BlLmZyb20oZXhhbWluYXRpb24pO1xyXG4gICAgdGhpcy5zY29wZXMuc2V0KGV4YW1pbmF0aW9uLmlkLCBzY29wZSk7XHJcbiAgICBpZiAodGhpcy5kZWZhdWx0U2NvcGVLZXkgPT09ICcnKSB0aGlzLmRlZmF1bHRTY29wZUtleSA9IGV4YW1pbmF0aW9uLmlkO1xyXG4gICAgcmV0dXJuIHNjb3BlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBuZXdTY29wZVVzZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHNjb3BlID0gbmV3IFNjb3BlKHRoaXMpO1xyXG4gICAgYXdhaXQgc2NvcGUudXNlKGNhc2VJZCwgYXBwSWQpO1xyXG4gICAgdGhpcy5zY29wZXMuc2V0KHNjb3BlLmFjdGl2ZUV4YW1pbmF0aW9uSWQsIHNjb3BlKTtcclxuICAgIGlmICh0aGlzLmRlZmF1bHRTY29wZUtleSA9PT0gJycpXHJcbiAgICAgIHRoaXMuZGVmYXVsdFNjb3BlS2V5ID0gc2NvcGUuYWN0aXZlRXhhbWluYXRpb25JZDtcclxuICAgIHJldHVybiBzY29wZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFNjb3BlRnJvbShcclxuICAgIGV4YW1pbmF0aW9uOiBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbixcclxuICApIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHRoaXMuc2NvcGVzLmdldChleGFtaW5hdGlvbi5pZCkgfHwgKGF3YWl0IHRoaXMubmV3U2NvcGVGcm9tKGV4YW1pbmF0aW9uKSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRTY29wZVVzZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IG1hdGNoaW5nU2NvcGVzID0gWy4uLnRoaXMuc2NvcGVzLnZhbHVlcygpXS5maWx0ZXIoXHJcbiAgICAgIChzY3ApID0+XHJcbiAgICAgICAgc2NwLmFjdGl2ZUNhc2VJZCA9PT0gY2FzZUlkICYmXHJcbiAgICAgICAgKGFwcElkID8gc2NwLmFjdGl2ZUFwcElkID09PSBhcHBJZCA6IHRydWUpLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBtYXRjaGluZ1Njb3Blcy5sZW5ndGggPiAwXHJcbiAgICAgID8gbWF0Y2hpbmdTY29wZXNbMF1cclxuICAgICAgOiBhd2FpdCB0aGlzLm5ld1Njb3BlVXNlKGNhc2VJZCwgYXBwSWQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmF3T3B0aW9ucyA9IHt9KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGF3YWl0IHN1cGVyLnJhd1F1ZXJ5KGVuZHBvaW50LCBvcHRpb25zKTtcclxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5oZWFkZXJzWydVc2VyLUlkJ10gPSB0aGlzLnVzZXJJZDtcclxuICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgIG9wdGlvbnMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID1cclxuICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSB8fCBgQmVhcmVyICR7dGhpcy5yYXdUb2tlbn1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMucmF3Lmh0dHAoZW5kcG9pbnQsIG9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsid2VicGFja0VtcHR5QXN5bmNDb250ZXh0IiwicmVxIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiZSIsIkVycm9yIiwiY29kZSIsImtleXMiLCJpZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiRXZlbnRTb3VyY2UiLCJldmVudHMiLCJhZGRPbmNlSGFuZGxlciIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJ1c2VyRGF0YSIsInRpbWVzIiwicHJpb3JpdHkiLCJzZWxmIiwidGhpcyIsImNvdW50Iiwib25jZUhhbmRsZXIiLCJldmVudCIsInJlbW92ZUhhbmRsZXIiLCJhZGRIYW5kbGVyIiwiaXNGdW5jdGlvbiIsImluZGV4IiwibGVuZ3RoIiwiaGFuZGxlcnMiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwicHVzaCIsIm51bWJlck9mSGFuZGxlcnMiLCJyZW1vdmVBbGxIYW5kbGVycyIsImV2ZW50VHlwZSIsImdldEhhbmRsZXIiLCJhcHBseSIsInNvdXJjZSIsImFyZ3MiLCJldmVudFNvdXJjZSIsImdldEF3YWl0aW5nSGFuZGxlciIsImxvb3AiLCJyZXN1bHQiLCJ0eXBlIiwicmFpc2VFdmVudCIsImV2ZW50QXJncyIsInJhaXNlRXZlbnRBd2FpdGluZyIsImF3YWl0aW5nSGFuZGxlciIsIlN0cmluZyIsImNsYXNzMnR5cGUiLCJ0b1N0cmluZyIsIlNUQVRVU19DT0RFUyIsIkhUVFBFcnJvciIsIm1lc3NhZ2UiLCJleHRyYXMiLCJzdXBlciIsImFyZ3VtZW50cyIsImFzc2lnbiIsIm5hbWUiLCJzdWZmaXgiLCJyZXBsYWNlIiwic3BsaXQiLCJyZWR1Y2UiLCJhY2MiLCJjIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImh0dHBFcnJvclRvTmFtZSIsInN0YXR1c0NvZGUiLCJSYXdBUEkiLCJjb25zdHJ1Y3RvciIsInVybCIsIm9wdGlvbnMiLCJfcGFyc2VRdWVyeVBhcmFtcyIsInBhcmFtcyIsImsiLCJ2IiwiVVJMU2VhcmNoUGFyYW1zIiwiX2ZldGNoIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwicmVzcG9uc2VUeXBlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImVycm9yIiwib2siLCJwYXlsb2FkIiwiaHR0cCIsImVuZHBvaW50IiwiaGFzQm9keSIsInN0YXJ0c1dpdGgiLCJxdWVyeSIsIkpTT04iLCJzdHJpbmdpZnkiLCJBYnN0cmFjdEFQSSIsImdldENhbGxlck5hbWUiLCJvcmlnIiwicHJlcGFyZVN0YWNrVHJhY2UiLCJzdGFjayIsInJlcXVpcmVzIiwiZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCIsInRva2VuIiwiZXhwIiwiRGF0ZSIsIm5vdyIsInBhcnNlSnd0VG9rZW4iLCJwYXJzZSIsImF0b2IiLCJzbGVlcCIsIm1zIiwic2V0VGltZW91dCIsIkxvZ2dlciIsImNvbnNvbGUiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwiUm9vdENvbnRleHQiLCJSb290QVBJIiwiYWNjZXNzVG9rZW4iLCJfdG9rZW5FeHBpcmVzIiwiX3Jhd1Rva2VuIiwid29ya2JlbmNoQXBpVXJsIiwiYXBpVXJsIiwiYXBpUm9vdFBhdGgiLCJlbmRzV2l0aCIsImFub255bW91c1VzZXJJZCIsIl91c2VySWQiLCJjYWNoZWQiLCJmcm9tIiwid2l0aEV2ZW50IiwicmVzZXQiLCJ0b2tlblRpbWVvdXQiLCJ1c2VySWQiLCJzdWIiLCJ1c2UiLCJkZWZhdWx0U2NvcGVLZXkiLCJzY29wZXMiLCJmb3JFYWNoIiwic2NwIiwiY2xlYXIiLCJyYXdUb2tlbiIsInJhd1F1ZXJ5IiwiZXZlbnRPYmplY3QiLCJuZXdUb2tlbiIsIlNjb3BlQ29udGV4dCIsIlNjb3BlQVBJIiwiQXBwcyIsImNvbnRleHQiLCJkYXRhIiwiX2RlZmF1bHRBcHAiLCJsaXN0IiwiYXBwcyIsInRpc3N1ZXMiLCJzdGFpbnMiLCJqb2JfbW9kZXMiLCJhcHAiLCJpdGVtcyIsIm5hbWVfc2hvcnQiLCJ2ZW5kb3JfbmFtZSIsImdldE51bWJlciIsInZhcmlhYmxlIiwiTnVtYmVyIiwibWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwIiwic3RyIiwic2VwYXJhdG9yIiwiZ3JvdXBJZHgiLCJtYXRjaGVzIiwiUmVnRXhwIiwiZXhlYyIsIkNhc2VFeHBsb3JlciIsImludGVncmF0aW9uIiwiY3VzdG9tQ2FzZXMiLCJjYXNlSGllcmFyY2h5IiwiY2FzZVRpc3N1ZXMiLCJjYXNlU3RhaW5zIiwiaWRlbnRpZmllclNlcGFyYXRvciIsImhpZXJhcmNoeVNwZWMiLCJoaWVyYXJjaHlOYW1lT3ZlcnJpZGVzIiwiZ2V0Q3VzdG9tQ2FzZXMiLCJtYXAiLCJjYXNlT2JqIiwicGF0aEluSGllcmFyY2h5IiwiZ2V0Q2FzZUhpZXJhcmNoeVBhdGgiLCJwYXRoRmluaXNoZWQiLCJwcmV2IiwiY3VyciIsInZhbCIsImdldENhc2VWYWx1ZSIsInJldHVyblZhbCIsImdldENhc2UiLCJjYXNlSWQiLCJmaW5kIiwiY3MiLCJnZXRDYXNlWWVhciIsImdldENhc2VNb250aCIsImdldENhc2VEYXkiLCJnZXRDYXNlRGVzY3JpcHRpb24iLCJnZXRDYXNlVGlzc3VlcyIsImdldENhc2VTdGFpbnMiLCJpc05hTiIsImdldENhc2VJZGVudGlmaWVyUGFydCIsImV2YWx1YXRlQ2FzZVZhbHVlIiwiZXZhbFZhbHVlIiwiY2FzZVZhbHVlIiwiZXZhdWxhdGVDYXNlWWVhciIsImV2YXVsYXRlQ2FzZU1vbnRoIiwiZXZhdWxhdGVDYXNlRGF5IiwiZXZhbHVhdGVDYXNlRGVzY3JpcHRpb24iLCJldmFsdWF0ZUNhc2VUaXNzdWVzIiwiZXZhbHVhdGVDYXNlU3RhaW5zIiwiZXZhdWxhdGVDYXNlSWRlbnRpZmllclBhcnQiLCJlcG9jaFRpbWUiLCJjcmVhdGVkX2F0IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJwYXJ0SWR4IiwicGFydHMiLCJsb2NhbF9pZCIsImRlc2NyaXB0aW9uIiwic3RyaW5nVG9NYXRjaCIsInRva2VuU3RyaW5nIiwidG9rZW5zIiwiZmlsdGVyIiwiQm9vbGVhbiIsInNlYXJjaFRlcm1SZWdleCIsImpvaW4iLCJtYXRjaCIsIm1hdGNoU3RyaW5nT25Ub2tlbnMiLCJldmVyeSIsInRpc3N1ZSIsImluY2x1ZGVzIiwic3RhaW4iLCJoaWVyYXJjaHlMZXZlbCIsImtleUlkeCIsImNhc2VzIiwiY3VycmVudEhpZXJhcmNoeVBhdGgiLCJwYXJlbnQiLCJsZXZlbElkIiwibGV2ZWxOYW1lIiwibGFzdExldmVsIiwiZ3JvdXBzIiwiaXRlbSIsImFsbCIsIml0ZW1JZCIsIm92ZXJyaWRlTmFtZSIsInRyYW5zbGF0ZVBhdGhTcGVjIiwiY2hpbGQiLCJoaWVyYXJjaHkiLCJzZWFyY2giLCJmaWx0ZXJlZENhc2VzIiwibG9jYWxpemF0aW9uIiwiYWxsVGlzc3VlcyIsImVudHJpZXMiLCJ0aXNOYW1lIiwidGlzVmFsdWUiLCJsb2NOYW1lIiwidCIsIk1hcCIsInZhbHVlcyIsImFsbFN0YWlucyIsInN0bk5hbWUiLCJzdG5WYWx1ZSIsInMiLCJXc2lFeHBsb3JlciIsImxhc3RDYXNlSWQiLCJzbGlkZXNEYXRhIiwibWFza3NEYXRhIiwibWFza0lkZW50aWZpZXJTZXBhcmF0b3IiLCJtYXNrSWRlbnRpZmllclZhbHVlIiwiZ2V0QWxsU2xpZGVzIiwic2xpZGVzIiwic2xpZGUiLCJtYXNrcyIsIkNhc2VzIiwiY2FzZUV4cGxvcmVyIiwid3NpRXhwbG9yZXIiLCJFeGFtaW5hdGlvbnMiLCJjcmVhdGUiLCJhcHBJZCIsImNhc2VfaWQiLCJhcHBfaWQiLCJza2lwIiwibGltaXQiLCJleGFtaW5hdGlvbklkIiwic2NvcGUiLCJTdG9yYWdlIiwiZ2V0UmF3IiwiZmx1c2giLCJjb250ZW50Iiwic2V0IiwidmFsdWVSYXciLCJkYXRhUmF3IiwiZXJhc2UiLCJBbm5vdGF0aW9ucyIsIndpdGhDbGFzc2VzIiwid2l0aF9jbGFzc2VzIiwiY3JlYXRlTWFueSIsImRlbGV0ZUJ5SWQiLCJvYmplY3QiLCJkZWxldGVkIiwiY2xhc3NlcyIsImNscyIsImRlbGV0ZUNsYXNzIiwidXBkYXRlIiwiZXh0ZXJuYWxJZHMiLCJhZGRDbGFzcyIsImFkZENsYXNzTWFueSIsImdldENsYXNzIiwicXVlcnlDbGFzc2VzIiwiQ29sbGVjdGlvbnMiLCJjb2xsZWN0aW9uSWQiLCJjb2xsZWN0aW9uIiwicXVlcnlJdGVtcyIsImNyZWF0ZUl0ZW1zIiwiZGVsZXRlSXRlbSIsIkpvYnMiLCJnZXRKb2JzIiwiam9iSWQiLCJQaXhlbG1hcHMiLCJwaXhlbG1hcElkIiwicG9zdCIsInBpeGVsbWFwcyIsImdldFRpbGUiLCJsZXZlbCIsInRpbGVYIiwidGlsZVkiLCJ1cGxvYWRUaWxlIiwidGlsZSIsImRlbGV0ZVRpbGUiLCJidWxrR2V0VGlsZSIsInN0YXJ0WCIsInN0YXJ0WSIsImVuZFgiLCJlbmRZIiwiYnVsa1VwbG9hZFRpbGUiLCJ0aWxlcyIsIlNjb3BlIiwic2NvcGVDb250ZXh0IiwiX2RlZmF1bHRFeGFtaW5hdGlvbklkIiwiX3Rva2VuUmVmZXRjaEludGVydmFsIiwiYWN0aXZlRXhhbWluYXRpb25JZCIsImFjdGl2ZUNhc2VJZCIsImFjdGl2ZUFwcElkIiwicmF3IiwiYXBpUGF0aCIsInN0b3JhZ2UiLCJhbm5vdGF0aW9ucyIsImNvbGxlY3Rpb25zIiwiam9icyIsImZpbmRFeGFtaW5hdGlvbiIsImV4YW1pbmF0aW9ucyIsImNyZWF0b3JzIiwiaXRlbV9jb3VudCIsImV4YW1pbmF0aW9uIiwiZXgiLCJzdGF0ZSIsImRlZmF1bHQiLCJzY29wZVRva2VuIiwiYWNjZXNzX3Rva2VuIiwic2NvcGVfaWQiLCJ0aW1lb3V0Iiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiR2xvYmFsRGF0YUNyZWF0b3JUeXBlIiwiR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUiLCJUZW1wbGF0ZVR5cGUiLCJTbGlkZXMiLCJzbGlkZUluZm8iLCJzbGlkZUlkIiwic2xpZGVUaHVtYm5haWwiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImZvcm1hdCIsImltYWdlX2Zvcm1hdCIsInNsaWRlTGFiZWwiLCJsb2FkVGlsZSIsIngiLCJ5IiwiV3NpTWV0YWRhdGEiLCJkZWZhdWx0U2xpZGVNZXRhZGF0YSIsInZpc3VhbGl6YXRpb24iLCJkZWZhdWx0TWFza01ldGFkYXRhIiwiZ2V0V3NpTWV0YWRhdGFJdGVtIiwid3NpSWQiLCJpc1NsaWRlIiwibWV0YWRhdGEiLCJyZWZlcmVuY2VzIiwicCIsImRhdGFfdHlwZSIsImNyZWF0ZVdzaU1ldGFkYXRhSXRlbSIsImNyZWF0ZVZhbHVlIiwiV1NJIiwiZ2V0U2xpZGVNZXRhZGF0YSIsInVwZGF0ZVNsaWRlTWV0YWRhdGEiLCJtZXRhZGF0YUl0ZW0iLCJ1cGRhdGVkSXRlbSIsImdldFNoYWRlcnNDb25maWciLCJzaGFkZXJzIiwic2hhZGVyc0NvbmZpZyIsInNoYWRlclRlbXAiLCJ2aXNUZW1wbGF0ZXMiLCJnZXRUZW1wbGF0ZSIsIlNoYWRlciIsInNoYWRlclRlbXBsYXRlIiwiZGF0YVJlZmVyZW5jZXMiLCJkYXRhUmVmcyIsImdldFZpc3VhbGl6YXRpb25zIiwic2xpZGVWaXMiLCJwYXJhbXNUZW1wbGF0ZSIsIlBhcmFtcyIsImJhY2tncm91bmQiLCJCYWNrZ3JvdW5kIiwidGVtcGxhdGUiLCJkYXRhUmVmIiwidmlzdWFsaXphdGlvbnMiLCJ2aXMiLCJWaXN1YWxpemF0aW9uIiwidmlzVGVtcGxhdGUiLCJnZXRNYXNrTWV0YWRhdGEiLCJtYXNrSWQiLCJ0ZW1wbGF0ZXNHbG9iYWxJdGVtRGF0YVR5cGUiLCJWaXN1YWxpemF0aW9uVGVtcGxhdGVzIiwiZmV0Y2hUZW1wbGF0ZUl0ZW0iLCJkYXRhX3R5cGVzIiwidG1wbCIsImNyZWF0ZVRlbXBsYXRlIiwiZGVsZXRlVGVtcGxhdGUiLCJleGlzdGluZ1RtcGwiLCJkZWxldGUiLCJBbm5vdFByZXNldHMiLCJwcmVzZXREYXRhVHlwZSIsImdldFByZXNldHNJdGVtIiwiZnJlc2giLCJwcmVzZXRzSXRlbSIsImNyZWF0ZVByZXNldHNJdGVtIiwicHJlc2V0cyIsImdldEFubm90UHJlc2V0cyIsInByZXNldEl0ZW0iLCJsYXN0TW9kaWZpZWRBdCIsIm1vZGlmaWVkX2F0IiwibWVyZ2VQcmVzZXRzIiwicHJpbWFyeUFyciIsInNlY29uZGFyeUFyciIsImxvY2FsVmVyc2lvbiIsIm5ld0FyciIsInNlY0l0ZW0iLCJzb21lIiwicHJpbUl0ZW0iLCJjcmVhdGVkQXQiLCJ1cGRhdGVBbm5vdFByZXNldHMiLCJmYWlsT25QYXJhbGxlbFVwZGF0ZSIsInJlbW90ZVByZXNldHNJdGVtIiwicmVtb3RlUHJlc2V0cyIsImxvY2FsUHJlc2V0cyIsInN1Y2Nlc3NmdWxVcGRhdGUiLCJyZXRyeUF0dGVtcHQiLCJkZWxldGVBbm5vdFByZXNldHMiLCJKb2JDb25maWciLCJjb25maWdEYXRhVHlwZSIsImZldGNoSm9iQ29uZmlnSXRlbSIsImdldEpvYkNvbmZpZyIsImNyZWF0ZUpvYkNvbmZpZyIsIkpPQiIsImRlbGV0ZUpvYkNvbmZpZyIsImV4aXN0aW5nQ29uZmlnIiwiR2xvYmFsU3RvcmFnZSIsIndzaU1ldGFkYXRhIiwiYW5ub3RQcmVzZXRzIiwiam9iQ29uZmlnIiwiZ2V0VmFsdWUiLCJyZWZlcmVuY2VfaWQiLCJyZWZlcmVuY2VfdHlwZSIsIm5ld0l0ZW0iLCJjcmVhdG9yX2lkIiwiY3JlYXRvcl90eXBlIiwiVVNFUiIsInVwZGF0ZVZhbHVlIiwiUmF0aW9uQUkiLCJnbG9iYWxTdG9yYWdlIiwicmVsYXRpdmVBcGlQYXRoIiwiRGVmYXVsdEludGVncmF0aW9uIiwicHJvcHMiLCJfY29udGV4dCIsInNwZWNLZXkiLCJJbnRlZ3JhdGlvbk1hbmFnZXIiLCJyZWdpc3RlciIsInVzZXJpbmZvIiwicGFyc2VVc2VySW5zdGl0dXRpb25zQW5kUHJvamVjdHMiLCJpbnN0aXR1dGlvbnMiLCJwcm9qZWN0cyIsInBhcnNlR3JvdXBOYW1lIiwic2x1ZyIsImRlY29kZVVSSUNvbXBvbmVudCIsInRyaW0iLCJ0ZXh0IiwicGFyc2VkRGF0YSIsImxhYmVsIiwicmlnaHRzIiwiZW50aXRsZW1lbnRzIiwiZWR1cGVyc29uX2VudGl0bGVtZW50IiwicnVsZSIsInByb2plY3QiLCJvcmdhbml6YXRpb24iLCJSb290IiwidmVyc2lvbiIsInJvb3RVUkkiLCJpbnRlZ3JhdGlvbk9wdGlvbnMiLCJwcm92aWRlciIsImltcGxlbWVudGF0aW9uIiwiSW50ZWdyYXRpb25DbGFzcyIsInJhdGlvbmFpIiwiZGVmYXVsdFNjb3BlIiwibmV3U2NvcGVGcm9tIiwibmV3U2NvcGVVc2UiLCJnZXRTY29wZUZyb20iLCJnZXRTY29wZVVzZSIsIm1hdGNoaW5nU2NvcGVzIl0sInNvdXJjZVJvb3QiOiIifQ==
