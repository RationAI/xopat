var EmpationAPI;(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{AbstractAPI:()=>c,EventSource:()=>n,HTTPError:()=>o,Logger:()=>l,RawAPI:()=>a,RootAPI:()=>p,RootContext:()=>f,STATUS_CODES:()=>s,ScopeAPI:()=>y,ScopeContext:()=>v,V3:()=>i,getJwtTokenExpiresTimeout:()=>u,parseJwtToken:()=>d,sleep:()=>h});var i={};t.r(i),t.d(i,{Apps:()=>g,Cases:()=>C,Examinations:()=>$,RationAI:()=>rt,Root:()=>ct,Scope:()=>J,Slides:()=>z,Storage:()=>k});class n{constructor(){this.events={}}addOnceHandler(t,e,i,n,s){const r=this;n=n||1;let o=0;const a=function(i){return o++,o===n&&r.removeHandler(t,a),e(i)};this.addHandler(t,a,i,s)}addHandler(t,e,i=null,s=0){let r=this.events[t];if(r||(this.events[t]=r=[]),e&&n.isFunction(e)){let t=r.length,n={handler:e,userData:i||null,priority:s||0};for(r[t]=n;t>0&&r[t-1].priority<r[t].priority;)r[t]=r[t-1],r[t-1]=n,t--}}removeHandler(t,e){const i=this.events[t],n=[];if(i&&Array.isArray(i)){for(let t=0;t<i.length;t++)i[t].handler!==e&&n.push(i[t]);this.events[t]=n}}numberOfHandlers(t){const e=this.events[t];return e?e.length:0}removeAllHandlers(t){if(t)this.events[t]=[];else for(const t in this.events)this.events[t]=[]}getHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){let n,s=e.length;for(n=0;n<s;n++)e[n]&&(i.eventSource=t,i.userData=e[n].userData,e[n].handler(i))}):null}getAwaitingHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){return new Promise((s=>{const r=e.length;!function o(a){if(a>=r||!e[a])return s("Resolved!"),null;i.eventSource=t,i.userData=e[a].userData;let c=e[a].handler(i);return c=c&&"promise"===n.type(c)?c:Promise.resolve(),c.then((()=>o(a+1)))}(0)}))}):null}raiseEvent(t,e){const i=this.getHandler(t);if(i)return i(this,e||{})}raiseEventAwaiting(t,e){const i=this.getAwaitingHandler(t);return i?i(this,e||{}):Promise.resolve("No handler for this event registered.")}static isFunction(t){return"function"===this.type(t)}static type(t){return null==t?String(t):this.class2type[t.toString()]||("function"==typeof t?"function":"object")}}n.class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};const s={100:"Continue",101:"Switching protocols",102:"Processing",103:"Early Hints",200:"Ok",201:"Created",202:"Accepted",203:"Non Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Too Long",414:"Request Uri Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"Im A Teapot",419:"Insufficient Space On Resource",420:"Method Failure",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"Http Version Not Supported",507:"Insufficient Storage",511:"Network Authentication Required"};var r=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class o extends Error{constructor(t,e,i){super(e||s[t]||`HTTP Code ${t}`),arguments.length>=3&&i&&Object.assign(this,i),this.name=function(t){const e=4==(t/100|0)||5==(t/100|0)?"error":"";return` ${String(s[t]||`HTTP Code ${t}`).replace(/error$/i,"")} ${e}`.split(" ").reduce(((t,e)=>t+(e?e.charAt(0).toUpperCase()+e.slice(1):"")))}(t),this.statusCode=t}}class a{constructor(t,e={}){this.url=t,this.options=e}_parseQueryParams(t){if(t){if("string"==typeof t)return t;if(t.constructor===Object||void 0===t.constructor)for(let e in t){null==t[e]&&delete t[e]}return`?${new URLSearchParams(t)}`}return""}_fetch(t,e){return r(this,void 0,void 0,(function*(){const i=yield fetch(t,{method:e.method,headers:e.headers,body:e.body});let n;try{n=yield i[e.responseType||"json"]()}catch(e){throw new o(500,`Failed to parse response data. Original status: ${i.status} | ${i.statusText}`,{url:t,error:e})}if(!i.ok)throw new o(i.status,i.statusText,n);return n}))}http(t,e){return r(this,void 0,void 0,(function*(){const i=!!e.body;return e.method=e.method||(i?"POST":"GET"),t.startsWith("/")||(t=`/${t}`),e.query=this._parseQueryParams(e.query),e.headers=e.headers||{},e.headers["Content-Type"]="application/json",e.body&&"string"!=typeof e.body?e.body=JSON.stringify(e.body):e.body=void 0,yield this._fetch(this.url+t+e.query,e)}))}}class c extends n{getCallerName(){const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,e)=>e;const{stack:e}=new Error;Error.prepareStackTrace=t;return(null==e?void 0:e[2])||"unknown context"}requires(t,e){if(!e)throw`ArgumentError[${this.getCallerName()}] ${t} is missing - required property!`}}function u(t){return 1e3*t.exp-Date.now()||3e5}function d(t){return JSON.parse(atob(t.split(".")[1]))}function h(t){return new Promise((e=>setTimeout(e,t)))}class l{static error(...t){console.error("E:EmpationAPI",...t)}static warn(...t){console.warn("W:EmpationAPI",...t)}static info(...t){console.info("I:EmpationAPI",...t)}static debug(...t){console.debug("D:EmpationAPI",...t)}}class f{}class p extends c{constructor(t){if(super(),this.accessToken=null,this._tokenExpires=0,this._rawToken="",!t.workbenchApiUrl)throw"WB Api url is required!";let e;e=t.apiRootPath?t.apiRootPath.startsWith("/")?`${t.workbenchApiUrl}${t.apiRootPath}`:`${t.workbenchApiUrl}/${t.apiRootPath}`:t.workbenchApiUrl,e.endsWith("/")&&(e=e.slice(0,-1)),this.options={apiUrl:e,workbenchApiUrl:t.workbenchApiUrl,anonymousUserId:t.anonymousUserId||"anonymous",apiRootPath:t.apiRootPath||""},this._userId=this.options.anonymousUserId,this.cached={}}from(t,e=!0){if(!t)return this.reset();this._rawToken=t,e=e&&!this.accessToken,this.accessToken=d(t);const i=u(this.accessToken);this._tokenExpires=Date.now()+i/2;let n=this.accessToken.sub;if(!n)throw"Invalid User ID! Must be valid string shorter than 50 characters!";n.length>50&&(console.warn("User ID exceeded 50 characters! Using User ID shortened to first 50 characters!"),n=n.slice(0,50)),this.userId!==n&&(this._userId=n,e&&this.raiseEvent("init"))}use(t,e=!0){if(e=e&&!this._userId,this.reset(),!t||t.length>50)throw"Invalid User ID! Must be valid string shorter than 50 characters!";this._userId=t,e&&this.raiseEvent("init_no_token")}reset(){this._rawToken="",this._tokenExpires=0,this.accessToken=null,this._userId=this.options.anonymousUserId,this.defaultScopeKey="",this.scopes.forEach((t=>t.reset())),this.scopes.clear(),this.raiseEvent("reset")}get userId(){return this._userId}get rawToken(){return this._rawToken}rawQuery(t,e){return i=this,n=void 0,r=function*(){if(!this._userId)throw"User must be configured to access Empaia API: either provide a valid 'anonymous' user ID through env variables, or configure the Root API with a valid token.";if(this._tokenExpires>0&&Date.now()>this._tokenExpires){const t={newToken:""};yield this.raiseEventAwaiting("token-refresh",t),this.from(t.newToken)}},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{c(r.next(t))}catch(t){e(t)}}function a(t){try{c(r.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}c((r=r.apply(i,n||[])).next())}));var i,n,s,r}}class v{}class y extends c{}var m=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class g extends f{constructor(t){super(),this.data=null,this._defaultApp=null,this.context=t}list(){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:{apps:null,tissues:null,stains:null,job_modes:null}})}))}query(t){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:t})}))}default(){return m(this,void 0,void 0,(function*(){this.data||(yield this.list());for(let t of this.data.items)if("MAP3"===t.name_short&&"rationai"===t.vendor_name){this._defaultApp=t;break}if(!this._defaultApp)throw"Default APP not present in the infrastructure! Was it imported?";return this._defaultApp}))}}const x=t=>("string"==typeof t&&(t=Number(t)),t),w=(t,e,i,n)=>{const s=new RegExp(e).exec(t);return!(!s||i<1||i>=s.length)&&s[i]===n};var b=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class T{constructor(t){this.customCases=null,this.caseHierarchy=null,this.caseTissues=null,this.caseStains=null,this.identifierSeparator="",this.hierarchySpec=[],this.hierarchyNameOverrides={},this.context=t}use(t,e,i={}){this.hierarchySpec=e,this.identifierSeparator=t,this.hierarchyNameOverrides=i}getCustomCases(){return b(this,void 0,void 0,(function*(){return this.customCases||(this.customCases=(yield this.context.list()).items.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:this.getCaseHierarchyPath(t)})))),this.customCases}))}getCaseHierarchyPath(t){if(!this.identifierSeparator||!this.hierarchySpec)throw"ArgumentError[CaseExplorer] identifierSeparator or hierarchySpec is missing - required property!";let e=!1;return this.hierarchySpec.reduce(((i,n)=>{const s=this.getCaseValue(n,t),r=e?i:`${i}/${s}`;return"OTHER"===s&&(e=!0),r}),"")}getCase(t){return b(this,void 0,void 0,(function*(){let e;return this.customCases&&(e=this.customCases.find((e=>e.id===t))),e||(e=yield this.context.get(t)),Object.assign(Object.assign({},e),{pathInHierarchy:this.getCaseHierarchyPath(e)})}))}getCaseValue(t,e){switch(t){case"year":return this.getCaseYear(e);case"month":return this.getCaseMonth(e);case"day":return this.getCaseDay(e);case"description":return this.getCaseDescription(e);case"tissues":return this.getCaseTissues(e);case"stains":return this.getCaseStains(e);default:if("id_part_"===t.slice(0,8)&&!isNaN(Number(t.slice(8))))return this.getCaseIdentifierPart(e,Number(t.slice(8)));throw`KeyError[CaseExplorer] "${t}" is not supported!`}}evaluateCaseValue(t,e,i){const n=this.getCaseValue(t,i);switch(t){case"year":return this.evaulateCaseYear(n,e);case"month":return this.evaulateCaseMonth(n,e);case"day":return this.evaulateCaseDay(n,e);case"description":return this.evaluateCaseDescription(n,e);case"tissues":return this.evaluateCaseTissues(n,e);case"stains":return this.evaluateCaseStains(n,e);default:return this.evaulateCaseIdentifierPart(n,e)}}getCaseYear(t){return(e=t.created_at,new Date(1e3*x(e)).getFullYear()).toString();var e}getCaseMonth(t){return(e=t.created_at,new Date(1e3*x(e)).getMonth()).toString();var e}getCaseDay(t){return(e=t.created_at,new Date(1e3*x(e)).getDate()).toString();var e}getCaseIdentifierPart(t,e){if(!this.identifierSeparator)throw"ArgumentError[CaseExplorer] identifierSeparator is missing - required property!";const i=new RegExp(this.identifierSeparator).exec(t.local_id||"");if(!i)return"OTHER";if(e<1||e>=i.length)throw'KeyError[CaseExplorer] invalid key "id_part_<index>", group index is not valid!';return i[e]}getCaseDescription(t){return t.description||""}getCaseTissues(t){return Object.keys(t.tissues)}getCaseStains(t){return Object.keys(t.stains)}evaulateCaseYear(t,e){return t===e}evaulateCaseMonth(t,e){return t===e}evaulateCaseDay(t,e){return t===e}evaulateCaseIdentifierPart(t,e){return t===e}evaluateCaseDescription(t,e){return((t,e)=>{const i=e.split(" ").filter(Boolean).map((t=>`(?=.*\\b${t}\\b)`)),n=new RegExp(i.join(""),"gim");return null!==t.match(n)})(t,e)}evaluateCaseTissues(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}evaluateCaseStains(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}hierarchyLevel(t,e,i,n,s){if(e>=t.length)return{levelName:s,lastLevel:!0,items:i.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:n})))};const r=(o=i=>{const n=this.getCaseValue(t[e],i);return Array.isArray(n)?n[0]||"":n},i.reduce(((t,e)=>{var i;return(t[i=o(e)]||(t[i]=[])).push(e),t}),{}));var o;const a=Object.keys(r).map((i=>{var s;const o=(null===(s=this.hierarchyNameOverrides[t[e]])||void 0===s?void 0:s[i])||i;return"OTHER"===i?this.hierarchyLevel(t,t.length,r[i],`${n}/${o}`,o):this.hierarchyLevel(t,e+1,r[i],`${n}/${o}`,o)}));return{levelName:s,lastLevel:!1,items:a}}hierarchy(){return b(this,void 0,void 0,(function*(){if(!this.caseHierarchy){const t=yield this.getCustomCases();this.caseHierarchy=this.hierarchyLevel(this.hierarchySpec,0,t,"")}return this.caseHierarchy}))}search(t){return b(this,void 0,void 0,(function*(){let e=yield this.getCustomCases();return t.forEach((({key:t,value:i})=>e=e.filter((e=>this.evaluateCaseValue(t,i,e))))),e}))}tissues(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseTissues){const e=yield this.getCustomCases(),i=[];e.forEach((e=>Object.entries(e.tissues).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.push(t))))),this.caseTissues=[...new Map(i.map((t=>[JSON.stringify([t.name,t.locName]),t]))).values()]}return this.caseTissues}))}stains(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseStains){const e=yield this.getCustomCases(),i=[];e.forEach((e=>Object.entries(e.stains).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.push(t))))),this.caseStains=[...new Map(i.map((t=>[JSON.stringify([t.name,t.locName]),t]))).values()]}return this.caseStains}))}}var I=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class S{constructor(t){this.lastCaseId=null,this.data=null,this.slidesData=null,this.masksData=null,this.maskIdentifierSeparator="",this.maskIdentifierValue="",this.context=t}use(t,e){this.maskIdentifierSeparator=t,this.maskIdentifierValue=e}getAllSlides(t){return I(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.data||(this.data=(yield this.context.slides(t)).items),this.data}))}slides(t){return I(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.slidesData||(this.slidesData=(yield this.getAllSlides(t)).filter((t=>!w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.slidesData}))}masks(t){return I(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.masksData||(this.masksData=(yield this.getAllSlides(t)).filter((t=>w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.masksData}))}}var P=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class C extends f{constructor(t){super(),this.data=null,this.context=t,this.caseExplorer=new T(this),this.wsiExplorer=new S(this)}list(){return P(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/cases")),this.data}))}get(t){return P(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}`)}))}slides(t){return P(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}/slides`)}))}}var E=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class $ extends f{constructor(t){super(),this.data=null,this.context=t}create(t,e){return E(this,void 0,void 0,(function*(){const i=this.context;return i.requires("caseId",t),i.rawQuery("/examinations",{method:"PUT",body:{case_id:t,app_id:e}})}))}query(t,e,i){return E(this,void 0,void 0,(function*(){return this.context.rawQuery("/examinations/query",{method:"PUT",body:t,query:{skip:e,limit:i}})}))}get(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}`)}))}scope(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}/scope`,{method:"PUT"})}))}}var _=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class k extends v{constructor(t){super(),this.data=null,this.context=t}getRaw(){return _(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/app-ui-storage/user")),this.data}))}flush(){return _(this,void 0,void 0,(function*(){return this.data?yield this.context.rawQuery("/app-ui-storage/user",{method:"PUT",body:this.data}):null}))}get(t){return _(this,void 0,void 0,(function*(){const e=yield this.getRaw();return"string"==typeof e.content[t]?JSON.parse(e.content[t]):e.content[t]}))}set(t,e,i){return _(this,void 0,void 0,(function*(){const n=JSON.stringify(e),s=yield this.getRaw();s.content[t]=n,this.data=s,i&&this.flush()}))}erase(){return _(this,void 0,void 0,(function*(){this.data={content:{}},this.flush()}))}}var O=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class A extends v{constructor(t){super(),this.context=t}upload(t,e={}){return O(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}create(t,e={}){return O(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}delete(t){return O(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/annotations/${t}`,{method:"DELETE"})}))}update(t,e,i={}){return O(this,void 0,void 0,(function*(){return yield this.delete(t),!i.externalIds&&e.id&&(i.externalIds=!0),yield this.create(e,i)}))}}var R=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class U extends v{constructor(t){super(),this.data=null,this.context=t}get(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}`)}))}create(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/collections",{method:"POST",body:t})}))}delete(t){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}`,{method:"DELETE"})}))}queryItems(t,e){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}/items/query`,{method:"PUT",body:e})}))}createItems(t,e){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items`,{method:"POST",body:Object.assign({},e)})}))}deleteItem(t,e){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items/${e}`,{method:"DELETE"})}))}}var j=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class N extends v{constructor(t){super(),this.data=null,this.context=t}getJobs(){return j(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/jobs")).items}))}get(t){return j(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/jobs/${t}`)}))}}var D=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class Q extends v{constructor(t){super(),this.data=null,this.context=t}get(t){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}`)}))}post(t){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/pixelmaps",{method:"POST",body:t})}))}delete(t){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}`,{method:"DELETE"})}))}query(t){return D(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/pixelmaps/query",{method:"PUT",body:t})).items}))}getTile(t,e,i,n){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{responseType:"blob"})}))}uploadTile(t,e,i,n,s){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{method:"PUT",body:s})}))}deleteTile(t,e,i,n){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{method:"DELETE"})}))}bulkGetTile(t,e,i,n,s,r){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/start/${i}/${n}/end/${s}/${r}/data`,{responseType:"blob"})}))}bulkUploadTile(t,e,i,n,s,r,o){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/start/${i}/${n}/end/${s}/${r}/data`,{method:"PUT",body:o})}))}}var q=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class M extends y{constructor(t){super(),this.scopeContext=null,this._defaultExaminationId="",this._tokenRefetchInterval=null,this.activeExaminationId="",this.activeCaseId="",this.activeAppId="",this.context=t,this.raw=new a(this.context.options.apiUrl+M.apiPath),this.storage=new k(this),this.annotations=new A(this),this.collections=new U(this),this.jobs=new N(this),this.pixelmaps=new Q(this)}use(t,e=void 0){return q(this,void 0,void 0,(function*(){this.requires("root::userId",this.context.userId);const i=e=>q(this,void 0,void 0,(function*(){let i=yield this.context.examinations.query({apps:[e],creators:[this.context.userId]});if(i.item_count>0){let t=i.items.find((t=>"OPEN"===t.state));if(t)return t}return yield this.context.examinations.create(t,e)}));let n;if(e?n=yield i(e):this._defaultExaminationId&&(n=yield this.context.examinations.get(this._defaultExaminationId)),!n){let t=yield this.context.apps.default();n=yield i(t.app_id),this._defaultExaminationId=n.id}yield this.from(n)}))}get scopeToken(){var t;return null===(t=this.scopeContext)||void 0===t?void 0:t.access_token}from(t){return q(this,void 0,void 0,(function*(){this.reset(),this.scopeContext=yield this.context.examinations.scope(t.id),this.activeCaseId=t.case_id,this.activeAppId=t.app_id,this.activeExaminationId=t.id;const e=u(d(this.scopeContext.access_token));this._tokenRefetchInterval=setInterval((()=>q(this,void 0,void 0,(function*(){this.scopeContext=yield this.context.examinations.scope(t.id)}))),e),this.raiseEvent("init")}))}reset(){this.activeExaminationId="",this.scopeContext=null,this._tokenRefetchInterval&&(clearInterval(this._tokenRefetchInterval),this._tokenRefetchInterval=null,this.raiseEvent("reset"))}rawQuery(t,e){var i,n;return q(this,void 0,void 0,(function*(){this.requires("this.scopeContext",this.scopeContext),(e=e||{}).headers=e.headers||{},e.headers.Authorization=`Bearer ${null===(i=this.scopeContext)||void 0===i?void 0:i.access_token}`,t&&!t.startsWith("/")&&(t=`/${t}`);try{return yield this.raw.http(`/${null===(n=this.scopeContext)||void 0===n?void 0:n.scope_id}${t}`,e)}catch(i){if(401===i.statusCode)return this.scopeContext=yield this.context.examinations.scope(this.activeExaminationId),yield this.raw.http(`/${this.scopeContext.scope_id}${t}`,e);throw i}}))}}M.apiPath="/v3/scopes";const J=M;var H,L,V,F=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class z extends f{constructor(t){super(),this.data=null,this.context=t}slideInfo(t){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/info`)}))}slideThumbnail(t,e,i,n){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/thumbnail/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}slideLabel(t,e,i,n){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/label/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}loadTile(t,e,i,n,s){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/tile/level/${e}/tile/${i}/${n}`,{query:{image_format:s},responseType:"blob"})}))}}!function(t){t.USER="user",t.SCOPE="scope",t.JOB="job"}(H||(H={})),function(t){t.ANNOTATION="annotation",t.COLLECTION="collection",t.CLASS="class",t.PRIMITIVE="primitive",t.WSI="wsi",t.CASE="case",t.USER="user",t.SCOPE="scope",t.JOB="job"}(L||(L={})),function(t){t.Background="background",t.Params="params",t.Shader="shader",t.Visualization="visualization"}(V||(V={}));var W=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class B{constructor(t){this.data=null,this.defaultSlideMetadata={visualization:{}},this.defaultMaskMetadata={},this.context=t}getWsiMetadataItem(t,e=!0){return W(this,void 0,void 0,(function*(){let i=(yield this.context.query({references:[t]})).find((t=>t.data_type===(e?"slide":"mask")+"_metadata"));return i||(i=yield this.createWsiMetadataItem(t,e?this.defaultSlideMetadata:this.defaultMaskMetadata)),i}))}createWsiMetadataItem(t,e,i=!0){return W(this,void 0,void 0,(function*(){return yield this.context.createValue(e,`Metadata of ${i?"slide":"mask"} ${t}`,void 0,t,L.WSI,(i?"slide":"mask")+"_metadata")}))}getSlideMetadata(t){return W(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t)).value)}))}updateSlideMetadata(t,e){return W(this,void 0,void 0,(function*(){const i=yield this.getWsiMetadataItem(t);try{const t=yield this.context.update(i.id,Object.assign(Object.assign({},i),{value:JSON.stringify(e)}));return JSON.parse(t.value)}catch(t){return!1}}))}getShadersConfig(t){return W(this,void 0,void 0,(function*(){const e={};for(let i=0;i<t.length;i++){const n=yield this.context.visTemplates.getTemplate(V.Shader,t[i].shaderTemplate);e[t[i].id]=Object.assign(Object.assign({},n),{name:t[i].name||t[i].id,dataReferences:t[i].dataRefs})}return e}))}getVisualizations(t){var e;return W(this,void 0,void 0,(function*(){const i=(yield this.getSlideMetadata(t)).visualization;return{params:i.paramsTemplate&&(yield this.context.visTemplates.getTemplate(V.Params,i.paramsTemplate))||void 0,data:i.data,background:Object.assign(Object.assign({},i.background?yield this.context.visTemplates.getTemplate(V.Background,null===(e=i.background)||void 0===e?void 0:e.template):{}),{data:i.background&&i.background.dataRef}),visualizations:i.visualizations&&(yield Promise.all(i.visualizations.map((t=>W(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield this.context.visTemplates.getTemplate(V.Visualization,t.visTemplate)),{name:t.name,shaders:yield this.getShadersConfig(t.shaders)})}))))))}}))}getMaskMetadata(t){return W(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t,!1)).value)}))}}var K=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const G="vis_templates";class Y{constructor(t){this.data=null,this.context=t}fetchTemplateItem(t,e){return K(this,void 0,void 0,(function*(){return(yield this.context.query({references:[null],data_types:[`${G}_${t}`]})).find((t=>t.name===e))}))}getTemplate(t,e){return K(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&JSON.parse(i.value)}))}createTemplate(t,e,i){return K(this,void 0,void 0,(function*(){return!(yield this.fetchTemplateItem(t,e))&&(yield this.context.createValue(i,`${e}`,void 0,void 0,void 0,`${G}_${t}`))}))}deleteTemplate(t,e){return K(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&(yield this.context.delete(i.id),!0)}))}}var X=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class Z{constructor(t){this.data=null,this.presetDataType="annot_presets",this.context=t}use(t){this.presetDataType=t}getPresetsItem(t=!1){return X(this,void 0,void 0,(function*(){if(!this.data||t){let t=(yield this.context.query({references:[null],data_types:[this.presetDataType]})).find((t=>!0));t||(t=yield this.createPresetsItem({presets:[]})),this.data=t}return this.data}))}createPresetsItem(t){return X(this,void 0,void 0,(function*(){return yield this.context.createValue(t,"Global annotation presets",void 0,void 0,void 0,this.presetDataType)}))}getAnnotPresets(t=!1){return X(this,void 0,void 0,(function*(){const e=yield this.getPresetsItem(t);return{presets:JSON.parse(e.value).presets,lastModifiedAt:e.modified_at}}))}mergePresets(t,e,i){const n=[...t];return e.forEach((t=>n.some((e=>e.id===t.id))||!t.createdAt||t.createdAt<=i?null:n.push(t))),n}updateAnnotPresets(t,e,i=!1){return X(this,void 0,void 0,(function*(){const n=yield this.getPresetsItem(!0),s=JSON.parse(n.value).presets;let r=t,o=!0;if(n.modified_at!==e){if(i)return{presets:s,successfulUpdate:!1,lastModifiedAt:n.modified_at};r=this.mergePresets(s,r,e),o=!1}try{const t=yield this.context.update(n.id,Object.assign(Object.assign({},n),{value:JSON.stringify({presets:r})}));return{presets:JSON.parse(t.value).presets,successfulUpdate:o,lastModifiedAt:t.modified_at}}catch(t){if(409===t.statusCode){const t=yield this.updateAnnotPresets(r,n.modified_at);return Object.assign(Object.assign({},t),{successfulUpdate:o})}throw t}}))}deleteAnnotPresets(){return X(this,void 0,void 0,(function*(){const t=yield this.getPresetsItem(!0);yield this.context.delete(t.id),this.data=null}))}}var tt=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class et{constructor(t){this.data=null,this.configDataType="app_job_config",this.context=t}use(t){this.configDataType=t}fetchJobConfigItem(t){return tt(this,void 0,void 0,(function*(){return(yield this.context.query({references:[t],data_types:[this.configDataType]})).find(Boolean)}))}getJobConfig(t){return tt(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&JSON.parse(e.value)}))}createJobConfig(t,e){return tt(this,void 0,void 0,(function*(){return!(yield this.fetchJobConfigItem(t))&&(yield this.context.createValue(e,"Job config of App",void 0,t,L.JOB,this.configDataType))}))}deleteJobConfig(t){return tt(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&(yield this.context.delete(e.id),!0)}))}}var it=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class nt{constructor(t){this.data=null,this.context=t,this.wsiMetadata=new B(this),this.visTemplates=new Y(this),this.annotPresets=new Z(this),this.jobConfig=new et(this)}get(t){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`)}))}getValue(t){return it(this,void 0,void 0,(function*(){const e=yield this.get(t);if("string"===e.type)try{return JSON.parse(e.value)}catch(t){return e.value}return e.value}))}query(t){return it(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/global-storage/query",{method:"PUT",body:t})).items}))}create(t){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/global-storage",{method:"POST",body:t})}))}createValue(t,e,i,n,s,r){return it(this,void 0,void 0,(function*(){t=JSON.stringify(t);const o={name:e,description:i,creator_id:this.context.userId,creator_type:H.USER,reference_id:n,reference_type:s,type:"string",value:t,data_type:r};return yield this.create(o)}))}update(t,e){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:e})}))}updateValue(t,e){return it(this,void 0,void 0,(function*(){const i=yield this.context.rawQuery(`/global-storage/${t}`);return i.value=JSON.stringify(e),yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:i})}))}delete(t){return it(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/global-storage/${t}`,{method:"DELETE"})}))}}class st{constructor(t){this.context=t,this.globalStorage=new nt(this)}get userId(){return this.context.userId}rawQuery(t,e={}){return i=this,n=void 0,r=function*(){return this.context.rawQuery(`${st.relativeApiPath}${t}`,e)},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{c(r.next(t))}catch(t){e(t)}}function a(t){try{c(r.throw(t))}catch(t){e(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}c((r=r.apply(i,n||[])).next())}));var i,n,s,r}}st.relativeApiPath="/rationai";const rt=st;var ot=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class at extends p{constructor(t){super(t),this.defaultScopeKey="",this.version="v3",this.rootURI=this.options.apiUrl+at.apiPath,this.raw=new a(this.rootURI),this.rationai=new rt(this),this.apps=new g(this),this.cases=new C(this),this.examinations=new $(this),this.slides=new z(this),this.scopes=new Map}get defaultScope(){return this.scopes.get(this.defaultScopeKey)}newScopeFrom(t){return ot(this,void 0,void 0,(function*(){const e=new J(this);return yield e.from(t),this.scopes.set(t.id,e),""===this.defaultScopeKey&&(this.defaultScopeKey=t.id),e}))}newScopeUse(t,e){return ot(this,void 0,void 0,(function*(){const i=new J(this);return yield i.use(t,e),this.scopes.set(i.activeExaminationId,i),""===this.defaultScopeKey&&(this.defaultScopeKey=i.activeExaminationId),i}))}getScopeFrom(t){return ot(this,void 0,void 0,(function*(){return this.scopes.get(t.id)||(yield this.newScopeFrom(t))}))}getScopeUse(t,e){return ot(this,void 0,void 0,(function*(){const i=[...this.scopes.values()].filter((i=>i.activeCaseId===t&&(!e||i.activeAppId===e)));return i.length>0?i[0]:yield this.newScopeUse(t,e)}))}rawQuery(t,e={}){const i=Object.create(null,{rawQuery:{get:()=>super.rawQuery}});return ot(this,void 0,void 0,(function*(){return yield i.rawQuery.call(this,t,e),(e=e||{}).headers=e.headers||{},e.headers["User-Id"]=this.userId,this.accessToken&&(e.headers.Authorization=e.headers.Authorization||`Bearer ${this.rawToken}`),this.raw.http(t,e)}))}}at.apiPath="/v3";const ct=at;EmpationAPI=e})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FBYXZFLEtBQUs0SCxPQUM5QjVILEtBQUs4RyxjQUNQbEQsRUFBUVcsUUFBdUIsY0FDN0JYLEVBQVFXLFFBQXVCLGVBQUssVUFBVXZFLEtBQUtvSSxZQUVoRHBJLEtBQUtpVSxJQUFJbFAsS0FBS0MsRUFBVXBCLEVBQ2pDLEcsRUFwRk8sR0FBQXNRLFFBQVUsTSIsInNvdXJjZXMiOlsid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvZXZlbnRzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3N0YXR1cy1jb2Rlcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy9iYXNlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3Jvb3QudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvc2NvcGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9hcHBzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy9jYXNlLWV4cGxvcmVyLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvd3NpLWV4cGxvcmVyLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3QvY2FzZXMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9leGFtaW5hdGlvbnMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvc3RvcmFnZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9hbm5vdGF0aW9ucy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9jb2xsZWN0aW9ucy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9qb2JzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Njb3BlL3BpeGVsbWFwcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9zY29wZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yYXRpb25haS90eXBlcy9nbG9iYWwtZGF0YS1jcmVhdG9yLXR5cGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy90eXBlcy90ZW1wbGF0ZS10eXBlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3Qvc2xpZGVzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvd3NpLW1ldGFkYXRhLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvdmlzdWFsaXphdGlvbi10ZW1wbGF0ZXMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy9hbm5vdC1wcmVzZXRzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvam9iLWNvbmZpZy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yYXRpb25haS9nbG9iYWwtc3RvcmFnZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yYXRpb25haS9yYXRpb25haS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yb290L3Jvb3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvKipcclxuICogT3BlblNlYWRyYWdvbiBpbnNwaXJlZCBldmVudCBzeXN0ZW0gZm9yIHJlZHVjdGlvbiBvZiBkZXBlbmRlbmNpZXMgYW5kIHVuaWZvcm0gZXZlbnQgYXBwcm9hY2hcclxuICovXHJcblxyXG5leHBvcnQgdHlwZSBFdmVudEhhbmRsZXIgPSAoZXZlbnQ6IGFueSkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBFdmVudFNvdXJjZSB7XHJcbiAgZXZlbnRzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge307XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhbiBldmVudCBoYW5kbGVyIHRvIGJlIHRyaWdnZXJlZCBvbmx5IG9uY2UgKG9yIGEgZ2l2ZW4gbnVtYmVyIG9mIHRpbWVzKVxyXG4gICAqIGZvciBhIGdpdmVuIGV2ZW50LiBJdCBpcyBub3QgcmVtb3ZhYmxlIHdpdGggcmVtb3ZlSGFuZGxlcigpLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAqIEBwYXJhbSB7RXZlbnRIYW5kbGVyfSBoYW5kbGVyIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIGV2ZW50XHJcbiAgICogaXMgdHJpZ2dlcmVkLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlckRhdGE9bnVsbF0gLSBBcmJpdHJhcnkgb2JqZWN0IHRvIGJlIHBhc3NlZCB1bmNoYW5nZWRcclxuICAgKiB0byB0aGUgaGFuZGxlci5cclxuICAgKiBAcGFyYW0ge051bWJlcn0gW3RpbWVzPTFdIC0gVGhlIG51bWJlciBvZiB0aW1lcyB0byBoYW5kbGUgdGhlIGV2ZW50XHJcbiAgICogYmVmb3JlIHJlbW92aW5nIGl0LlxyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJpb3JpdHk9MF0gLSBIYW5kbGVyIHByaW9yaXR5LiBCeSBkZWZhdWx0LCBhbGwgcHJpb3JpdGllcyBhcmUgMC4gSGlnaGVyIG51bWJlciA9IHByaW9yaXR5LlxyXG4gICAqL1xyXG4gIGFkZE9uY2VIYW5kbGVyKFxyXG4gICAgZXZlbnROYW1lOiBzdHJpbmcsXHJcbiAgICBoYW5kbGVyOiBFdmVudEhhbmRsZXIsXHJcbiAgICB1c2VyRGF0YTogb2JqZWN0LFxyXG4gICAgdGltZXM6IG51bWJlcixcclxuICAgIHByaW9yaXR5OiBudW1iZXIsXHJcbiAgKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRpbWVzID0gdGltZXMgfHwgMTtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBjb25zdCBvbmNlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudDogb2JqZWN0KSB7XHJcbiAgICAgIGNvdW50Kys7XHJcbiAgICAgIGlmIChjb3VudCA9PT0gdGltZXMpIHtcclxuICAgICAgICBzZWxmLnJlbW92ZUhhbmRsZXIoZXZlbnROYW1lLCBvbmNlSGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGhhbmRsZXIoZXZlbnQpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuYWRkSGFuZGxlcihldmVudE5hbWUsIG9uY2VIYW5kbGVyLCB1c2VyRGF0YSwgcHJpb3JpdHkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAtIE5hbWUgb2YgZXZlbnQgdG8gcmVnaXN0ZXIuXHJcbiAgICogQHBhcmFtIHtFdmVudEhhbmRsZXJ9IGhhbmRsZXIgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlckRhdGE9bnVsbF0gLSBBcmJpdHJhcnkgb2JqZWN0IHRvIGJlIHBhc3NlZCB1bmNoYW5nZWQgdG8gdGhlIGhhbmRsZXIuXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcmlvcml0eT0wXSAtIEhhbmRsZXIgcHJpb3JpdHkuIEJ5IGRlZmF1bHQsIGFsbCBwcmlvcml0aWVzIGFyZSAwLiBIaWdoZXIgbnVtYmVyID0gcHJpb3JpdHkuXHJcbiAgICovXHJcbiAgYWRkSGFuZGxlcihcclxuICAgIGV2ZW50TmFtZTogc3RyaW5nLFxyXG4gICAgaGFuZGxlcjogRXZlbnRIYW5kbGVyLFxyXG4gICAgdXNlckRhdGE6IG9iamVjdCB8IG51bGwgPSBudWxsLFxyXG4gICAgcHJpb3JpdHk6IG51bWJlciA9IDAsXHJcbiAgKSB7XHJcbiAgICBsZXQgZXZlbnRzID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXTtcclxuICAgIGlmICghZXZlbnRzKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0gPSBldmVudHMgPSBbXTtcclxuICAgIH1cclxuICAgIGlmIChoYW5kbGVyICYmIEV2ZW50U291cmNlLmlzRnVuY3Rpb24oaGFuZGxlcikpIHtcclxuICAgICAgbGV0IGluZGV4ID0gZXZlbnRzLmxlbmd0aCxcclxuICAgICAgICBldmVudCA9IHtcclxuICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXIsXHJcbiAgICAgICAgICB1c2VyRGF0YTogdXNlckRhdGEgfHwgbnVsbCxcclxuICAgICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSB8fCAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgIGV2ZW50c1tpbmRleF0gPSBldmVudDtcclxuICAgICAgd2hpbGUgKGluZGV4ID4gMCAmJiBldmVudHNbaW5kZXggLSAxXS5wcmlvcml0eSA8IGV2ZW50c1tpbmRleF0ucHJpb3JpdHkpIHtcclxuICAgICAgICBldmVudHNbaW5kZXhdID0gZXZlbnRzW2luZGV4IC0gMV07XHJcbiAgICAgICAgZXZlbnRzW2luZGV4IC0gMV0gPSBldmVudDtcclxuICAgICAgICBpbmRleC0tO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgYSBzcGVjaWZpYyBldmVudCBoYW5kbGVyIGZvciBhIGdpdmVuIGV2ZW50LlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IGZvciB3aGljaCB0aGUgaGFuZGxlciBpcyB0byBiZSByZW1vdmVkLlxyXG4gICAqIEBwYXJhbSB7RXZlbnRIYW5kbGVyfSBoYW5kbGVyIC0gRnVuY3Rpb24gdG8gYmUgcmVtb3ZlZC5cclxuICAgKi9cclxuICByZW1vdmVIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIpIHtcclxuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0sXHJcbiAgICAgIGhhbmRsZXJzOiBFdmVudEhhbmRsZXJbXSA9IFtdO1xyXG4gICAgaWYgKCFldmVudHMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChldmVudHNbaV0uaGFuZGxlciAhPT0gaGFuZGxlcikge1xyXG4gICAgICAgICAgaGFuZGxlcnMucHVzaChldmVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gaGFuZGxlcnM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGFtb3VudCBvZiBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGluc3BlY3QuXHJcbiAgICogQHJldHVybnMge251bWJlcn0gYW1vdW50IG9mIGV2ZW50c1xyXG4gICAqL1xyXG4gIG51bWJlck9mSGFuZGxlcnMoZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICBpZiAoIWV2ZW50cykge1xyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIHJldHVybiBldmVudHMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlIGFsbCBldmVudCBoYW5kbGVycyBmb3IgYSBnaXZlbiBldmVudCB0eXBlLiBJZiBubyB0eXBlIGlzIGdpdmVuIGFsbFxyXG4gICAqIGV2ZW50IGhhbmRsZXJzIGZvciBldmVyeSBldmVudCB0eXBlIGFyZSByZW1vdmVkLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IGZvciB3aGljaCBhbGwgaGFuZGxlcnMgYXJlIHRvIGJlIHJlbW92ZWQuXHJcbiAgICovXHJcbiAgcmVtb3ZlQWxsSGFuZGxlcnMoZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmIChldmVudE5hbWUpIHtcclxuICAgICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChjb25zdCBldmVudFR5cGUgaW4gdGhpcy5ldmVudHMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudFR5cGVdID0gW107XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIGZ1bmN0aW9uIHdoaWNoIGl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFsbCBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LCBjYWxsaW5nIHRoZSBoYW5kbGVyIGZvciBlYWNoLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGdldCBoYW5kbGVycyBmb3IuXHJcbiAgICovXHJcbiAgZ2V0SGFuZGxlcihldmVudE5hbWU6IHN0cmluZykge1xyXG4gICAgbGV0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICBpZiAoIWV2ZW50cyB8fCAhZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGV2ZW50cyA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBbZXZlbnRzWzBdXSA6IEFycmF5LmFwcGx5KG51bGwsIGV2ZW50cyk7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZTogYW55LCBhcmdzOiBhbnkpIHtcclxuICAgICAgbGV0IGksXHJcbiAgICAgICAgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDtcclxuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGV2ZW50c1tpXSkge1xyXG4gICAgICAgICAgYXJncy5ldmVudFNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgIGFyZ3MudXNlckRhdGEgPSBldmVudHNbaV0udXNlckRhdGE7XHJcbiAgICAgICAgICBldmVudHNbaV0uaGFuZGxlcihhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYSBmdW5jdGlvbiB3aGljaCBpdGVyYXRlcyB0aGUgbGlzdCBvZiBhbGwgaGFuZGxlcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudCxcclxuICAgKiBjYWxsaW5nIHRoZSBoYW5kbGVyIGZvciBlYWNoIGFuZCBhd2FpdGluZyBhc3luYyBvbmVzLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGdldCBoYW5kbGVycyBmb3IuXHJcbiAgICovXHJcbiAgZ2V0QXdhaXRpbmdIYW5kbGVyKGV2ZW50TmFtZSkge1xyXG4gICAgbGV0IGV2ZW50cyA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgICBpZiAoIWV2ZW50cyB8fCAhZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGV2ZW50cyA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBbZXZlbnRzWzBdXSA6IEFycmF5LmFwcGx5KG51bGwsIGV2ZW50cyk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UsIGFyZ3MpIHtcclxuICAgICAgLy8gV2UgcmV0dXJuIGEgcHJvbWlzZSB0aGF0IGdldHMgcmVzb2x2ZWQgYWZ0ZXIgYWxsIHRoZSBldmVudHMgZmluaXNoLlxyXG4gICAgICAvLyBSZXR1cm5pbmcgbG9vcCByZXN1bHQgaXMgbm90IGNvcnJlY3QsIGxvb3AgcHJvbWlzZXMgY2hhaW4gZHluYW1pY2FsbHlcclxuICAgICAgLy8gYW5kIG91dGVyIGNvZGUgY291bGQgcHJvY2VzcyBmaW5pc2hpbmcgbG9naWNzIGluIHRoZSBtaWRkbGUgb2YgZXZlbnQgbG9vcC5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDtcclxuICAgICAgICBmdW5jdGlvbiBsb29wKGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoaW5kZXggPj0gbGVuZ3RoIHx8ICFldmVudHNbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoJ1Jlc29sdmVkIScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGFyZ3MuZXZlbnRTb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgICAgICBhcmdzLnVzZXJEYXRhID0gZXZlbnRzW2luZGV4XS51c2VyRGF0YTtcclxuICAgICAgICAgIGxldCByZXN1bHQgPSBldmVudHNbaW5kZXhdLmhhbmRsZXIoYXJncyk7XHJcbiAgICAgICAgICByZXN1bHQgPVxyXG4gICAgICAgICAgICAhcmVzdWx0IHx8IEV2ZW50U291cmNlLnR5cGUocmVzdWx0KSAhPT0gJ3Byb21pc2UnXHJcbiAgICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgICAgICAgIDogcmVzdWx0O1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKCgpID0+IGxvb3AoaW5kZXggKyAxKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvb3AoMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQsIG9wdGlvbmFsbHkgcGFzc2luZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudEFyZ3MgLSBFdmVudC1zcGVjaWZpYyBkYXRhLlxyXG4gICAqL1xyXG4gIHJhaXNlRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50QXJncz86IGFueSkge1xyXG4gICAgY29uc3QgaGFuZGxlciA9IHRoaXMuZ2V0SGFuZGxlcihldmVudE5hbWUpO1xyXG4gICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgcmV0dXJuIGhhbmRsZXIodGhpcywgZXZlbnRBcmdzIHx8IHt9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUcmlnZ2VyIGFuIGV2ZW50LCBvcHRpb25hbGx5IHBhc3NpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cclxuICAgKiBUaGlzIGV2ZW50cyBhd2FpdHMgZXZlcnkgYXN5bmNocm9ub3VzIG9yIHByb21pc2UtcmV0dXJuaW5nIGZ1bmN0aW9uLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudEFyZ3MgLSBFdmVudC1zcGVjaWZpYyBkYXRhLlxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V8dW5kZWZpbmVkfSAtIFByb21pc2UgcmVzb2x2ZWQgdXBvbiB0aGUgZXZlbnQgY29tcGxldGlvbi5cclxuICAgKi9cclxuICByYWlzZUV2ZW50QXdhaXRpbmcoZXZlbnROYW1lLCBldmVudEFyZ3MpIHtcclxuICAgIC8vdW5jb21tZW50IGlmIHlvdSB3YW50IHRvIGdldCBhIGxvZyBvZiBhbGwgZXZlbnRzXHJcbiAgICAvLyQuY29uc29sZS5sb2coIFwiQXdhaXRpbmcgZXZlbnQgZmlyZWQ6XCIsIGV2ZW50TmFtZSApO1xyXG5cclxuICAgIGNvbnN0IGF3YWl0aW5nSGFuZGxlciA9IHRoaXMuZ2V0QXdhaXRpbmdIYW5kbGVyKGV2ZW50TmFtZSk7XHJcbiAgICBpZiAoYXdhaXRpbmdIYW5kbGVyKSB7XHJcbiAgICAgIHJldHVybiBhd2FpdGluZ0hhbmRsZXIodGhpcywgZXZlbnRBcmdzIHx8IHt9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoJ05vIGhhbmRsZXIgZm9yIHRoaXMgZXZlbnQgcmVnaXN0ZXJlZC4nKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjbGFzczJ0eXBlID0ge1xyXG4gICAgJ1tvYmplY3QgQm9vbGVhbl0nOiAnYm9vbGVhbicsXHJcbiAgICAnW29iamVjdCBOdW1iZXJdJzogJ251bWJlcicsXHJcbiAgICAnW29iamVjdCBTdHJpbmddJzogJ3N0cmluZycsXHJcbiAgICAnW29iamVjdCBGdW5jdGlvbl0nOiAnZnVuY3Rpb24nLFxyXG4gICAgJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nOiAnZnVuY3Rpb24nLFxyXG4gICAgJ1tvYmplY3QgUHJvbWlzZV0nOiAncHJvbWlzZScsXHJcbiAgICAnW29iamVjdCBBcnJheV0nOiAnYXJyYXknLFxyXG4gICAgJ1tvYmplY3QgRGF0ZV0nOiAnZGF0ZScsXHJcbiAgICAnW29iamVjdCBSZWdFeHBdJzogJ3JlZ2V4cCcsXHJcbiAgICAnW29iamVjdCBPYmplY3RdJzogJ29iamVjdCcsXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogVGFrZW4gZnJvbSBqUXVlcnkgMS42LjFcclxuICAgKiBAZnVuY3Rpb24gaXNGdW5jdGlvblxyXG4gICAqIEBtZW1iZXJvZiBPcGVuU2VhZHJhZ29uXHJcbiAgICogQHNlZSB7QGxpbmsgaHR0cDovL3d3dy5qcXVlcnkuY29tLyBqUXVlcnl9XHJcbiAgICovXHJcbiAgc3RhdGljIGlzRnVuY3Rpb24ob2JqOiBvYmplY3QpIHtcclxuICAgIHJldHVybiB0aGlzLnR5cGUob2JqKSA9PT0gJ2Z1bmN0aW9uJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRha2VuIGZyb20galF1ZXJ5IDEuNi4xXHJcbiAgICogQGZ1bmN0aW9uIHR5cGVcclxuICAgKiBAbWVtYmVyb2YgT3BlblNlYWRyYWdvblxyXG4gICAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cuanF1ZXJ5LmNvbS8galF1ZXJ5fVxyXG4gICAqL1xyXG4gIHN0YXRpYyB0eXBlKG9iajogb2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkXHJcbiAgICAgID8gU3RyaW5nKG9iailcclxuICAgICAgOiB0aGlzLmNsYXNzMnR5cGVbb2JqLnRvU3RyaW5nKCkgYXMga2V5b2YgdHlwZW9mIHRoaXMuY2xhc3MydHlwZV0gfHxcclxuICAgICAgICAgICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nID8gJ2Z1bmN0aW9uJyA6ICdvYmplY3QnKTtcclxuICB9XHJcbn1cclxuIiwiLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vcHJldHR5bXVjaGJyeWNlL2h0dHAtc3RhdHVzLWNvZGVzL2Jsb2IvbWFzdGVyL3NyYy9zdGF0dXMtY29kZXMudHNcclxuZXhwb3J0IGNvbnN0IFNUQVRVU19DT0RFUyA9IHtcclxuICAxMDA6ICdDb250aW51ZScsXHJcbiAgMTAxOiAnU3dpdGNoaW5nIHByb3RvY29scycsXHJcbiAgMTAyOiAnUHJvY2Vzc2luZycsXHJcbiAgMTAzOiAnRWFybHkgSGludHMnLFxyXG4gIDIwMDogJ09rJyxcclxuICAyMDE6ICdDcmVhdGVkJyxcclxuICAyMDI6ICdBY2NlcHRlZCcsXHJcbiAgMjAzOiAnTm9uIEF1dGhvcml0YXRpdmUgSW5mb3JtYXRpb24nLFxyXG4gIDIwNDogJ05vIENvbnRlbnQnLFxyXG4gIDIwNTogJ1Jlc2V0IENvbnRlbnQnLFxyXG4gIDIwNjogJ1BhcnRpYWwgQ29udGVudCcsXHJcbiAgMjA3OiAnTXVsdGkgU3RhdHVzJyxcclxuICAzMDA6ICdNdWx0aXBsZSBDaG9pY2VzJyxcclxuICAzMDE6ICdNb3ZlZCBQZXJtYW5lbnRseScsXHJcbiAgMzAyOiAnTW92ZWQgVGVtcG9yYXJpbHknLFxyXG4gIDMwMzogJ1NlZSBPdGhlcicsXHJcbiAgMzA0OiAnTm90IE1vZGlmaWVkJyxcclxuICAzMDU6ICdVc2UgUHJveHknLFxyXG4gIDMwNzogJ1RlbXBvcmFyeSBSZWRpcmVjdCcsXHJcbiAgMzA4OiAnUGVybWFuZW50IFJlZGlyZWN0JyxcclxuICA0MDA6ICdCYWQgUmVxdWVzdCcsXHJcbiAgNDAxOiAnVW5hdXRob3JpemVkJyxcclxuICA0MDI6ICdQYXltZW50IFJlcXVpcmVkJyxcclxuICA0MDM6ICdGb3JiaWRkZW4nLFxyXG4gIDQwNDogJ05vdCBGb3VuZCcsXHJcbiAgNDA1OiAnTWV0aG9kIE5vdCBBbGxvd2VkJyxcclxuICA0MDY6ICdOb3QgQWNjZXB0YWJsZScsXHJcbiAgNDA3OiAnUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnLFxyXG4gIDQwODogJ1JlcXVlc3QgVGltZW91dCcsXHJcbiAgNDA5OiAnQ29uZmxpY3QnLFxyXG4gIDQxMDogJ0dvbmUnLFxyXG4gIDQxMTogJ0xlbmd0aCBSZXF1aXJlZCcsXHJcbiAgNDEyOiAnUHJlY29uZGl0aW9uIEZhaWxlZCcsXHJcbiAgNDEzOiAnUmVxdWVzdCBUb28gTG9uZycsXHJcbiAgNDE0OiAnUmVxdWVzdCBVcmkgVG9vIExvbmcnLFxyXG4gIDQxNTogJ1Vuc3VwcG9ydGVkIE1lZGlhIFR5cGUnLFxyXG4gIDQxNjogJ1JlcXVlc3RlZCBSYW5nZSBOb3QgU2F0aXNmaWFibGUnLFxyXG4gIDQxNzogJ0V4cGVjdGF0aW9uIEZhaWxlZCcsXHJcbiAgLyoqXHJcbiAgICogT2ZmaWNpYWwgRG9jdW1lbnRhdGlvbiBAIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMyMzI0I3NlY3Rpb24tMi4zLjJcclxuICAgKlxyXG4gICAqIEFueSBhdHRlbXB0IHRvIGJyZXcgY29mZmVlIHdpdGggYSB0ZWFwb3Qgc2hvdWxkIHJlc3VsdCBpbiB0aGUgZXJyb3IgY29kZSBcIjQxOCBJJ20gYSB0ZWFwb3RcIi4gVGhlIHJlc3VsdGluZyBlbnRpdHkgYm9keSBNYXkgYmUgc2hvcnQgYW5kIHN0b3V0LlxyXG4gICAqL1xyXG4gIDQxODogJ0ltIEEgVGVhcG90JyxcclxuICA0MTk6ICdJbnN1ZmZpY2llbnQgU3BhY2UgT24gUmVzb3VyY2UnLFxyXG4gIDQyMDogJ01ldGhvZCBGYWlsdXJlJyxcclxuICA0MjE6ICdNaXNkaXJlY3RlZCBSZXF1ZXN0JyxcclxuICA0MjI6ICdVbnByb2Nlc3NhYmxlIEVudGl0eScsXHJcbiAgNDIzOiAnTG9ja2VkJyxcclxuICA0MjQ6ICdGYWlsZWQgRGVwZW5kZW5jeScsXHJcbiAgNDI2OiAnVXBncmFkZSBSZXF1aXJlZCcsXHJcbiAgNDI4OiAnUHJlY29uZGl0aW9uIFJlcXVpcmVkJyxcclxuICA0Mjk6ICdUb28gTWFueSBSZXF1ZXN0cycsXHJcbiAgNDMxOiAnUmVxdWVzdCBIZWFkZXIgRmllbGRzIFRvbyBMYXJnZScsXHJcbiAgNDUxOiAnVW5hdmFpbGFibGUgRm9yIExlZ2FsIFJlYXNvbnMnLFxyXG4gIDUwMDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXHJcbiAgNTAxOiAnTm90IEltcGxlbWVudGVkJyxcclxuICA1MDI6ICdCYWQgR2F0ZXdheScsXHJcbiAgNTAzOiAnU2VydmljZSBVbmF2YWlsYWJsZScsXHJcbiAgNTA0OiAnR2F0ZXdheSBUaW1lb3V0JyxcclxuICA1MDU6ICdIdHRwIFZlcnNpb24gTm90IFN1cHBvcnRlZCcsXHJcbiAgNTA3OiAnSW5zdWZmaWNpZW50IFN0b3JhZ2UnLFxyXG4gIDUxMTogJ05ldHdvcmsgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBFdmVudFNvdXJjZSB9IGZyb20gJy4vZXZlbnRzJztcclxuaW1wb3J0IHsgU1RBVFVTX0NPREVTIH0gZnJvbSAnLi9zdGF0dXMtY29kZXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbXBhdGlvbkFQSU9wdGlvbnMge1xyXG4gIGFub255bW91c1VzZXJJZD86IHN0cmluZztcclxuICB3b3JrYmVuY2hBcGlVcmw6IHN0cmluZztcclxuICBhcGlSb290UGF0aD86IHN0cmluZztcclxufVxyXG5cclxudHlwZSBSZXNwb25zZVR5cGUgPSAnanNvbicgfCAnYmxvYicgfCAndGV4dCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJhd09wdGlvbnMge1xyXG4gIGJvZHk/OiBvYmplY3QgfCBzdHJpbmc7XHJcbiAgcXVlcnk/OiBhbnk7XHJcbiAgbWV0aG9kPzogc3RyaW5nO1xyXG4gIGhlYWRlcnM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG4gIHJlc3BvbnNlVHlwZT86IFJlc3BvbnNlVHlwZTtcclxufVxyXG5cclxuLy9odHRwczovL2dpc3QuZ2l0aHViLmNvbS9Ub29UYWxsTmF0ZS80ZmQ2NDFmODIwZTEzMjU2OTU0ODdkZmQ4ODNlNTI4NVxyXG5mdW5jdGlvbiBodHRwRXJyb3JUb05hbWUoY29kZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICBjb25zdCBzdWZmaXggPVxyXG4gICAgKChjb2RlIC8gMTAwKSB8IDApID09PSA0IHx8ICgoY29kZSAvIDEwMCkgfCAwKSA9PT0gNSA/ICdlcnJvcicgOiAnJztcclxuICBsZXQgbmFtZSA9IGAgJHtTdHJpbmcoU1RBVFVTX0NPREVTW2NvZGUgYXMga2V5b2YgdHlwZW9mIFNUQVRVU19DT0RFU10gfHwgYEhUVFAgQ29kZSAke2NvZGV9YCkucmVwbGFjZSgvZXJyb3IkL2ksICcnKX0gJHtzdWZmaXh9YDtcclxuICByZXR1cm4gbmFtZVxyXG4gICAgLnNwbGl0KCcgJylcclxuICAgIC5yZWR1Y2UoXHJcbiAgICAgIChhY2MsIGMpID0+IGFjYyArIChjID8gYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGMuc2xpY2UoMSkgOiAnJyksXHJcbiAgICApO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSFRUUEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIHN0YXR1c0NvZGU6IG51bWJlcjtcclxuICBba2V5OiBzdHJpbmddOiBhbnk7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgIGNvZGU6IG51bWJlcixcclxuICAgIG1lc3NhZ2U6IHN0cmluZyxcclxuICAgIGV4dHJhcz86IFJlY29yZDxzdHJpbmcsIGFueT4sXHJcbiAgKSB7XHJcbiAgICBzdXBlcihcclxuICAgICAgbWVzc2FnZSB8fFxyXG4gICAgICAgIFNUQVRVU19DT0RFU1tjb2RlIGFzIGtleW9mIHR5cGVvZiBTVEFUVVNfQ09ERVNdIHx8XHJcbiAgICAgICAgYEhUVFAgQ29kZSAke2NvZGV9YCxcclxuICAgICk7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzICYmIGV4dHJhcykge1xyXG4gICAgICAvLyBub2luc3BlY3Rpb24gVHlwZVNjcmlwdFZhbGlkYXRlVHlwZXNcclxuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBleHRyYXMpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5uYW1lID0gaHR0cEVycm9yVG9OYW1lKGNvZGUpO1xyXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gY29kZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmF3QXBpT3B0aW9ucyB7fVxyXG5cclxuZXhwb3J0IGNsYXNzIFJhd0FQSSB7XHJcbiAgcHVibGljIHVybDogc3RyaW5nO1xyXG4gIHB1YmxpYyBvcHRpb25zOiBSYXdPcHRpb25zO1xyXG4gIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBvcHRpb25zOiBSYXdBcGlPcHRpb25zID0ge30pIHtcclxuICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX3BhcnNlUXVlcnlQYXJhbXMocGFyYW1zOiBzdHJpbmcgfCB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcbiAgICBpZiAocGFyYW1zKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcmFtcztcclxuXHJcbiAgICAgIC8vY2xlYW51cCBwbGFpbiBvYmplY3RzXHJcbiAgICAgIGlmIChwYXJhbXMuY29uc3RydWN0b3IgPT09IE9iamVjdCB8fCBwYXJhbXMuY29uc3RydWN0b3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZvciAobGV0IGsgaW4gcGFyYW1zKSB7XHJcbiAgICAgICAgICBjb25zdCB2ID0gcGFyYW1zW2tdO1xyXG4gICAgICAgICAgaWYgKHYgPT09IG51bGwgfHwgdiA9PT0gdW5kZWZpbmVkKSBkZWxldGUgcGFyYW1zW2tdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYD8ke25ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBfZmV0Y2godXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiBvcHRpb25zLm1ldGhvZCxcclxuICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBvcHRpb25zLmJvZHksXHJcbiAgICB9IGFzIFJlcXVlc3RJbml0KTtcclxuXHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2Vbb3B0aW9ucy5yZXNwb25zZVR5cGUgfHwgJ2pzb24nXSgpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aHJvdyBuZXcgSFRUUEVycm9yKFxyXG4gICAgICAgIDUwMCxcclxuICAgICAgICBgRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlIGRhdGEuIE9yaWdpbmFsIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9IHwgJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICBlcnJvcjogZSxcclxuICAgICAgICB9LFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEhUVFBFcnJvcihyZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQsIHJlc3VsdCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgaHR0cChlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSYXdPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IGhhc0JvZHkgPSAhIW9wdGlvbnMuYm9keTtcclxuICAgIG9wdGlvbnMubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgKGhhc0JvZHkgPyAnUE9TVCcgOiAnR0VUJyk7XHJcbiAgICBpZiAoIWVuZHBvaW50LnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICBlbmRwb2ludCA9IGAvJHtlbmRwb2ludH1gO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucy5xdWVyeSA9IHRoaXMuX3BhcnNlUXVlcnlQYXJhbXMob3B0aW9ucy5xdWVyeSk7XHJcbiAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XHJcbiAgICBvcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgaWYgKG9wdGlvbnMuYm9keSAmJiB0eXBlb2Ygb3B0aW9ucy5ib2R5ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICBvcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHkpO1xyXG4gICAgfSBlbHNlIG9wdGlvbnMuYm9keSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fZmV0Y2godGhpcy51cmwgKyBlbmRwb2ludCArIG9wdGlvbnMucXVlcnksIG9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG5cclxuLy90b2RvIGNvbnNpZGVyIGltcGxlbWVudGluZyAnb2JzZXJ2ZScgbWV0aG9kIHRoYXQgcmVnaXN0ZXJzIGFuZCB3YXRjaGVzIGNlcnRhaW4gcHJvcGVydHkgbGlzdC4uXHJcbmV4cG9ydCBjbGFzcyBBYnN0cmFjdEFQSSBleHRlbmRzIEV2ZW50U291cmNlIHtcclxuICAvL3RvZG8gdHJ5IGZpZ3VyaW5nIG91dCBob3cgdG8gcHJpbnQgdGhlIGNsYXNzIG5hbWUgdG9vXHJcbiAgLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yODAzODkvaG93LWRvLXlvdS1maW5kLW91dC10aGUtY2FsbGVyLWZ1bmN0aW9uLWluLWphdmFzY3JpcHRcclxuICBwcml2YXRlIGdldENhbGxlck5hbWUoKSB7XHJcbiAgICAvLyBHZXQgc3RhY2sgYXJyYXlcclxuICAgIGNvbnN0IG9yaWcgPSBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZTtcclxuICAgIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gKGVycm9yLCBzdGFjaykgPT4gc3RhY2s7XHJcbiAgICBjb25zdCB7IHN0YWNrIH0gPSBuZXcgRXJyb3IoKTtcclxuICAgIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gb3JpZztcclxuXHJcbiAgICBjb25zdCBjYWxsZXIgPSBzdGFjaz8uWzJdO1xyXG4gICAgcmV0dXJuIGNhbGxlciA/IGNhbGxlciA6ICd1bmtub3duIGNvbnRleHQnO1xyXG4gIH1cclxuXHJcbiAgcmVxdWlyZXMobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHRocm93IGBBcmd1bWVudEVycm9yWyR7dGhpcy5nZXRDYWxsZXJOYW1lKCl9XSAke25hbWV9IGlzIG1pc3NpbmcgLSByZXF1aXJlZCBwcm9wZXJ0eSFgO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgaW50ZXJmYWNlIEp3dFRva2VuQmFzZSB7XHJcbiAgc3ViOiBzdHJpbmc7XHJcbiAgZXhwOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSnd0VG9rZW4gZXh0ZW5kcyBKd3RUb2tlbkJhc2Uge1xyXG4gIGlhdDogbnVtYmVyO1xyXG4gIGp0aTogc3RyaW5nO1xyXG4gIGlzczogc3RyaW5nO1xyXG4gIGF1ZDogc3RyaW5nO1xyXG4gIHR5cDogc3RyaW5nO1xyXG4gIGF6cDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCh0b2tlbjogSnd0VG9rZW5CYXNlKSB7XHJcbiAgLy90aW1lb3V0IE9SIDMwMCBzZWNzXHJcbiAgcmV0dXJuIHRva2VuLmV4cCAqIDFlMyAtIERhdGUubm93KCkgfHwgMzAwZTM7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NvcGVUb2tlbiBleHRlbmRzIEp3dFRva2VuQmFzZSB7XHJcbiAgdG9rZW5faWQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnd0VG9rZW4odG9rZW46IHN0cmluZyk6IEp3dFRva2VuQmFzZSB7XHJcbiAgcmV0dXJuIEpTT04ucGFyc2UoYXRvYih0b2tlbi5zcGxpdCgnLicpWzFdKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbGVlcChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xyXG4gIHN0YXRpYyBlcnJvciguLi5hcmdzOiBhbnkpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0U6RW1wYXRpb25BUEknLCAuLi5hcmdzKTtcclxuICB9XHJcbiAgc3RhdGljIHdhcm4oLi4uYXJnczogYW55KTogdm9pZCB7XHJcbiAgICBjb25zb2xlLndhcm4oJ1c6RW1wYXRpb25BUEknLCAuLi5hcmdzKTtcclxuICB9XHJcbiAgc3RhdGljIGluZm8oLi4uYXJnczogYW55KTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmluZm8oJ0k6RW1wYXRpb25BUEknLCAuLi5hcmdzKTtcclxuICB9XHJcbiAgc3RhdGljIGRlYnVnKC4uLmFyZ3M6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc29sZS5kZWJ1ZygnRDpFbXBhdGlvbkFQSScsIC4uLmFyZ3MpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBYnN0cmFjdEFQSSwgRW1wYXRpb25BUElPcHRpb25zLCBSYXdBUEksIFJhd09wdGlvbnMgfSBmcm9tICcuL2Jhc2UnO1xyXG5pbXBvcnQgeyBTY29wZUFQSSB9IGZyb20gJy4vc2NvcGUnO1xyXG5pbXBvcnQge1xyXG4gIGdldEp3dFRva2VuRXhwaXJlc1RpbWVvdXQsXHJcbiAgSnd0VG9rZW5CYXNlLFxyXG4gIHBhcnNlSnd0VG9rZW4sXHJcbn0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUm9vdENvbnRleHQge1xyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjb250ZXh0OiBSb290QVBJO1xyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBkYXRhOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUm9vdEFQSU9wdGlvbnMge1xyXG4gIGFub255bW91c1VzZXJJZDogc3RyaW5nO1xyXG4gIHdvcmtiZW5jaEFwaVVybDogc3RyaW5nO1xyXG4gIGFwaVVybDogc3RyaW5nO1xyXG4gIGFwaVJvb3RQYXRoOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIEJhc2VBUEkgaW1wbGVtZW50cyBBYnN0cmFjdEFQSSBvdmVyIC92W3ZlcnNpb25dXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSb290QVBJIGV4dGVuZHMgQWJzdHJhY3RBUEkge1xyXG4gIC8vIFJhd0FQSSBpbXBsZW1lbnRzIGFjY2VzcyB0byB0aGUgaHR0cCBlbmRwb2ludHNcclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmF3OiBSYXdBUEk7XHJcbiAgLy8gZGVmYXVsdCBTY29wZUFQSSBpbXBsZW1lbnRzIEFic3RyYWN0QVBJIG92ZXIgL3ZbdmVyc2lvbl0vc2NvcGVzXHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGRlZmF1bHRTY29wZUtleTogc3RyaW5nO1xyXG5cclxuICAvLyBNYXAgb2YgU2NvcGVBUEksIHRoYXQgaW1wbGVtZW50IEFic3RyYWN0QVBJIG92ZXIgL3ZbdmVyc2lvbl0vc2NvcGVzLCBhbGxvd3Mga2VlcGluZyBtdWx0aXBsZSBzY29wZXMgb3BlbiBhdCBvbmNlXHJcbiAgYWJzdHJhY3Qgc2NvcGVzOiBNYXA8c3RyaW5nLCBTY29wZUFQST47XHJcblxyXG4gIC8vIFByb3BlcnRpZXNcclxuICBhYnN0cmFjdCB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgYWJzdHJhY3Qgcm9vdFVSSTogc3RyaW5nO1xyXG4gIG9wdGlvbnM6IFJvb3RBUElPcHRpb25zO1xyXG4gIGNhY2hlZDogb2JqZWN0O1xyXG4gIGFjY2Vzc1Rva2VuOiBKd3RUb2tlbkJhc2UgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSBfdXNlcklkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfdG9rZW5FeHBpcmVzOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgX3Jhd1Rva2VuOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEVtcGF0aW9uQVBJT3B0aW9ucykge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICBpZiAoIW9wdGlvbnMud29ya2JlbmNoQXBpVXJsKSB7XHJcbiAgICAgIHRocm93ICdXQiBBcGkgdXJsIGlzIHJlcXVpcmVkISc7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGFwaVVybDtcclxuICAgIGlmICghb3B0aW9ucy5hcGlSb290UGF0aCkge1xyXG4gICAgICBhcGlVcmwgPSBvcHRpb25zLndvcmtiZW5jaEFwaVVybDtcclxuICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuYXBpUm9vdFBhdGguc3RhcnRzV2l0aCgnLycpKSB7XHJcbiAgICAgIGFwaVVybCA9IGAke29wdGlvbnMud29ya2JlbmNoQXBpVXJsfS8ke29wdGlvbnMuYXBpUm9vdFBhdGh9YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFwaVVybCA9IGAke29wdGlvbnMud29ya2JlbmNoQXBpVXJsfSR7b3B0aW9ucy5hcGlSb290UGF0aH1gO1xyXG4gICAgfVxyXG4gICAgaWYgKGFwaVVybC5lbmRzV2l0aCgnLycpKSB7XHJcbiAgICAgIGFwaVVybCA9IGFwaVVybC5zbGljZSgwLCAtMSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9wdGlvbnMgPSB7XHJcbiAgICAgIGFwaVVybCxcclxuICAgICAgd29ya2JlbmNoQXBpVXJsOiBvcHRpb25zLndvcmtiZW5jaEFwaVVybCxcclxuICAgICAgYW5vbnltb3VzVXNlcklkOiBvcHRpb25zLmFub255bW91c1VzZXJJZCB8fCAnYW5vbnltb3VzJyxcclxuICAgICAgYXBpUm9vdFBhdGg6IG9wdGlvbnMuYXBpUm9vdFBhdGggfHwgJycsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5fdXNlcklkID0gdGhpcy5vcHRpb25zLmFub255bW91c1VzZXJJZDtcclxuICAgIHRoaXMuY2FjaGVkID0ge307XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGFuZ2UgdGhlIFVzZXIgYWN0b3IgZm9yIHRoZSBBUEkuIE5vdGU6IHRoZSBhcGkgd2lsbFxyXG4gICAqIHJlc2V0IGl0J3Mgd2hvbGUgc3RhdGUuXHJcbiAgICogQHBhcmFtIHRva2VuIHNldHVwIGNvbnRleHQgZnJvbSBvYmplY3RcclxuICAgKiBAcGFyYW0gd2l0aEV2ZW50XHJcbiAgICovXHJcbiAgZnJvbSh0b2tlbjogc3RyaW5nLCB3aXRoRXZlbnQgPSB0cnVlKTogdm9pZCB7XHJcbiAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yYXdUb2tlbiA9IHRva2VuO1xyXG4gICAgd2l0aEV2ZW50ID0gd2l0aEV2ZW50ICYmICF0aGlzLmFjY2Vzc1Rva2VuOyAvL2ZpcmUgZXZlbnQgb25seSB3aGVuIHdlIGNvbmZpZ3VyZSBuZXcgc2Vzc2lvblxyXG4gICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHBhcnNlSnd0VG9rZW4odG9rZW4pIGFzIEp3dFRva2VuQmFzZTtcclxuICAgIGNvbnN0IHRva2VuVGltZW91dCA9IGdldEp3dFRva2VuRXhwaXJlc1RpbWVvdXQodGhpcy5hY2Nlc3NUb2tlbik7XHJcbiAgICB0aGlzLl90b2tlbkV4cGlyZXMgPSBEYXRlLm5vdygpICsgdG9rZW5UaW1lb3V0IC8gMjtcclxuICAgIGxldCB1c2VySWQgPSB0aGlzLmFjY2Vzc1Rva2VuLnN1YjtcclxuICAgIGlmICghdXNlcklkKVxyXG4gICAgICB0aHJvdyAnSW52YWxpZCBVc2VyIElEISBNdXN0IGJlIHZhbGlkIHN0cmluZyBzaG9ydGVyIHRoYW4gNTAgY2hhcmFjdGVycyEnO1xyXG4gICAgaWYgKHVzZXJJZC5sZW5ndGggPiA1MCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgJ1VzZXIgSUQgZXhjZWVkZWQgNTAgY2hhcmFjdGVycyEgVXNpbmcgVXNlciBJRCBzaG9ydGVuZWQgdG8gZmlyc3QgNTAgY2hhcmFjdGVycyEnLFxyXG4gICAgICApO1xyXG4gICAgICB1c2VySWQgPSB1c2VySWQuc2xpY2UoMCwgNTApO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudXNlcklkID09PSB1c2VySWQpIHJldHVybjtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIGlmICh3aXRoRXZlbnQpIHRoaXMucmFpc2VFdmVudCgnaW5pdCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hhbmdlIHRoZSBVc2VyIGFjdG9yIGZvciB0aGUgQVBJLCB3aXRob3V0IHByb3ZpZGluZyB0b2tlbi4gVXNlZCBpbiBuby10b2tlbiBjb25maWd1cmF0aW9uLiBOb3RlOiB0aGUgYXBpIHdpbGxcclxuICAgKiByZXNldCBpdCdzIHdob2xlIHN0YXRlLlxyXG4gICAqIEBwYXJhbSB0b2tlbiBzZXR1cCBjb250ZXh0IGZyb20gb2JqZWN0XHJcbiAgICogQHBhcmFtIHdpdGhFdmVudFxyXG4gICAqL1xyXG4gIHVzZSh1c2VySWQ6IHN0cmluZywgd2l0aEV2ZW50ID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgd2l0aEV2ZW50ID0gd2l0aEV2ZW50ICYmICF0aGlzLl91c2VySWQ7IC8vZmlyZSBldmVudCBvbmx5IHdoZW4gd2UgY29uZmlndXJlIG5ldyBzZXNzaW9uXHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICBpZiAoIXVzZXJJZCB8fCB1c2VySWQubGVuZ3RoID4gNTApXHJcbiAgICAgIHRocm93ICdJbnZhbGlkIFVzZXIgSUQhIE11c3QgYmUgdmFsaWQgc3RyaW5nIHNob3J0ZXIgdGhhbiA1MCBjaGFyYWN0ZXJzISc7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICBpZiAod2l0aEV2ZW50KSB0aGlzLnJhaXNlRXZlbnQoJ2luaXRfbm9fdG9rZW4nKTtcclxuICB9XHJcblxyXG4gIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5fcmF3VG9rZW4gPSAnJztcclxuICAgIHRoaXMuX3Rva2VuRXhwaXJlcyA9IDA7XHJcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHRoaXMub3B0aW9ucy5hbm9ueW1vdXNVc2VySWQ7XHJcbiAgICB0aGlzLmRlZmF1bHRTY29wZUtleSA9ICcnO1xyXG4gICAgdGhpcy5zY29wZXMuZm9yRWFjaCgoc2NwKSA9PiBzY3AucmVzZXQoKSk7XHJcbiAgICB0aGlzLnNjb3Blcy5jbGVhcigpO1xyXG4gICAgdGhpcy5yYWlzZUV2ZW50KCdyZXNldCcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHVzZXJJZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZDtcclxuICB9XHJcblxyXG4gIGdldCByYXdUb2tlbigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Jhd1Rva2VuO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9ucz86IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgaWYgKCF0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhyb3cgXCJVc2VyIG11c3QgYmUgY29uZmlndXJlZCB0byBhY2Nlc3MgRW1wYWlhIEFQSTogZWl0aGVyIHByb3ZpZGUgYSB2YWxpZCAnYW5vbnltb3VzJyB1c2VyIElEIHRocm91Z2ggZW52IHZhcmlhYmxlcywgb3IgY29uZmlndXJlIHRoZSBSb290IEFQSSB3aXRoIGEgdmFsaWQgdG9rZW4uXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX3Rva2VuRXhwaXJlcyA+IDAgJiYgRGF0ZS5ub3coKSA+IHRoaXMuX3Rva2VuRXhwaXJlcykge1xyXG4gICAgICBjb25zdCBldmVudE9iamVjdCA9IHsgbmV3VG9rZW46ICcnIH07XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBAZXZlbnQgdG9rZW4tcmVmcmVzaFxyXG4gICAgICAgKiBBd2FpdGluZyBldmVudC4gUHJvdmlkZSBuZXdUb2tlbiB2YWx1ZSBpbiB0aGUgZXZlbnQgaGFuZGxlciBhcmd1bWVudCBwYXJhbXMgb2JqZWN0XHJcbiAgICAgICAqIGZvciB0aGUgcm9vdCBBUEkgdG8gY29uc3VtZS5cclxuICAgICAgICovXHJcbiAgICAgIGF3YWl0IHRoaXMucmFpc2VFdmVudEF3YWl0aW5nKCd0b2tlbi1yZWZyZXNoJywgZXZlbnRPYmplY3QpO1xyXG4gICAgICB0aGlzLmZyb20oZXZlbnRPYmplY3QubmV3VG9rZW4pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBYnN0cmFjdEFQSSwgUmF3QVBJLCBSYXdPcHRpb25zIH0gZnJvbSAnLi9iYXNlJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTY29wZUNvbnRleHQge1xyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBjb250ZXh0OiBTY29wZUFQSTtcclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGF0YTogYW55O1xyXG59XHJcblxyXG4vKipcclxuICogU2NvcGUgQmluZHMgRXhhbWluYXRpb24gYW5kIFVzZXIuXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2NvcGVBUEkgZXh0ZW5kcyBBYnN0cmFjdEFQSSB7XHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IHJhdzogUmF3QVBJO1xyXG5cclxuICAvKipcclxuICAgKiBDaGFuZ2UgdGhlIGFjdGl2ZSBTY29wZSBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIHNjb3BlIHN0YXRlIHdpbGwgcmVzZXQuXHJcbiAgICogQHBhcmFtIGNhc2VJZCBjYXNlIGlkIC0gbWFuYWdlcyB0aGUgYWN0aXZlIHNjb3BlXHJcbiAgICogQHBhcmFtIGFwcElkIG1hbmFnZXMgdGhlIGFjdGl2ZSBzY29wZSB0aHJvdWdoIGV4YW1pbmF0aW9uPHVzZXIsIGFwcD5cclxuICAgKiAgICAgICAgICBpZiB1bmRlZmluZWQsIHRoZSBleGFtaW5hdGlvbiBpcyBtYW5hZ2VkIGludGVybmFsbHlcclxuICAgKi9cclxuICBhYnN0cmFjdCB1c2UoY2FzZUlkOiBzdHJpbmcsIGFwcElkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgLyoqXHJcbiAgICogQ2hhbmdlIHRoZSBhY3RpdmUgU2NvcGUgZm9yIHRoZSBBUEkuIE5vdGU6IHRoZSBzY29wZSBzdGF0ZSB3aWxsIHJlc2V0LlxyXG4gICAqIEBwYXJhbSBleGFtaW5hdGlvbiBzZXR1cCBjb250ZXh0IGZyb20gb2JqZWN0XHJcbiAgICovXHJcbiAgYWJzdHJhY3QgZnJvbShleGFtaW5hdGlvbjogb2JqZWN0KTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgYWJzdHJhY3QgcmVzZXQoKTogdm9pZDtcclxuXHJcbiAgYWJzdHJhY3QgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9ucz86IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT47XHJcbn1cclxuIiwiaW1wb3J0IHsgUm9vdEFQSSwgUm9vdENvbnRleHQgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IFJvb3QgZnJvbSAnLi9yb290JztcclxuaW1wb3J0IHsgQXBwTGlzdCB9IGZyb20gJy4vdHlwZXMvYXBwLWxpc3QnO1xyXG5pbXBvcnQgeyBBcHBRdWVyeSB9IGZyb20gJy4vdHlwZXMvYXBwLXF1ZXJ5JztcclxuaW1wb3J0IHsgQXBwT3V0cHV0IH0gZnJvbSAnLi90eXBlcy9hcHAtb3V0cHV0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcHMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IEFwcExpc3QgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIF9kZWZhdWx0QXBwOiBBcHBPdXRwdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsaXN0KCk6IFByb21pc2U8QXBwTGlzdD4ge1xyXG4gICAgcmV0dXJuICh0aGlzLmRhdGEgPSAoYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYXBwcy9xdWVyeScsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgYm9keToge1xyXG4gICAgICAgIGFwcHM6IG51bGwsXHJcbiAgICAgICAgdGlzc3VlczogbnVsbCxcclxuICAgICAgICBzdGFpbnM6IG51bGwsXHJcbiAgICAgICAgam9iX21vZGVzOiBudWxsLFxyXG4gICAgICB9LFxyXG4gICAgfSkpIGFzIEFwcExpc3QpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcXVlcnkocXVlcnk6IEFwcFF1ZXJ5KTogUHJvbWlzZTxBcHBMaXN0PiB7XHJcbiAgICByZXR1cm4gKHRoaXMuZGF0YSA9IChhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9hcHBzL3F1ZXJ5Jywge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBib2R5OiBxdWVyeSxcclxuICAgIH0pKSBhcyBBcHBMaXN0KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlZmF1bHQoKTogUHJvbWlzZTxBcHBPdXRwdXQ+IHtcclxuICAgIGlmICghdGhpcy5kYXRhKSBhd2FpdCB0aGlzLmxpc3QoKTtcclxuICAgIGZvciAobGV0IGFwcCBvZiB0aGlzLmRhdGEhLml0ZW1zKSB7XHJcbiAgICAgIGlmIChhcHAubmFtZV9zaG9ydCA9PT0gJ01BUDMnICYmIGFwcC52ZW5kb3JfbmFtZSA9PT0gJ3JhdGlvbmFpJykge1xyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRBcHAgPSBhcHA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghdGhpcy5fZGVmYXVsdEFwcClcclxuICAgICAgdGhyb3cgJ0RlZmF1bHQgQVBQIG5vdCBwcmVzZW50IGluIHRoZSBpbmZyYXN0cnVjdHVyZSEgV2FzIGl0IGltcG9ydGVkPyc7XHJcbiAgICByZXR1cm4gdGhpcy5fZGVmYXVsdEFwcDtcclxuICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIFVzZSBmb3IgY29udmVydGluZyBzdHJpbmdzIHJlcHJlc2VudGluZyBudW1iZXIgdG8gYSBudW1iZXIuXHJcbiAqIEBwYXJhbSB2YXJpYWJsZSBOdW1iZXIgb3Igc3RyaW5nIHJlcHJlc2VudGluZyBhIG51bWJlci5cclxuICovXHJcbmNvbnN0IGdldE51bWJlciA9ICh2YXJpYWJsZTogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XHJcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIHZhcmlhYmxlID0gTnVtYmVyKHZhcmlhYmxlKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB2YXJpYWJsZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRZZWFyRnJvbUVwb2NoVGltZSA9IChlcG9jaFRpbWU6IG51bWJlciB8IHN0cmluZykgPT4ge1xyXG4gIHJldHVybiBuZXcgRGF0ZShnZXROdW1iZXIoZXBvY2hUaW1lKSAqIDEwMDApLmdldEZ1bGxZZWFyKCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0TW9udGhGcm9tRXBvY2hUaW1lID0gKGVwb2NoVGltZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKGdldE51bWJlcihlcG9jaFRpbWUpICogMTAwMCkuZ2V0TW9udGgoKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXREYXlGcm9tRXBvY2hUaW1lID0gKGVwb2NoVGltZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKGdldE51bWJlcihlcG9jaFRpbWUpICogMTAwMCkuZ2V0RGF0ZSgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1hdGNoIHN0cmluZyBvbiBzcGVjaWZpYyBzdWJzdHJpbmcgYW5kIHZhbHVlLlxyXG4gKiBAcGFyYW0gc3RyIFN0cmluZyB2YWx1ZS5cclxuICogQHBhcmFtIHNlcGFyYXRvciBSZWdleCB0aGF0IHNob3VsZCBtYXRjaCB0aGUgcHJvdmlkZWQgdmFsdWUuXHJcbiAqIEBwYXJhbSBncm91cElkeCBJbmRleCBvZiBhIGdyb3VwIG1hdGNoZWQgYnkgdGhlIHJlZ2V4LlxyXG4gKiBAcGFyYW0gdmFsdWUgVmFsdWUgdGhlIG1hdGNoZWQgZ3JvdXAgc2hvdWxkIGhhdmUuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwID0gKFxyXG4gIHN0cjogc3RyaW5nLFxyXG4gIHNlcGFyYXRvcjogc3RyaW5nLFxyXG4gIGdyb3VwSWR4OiBudW1iZXIsXHJcbiAgdmFsdWU6IHN0cmluZyxcclxuKSA9PiB7XHJcbiAgY29uc3QgbWF0Y2hlcyA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yKS5leGVjKHN0cik7XHJcbiAgaWYgKCFtYXRjaGVzIHx8IGdyb3VwSWR4IDwgMSB8fCBncm91cElkeCA+PSBtYXRjaGVzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG4gIHJldHVybiBtYXRjaGVzW2dyb3VwSWR4XSA9PT0gdmFsdWU7XHJcbn07XHJcblxyXG4vKipcclxuICogTWF0Y2ggc3RyaW5nIGlmIGl0IGNvbnRhaW5zIHNvbWUgb2YgdGhlIHNwZWNpZmllZCB0b2tlbnMuXHJcbiAqIEBwYXJhbSBzdHJpbmdUb01hdGNoIFN0cmluZyB2YWx1ZS5cclxuICogQHBhcmFtIHRva2VuU3RyaW5nIFN0cmluZyBjb250YWluaW5nIHRva2Vucy93b3JkcyBzcGxpdCBieSBhIFwiIFwiLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IG1hdGNoU3RyaW5nT25Ub2tlbnMgPSAoXHJcbiAgc3RyaW5nVG9NYXRjaDogc3RyaW5nLFxyXG4gIHRva2VuU3RyaW5nOiBzdHJpbmcsXHJcbikgPT4ge1xyXG4gIGNvbnN0IHRva2VucyA9IHRva2VuU3RyaW5nXHJcbiAgICAuc3BsaXQoJyAnKVxyXG4gICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgLm1hcCgodG9rZW4pID0+IGAoPz0uKlxcXFxiJHt0b2tlbn1cXFxcYilgKTtcclxuXHJcbiAgY29uc3Qgc2VhcmNoVGVybVJlZ2V4ID0gbmV3IFJlZ0V4cCh0b2tlbnMuam9pbignJyksICdnaW0nKTtcclxuICByZXR1cm4gc3RyaW5nVG9NYXRjaC5tYXRjaChzZWFyY2hUZXJtUmVnZXgpICE9PSBudWxsO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdyb3VwIGJ5IGZvciBqYXZhc2NyaXB0IGFycmF5LlxyXG4gKiBAcGFyYW0gYXJyIEFycmF5IG9mIG9iamVjdHMuXHJcbiAqIEBwYXJhbSBrZXkgRnVuY3Rpb24gdG8gZ2V0IHZhbHVlIGZyb20gb2JqZWN0IGJ5IHdoaWNoIHRoZSBvYmplY3RzIGFyZSBncm91cGVkLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdyb3VwQnkgPSA8VCwgSyBleHRlbmRzIGtleW9mIGFueT4oYXJyOiBUW10sIGtleTogKGk6IFQpID0+IEspID0+XHJcbiAgYXJyLnJlZHVjZShcclxuICAgIChncm91cHMsIGl0ZW0pID0+IHtcclxuICAgICAgKGdyb3Vwc1trZXkoaXRlbSldIHx8PSBbXSkucHVzaChpdGVtKTtcclxuICAgICAgcmV0dXJuIGdyb3VwcztcclxuICAgIH0sXHJcbiAgICB7fSBhcyBSZWNvcmQ8SywgVFtdPixcclxuICApO1xyXG4iLCJpbXBvcnQgQ2FzZXMgZnJvbSAnLi4vcm9vdC9jYXNlcyc7XHJcbmltcG9ydCB7IENhc2UgfSBmcm9tICcuLi9yb290L3R5cGVzL2Nhc2UnO1xyXG5pbXBvcnQgeyBDYXNlSCB9IGZyb20gJy4vdHlwZXMvY2FzZS1oJztcclxuaW1wb3J0IHsgQ2FzZUhpZXJhcmNoeSB9IGZyb20gJy4vdHlwZXMvY2FzZS1oaWVyYXJjaHktcmVzdWx0JztcclxuaW1wb3J0IHsgQ2FzZVNlYXJjaFBhcmFtcyB9IGZyb20gJy4vdHlwZXMvY2FzZS1zZWFyY2gtcGFyYW1zJztcclxuaW1wb3J0IHtcclxuICBnZXREYXlGcm9tRXBvY2hUaW1lLFxyXG4gIGdldE1vbnRoRnJvbUVwb2NoVGltZSxcclxuICBnZXRZZWFyRnJvbUVwb2NoVGltZSxcclxuICBncm91cEJ5LFxyXG4gIG1hdGNoU3RyaW5nT25Ub2tlbnMsXHJcbn0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5leHBvcnQgdHlwZSBDYXNlVGlzc3Vlc1N0YWlucyA9IHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgbG9jTmFtZTogc3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgSGllcmFyY2h5TmFtZU92ZXJyaWRlcyA9IHtcclxuICBba2V5OiBzdHJpbmddOiB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhc2VFeHBsb3JlciB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IENhc2VzO1xyXG4gIHByb3RlY3RlZCBjdXN0b21DYXNlczogQ2FzZUhbXSB8IG51bGwgPSBudWxsO1xyXG4gIHByb3RlY3RlZCBjYXNlSGllcmFyY2h5OiBDYXNlSGllcmFyY2h5IHwgbnVsbCA9IG51bGw7XHJcbiAgcHJvdGVjdGVkIGNhc2VUaXNzdWVzOiBDYXNlVGlzc3Vlc1N0YWluc1tdIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJvdGVjdGVkIGNhc2VTdGFpbnM6IENhc2VUaXNzdWVzU3RhaW5zW10gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgaWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nID0gJyc7XHJcbiAgaGllcmFyY2h5U3BlYzogc3RyaW5nW10gPSBbXTtcclxuICBoaWVyYXJjaHlOYW1lT3ZlcnJpZGVzOiBIaWVyYXJjaHlOYW1lT3ZlcnJpZGVzID0ge307XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENhc2VzKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uZmlndXJlIENhc2VFeHBsb3Jlci5cclxuICAgKiBAcGFyYW0gaWRlbnRpZmllclNlcGFyYXRvciBSZWdleCBtYXRjaGluZyBsb2NhbF9pZCBhbmQgaXRzIHBhcnRzLlxyXG4gICAqIEBwYXJhbSBoaWVyYXJjaHlTcGVjIEFycmF5IG9mIGhpZXJhcmNoeSBrZXlzIGRlZmluaW5nIGhpZXJhcmNoeS5cclxuICAgKiBAcGFyYW0gaGllcmFyY2h5TmFtZU92ZXJyaWRlcyBPdmVycmlkZSBzcGVjaWZpYyB2YWx1ZXMgb2Ygc3BlY2lmaWMga2V5cyB0byB1c2UgYXMgbmFtZXMgaW4gaGllcmFyY2h5LlxyXG4gICAqL1xyXG4gIHVzZShcclxuICAgIGlkZW50aWZpZXJTZXBhcmF0b3I6IHN0cmluZyxcclxuICAgIGhpZXJhcmNoeVNwZWM6IHN0cmluZ1tdLFxyXG4gICAgaGllcmFyY2h5TmFtZU92ZXJyaWRlczogSGllcmFyY2h5TmFtZU92ZXJyaWRlcyA9IHt9LFxyXG4gICk6IHZvaWQge1xyXG4gICAgdGhpcy5oaWVyYXJjaHlTcGVjID0gaGllcmFyY2h5U3BlYztcclxuICAgIHRoaXMuaWRlbnRpZmllclNlcGFyYXRvciA9IGlkZW50aWZpZXJTZXBhcmF0b3I7XHJcbiAgICB0aGlzLmhpZXJhcmNoeU5hbWVPdmVycmlkZXMgPSBoaWVyYXJjaHlOYW1lT3ZlcnJpZGVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBjYXNlcyBleHRlbmRlZCB3aXRoIHBhdGggaW4gdGhlIHNwZWNpZmllZCBoaWVyYXJjaHkuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZXRDdXN0b21DYXNlcygpIHtcclxuICAgIGlmICghdGhpcy5jdXN0b21DYXNlcykge1xyXG4gICAgICB0aGlzLmN1c3RvbUNhc2VzID0gKGF3YWl0IHRoaXMuY29udGV4dC5saXN0KCkpLml0ZW1zLm1hcCgoY2FzZU9iaikgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAuLi5jYXNlT2JqLFxyXG4gICAgICAgICAgcGF0aEluSGllcmFyY2h5OiB0aGlzLmdldENhc2VIaWVyYXJjaHlQYXRoKGNhc2VPYmopLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuY3VzdG9tQ2FzZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGNhc2UncyBwYXRoIGluIHRoZSBzcGVjaWZpZWQgaGllcmFyY2h5LlxyXG4gICAqIEBwYXJhbSBjYXNlT2JqIEVNUEFJQSBDYXNlLlxyXG4gICAqL1xyXG4gIGdldENhc2VIaWVyYXJjaHlQYXRoKGNhc2VPYmo6IENhc2UpIHtcclxuICAgIGlmICghdGhpcy5pZGVudGlmaWVyU2VwYXJhdG9yIHx8ICF0aGlzLmhpZXJhcmNoeVNwZWMpIHtcclxuICAgICAgdGhyb3cgYEFyZ3VtZW50RXJyb3JbQ2FzZUV4cGxvcmVyXSBpZGVudGlmaWVyU2VwYXJhdG9yIG9yIGhpZXJhcmNoeVNwZWMgaXMgbWlzc2luZyAtIHJlcXVpcmVkIHByb3BlcnR5IWA7XHJcbiAgICB9XHJcbiAgICBsZXQgcGF0aEZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICByZXR1cm4gdGhpcy5oaWVyYXJjaHlTcGVjLnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xyXG4gICAgICBjb25zdCB2YWwgPSB0aGlzLmdldENhc2VWYWx1ZShjdXJyLCBjYXNlT2JqKTtcclxuXHJcbiAgICAgIGNvbnN0IHJldHVyblZhbCA9IHBhdGhGaW5pc2hlZCA/IHByZXYgOiBgJHtwcmV2fS8ke3ZhbH1gO1xyXG4gICAgICBpZiAodmFsID09PSAnT1RIRVInKSB7XHJcbiAgICAgICAgcGF0aEZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmV0dXJuVmFsO1xyXG4gICAgfSwgJycpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBzaW5nbGUgY2FzZS5cclxuICAgKiBAcGFyYW0gY2FzZUlkIElEIG9mIGEgY2FzZS5cclxuICAgKi9cclxuICBhc3luYyBnZXRDYXNlKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxDYXNlSD4ge1xyXG4gICAgbGV0IGNhc2VPYmo6IENhc2UgfCB1bmRlZmluZWQ7XHJcbiAgICBpZiAodGhpcy5jdXN0b21DYXNlcykge1xyXG4gICAgICBjYXNlT2JqID0gdGhpcy5jdXN0b21DYXNlcy5maW5kKChjcykgPT4gY3MuaWQgPT09IGNhc2VJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFjYXNlT2JqKSB7XHJcbiAgICAgIGNhc2VPYmogPSBhd2FpdCB0aGlzLmNvbnRleHQuZ2V0KGNhc2VJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgLi4uY2FzZU9iaiwgcGF0aEluSGllcmFyY2h5OiB0aGlzLmdldENhc2VIaWVyYXJjaHlQYXRoKGNhc2VPYmopIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGNhc2UncyB2YWx1ZSwgY2FuIGJlIGEgc2ltcGxlIGF0dHJpYnV0ZSwgb3Igc29tZSBkZXJpdmVkIHZhbHVlLlxyXG4gICAqIEBwYXJhbSBrZXkgS2V5IHNwZWNpZnlpbmcgdmFsdWUgdGhhdCBjYW4gYmUgZXh0cmFjdGVkIGZyb20gYSBjYXNlLlxyXG4gICAqIEBwYXJhbSBjcyBDYXNlIG9iamVjdC5cclxuICAgKi9cclxuICBwcml2YXRlIGdldENhc2VWYWx1ZShrZXk6IHN0cmluZywgY3M6IENhc2UpIHtcclxuICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgIGNhc2UgJ3llYXInOiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZVllYXIoY3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vbnRoJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VNb250aChjcyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnZGF5Jzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VEYXkoY3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2Rlc2NyaXB0aW9uJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VEZXNjcmlwdGlvbihjcyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAndGlzc3Vlcyc6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlVGlzc3Vlcyhjcyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnc3RhaW5zJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENhc2VTdGFpbnMoY3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICBpZiAoa2V5LnNsaWNlKDAsIDgpID09PSAnaWRfcGFydF8nICYmICFpc05hTihOdW1iZXIoa2V5LnNsaWNlKDgpKSkpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldENhc2VJZGVudGlmaWVyUGFydChjcywgTnVtYmVyKGtleS5zbGljZSg4KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBgS2V5RXJyb3JbQ2FzZUV4cGxvcmVyXSBcXFwiJHtrZXl9XFxcIiBpcyBub3Qgc3VwcG9ydGVkIWA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEV2YWx1YXRlcyBjYXNlJ3MgdmFsdWUgYWdhaW5zdCBhIHByb3ZpZGVkIHZhbHVlLlxyXG4gICAqIEBwYXJhbSBrZXkgS2V5IHNwZWNpZnlpbmcgdmFsdWUgdGhhdCBjYW4gYmUgZXh0cmFjdGVkIGZyb20gYSBjYXNlLlxyXG4gICAqIEBwYXJhbSBldmFsVmFsdWUgVmFsdWUgZm9yIGNvbXBhcmlzb24vZXZhbHVhdGlvbi5cclxuICAgKiBAcGFyYW0gY3MgQ2FzZSBvYmplY3QuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VWYWx1ZShcclxuICAgIGtleTogc3RyaW5nLFxyXG4gICAgZXZhbFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgIGNzOiBDYXNlLFxyXG4gICkge1xyXG4gICAgY29uc3QgY2FzZVZhbHVlID0gdGhpcy5nZXRDYXNlVmFsdWUoa2V5LCBjcyk7XHJcbiAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICBjYXNlICd5ZWFyJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZVllYXIoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnbW9udGgnOiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlTW9udGgoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZyk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnZGF5Jzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZURheShjYXNlVmFsdWUgYXMgc3RyaW5nLCBldmFsVmFsdWUgYXMgc3RyaW5nKTtcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdkZXNjcmlwdGlvbic6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNhc2VEZXNjcmlwdGlvbihcclxuICAgICAgICAgIGNhc2VWYWx1ZSBhcyBzdHJpbmcsXHJcbiAgICAgICAgICBldmFsVmFsdWUgYXMgc3RyaW5nLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAndGlzc3Vlcyc6IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZUNhc2VUaXNzdWVzKFxyXG4gICAgICAgICAgY2FzZVZhbHVlIGFzIHN0cmluZ1tdLFxyXG4gICAgICAgICAgZXZhbFZhbHVlIGFzIHN0cmluZyB8IHN0cmluZ1tdLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnc3RhaW5zJzoge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQ2FzZVN0YWlucyhcclxuICAgICAgICAgIGNhc2VWYWx1ZSBhcyBzdHJpbmdbXSxcclxuICAgICAgICAgIGV2YWxWYWx1ZSBhcyBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAvLyBhbnkgaW52YWxpZCBrZXkgd2lsbCBiZSBjYXVnaHQgaW4gZ2V0Q2FzZVZhbHVlIGNhbGxcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmF1bGF0ZUNhc2VJZGVudGlmaWVyUGFydChcclxuICAgICAgICAgIGNhc2VWYWx1ZSBhcyBzdHJpbmcsXHJcbiAgICAgICAgICBldmFsVmFsdWUgYXMgc3RyaW5nLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q2FzZVllYXIoY3M6IENhc2UpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGdldFllYXJGcm9tRXBvY2hUaW1lKGNzLmNyZWF0ZWRfYXQpLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZU1vbnRoKGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBnZXRNb250aEZyb21FcG9jaFRpbWUoY3MuY3JlYXRlZF9hdCkudG9TdHJpbmcoKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBnZXRDYXNlRGF5KGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBnZXREYXlGcm9tRXBvY2hUaW1lKGNzLmNyZWF0ZWRfYXQpLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZUlkZW50aWZpZXJQYXJ0KGNzOiBDYXNlLCBwYXJ0SWR4OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgaWYgKCF0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IpIHtcclxuICAgICAgdGhyb3cgYEFyZ3VtZW50RXJyb3JbQ2FzZUV4cGxvcmVyXSBpZGVudGlmaWVyU2VwYXJhdG9yIGlzIG1pc3NpbmcgLSByZXF1aXJlZCBwcm9wZXJ0eSFgO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGFydHMgPSBuZXcgUmVnRXhwKHRoaXMuaWRlbnRpZmllclNlcGFyYXRvcikuZXhlYyhjcy5sb2NhbF9pZCB8fCAnJyk7XHJcbiAgICBpZiAoIXBhcnRzKSByZXR1cm4gJ09USEVSJztcclxuICAgIGlmIChwYXJ0SWR4IDwgMSB8fCBwYXJ0SWR4ID49IHBhcnRzLmxlbmd0aClcclxuICAgICAgdGhyb3cgYEtleUVycm9yW0Nhc2VFeHBsb3Jlcl0gaW52YWxpZCBrZXkgXFxcImlkX3BhcnRfPGluZGV4PlxcXCIsIGdyb3VwIGluZGV4IGlzIG5vdCB2YWxpZCFgO1xyXG4gICAgcmV0dXJuIHBhcnRzW3BhcnRJZHhdO1xyXG4gIH1cclxuICBwcml2YXRlIGdldENhc2VEZXNjcmlwdGlvbihjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gY3MuZGVzY3JpcHRpb24gfHwgJyc7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZVRpc3N1ZXMoY3M6IENhc2UpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoY3MudGlzc3Vlcyk7XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0Q2FzZVN0YWlucyhjczogQ2FzZSk6IHN0cmluZ1tdIHtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhjcy5zdGFpbnMpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VZZWFyKHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IGV2YWxWYWx1ZTtcclxuICB9XHJcbiAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VNb250aCh2YWx1ZTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgfVxyXG4gIHByaXZhdGUgZXZhdWxhdGVDYXNlRGF5KHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IGV2YWxWYWx1ZTtcclxuICB9XHJcbiAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VJZGVudGlmaWVyUGFydChcclxuICAgIHZhbHVlOiBzdHJpbmcsXHJcbiAgICBldmFsVmFsdWU6IHN0cmluZyxcclxuICApOiBib29sZWFuIHtcclxuICAgIHJldHVybiB2YWx1ZSA9PT0gZXZhbFZhbHVlO1xyXG4gIH1cclxuICBwcml2YXRlIGV2YWx1YXRlQ2FzZURlc2NyaXB0aW9uKHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gbWF0Y2hTdHJpbmdPblRva2Vucyh2YWx1ZSwgZXZhbFZhbHVlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VUaXNzdWVzKFxyXG4gICAgdmFsdWU6IHN0cmluZ1tdLFxyXG4gICAgZXZhbFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICApOiBib29sZWFuIHtcclxuICAgIGlmICghKGV2YWxWYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICBldmFsVmFsdWUgPSBbZXZhbFZhbHVlXTtcclxuICAgIH1cclxuICAgIC8vIEFMTCBzZWFyY2hlZCB0aXNzdWVzIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIHJldHVybiBldmFsVmFsdWUuZXZlcnkoKHRpc3N1ZSkgPT4gdmFsdWUuaW5jbHVkZXModGlzc3VlKSk7XHJcblxyXG4gICAgLy8gU09NRSBzZWFyY2hlZCB0aXNzdWVzIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIC8vIHJldHVybiBldmFsVmFsdWUuc29tZSgodGlzc3VlKSA9PiB2YWx1ZS5pbmNsdWRlcyh0aXNzdWUpKVxyXG4gIH1cclxuICBwcml2YXRlIGV2YWx1YXRlQ2FzZVN0YWlucyhcclxuICAgIHZhbHVlOiBzdHJpbmdbXSxcclxuICAgIGV2YWxWYWx1ZTogc3RyaW5nIHwgc3RyaW5nW10sXHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoIShldmFsVmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgZXZhbFZhbHVlID0gW2V2YWxWYWx1ZV07XHJcbiAgICB9XHJcbiAgICAvLyBBTEwgc2VhcmNoZWQgc3RhaW5zIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIHJldHVybiBldmFsVmFsdWUuZXZlcnkoKHN0YWluKSA9PiB2YWx1ZS5pbmNsdWRlcyhzdGFpbikpO1xyXG5cclxuICAgIC8vIFNPTUUgc2VhcmNoZWQgc3RhaW5zIGFyZSBwcmVzZW50IGluIGNhc2VcclxuICAgIC8vIHJldHVybiBldmFsVmFsdWUuc29tZSgoc3RhaW4pID0+IHZhbHVlLmluY2x1ZGVzKHN0YWluKSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlY3Vyc2l2ZWx5IGNvbnN0cnVjdHMgYSBoaWVyYXJjaHkgYnkgc2luZ2xlIGxldmVsc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgaGllcmFyY2h5TGV2ZWwoXHJcbiAgICBrZXlzOiBzdHJpbmdbXSxcclxuICAgIGtleUlkeDogbnVtYmVyLFxyXG4gICAgY2FzZXM6IENhc2VbXSxcclxuICAgIGN1cnJlbnRIaWVyYXJjaHlQYXRoOiBzdHJpbmcsXHJcbiAgICBuYW1lPzogc3RyaW5nLFxyXG4gICk6IENhc2VIaWVyYXJjaHkge1xyXG4gICAgaWYgKGtleUlkeCA+PSBrZXlzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGxldmVsTmFtZTogbmFtZSxcclxuICAgICAgICBsYXN0TGV2ZWw6IHRydWUsXHJcbiAgICAgICAgaXRlbXM6IGNhc2VzLm1hcCgoY2FzZU9iaikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHsgLi4uY2FzZU9iaiwgcGF0aEluSGllcmFyY2h5OiBjdXJyZW50SGllcmFyY2h5UGF0aCB9O1xyXG4gICAgICAgIH0pLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gZ3JvdXBpbmcgYnkgYXJyYXkgdmFsdWVzKHRpc3N1ZXMsIHN0YWlucykgaXMgbm90IGV4cGVjdGVkLCBidXQgd29ya3MgYnkgZ3JvdXBpbmcgb24gZmlyc3QgdmFsdWUgb2YgYXJyYXlcclxuICAgIGNvbnN0IGdyb3VwcyA9IGdyb3VwQnkoY2FzZXMsIChjcykgPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0Q2FzZVZhbHVlKGtleXNba2V5SWR4XSwgY3MpO1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWVbMF0gfHwgJyc7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgaXRlbXMgPSBPYmplY3Qua2V5cyhncm91cHMpLm1hcCgobmFtZSkgPT4ge1xyXG4gICAgICBjb25zdCBvdmVycmlkZU5hbWUgPVxyXG4gICAgICAgIHRoaXMuaGllcmFyY2h5TmFtZU92ZXJyaWRlc1trZXlzW2tleUlkeF1dPy5bbmFtZV0gfHwgbmFtZTtcclxuICAgICAgaWYgKG5hbWUgPT09ICdPVEhFUicpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaWVyYXJjaHlMZXZlbChcclxuICAgICAgICAgIGtleXMsXHJcbiAgICAgICAgICBrZXlzLmxlbmd0aCxcclxuICAgICAgICAgIGdyb3Vwc1tuYW1lXSxcclxuICAgICAgICAgIGAke2N1cnJlbnRIaWVyYXJjaHlQYXRofS8ke292ZXJyaWRlTmFtZX1gLFxyXG4gICAgICAgICAgb3ZlcnJpZGVOYW1lLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuaGllcmFyY2h5TGV2ZWwoXHJcbiAgICAgICAga2V5cyxcclxuICAgICAgICBrZXlJZHggKyAxLFxyXG4gICAgICAgIGdyb3Vwc1tuYW1lXSxcclxuICAgICAgICBgJHtjdXJyZW50SGllcmFyY2h5UGF0aH0vJHtvdmVycmlkZU5hbWV9YCxcclxuICAgICAgICBvdmVycmlkZU5hbWUsXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4geyBsZXZlbE5hbWU6IG5hbWUsIGxhc3RMZXZlbDogZmFsc2UsIGl0ZW1zOiBpdGVtcyB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0cyBhIGhpZXJhcmNoeSBiYXNlZCBvbiBzcGVjIGNvbmZpZ3VyZWQgaW4gdGhlIENhc2VFeHBsb3JlciBjbGFzcy5cclxuICAgKi9cclxuICBhc3luYyBoaWVyYXJjaHkoKTogUHJvbWlzZTxDYXNlSGllcmFyY2h5PiB7XHJcbiAgICBpZiAoIXRoaXMuY2FzZUhpZXJhcmNoeSkge1xyXG4gICAgICBjb25zdCBjYXNlcyA9IGF3YWl0IHRoaXMuZ2V0Q3VzdG9tQ2FzZXMoKTtcclxuICAgICAgdGhpcy5jYXNlSGllcmFyY2h5ID0gdGhpcy5oaWVyYXJjaHlMZXZlbChcclxuICAgICAgICB0aGlzLmhpZXJhcmNoeVNwZWMsXHJcbiAgICAgICAgMCxcclxuICAgICAgICBjYXNlcyxcclxuICAgICAgICAnJyxcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmNhc2VIaWVyYXJjaHk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZWFyY2ggY2FzZXMuXHJcbiAgICogQHBhcmFtIHF1ZXJ5IFNlYXJjaCBxdWVyeS5cclxuICAgKi9cclxuICBhc3luYyBzZWFyY2gocXVlcnk6IENhc2VTZWFyY2hQYXJhbXNbXSk6IFByb21pc2U8Q2FzZUhbXT4ge1xyXG4gICAgbGV0IGZpbHRlcmVkQ2FzZXMgPSBhd2FpdCB0aGlzLmdldEN1c3RvbUNhc2VzKCk7XHJcbiAgICBxdWVyeS5mb3JFYWNoKFxyXG4gICAgICAoeyBrZXksIHZhbHVlIH0pID0+XHJcbiAgICAgICAgKGZpbHRlcmVkQ2FzZXMgPSBmaWx0ZXJlZENhc2VzLmZpbHRlcigoY3MpID0+XHJcbiAgICAgICAgICB0aGlzLmV2YWx1YXRlQ2FzZVZhbHVlKGtleSwgdmFsdWUsIGNzKSxcclxuICAgICAgICApKSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGZpbHRlcmVkQ2FzZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIHRpc3N1ZXMgaW4gYXZhaWxhYmxlIGNhc2VzLlxyXG4gICAqIEBwYXJhbSBsb2NhbGl6YXRpb24gTGFuZ3VhZ2Ugb2YgdGlzc3VlIG5hbWVzLlxyXG4gICAqL1xyXG4gIGFzeW5jIHRpc3N1ZXMobG9jYWxpemF0aW9uOiBzdHJpbmcgPSAnRU4nKTogUHJvbWlzZTxDYXNlVGlzc3Vlc1N0YWluc1tdPiB7XHJcbiAgICBpZiAoIXRoaXMuY2FzZVRpc3N1ZXMpIHtcclxuICAgICAgY29uc3QgY2FzZXMgPSBhd2FpdCB0aGlzLmdldEN1c3RvbUNhc2VzKCk7XHJcblxyXG4gICAgICBjb25zdCBhbGxUaXNzdWVzOiBDYXNlVGlzc3Vlc1N0YWluc1tdID0gW107XHJcbiAgICAgIGNhc2VzLmZvckVhY2goKGMpID0+XHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoYy50aXNzdWVzKVxyXG4gICAgICAgICAgLm1hcCgoW3Rpc05hbWUsIHRpc1ZhbHVlXTogW3N0cmluZywgYW55XSkgPT4gKHtcclxuICAgICAgICAgICAgbmFtZTogdGlzTmFtZSxcclxuICAgICAgICAgICAgbG9jTmFtZTogdGlzVmFsdWVbbG9jYWxpemF0aW9uXSxcclxuICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgLmZvckVhY2goKHQpID0+IGFsbFRpc3N1ZXMucHVzaCh0KSksXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuY2FzZVRpc3N1ZXMgPSBbXHJcbiAgICAgICAgLi4ubmV3IE1hcChcclxuICAgICAgICAgIGFsbFRpc3N1ZXMubWFwKCh0KSA9PiBbSlNPTi5zdHJpbmdpZnkoW3QubmFtZSwgdC5sb2NOYW1lXSksIHRdKSxcclxuICAgICAgICApLnZhbHVlcygpLFxyXG4gICAgICBdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuY2FzZVRpc3N1ZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIHN0YWlucyBpbiBhdmFpbGFibGUgY2FzZXMuXHJcbiAgICogQHBhcmFtIGxvY2FsaXphdGlvbiBMYW5ndWFnZSBvZiBzdGFpbnMgbmFtZXMuXHJcbiAgICovXHJcbiAgYXN5bmMgc3RhaW5zKGxvY2FsaXphdGlvbjogc3RyaW5nID0gJ0VOJyk6IFByb21pc2U8Q2FzZVRpc3N1ZXNTdGFpbnNbXT4ge1xyXG4gICAgaWYgKCF0aGlzLmNhc2VTdGFpbnMpIHtcclxuICAgICAgY29uc3QgY2FzZXMgPSBhd2FpdCB0aGlzLmdldEN1c3RvbUNhc2VzKCk7XHJcblxyXG4gICAgICBjb25zdCBhbGxTdGFpbnM6IENhc2VUaXNzdWVzU3RhaW5zW10gPSBbXTtcclxuICAgICAgY2FzZXMuZm9yRWFjaCgoYykgPT5cclxuICAgICAgICBPYmplY3QuZW50cmllcyhjLnN0YWlucylcclxuICAgICAgICAgIC5tYXAoKFtzdG5OYW1lLCBzdG5WYWx1ZV06IFtzdHJpbmcsIGFueV0pID0+ICh7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0bk5hbWUsXHJcbiAgICAgICAgICAgIGxvY05hbWU6IHN0blZhbHVlW2xvY2FsaXphdGlvbl0sXHJcbiAgICAgICAgICB9KSlcclxuICAgICAgICAgIC5mb3JFYWNoKChzKSA9PiBhbGxTdGFpbnMucHVzaChzKSksXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuY2FzZVN0YWlucyA9IFtcclxuICAgICAgICAuLi5uZXcgTWFwKFxyXG4gICAgICAgICAgYWxsU3RhaW5zLm1hcCgocykgPT4gW0pTT04uc3RyaW5naWZ5KFtzLm5hbWUsIHMubG9jTmFtZV0pLCBzXSksXHJcbiAgICAgICAgKS52YWx1ZXMoKSxcclxuICAgICAgXTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmNhc2VTdGFpbnM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDYXNlcyBmcm9tICcuLi9yb290L2Nhc2VzJztcclxuaW1wb3J0IHsgU2xpZGUgfSBmcm9tICcuLi9yb290L3R5cGVzL3NsaWRlJztcclxuaW1wb3J0IHsgbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXc2lFeHBsb3JlciB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IENhc2VzO1xyXG4gIHByb3RlY3RlZCBsYXN0Q2FzZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICBwcm90ZWN0ZWQgZGF0YTogU2xpZGVbXSB8IG51bGwgPSBudWxsO1xyXG4gIHByb3RlY3RlZCBzbGlkZXNEYXRhOiBTbGlkZVtdIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJvdGVjdGVkIG1hc2tzRGF0YTogU2xpZGVbXSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBtYXNrSWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nID0gJyc7XHJcbiAgbWFza0lkZW50aWZpZXJWYWx1ZTogc3RyaW5nID0gJyc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENhc2VzKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uZmlndXJlIFdzaUV4cGxvcmVyIHdpdGggcmVnZXggaWRlbnRpZnlpbmcgdGhlIGxvY2FsX2lkIHBhcnQgYW5kIHZhbHVlIHRoaXMgcGFydCBzaG91bGQgY29udGFpbiB0byBkaXN0aWd1aXNoIG1hc2tzIGFuZCBzbGlkZXMuXHJcbiAgICogQHBhcmFtIG1hc2tJZGVudGlmaWVyU2VwYXJhdG9yIFJlZ2V4IHNwZWNpZnlpbmcgcGFydCBvZiBsb2NhbF9pZCB0aGF0IHNob3VsZCBpZGVudGlmeSB0aGUgV1NJIHR5cGVcclxuICAgKiBAcGFyYW0gbWFza0lkZW50aWZpZXJWYWx1ZSBWYWx1ZSB0aGUgbG9jYWxfaWQgcGFydCBvZiBXU0kgc2hvdWxkIGhhdmUgdG8gaWRlbnRpZnkgdGhlIFdTSSBhcyBtYXNrXHJcbiAgICovXHJcbiAgdXNlKG1hc2tJZGVudGlmaWVyU2VwYXJhdG9yOiBzdHJpbmcsIG1hc2tJZGVudGlmaWVyVmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5tYXNrSWRlbnRpZmllclNlcGFyYXRvciA9IG1hc2tJZGVudGlmaWVyU2VwYXJhdG9yO1xyXG4gICAgdGhpcy5tYXNrSWRlbnRpZmllclZhbHVlID0gbWFza0lkZW50aWZpZXJWYWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGFsbCBXU0lzIG9mIGNhc2VcclxuICAgKiBAcGFyYW0gY2FzZUlkIElEIG9mIGNhc2VcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdldEFsbFNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVbXT4ge1xyXG4gICAgaWYgKHRoaXMubGFzdENhc2VJZCAhPT0gY2FzZUlkIHx8ICF0aGlzLmRhdGEpIHtcclxuICAgICAgdGhpcy5kYXRhID0gKGF3YWl0IHRoaXMuY29udGV4dC5zbGlkZXMoY2FzZUlkKSkuaXRlbXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIGFjdHVhbCBzbGlkZXMgb2YgY2FzZVxyXG4gICAqIEBwYXJhbSBjYXNlSWQgSUQgb2YgY2FzZVxyXG4gICAqL1xyXG4gIGFzeW5jIHNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVbXT4ge1xyXG4gICAgaWYgKHRoaXMubGFzdENhc2VJZCAhPT0gY2FzZUlkIHx8ICF0aGlzLnNsaWRlc0RhdGEpIHtcclxuICAgICAgdGhpcy5zbGlkZXNEYXRhID0gKGF3YWl0IHRoaXMuZ2V0QWxsU2xpZGVzKGNhc2VJZCkpLmZpbHRlcigoc2xpZGUpID0+IHtcclxuICAgICAgICByZXR1cm4gIW1hdGNoU3RyaW5nT25TZXBhcmF0b3JHcm91cChcclxuICAgICAgICAgIHNsaWRlLmxvY2FsX2lkIHx8ICcnLFxyXG4gICAgICAgICAgdGhpcy5tYXNrSWRlbnRpZmllclNlcGFyYXRvcixcclxuICAgICAgICAgIDEsXHJcbiAgICAgICAgICB0aGlzLm1hc2tJZGVudGlmaWVyVmFsdWUsXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zbGlkZXNEYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIG1hc2tzIG9mIGEgY2FzZVxyXG4gICAqIEBwYXJhbSBjYXNlSWQgSUQgb2YgY2FzZVxyXG4gICAqL1xyXG4gIGFzeW5jIG1hc2tzKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxTbGlkZVtdPiB7XHJcbiAgICBpZiAodGhpcy5sYXN0Q2FzZUlkICE9PSBjYXNlSWQgfHwgIXRoaXMubWFza3NEYXRhKSB7XHJcbiAgICAgIHRoaXMubWFza3NEYXRhID0gKGF3YWl0IHRoaXMuZ2V0QWxsU2xpZGVzKGNhc2VJZCkpLmZpbHRlcigoc2xpZGUpID0+IHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwKFxyXG4gICAgICAgICAgc2xpZGUubG9jYWxfaWQgfHwgJycsXHJcbiAgICAgICAgICB0aGlzLm1hc2tJZGVudGlmaWVyU2VwYXJhdG9yLFxyXG4gICAgICAgICAgMSxcclxuICAgICAgICAgIHRoaXMubWFza0lkZW50aWZpZXJWYWx1ZSxcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLm1hc2tzRGF0YTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUm9vdEFQSSwgUm9vdENvbnRleHQgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IENhc2VFeHBsb3JlciBmcm9tICcuLi9leHRlbnNpb25zL2Nhc2UtZXhwbG9yZXInO1xyXG5pbXBvcnQgV3NpRXhwbG9yZXIgZnJvbSAnLi4vZXh0ZW5zaW9ucy93c2ktZXhwbG9yZXInO1xyXG5pbXBvcnQgUm9vdCBmcm9tICcuL3Jvb3QnO1xyXG5pbXBvcnQgeyBDYXNlIH0gZnJvbSAnLi90eXBlcy9jYXNlJztcclxuaW1wb3J0IHsgQ2FzZUxpc3QgfSBmcm9tICcuL3R5cGVzL2Nhc2UtbGlzdCc7XHJcbmltcG9ydCB7IFNsaWRlTGlzdCB9IGZyb20gJy4vdHlwZXMvc2xpZGUtbGlzdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXNlcyBleHRlbmRzIFJvb3RDb250ZXh0IHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdEFQSTtcclxuICBwcm90ZWN0ZWQgZGF0YTogQ2FzZUxpc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY2FzZUV4cGxvcmVyOiBDYXNlRXhwbG9yZXI7XHJcbiAgd3NpRXhwbG9yZXI6IFdzaUV4cGxvcmVyO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcbiAgICB0aGlzLmNhc2VFeHBsb3JlciA9IG5ldyBDYXNlRXhwbG9yZXIodGhpcyk7XHJcbiAgICB0aGlzLndzaUV4cGxvcmVyID0gbmV3IFdzaUV4cGxvcmVyKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbGlzdCgpOiBQcm9taXNlPENhc2VMaXN0PiB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YSkge1xyXG4gICAgICB0aGlzLmRhdGEgPSAoYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvY2FzZXMnKSkgYXMgQ2FzZUxpc3Q7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0KGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxDYXNlPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY2FzZXMvJHtjYXNlSWR9YCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzbGlkZXMoY2FzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlTGlzdD4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2Nhc2VzLyR7Y2FzZUlkfS9zbGlkZXNgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUm9vdENvbnRleHQgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IFJvb3QgZnJvbSAnLi9yb290JztcclxuaW1wb3J0IHsgV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24gfSBmcm9tICcuL3R5cGVzL3dvcmtiZW5jaC1zZXJ2aWNlLWFwaS12LTMtY3VzdG9tLW1vZGVscy1leGFtaW5hdGlvbnMtZXhhbWluYXRpb24nO1xyXG5pbXBvcnQgeyBFeGFtaW5hdGlvblF1ZXJ5IH0gZnJvbSAnLi90eXBlcy9leGFtaW5hdGlvbi1xdWVyeSc7XHJcbmltcG9ydCB7IEV4YW1pbmF0aW9uTGlzdCB9IGZyb20gJy4vdHlwZXMvZXhhbWluYXRpb24tbGlzdCc7XHJcbmltcG9ydCB7IFNjb3BlVG9rZW5BbmRTY29wZUlkIH0gZnJvbSAnLi90eXBlcy9zY29wZS10b2tlbi1hbmQtc2NvcGUtaWQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhhbWluYXRpb25zIGV4dGVuZHMgUm9vdENvbnRleHQge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBSb290O1xyXG4gIHByb3RlY3RlZCBkYXRhOiBFeGFtaW5hdGlvbkxpc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGUoXHJcbiAgICBjYXNlSWQ6IHN0cmluZyxcclxuICAgIGFwcElkOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbj4ge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuY29udGV4dDtcclxuICAgIHNlbGYucmVxdWlyZXMoJ2Nhc2VJZCcsIGNhc2VJZCk7XHJcbiAgICByZXR1cm4gc2VsZi5yYXdRdWVyeSgnL2V4YW1pbmF0aW9ucycsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgYm9keToge1xyXG4gICAgICAgIGNhc2VfaWQ6IGNhc2VJZCxcclxuICAgICAgICBhcHBfaWQ6IGFwcElkLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBxdWVyeShcclxuICAgIHF1ZXJ5OiBFeGFtaW5hdGlvblF1ZXJ5LFxyXG4gICAgc2tpcD86IG51bWJlciB8IHVuZGVmaW5lZCxcclxuICAgIGxpbWl0PzogbnVtYmVyIHwgdW5kZWZpbmVkLFxyXG4gICk6IFByb21pc2U8RXhhbWluYXRpb25MaXN0PiB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcy5jb250ZXh0O1xyXG4gICAgcmV0dXJuIHNlbGYucmF3UXVlcnkoYC9leGFtaW5hdGlvbnMvcXVlcnlgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgICBxdWVyeTogeyBza2lwLCBsaW1pdCB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoXHJcbiAgICBleGFtaW5hdGlvbklkOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbj4ge1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXMuY29udGV4dDtcclxuICAgIHNlbGYucmVxdWlyZXMoJ2V4YW1pbmF0aW9uSWQnLCBleGFtaW5hdGlvbklkKTtcclxuICAgIHJldHVybiBzZWxmLnJhd1F1ZXJ5KGAvZXhhbWluYXRpb25zLyR7ZXhhbWluYXRpb25JZH1gKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNjb3BlKGV4YW1pbmF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8U2NvcGVUb2tlbkFuZFNjb3BlSWQ+IHtcclxuICAgIGNvbnN0IHNlbGYgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICBzZWxmLnJlcXVpcmVzKCdleGFtaW5hdGlvbklkJywgZXhhbWluYXRpb25JZCk7XHJcbiAgICByZXR1cm4gc2VsZi5yYXdRdWVyeShgL2V4YW1pbmF0aW9ucy8ke2V4YW1pbmF0aW9uSWR9L3Njb3BlYCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQ29udGV4dCB9IGZyb20gJy4uLy4uL3Njb3BlJztcclxuaW1wb3J0IFNjb3BlIGZyb20gJy4vc2NvcGUnO1xyXG5pbXBvcnQgeyBBcHBVaVN0b3JhZ2UgfSBmcm9tICcuL3R5cGVzL2FwcC11aS1zdG9yYWdlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2UgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICBwcm90ZWN0ZWQgZGF0YTogQXBwVWlTdG9yYWdlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFNjb3BlKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFJhdygpOiBQcm9taXNlPEFwcFVpU3RvcmFnZT4ge1xyXG4gICAgaWYgKCF0aGlzLmRhdGEpIHtcclxuICAgICAgdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYXBwLXVpLXN0b3JhZ2UvdXNlcicpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YSBhcyBBcHBVaVN0b3JhZ2U7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmbHVzaCgpOiBQcm9taXNlPEFwcFVpU3RvcmFnZSB8IG51bGw+IHtcclxuICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcC11aS1zdG9yYWdlL3VzZXInLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGJvZHk6IHRoaXMuZGF0YSxcclxuICAgIH0pKSBhcyBBcHBVaVN0b3JhZ2U7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0UmF3KCk7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEuY29udGVudFtrZXldID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhLmNvbnRlbnRba2V5XSBhcyBzdHJpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhLmNvbnRlbnRba2V5XTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgZmx1c2g/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB2YWx1ZVJhdyA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIGNvbnN0IGRhdGFSYXcgPSBhd2FpdCB0aGlzLmdldFJhdygpO1xyXG4gICAgZGF0YVJhdy5jb250ZW50W2tleV0gPSB2YWx1ZVJhdztcclxuICAgIHRoaXMuZGF0YSA9IGRhdGFSYXc7XHJcblxyXG4gICAgaWYgKGZsdXNoKSB7XHJcbiAgICAgIHRoaXMuZmx1c2goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGVyYXNlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5kYXRhID0geyBjb250ZW50OiB7fSB9O1xyXG4gICAgdGhpcy5mbHVzaCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tICcuLi8uLi9zY29wZSc7XHJcbmltcG9ydCBTY29wZSBmcm9tICcuL3Njb3BlJztcclxuaW1wb3J0IHsgUG9pbnRBbm5vdGF0aW9uIH0gZnJvbSAnLi90eXBlcy9wb2ludC1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgTGluZUFubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL2xpbmUtYW5ub3RhdGlvbic7XHJcbmltcG9ydCB7IEFycm93QW5ub3RhdGlvbiB9IGZyb20gJy4vdHlwZXMvYXJyb3ctYW5ub3RhdGlvbic7XHJcbmltcG9ydCB7IENpcmNsZUFubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL2NpcmNsZS1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgUmVjdGFuZ2xlQW5ub3RhdGlvbiB9IGZyb20gJy4vdHlwZXMvcmVjdGFuZ2xlLWFubm90YXRpb24nO1xyXG5pbXBvcnQgeyBQb2x5Z29uQW5ub3RhdGlvbiB9IGZyb20gJy4vdHlwZXMvcG9seWdvbi1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgUG9zdFBvaW50QW5ub3RhdGlvbnMgfSBmcm9tICcuL3R5cGVzL3Bvc3QtcG9pbnQtYW5ub3RhdGlvbnMnO1xyXG5pbXBvcnQgeyBQb3N0TGluZUFubm90YXRpb25zIH0gZnJvbSAnLi90eXBlcy9wb3N0LWxpbmUtYW5ub3RhdGlvbnMnO1xyXG5pbXBvcnQgeyBQb3N0QXJyb3dBbm5vdGF0aW9ucyB9IGZyb20gJy4vdHlwZXMvcG9zdC1hcnJvdy1hbm5vdGF0aW9ucyc7XHJcbmltcG9ydCB7IFBvc3RDaXJjbGVBbm5vdGF0aW9ucyB9IGZyb20gJy4vdHlwZXMvcG9zdC1jaXJjbGUtYW5ub3RhdGlvbnMnO1xyXG5pbXBvcnQgeyBQb3N0UmVjdGFuZ2xlQW5ub3RhdGlvbnMgfSBmcm9tICcuL3R5cGVzL3Bvc3QtcmVjdGFuZ2xlLWFubm90YXRpb25zJztcclxuaW1wb3J0IHsgUG9zdFBvbHlnb25Bbm5vdGF0aW9ucyB9IGZyb20gJy4vdHlwZXMvcG9zdC1wb2x5Z29uLWFubm90YXRpb25zJztcclxuaW1wb3J0IHsgUG9zdFBvaW50QW5ub3RhdGlvbiB9IGZyb20gJy4vdHlwZXMvcG9zdC1wb2ludC1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgUG9zdExpbmVBbm5vdGF0aW9uIH0gZnJvbSAnLi90eXBlcy9wb3N0LWxpbmUtYW5ub3RhdGlvbic7XHJcbmltcG9ydCB7IFBvc3RBcnJvd0Fubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL3Bvc3QtYXJyb3ctYW5ub3RhdGlvbic7XHJcbmltcG9ydCB7IFBvc3RDaXJjbGVBbm5vdGF0aW9uIH0gZnJvbSAnLi90eXBlcy9wb3N0LWNpcmNsZS1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgUG9zdFJlY3RhbmdsZUFubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL3Bvc3QtcmVjdGFuZ2xlLWFubm90YXRpb24nO1xyXG5pbXBvcnQgeyBQb3N0UG9seWdvbkFubm90YXRpb24gfSBmcm9tICcuL3R5cGVzL3Bvc3QtcG9seWdvbi1hbm5vdGF0aW9uJztcclxuaW1wb3J0IHsgQW5ub3RhdGlvbkxpc3RSZXNwb25zZSB9IGZyb20gJy4vdHlwZXMvYW5ub3RhdGlvbi1saXN0LXJlc3BvbnNlJztcclxuaW1wb3J0IHsgSWRPYmplY3QgfSBmcm9tICcuL3R5cGVzL2lkLW9iamVjdCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RBbm5vdGF0aW9uUXVlcnlQYXJhbXMge1xyXG4gIGlzUm9pPzogYm9vbGVhbjtcclxuICBleHRlcm5hbElkcz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFubm90YXRpb25zIGV4dGVuZHMgU2NvcGVDb250ZXh0IHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogU2NvcGU7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IHVuZGVmaW5lZDsgLy91bnVzZWRcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogU2NvcGUpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUG9zdCBtdWx0aXBsZSBhbm5vdGF0aW9ucyBhcyBvbmUuIElucmVhbGl0eSB0aGUgc2FtZSBlbmRwb2ludCBhcyBjcmVhdGUoLi4uKVxyXG4gICAqL1xyXG4gIGFzeW5jIHVwbG9hZChcclxuICAgIGRhdGE6XHJcbiAgICAgIHwgUG9zdFBvaW50QW5ub3RhdGlvbnNcclxuICAgICAgfCBQb3N0TGluZUFubm90YXRpb25zXHJcbiAgICAgIHwgUG9zdEFycm93QW5ub3RhdGlvbnNcclxuICAgICAgfCBQb3N0Q2lyY2xlQW5ub3RhdGlvbnNcclxuICAgICAgfCBQb3N0UmVjdGFuZ2xlQW5ub3RhdGlvbnNcclxuICAgICAgfCBQb3N0UG9seWdvbkFubm90YXRpb25zLFxyXG4gICAgb3B0aW9uczogUG9zdEFubm90YXRpb25RdWVyeVBhcmFtcyA9IHt9LFxyXG4gICk6IFByb21pc2U8QW5ub3RhdGlvbkxpc3RSZXNwb25zZT4ge1xyXG4gICAgLy90aGUgc2FtZSBhcyBjcmVhdGUgYnV0IGZvciB0eXBlcyBpdHMgc2ltcGxlciB0byBzcGxpdFxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2Fubm90YXRpb25zJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgcXVlcnk6IG9wdGlvbnMsXHJcbiAgICAgIGJvZHk6IHRoaXMuZGF0YSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGFuIGFubm90YXRpb24uXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlKFxyXG4gICAgZGF0YTpcclxuICAgICAgfCBQb3N0UG9pbnRBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdExpbmVBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdEFycm93QW5ub3RhdGlvblxyXG4gICAgICB8IFBvc3RDaXJjbGVBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdFJlY3RhbmdsZUFubm90YXRpb25cclxuICAgICAgfCBQb3N0UG9seWdvbkFubm90YXRpb24sXHJcbiAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge30sXHJcbiAgKTogUHJvbWlzZTxcclxuICAgIHwgUG9pbnRBbm5vdGF0aW9uXHJcbiAgICB8IExpbmVBbm5vdGF0aW9uXHJcbiAgICB8IEFycm93QW5ub3RhdGlvblxyXG4gICAgfCBDaXJjbGVBbm5vdGF0aW9uXHJcbiAgICB8IFJlY3RhbmdsZUFubm90YXRpb25cclxuICAgIHwgUG9seWdvbkFubm90YXRpb25cclxuICA+IHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9hbm5vdGF0aW9ucycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIHF1ZXJ5OiBvcHRpb25zLFxyXG4gICAgICBib2R5OiB0aGlzLmRhdGEsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxJZE9iamVjdD4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2Fubm90YXRpb25zLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGUoXHJcbiAgICBpZDogc3RyaW5nLFxyXG4gICAgZGF0YTpcclxuICAgICAgfCBQb3N0UG9pbnRBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdExpbmVBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdEFycm93QW5ub3RhdGlvblxyXG4gICAgICB8IFBvc3RDaXJjbGVBbm5vdGF0aW9uXHJcbiAgICAgIHwgUG9zdFJlY3RhbmdsZUFubm90YXRpb25cclxuICAgICAgfCBQb3N0UG9seWdvbkFubm90YXRpb24sXHJcbiAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge30sXHJcbiAgKTogUHJvbWlzZTxcclxuICAgIHwgUG9pbnRBbm5vdGF0aW9uXHJcbiAgICB8IExpbmVBbm5vdGF0aW9uXHJcbiAgICB8IEFycm93QW5ub3RhdGlvblxyXG4gICAgfCBDaXJjbGVBbm5vdGF0aW9uXHJcbiAgICB8IFJlY3RhbmdsZUFubm90YXRpb25cclxuICAgIHwgUG9seWdvbkFubm90YXRpb25cclxuICA+IHtcclxuICAgIGF3YWl0IHRoaXMuZGVsZXRlKGlkKTtcclxuXHJcbiAgICAvLyB1cGRhdGUgbWlnaHQgY2FycnkgaWQgYnV0IHVzZXIgZm9yZ290IHRvIHNldCBleHRlcm5hbCBJRHMgdG8gdHJ1ZVxyXG4gICAgaWYgKCFvcHRpb25zLmV4dGVybmFsSWRzICYmIGRhdGEuaWQpIHtcclxuICAgICAgb3B0aW9ucy5leHRlcm5hbElkcyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQ29udGV4dCB9IGZyb20gJy4uLy4uL3Njb3BlJztcclxuaW1wb3J0IFNjb3BlIGZyb20gJy4vc2NvcGUnO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi90eXBlcy9jb2xsZWN0aW9uJztcclxuaW1wb3J0IHsgSXRlbVF1ZXJ5IH0gZnJvbSAnLi90eXBlcy9pdGVtLXF1ZXJ5JztcclxuaW1wb3J0IHsgSXRlbVF1ZXJ5TGlzdCB9IGZyb20gJy4vdHlwZXMvaXRlbS1xdWVyeS1saXN0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxlY3Rpb25zIGV4dGVuZHMgU2NvcGVDb250ZXh0IHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogU2NvcGU7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IENvbGxlY3Rpb24gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogU2NvcGUpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0KGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTxDb2xsZWN0aW9uPiB7XHJcbiAgICBjb25zdCBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfWAsXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBjb2xsZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlKGNvbGxlY3Rpb246IENvbGxlY3Rpb24pOiBQcm9taXNlPENvbGxlY3Rpb24+IHtcclxuICAgIGNvbnN0IGNyZWF0ZWRDb2xsZWN0aW9uOiBDb2xsZWN0aW9uID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL2NvbGxlY3Rpb25zYCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IGNvbGxlY3Rpb24sXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBjcmVhdGVkQ29sbGVjdGlvbjtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZShjb2xsZWN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBxdWVyeUl0ZW1zKFxyXG4gICAgY29sbGVjdGlvbklkOiBzdHJpbmcsXHJcbiAgICBxdWVyeTogSXRlbVF1ZXJ5LFxyXG4gICk6IFByb21pc2U8SXRlbVF1ZXJ5TGlzdD4ge1xyXG4gICAgY29uc3QgcXVlcnlSZXN1bHQ6IEl0ZW1RdWVyeUxpc3QgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9L2l0ZW1zL3F1ZXJ5YCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgYm9keTogcXVlcnksXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBxdWVyeVJlc3VsdDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUl0ZW1zKGNvbGxlY3Rpb25JZDogc3RyaW5nLCBpdGVtczogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb25JZH0vaXRlbXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBib2R5OiB7XHJcbiAgICAgICAgLi4uaXRlbXMsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZUl0ZW0oY29sbGVjdGlvbklkOiBzdHJpbmcsIGl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9L2l0ZW1zLyR7aXRlbUlkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2NvcGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vc2NvcGUnO1xyXG5pbXBvcnQgU2NvcGUgZnJvbSAnLi9zY29wZSc7XHJcbmltcG9ydCB7IEpvYiB9IGZyb20gJy4vdHlwZXMvam9iJztcclxuaW1wb3J0IHsgSm9iTGlzdCB9IGZyb20gJy4vdHlwZXMvam9iLWxpc3QnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSm9icyBleHRlbmRzIFNjb3BlQ29udGV4dCB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IFNjb3BlO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBKb2JbXSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRKb2JzKCk6IFByb21pc2U8Sm9iW10+IHtcclxuICAgIHJldHVybiAoKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2pvYnMnKSkgYXMgSm9iTGlzdCkuaXRlbXM7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoam9iSWQ6IHN0cmluZyk6IFByb21pc2U8Sm9iPiB7XHJcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2pvYnMvJHtqb2JJZH1gKSkgYXMgSm9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tICcuLi8uLi9zY29wZSc7XHJcbmltcG9ydCBTY29wZSBmcm9tICcuL3Njb3BlJztcclxuaW1wb3J0IHsgQ29udGludW91c1BpeGVsbWFwIH0gZnJvbSAnLi90eXBlcy9jb250aW51b3VzLXBpeGVsbWFwJztcclxuaW1wb3J0IHsgRGlzY3JldGVQaXhlbG1hcCB9IGZyb20gJy4vdHlwZXMvZGlzY3JldGUtcGl4ZWxtYXAnO1xyXG5pbXBvcnQgeyBJZE9iamVjdCB9IGZyb20gJy4vdHlwZXMvaWQtb2JqZWN0JztcclxuaW1wb3J0IHsgTm9taW5hbFBpeGVsbWFwIH0gZnJvbSAnLi90eXBlcy9ub21pbmFsLXBpeGVsbWFwJztcclxuaW1wb3J0IHsgUGl4ZWxtYXBMaXN0IH0gZnJvbSAnLi90eXBlcy9waXhlbG1hcC1saXN0JztcclxuaW1wb3J0IHsgUGl4ZWxtYXBRdWVyeSB9IGZyb20gJy4vdHlwZXMvcGl4ZWxtYXAtcXVlcnknO1xyXG5cclxudHlwZSBQaXhlbG1hcCA9IENvbnRpbnVvdXNQaXhlbG1hcCB8IERpc2NyZXRlUGl4ZWxtYXAgfCBOb21pbmFsUGl4ZWxtYXA7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQaXhlbG1hcHMgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZTtcclxuICBwcm90ZWN0ZWQgZGF0YTogUGl4ZWxtYXAgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogU2NvcGUpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0KHBpeGVsbWFwSWQ6IHN0cmluZyk6IFByb21pc2U8UGl4ZWxtYXA+IHtcclxuICAgIHJldHVybiAoYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL3BpeGVsbWFwcy8ke3BpeGVsbWFwSWR9YCxcclxuICAgICkpIGFzIFBpeGVsbWFwO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcG9zdChcclxuICAgIHBpeGVsbWFwczogUGl4ZWxtYXBzLFxyXG4gICk6IFByb21pc2U8XHJcbiAgICBDb250aW51b3VzUGl4ZWxtYXAgfCBEaXNjcmV0ZVBpeGVsbWFwIHwgTm9taW5hbFBpeGVsbWFwIHwgUGl4ZWxtYXBMaXN0XHJcbiAgPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvcGl4ZWxtYXBzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogcGl4ZWxtYXBzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGUocGl4ZWxtYXBJZDogc3RyaW5nKTogUHJvbWlzZTxJZE9iamVjdD4ge1xyXG4gICAgcmV0dXJuIChhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9waXhlbG1hcHMvJHtwaXhlbG1hcElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgIH0pKSBhcyBJZE9iamVjdDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHF1ZXJ5KHF1ZXJ5OiBQaXhlbG1hcFF1ZXJ5KTogUHJvbWlzZTxQaXhlbG1hcFtdPiB7XHJcbiAgICBjb25zdCBxdWVyeVJlc3VsdCA9IChhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9waXhlbG1hcHMvcXVlcnlgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgfSkpIGFzIFBpeGVsbWFwTGlzdDtcclxuICAgIHJldHVybiBxdWVyeVJlc3VsdC5pdGVtcztcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFRpbGUoXHJcbiAgICBwaXhlbG1hcElkOiBzdHJpbmcsXHJcbiAgICBsZXZlbDogbnVtYmVyLFxyXG4gICAgdGlsZVg6IG51bWJlcixcclxuICAgIHRpbGVZOiBudW1iZXIsXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICBjb25zdCB0aWxlID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL3BpeGVsbWFwcy8ke3BpeGVsbWFwSWR9L2xldmVsLyR7bGV2ZWx9L3Bvc2l0aW9uLyR7dGlsZVh9LyR7dGlsZVl9L2RhdGFgLFxyXG4gICAgICB7XHJcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRpbGU7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGxvYWRUaWxlKFxyXG4gICAgcGl4ZWxtYXBJZDogc3RyaW5nLFxyXG4gICAgbGV2ZWw6IG51bWJlcixcclxuICAgIHRpbGVYOiBudW1iZXIsXHJcbiAgICB0aWxlWTogbnVtYmVyLFxyXG4gICAgdGlsZTogQmxvYixcclxuICApOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL3BpeGVsbWFwcy8ke3BpeGVsbWFwSWR9L2xldmVsLyR7bGV2ZWx9L3Bvc2l0aW9uLyR7dGlsZVh9LyR7dGlsZVl9L2RhdGFgLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBib2R5OiB0aWxlLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVUaWxlKFxyXG4gICAgcGl4ZWxtYXBJZDogc3RyaW5nLFxyXG4gICAgbGV2ZWw6IG51bWJlcixcclxuICAgIHRpbGVYOiBudW1iZXIsXHJcbiAgICB0aWxlWTogbnVtYmVyLFxyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vJHt0aWxlWH0vJHt0aWxlWX0vZGF0YWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBidWxrR2V0VGlsZShcclxuICAgIHBpeGVsbWFwSWQ6IHN0cmluZyxcclxuICAgIGxldmVsOiBudW1iZXIsXHJcbiAgICBzdGFydFg6IG51bWJlcixcclxuICAgIHN0YXJ0WTogbnVtYmVyLFxyXG4gICAgZW5kWDogbnVtYmVyLFxyXG4gICAgZW5kWTogbnVtYmVyLFxyXG4gICk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgY29uc3QgdGlsZXMgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vc3RhcnQvJHtzdGFydFh9LyR7c3RhcnRZfS9lbmQvJHtlbmRYfS8ke2VuZFl9L2RhdGFgLFxyXG4gICAgICB7XHJcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRpbGVzO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgYnVsa1VwbG9hZFRpbGUoXHJcbiAgICBwaXhlbG1hcElkOiBzdHJpbmcsXHJcbiAgICBsZXZlbDogbnVtYmVyLFxyXG4gICAgc3RhcnRYOiBudW1iZXIsXHJcbiAgICBzdGFydFk6IG51bWJlcixcclxuICAgIGVuZFg6IG51bWJlcixcclxuICAgIGVuZFk6IG51bWJlcixcclxuICAgIHRpbGVzOiBCbG9iLFxyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vc3RhcnQvJHtzdGFydFh9LyR7c3RhcnRZfS9lbmQvJHtlbmRYfS8ke2VuZFl9L2RhdGFgLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBib2R5OiB0aWxlcyxcclxuICAgICAgfSxcclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUFQSSB9IGZyb20gJy4uLy4uL3Njb3BlJztcclxuaW1wb3J0IHsgUmF3QVBJLCBSYXdPcHRpb25zIH0gZnJvbSAnLi4vLi4vYmFzZSc7XHJcbmltcG9ydCB7IFNjb3BlVG9rZW5BbmRTY29wZUlkIH0gZnJvbSAnLi4vcm9vdC90eXBlcy9zY29wZS10b2tlbi1hbmQtc2NvcGUtaWQnO1xyXG5pbXBvcnQgeyBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbiB9IGZyb20gJy4uL3Jvb3QvdHlwZXMvd29ya2JlbmNoLXNlcnZpY2UtYXBpLXYtMy1jdXN0b20tbW9kZWxzLWV4YW1pbmF0aW9ucy1leGFtaW5hdGlvbic7XHJcbmltcG9ydCBSb290IGZyb20gJy4uL3Jvb3Qvcm9vdCc7XHJcbmltcG9ydCBTdG9yYWdlIGZyb20gJy4vc3RvcmFnZSc7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCxcclxuICBwYXJzZUp3dFRva2VuLFxyXG4gIFNjb3BlVG9rZW4sXHJcbn0gZnJvbSAnLi4vLi4vdXRpbHMnO1xyXG5pbXBvcnQgQW5ub3RhdGlvbnMgZnJvbSAnLi9hbm5vdGF0aW9ucyc7XHJcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tICcuL2NvbGxlY3Rpb25zJztcclxuaW1wb3J0IEpvYnMgZnJvbSAnLi9qb2JzJztcclxuaW1wb3J0IFBpeGVsbWFwcyBmcm9tIFwiLi9waXhlbG1hcHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjb3BlIGV4dGVuZHMgU2NvcGVBUEkge1xyXG4gIHN0YXRpYyBhcGlQYXRoID0gJy92My9zY29wZXMnO1xyXG5cclxuICAvLyBJbnRlcmZhY2VcclxuICByYXc6IFJhd0FQSTtcclxuICBjb250ZXh0OiBSb290O1xyXG4gIHN0b3JhZ2U6IFN0b3JhZ2U7XHJcbiAgYW5ub3RhdGlvbnM6IEFubm90YXRpb25zO1xyXG4gIGNvbGxlY3Rpb25zOiBDb2xsZWN0aW9ucztcclxuICBqb2JzOiBKb2JzO1xyXG4gIHBpeGVsbWFwczogUGl4ZWxtYXBzO1xyXG5cclxuICAvLyBBZGRpdGlvbmFsXHJcbiAgc2NvcGVDb250ZXh0OiBTY29wZVRva2VuQW5kU2NvcGVJZCB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgX2RlZmF1bHRFeGFtaW5hdGlvbklkOiBzdHJpbmcgPSAnJztcclxuICBwcml2YXRlIF90b2tlblJlZmV0Y2hJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgYWN0aXZlRXhhbWluYXRpb25JZDogc3RyaW5nID0gJyc7XHJcbiAgYWN0aXZlQ2FzZUlkOiBzdHJpbmcgPSAnJztcclxuICBhY3RpdmVBcHBJZDogc3RyaW5nID0gJyc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJvb3QpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgdGhpcy5yYXcgPSBuZXcgUmF3QVBJKHRoaXMuY29udGV4dC5vcHRpb25zLmFwaVVybCArIFNjb3BlLmFwaVBhdGgpO1xyXG4gICAgdGhpcy5zdG9yYWdlID0gbmV3IFN0b3JhZ2UodGhpcyk7XHJcbiAgICB0aGlzLmFubm90YXRpb25zID0gbmV3IEFubm90YXRpb25zKHRoaXMpO1xyXG4gICAgdGhpcy5jb2xsZWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9ucyh0aGlzKTtcclxuICAgIHRoaXMuam9icyA9IG5ldyBKb2JzKHRoaXMpO1xyXG4gICAgdGhpcy5waXhlbG1hcHMgPSBuZXcgUGl4ZWxtYXBzKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXNlKFxyXG4gICAgY2FzZUlkOiBzdHJpbmcsXHJcbiAgICBhcHBJZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxyXG4gICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgLy90b2RvIGNvbnNpZGVyIGNhY2hpbmdcclxuXHJcbiAgICB0aGlzLnJlcXVpcmVzKCdyb290Ojp1c2VySWQnLCB0aGlzLmNvbnRleHQudXNlcklkKTtcclxuXHJcbiAgICBjb25zdCBmaW5kRXhhbWluYXRpb24gPSBhc3luYyAoXHJcbiAgICAgIGFwcElkOiBzdHJpbmcsXHJcbiAgICApOiBQcm9taXNlPFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uPiA9PiB7XHJcbiAgICAgIGxldCBleGFtaW5hdGlvbnMgPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLnF1ZXJ5KHtcclxuICAgICAgICBhcHBzOiBbYXBwSWRdLFxyXG4gICAgICAgIGNyZWF0b3JzOiBbdGhpcy5jb250ZXh0LnVzZXJJZF0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoZXhhbWluYXRpb25zLml0ZW1fY291bnQgPiAwKSB7XHJcbiAgICAgICAgbGV0IGV4YW1pbmF0aW9uID0gZXhhbWluYXRpb25zLml0ZW1zLmZpbmQoKGV4KSA9PiBleC5zdGF0ZSA9PT0gJ09QRU4nKTtcclxuICAgICAgICBpZiAoZXhhbWluYXRpb24pIHJldHVybiBleGFtaW5hdGlvbjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5jcmVhdGUoY2FzZUlkLCBhcHBJZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBleGFtaW5hdGlvbjtcclxuICAgIGlmIChhcHBJZCkge1xyXG4gICAgICBleGFtaW5hdGlvbiA9IGF3YWl0IGZpbmRFeGFtaW5hdGlvbihhcHBJZCk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2RlZmF1bHRFeGFtaW5hdGlvbklkKSB7XHJcbiAgICAgIGV4YW1pbmF0aW9uID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5nZXQoXHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdEV4YW1pbmF0aW9uSWQsXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFleGFtaW5hdGlvbikge1xyXG4gICAgICBsZXQgYXBwID0gYXdhaXQgdGhpcy5jb250ZXh0LmFwcHMuZGVmYXVsdCgpO1xyXG4gICAgICBleGFtaW5hdGlvbiA9IGF3YWl0IGZpbmRFeGFtaW5hdGlvbihhcHAuYXBwX2lkKTtcclxuICAgICAgdGhpcy5fZGVmYXVsdEV4YW1pbmF0aW9uSWQgPSBleGFtaW5hdGlvbi5pZDtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB0aGlzLmZyb20oZXhhbWluYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHNjb3BlVG9rZW4oKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLnNjb3BlQ29udGV4dD8uYWNjZXNzX3Rva2VuO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnJvbShcclxuICAgIGV4YW1pbmF0aW9uOiBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbixcclxuICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMucmVzZXQoKTtcclxuICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICB0aGlzLmFjdGl2ZUNhc2VJZCA9IGV4YW1pbmF0aW9uLmNhc2VfaWQ7XHJcbiAgICB0aGlzLmFjdGl2ZUFwcElkID0gZXhhbWluYXRpb24uYXBwX2lkO1xyXG4gICAgdGhpcy5hY3RpdmVFeGFtaW5hdGlvbklkID0gZXhhbWluYXRpb24uaWQ7XHJcbiAgICBjb25zdCB0b2tlbiA9IHBhcnNlSnd0VG9rZW4odGhpcy5zY29wZUNvbnRleHQuYWNjZXNzX3Rva2VuKSBhcyBTY29wZVRva2VuO1xyXG4gICAgY29uc3QgdGltZW91dCA9IGdldEp3dFRva2VuRXhwaXJlc1RpbWVvdXQodG9rZW4pO1xyXG4gICAgdGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICB9LCB0aW1lb3V0KTtcclxuICAgIHRoaXMucmFpc2VFdmVudCgnaW5pdCcpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmFjdGl2ZUV4YW1pbmF0aW9uSWQgPSAnJztcclxuICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gbnVsbDtcclxuICAgIGlmICh0aGlzLl90b2tlblJlZmV0Y2hJbnRlcnZhbCkge1xyXG4gICAgICBjbGVhckludGVydmFsKHRoaXMuX3Rva2VuUmVmZXRjaEludGVydmFsKTtcclxuICAgICAgdGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwgPSBudWxsO1xyXG4gICAgICAvL3RvZG8gY2xlYXIgYWxsIGNhY2hlZCBkYXRhXHJcbiAgICAgIHRoaXMucmFpc2VFdmVudCgncmVzZXQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHJhd1F1ZXJ5KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM/OiBSYXdPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHRoaXMucmVxdWlyZXMoJ3RoaXMuc2NvcGVDb250ZXh0JywgdGhpcy5zY29wZUNvbnRleHQpO1xyXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XHJcbiAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9XHJcbiAgICAgIGBCZWFyZXIgJHt0aGlzLnNjb3BlQ29udGV4dD8uYWNjZXNzX3Rva2VufWA7XHJcbiAgICBpZiAoZW5kcG9pbnQgJiYgIWVuZHBvaW50LnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICBlbmRwb2ludCA9IGAvJHtlbmRwb2ludH1gO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJhdy5odHRwKFxyXG4gICAgICAgIGAvJHt0aGlzLnNjb3BlQ29udGV4dD8uc2NvcGVfaWR9JHtlbmRwb2ludH1gLFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGlmIChlLnN0YXR1c0NvZGUgPT09IDQwMSkge1xyXG4gICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShcclxuICAgICAgICAgIHRoaXMuYWN0aXZlRXhhbWluYXRpb25JZCxcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJhdy5odHRwKFxyXG4gICAgICAgICAgYC8ke3RoaXMuc2NvcGVDb250ZXh0LnNjb3BlX2lkfSR7ZW5kcG9pbnR9YCxcclxuICAgICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuZXhwb3J0IGVudW0gR2xvYmFsRGF0YUNyZWF0b3JUeXBlIHtcclxuICBVU0VSID0gJ3VzZXInLFxyXG4gIFNDT1BFID0gJ3Njb3BlJyxcclxuICBKT0IgPSAnam9iJyxcclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZSAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG5leHBvcnQgZW51bSBHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSB7XHJcbiAgQU5OT1RBVElPTiA9ICdhbm5vdGF0aW9uJyxcclxuICBDT0xMRUNUSU9OID0gJ2NvbGxlY3Rpb24nLFxyXG4gIENMQVNTID0gJ2NsYXNzJyxcclxuICBQUklNSVRJVkUgPSAncHJpbWl0aXZlJyxcclxuICBXU0kgPSAnd3NpJyxcclxuICBDQVNFID0gJ2Nhc2UnLFxyXG4gIFVTRVIgPSAndXNlcicsXHJcbiAgU0NPUEUgPSAnc2NvcGUnLFxyXG4gIEpPQiA9ICdqb2InLFxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlICovXHJcbi8qIGVzbGludC1kaXNhYmxlICovXHJcbmV4cG9ydCBlbnVtIFRlbXBsYXRlVHlwZSB7XHJcbiAgQmFja2dyb3VuZCA9ICdiYWNrZ3JvdW5kJyxcclxuICBQYXJhbXMgPSAncGFyYW1zJyxcclxuICBTaGFkZXIgPSAnc2hhZGVyJyxcclxuICBWaXN1YWxpemF0aW9uID0gJ3Zpc3VhbGl6YXRpb24nLFxyXG59XHJcbiIsImltcG9ydCB7IFJvb3RBUEksIFJvb3RDb250ZXh0IH0gZnJvbSAnLi4vLi4vcm9vdCc7XHJcbmltcG9ydCBSb290IGZyb20gJy4vcm9vdCc7XHJcbmltcG9ydCB7IFNsaWRlIH0gZnJvbSAnLi90eXBlcy9zbGlkZSc7XHJcbmltcG9ydCB7IFNsaWRlSW5mbyB9IGZyb20gJy4vdHlwZXMvc2xpZGUtaW5mbyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IFNsaWRlSW5mbyB8IG51bGwgPSBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNsaWRlSW5mbyhzbGlkZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlSW5mbz4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3NsaWRlcy8ke3NsaWRlSWR9L2luZm9gKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNsaWRlVGh1bWJuYWlsKFxyXG4gICAgc2xpZGVJZDogc3RyaW5nLFxyXG4gICAgbWF4V2lkdGg6IG51bWJlcixcclxuICAgIG1heEhlaWdodDogbnVtYmVyLFxyXG4gICAgZm9ybWF0Pzogc3RyaW5nLFxyXG4gICk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9zbGlkZXMvJHtzbGlkZUlkfS90aHVtYm5haWwvbWF4X3NpemUvJHttYXhXaWR0aH0vJHttYXhIZWlnaHR9YCxcclxuICAgICAge1xyXG4gICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICBpbWFnZV9mb3JtYXQ6IGZvcm1hdCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNsaWRlTGFiZWwoXHJcbiAgICBzbGlkZUlkOiBzdHJpbmcsXHJcbiAgICBtYXhXaWR0aDogbnVtYmVyLFxyXG4gICAgbWF4SGVpZ2h0OiBudW1iZXIsXHJcbiAgICBmb3JtYXQ/OiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL3NsaWRlcy8ke3NsaWRlSWR9L2xhYmVsL21heF9zaXplLyR7bWF4V2lkdGh9LyR7bWF4SGVpZ2h0fWAsXHJcbiAgICAgIHtcclxuICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgaW1hZ2VfZm9ybWF0OiBmb3JtYXQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJyxcclxuICAgICAgfSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkVGlsZShcclxuICAgIHNsaWRlSWQ6IHN0cmluZyxcclxuICAgIGxldmVsOiBudW1iZXIsXHJcbiAgICB4OiBudW1iZXIsXHJcbiAgICB5OiBudW1iZXIsXHJcbiAgICBmb3JtYXQ/OiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL3NsaWRlcy8ke3NsaWRlSWR9L3RpbGUvbGV2ZWwvJHtsZXZlbH0vdGlsZS8ke3h9LyR7eX1gLFxyXG4gICAgICB7XHJcbiAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgIGltYWdlX2Zvcm1hdDogZm9ybWF0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tICcuLi9yYXRpb25haS9nbG9iYWwtc3RvcmFnZSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tICcuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1SZWZlcmVuY2VUeXBlIH0gZnJvbSAnLi4vcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGUnO1xyXG5pbXBvcnQgeyBNYXNrTWV0YWRhdGEgfSBmcm9tICcuL3R5cGVzL21hc2stbWV0YWRhdGEnO1xyXG5pbXBvcnQgeyBTaGFkZXIsIFNsaWRlTWV0YWRhdGEgfSBmcm9tICcuL3R5cGVzL3NsaWRlLW1ldGFkYXRhJztcclxuaW1wb3J0IHsgVGVtcGxhdGVUeXBlIH0gZnJvbSAnLi90eXBlcy90ZW1wbGF0ZS10eXBlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdzaU1ldGFkYXRhIHtcclxuICBwcm90ZWN0ZWQgY29udGV4dDogR2xvYmFsU3RvcmFnZTtcclxuICBwcm90ZWN0ZWQgZGF0YTogR2xvYmFsSXRlbSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBwcml2YXRlIGRlZmF1bHRTbGlkZU1ldGFkYXRhOiBTbGlkZU1ldGFkYXRhID0geyB2aXN1YWxpemF0aW9uOiB7fSB9O1xyXG4gIHByaXZhdGUgZGVmYXVsdE1hc2tNZXRhZGF0YTogTWFza01ldGFkYXRhID0ge307XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICAvLyBTbGlkZVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBnbG9iYWwgaXRlbSBjb250YWluaW5nIG1ldGFkYXRhIG9mIFdTSS5cclxuICAgKiBAcGFyYW0gd3NpSWQgSUQgb2YgV1NJXHJcbiAgICogQHBhcmFtIGlzU2xpZGUgU3BlY2lmeSBpZiBXU0kgaXMgYSBzbGlkZSBvciBhIG1hc2tcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdldFdzaU1ldGFkYXRhSXRlbShcclxuICAgIHdzaUlkOiBzdHJpbmcsXHJcbiAgICBpc1NsaWRlOiBib29sZWFuID0gdHJ1ZSxcclxuICApOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgIGxldCBtZXRhZGF0YSA9IChhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoeyByZWZlcmVuY2VzOiBbd3NpSWRdIH0pKS5maW5kKFxyXG4gICAgICAocCkgPT4gcC5kYXRhX3R5cGUgPT09IGAke2lzU2xpZGUgPyAnc2xpZGUnIDogJ21hc2snfV9tZXRhZGF0YWAsXHJcbiAgICApO1xyXG4gICAgaWYgKCFtZXRhZGF0YSkge1xyXG4gICAgICBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuY3JlYXRlV3NpTWV0YWRhdGFJdGVtKFxyXG4gICAgICAgIHdzaUlkLFxyXG4gICAgICAgIGlzU2xpZGUgPyB0aGlzLmRlZmF1bHRTbGlkZU1ldGFkYXRhIDogdGhpcy5kZWZhdWx0TWFza01ldGFkYXRhLFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1ldGFkYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGdsb2JhbCBpdGVtIGNvbnRhaW5pbmcgbWV0YWRhdGEgb2YgV1NJLlxyXG4gICAqIEBwYXJhbSB3c2lJZCBJRCBvZiBXU0lcclxuICAgKiBAcGFyYW0gdmFsdWUgTWV0YWRhdGEgb2YgV1NJXHJcbiAgICogQHBhcmFtIGlzU2xpZGUgU3BlY2lmeSBpZiBXU0kgaXMgYSBzbGlkZSBvciBhIG1hc2tcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVdzaU1ldGFkYXRhSXRlbShcclxuICAgIHdzaUlkOiBzdHJpbmcsXHJcbiAgICB2YWx1ZTogYW55LFxyXG4gICAgaXNTbGlkZTogYm9vbGVhbiA9IHRydWUsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmNyZWF0ZVZhbHVlKFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgYE1ldGFkYXRhIG9mICR7aXNTbGlkZSA/ICdzbGlkZScgOiAnbWFzayd9ICR7d3NpSWR9YCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB3c2lJZCxcclxuICAgICAgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUuV1NJLFxyXG4gICAgICBgJHtpc1NsaWRlID8gJ3NsaWRlJyA6ICdtYXNrJ31fbWV0YWRhdGFgLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBtZXRhZGF0YSBvZiBzbGlkZSBXU0kuXHJcbiAgICogQHBhcmFtIHNsaWRlSWQgSUQgb2Ygc2xpZGUgV1NJXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0U2xpZGVNZXRhZGF0YShzbGlkZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlTWV0YWRhdGE+IHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKChhd2FpdCB0aGlzLmdldFdzaU1ldGFkYXRhSXRlbShzbGlkZUlkKSkudmFsdWUgYXMgc3RyaW5nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBtZXRhZGF0YSBvZiBzbGlkZSBXU0kuXHJcbiAgICogQHBhcmFtIHNsaWRlSWQgSUQgb2Ygc2xpZGUgV1NJXHJcbiAgICogQHBhcmFtIHZhbHVlIE5ldyBtZXRhZGF0YSBvZiBXU0lcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVTbGlkZU1ldGFkYXRhKFxyXG4gICAgc2xpZGVJZDogc3RyaW5nLFxyXG4gICAgdmFsdWU6IFNsaWRlTWV0YWRhdGEsXHJcbiAgKTogUHJvbWlzZTxTbGlkZU1ldGFkYXRhIHwgZmFsc2U+IHtcclxuICAgIGNvbnN0IG1ldGFkYXRhSXRlbSA9IGF3YWl0IHRoaXMuZ2V0V3NpTWV0YWRhdGFJdGVtKHNsaWRlSWQpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXBkYXRlZEl0ZW0gPSBhd2FpdCB0aGlzLmNvbnRleHQudXBkYXRlKG1ldGFkYXRhSXRlbS5pZCwge1xyXG4gICAgICAgIC4uLm1ldGFkYXRhSXRlbSxcclxuICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkodmFsdWUpLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodXBkYXRlZEl0ZW0udmFsdWUpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgbWV0aG9kIGdlbmVyYXRpbmcgc2hhZGVyIGNvbmZpZyBmb3IgdXNlci1jcmVhdGVkIHhPcGF0IHZpc3VhbGlzYXRpb25zXHJcbiAgICogQHBhcmFtIHNoYWRlcnMgQXJyYXkgb2Ygc2hhZGVyc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgZ2V0U2hhZGVyc0NvbmZpZyhzaGFkZXJzOiBTaGFkZXJbXSk6IFByb21pc2U8b2JqZWN0PiB7XHJcbiAgICBjb25zdCBzaGFkZXJzQ29uZmlnID0ge307XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3Qgc2hhZGVyVGVtcCA9IGF3YWl0IHRoaXMuY29udGV4dC52aXNUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoXHJcbiAgICAgICAgVGVtcGxhdGVUeXBlLlNoYWRlcixcclxuICAgICAgICBzaGFkZXJzW2ldLnNoYWRlclRlbXBsYXRlLFxyXG4gICAgICApO1xyXG4gICAgICBzaGFkZXJzQ29uZmlnW3NoYWRlcnNbaV0uaWRdID0ge1xyXG4gICAgICAgIC4uLnNoYWRlclRlbXAsXHJcbiAgICAgICAgbmFtZTogc2hhZGVyc1tpXS5uYW1lIHx8IHNoYWRlcnNbaV0uaWQsXHJcbiAgICAgICAgZGF0YVJlZmVyZW5jZXM6IHNoYWRlcnNbaV0uZGF0YVJlZnMsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2hhZGVyc0NvbmZpZztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHVzZXItY3JlYXRlZCB4T3BhdCB2aXN1YWxpc2F0aW9ucyBvZiBhIHNsaWRlXHJcbiAgICogQHBhcmFtIHNsaWRlSWQgSUQgb2YgYSBzbGlkZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFZpc3VhbGl6YXRpb25zKHNsaWRlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBzbGlkZVZpcyA9IChhd2FpdCB0aGlzLmdldFNsaWRlTWV0YWRhdGEoc2xpZGVJZCkpLnZpc3VhbGl6YXRpb247XHJcbiAgICBjb25zdCB2aXN1YWxpemF0aW9ucyA9IHtcclxuICAgICAgcGFyYW1zOiBzbGlkZVZpcy5wYXJhbXNUZW1wbGF0ZVxyXG4gICAgICAgID8gKGF3YWl0IHRoaXMuY29udGV4dC52aXNUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoXHJcbiAgICAgICAgICAgIFRlbXBsYXRlVHlwZS5QYXJhbXMsXHJcbiAgICAgICAgICAgIHNsaWRlVmlzLnBhcmFtc1RlbXBsYXRlLFxyXG4gICAgICAgICAgKSkgfHwgdW5kZWZpbmVkXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgIGRhdGE6IHNsaWRlVmlzLmRhdGEsXHJcbiAgICAgIGJhY2tncm91bmQ6IHtcclxuICAgICAgICAuLi4oc2xpZGVWaXMuYmFja2dyb3VuZFxyXG4gICAgICAgICAgPyBhd2FpdCB0aGlzLmNvbnRleHQudmlzVGVtcGxhdGVzLmdldFRlbXBsYXRlKFxyXG4gICAgICAgICAgICAgIFRlbXBsYXRlVHlwZS5CYWNrZ3JvdW5kLFxyXG4gICAgICAgICAgICAgIHNsaWRlVmlzLmJhY2tncm91bmQ/LnRlbXBsYXRlLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICA6IHt9KSxcclxuICAgICAgICBkYXRhOiBzbGlkZVZpcy5iYWNrZ3JvdW5kICYmIHNsaWRlVmlzLmJhY2tncm91bmQuZGF0YVJlZixcclxuICAgICAgfSxcclxuICAgICAgdmlzdWFsaXphdGlvbnM6XHJcbiAgICAgICAgc2xpZGVWaXMudmlzdWFsaXphdGlvbnMgJiZcclxuICAgICAgICAoYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICBzbGlkZVZpcy52aXN1YWxpemF0aW9ucy5tYXAoYXN5bmMgKHZpcykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLmNvbnRleHQudmlzVGVtcGxhdGVzLmdldFRlbXBsYXRlKFxyXG4gICAgICAgICAgICAgICAgVGVtcGxhdGVUeXBlLlZpc3VhbGl6YXRpb24sXHJcbiAgICAgICAgICAgICAgICB2aXMudmlzVGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgKSksXHJcbiAgICAgICAgICAgICAgbmFtZTogdmlzLm5hbWUsXHJcbiAgICAgICAgICAgICAgc2hhZGVyczogYXdhaXQgdGhpcy5nZXRTaGFkZXJzQ29uZmlnKHZpcy5zaGFkZXJzKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICkpLFxyXG4gICAgfTtcclxuICAgIHJldHVybiB2aXN1YWxpemF0aW9ucztcclxuICB9XHJcblxyXG4gIC8vIE1BU0tcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IG1ldGFkYXRhIG9mIG1hc2sgV1NJLlxyXG4gICAqIEBwYXJhbSBzbGlkZUlkIElEIG9mIG1hc2sgV1NJXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0TWFza01ldGFkYXRhKG1hc2tJZDogc3RyaW5nKTogUHJvbWlzZTxNYXNrTWV0YWRhdGE+IHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKFxyXG4gICAgICAoYXdhaXQgdGhpcy5nZXRXc2lNZXRhZGF0YUl0ZW0obWFza0lkLCBmYWxzZSkpLnZhbHVlIGFzIHN0cmluZyxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBHbG9iYWxTdG9yYWdlIGZyb20gJy4uL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlJztcclxuaW1wb3J0IHsgR2xvYmFsSXRlbSB9IGZyb20gJy4uL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtJztcclxuaW1wb3J0IHsgVGVtcGxhdGVUeXBlIH0gZnJvbSAnLi90eXBlcy90ZW1wbGF0ZS10eXBlJztcclxuXHJcbmNvbnN0IHRlbXBsYXRlc0dsb2JhbEl0ZW1EYXRhVHlwZSA9ICd2aXNfdGVtcGxhdGVzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpc3VhbGl6YXRpb25UZW1wbGF0ZXMge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBHbG9iYWxTdG9yYWdlO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBvYmplY3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogR2xvYmFsU3RvcmFnZSkge1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGdsb2JhbCBpdGVtIGNvbnRhaW5pbmcgdGVtcGxhdGUuXHJcbiAgICogQHBhcmFtIHR5cGUgVHlwZSBvZiB0aGUgdGVtcGxhdGUgKGJhY2tncm91bmcsIHBhcmFtcywgc2hhZGVyLCB2aXN1YWxpemF0aW9uKVxyXG4gICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHRlbXBsYXRlXHJcbiAgICovXHJcbiAgYXN5bmMgZmV0Y2hUZW1wbGF0ZUl0ZW0oXHJcbiAgICB0eXBlOiBUZW1wbGF0ZVR5cGUsXHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtIHwgdW5kZWZpbmVkPiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoe1xyXG4gICAgICAgIHJlZmVyZW5jZXM6IFtudWxsXSxcclxuICAgICAgICBkYXRhX3R5cGVzOiBbYCR7dGVtcGxhdGVzR2xvYmFsSXRlbURhdGFUeXBlfV8ke3R5cGV9YF0sXHJcbiAgICAgIH0pXHJcbiAgICApLmZpbmQoKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PT0gbmFtZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCB0ZW1wbGF0ZS5cclxuICAgKiBAcGFyYW0gdHlwZSBUeXBlIG9mIHRoZSB0ZW1wbGF0ZSAoYmFja2dyb3VuZywgcGFyYW1zLCBzaGFkZXIsIHZpc3VhbGl6YXRpb24pXHJcbiAgICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgdGVtcGxhdGVcclxuICAgKi9cclxuICBhc3luYyBnZXRUZW1wbGF0ZSh0eXBlOiBUZW1wbGF0ZVR5cGUsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8b2JqZWN0IHwgZmFsc2U+IHtcclxuICAgIGNvbnN0IHRtcGwgPSBhd2FpdCB0aGlzLmZldGNoVGVtcGxhdGVJdGVtKHR5cGUsIG5hbWUpO1xyXG4gICAgaWYgKHRtcGwpIHtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UodG1wbC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgbmV3IHRlbXBsYXRlLlxyXG4gICAqIEBwYXJhbSB0eXBlIFR5cGUgb2YgdGhlIHRlbXBsYXRlIChiYWNrZ3JvdW5kLCBwYXJhbXMsIHNoYWRlciwgdmlzdWFsaXphdGlvbilcclxuICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSB0ZW1wbGF0ZVxyXG4gICAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSBvZiB0aGUgdGVtcGxhdGVcclxuICAgKi9cclxuICBhc3luYyBjcmVhdGVUZW1wbGF0ZShcclxuICAgIHR5cGU6IFRlbXBsYXRlVHlwZSxcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIHZhbHVlOiBvYmplY3QsXHJcbiAgKTogUHJvbWlzZTxvYmplY3QgfCBmYWxzZT4ge1xyXG4gICAgY29uc3QgZXhpc3RpbmdUbXBsID0gYXdhaXQgdGhpcy5mZXRjaFRlbXBsYXRlSXRlbSh0eXBlLCBuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ1RtcGwpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5jcmVhdGVWYWx1ZShcclxuICAgICAgdmFsdWUsXHJcbiAgICAgIGAke25hbWV9YCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgYCR7dGVtcGxhdGVzR2xvYmFsSXRlbURhdGFUeXBlfV8ke3R5cGV9YCxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWxldGUgdGVtcGxhdGUuXHJcbiAgICogQHBhcmFtIHR5cGUgVHlwZSBvZiB0aGUgdGVtcGxhdGUgKGJhY2tncm91bmcsIHBhcmFtcywgc2hhZGVyLCB2aXN1YWxpemF0aW9uKVxyXG4gICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHRlbXBsYXRlXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlVGVtcGxhdGUodHlwZTogVGVtcGxhdGVUeXBlLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nVG1wbCA9IGF3YWl0IHRoaXMuZmV0Y2hUZW1wbGF0ZUl0ZW0odHlwZSwgbmFtZSk7XHJcbiAgICBpZiAoIWV4aXN0aW5nVG1wbCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZGVsZXRlKGV4aXN0aW5nVG1wbC5pZCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSFRUUEVycm9yIH0gZnJvbSAnLi4vLi4vLi4vc3JjL2Jhc2UnO1xyXG5pbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tICcuLi9yYXRpb25haS9nbG9iYWwtc3RvcmFnZSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tICcuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbSc7XHJcbmltcG9ydCB7IEFubm90UHJlc2V0LCBBbm5vdFByZXNldE9iamVjdCB9IGZyb20gJy4vdHlwZXMvYW5ub3QtcHJlc2V0JztcclxuXHJcbnR5cGUgQW5ub3RQcmVzZXRHZXRSZXN1bHQgPSB7XHJcbiAgcHJlc2V0czogQW5ub3RQcmVzZXRbXTtcclxuICBsYXN0TW9kaWZpZWRBdDogbnVtYmVyO1xyXG59O1xyXG5cclxudHlwZSBBbm5vdFByZXNldFVwZGF0ZVJlc3VsdCA9IHtcclxuICBwcmVzZXRzOiBBbm5vdFByZXNldFtdO1xyXG4gIHN1Y2Nlc3NmdWxVcGRhdGU6IGJvb2xlYW47XHJcbiAgbGFzdE1vZGlmaWVkQXQ6IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFubm90UHJlc2V0cyB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2U7XHJcbiAgcHJvdGVjdGVkIGRhdGE6IEdsb2JhbEl0ZW0gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJvdGVjdGVkIHByZXNldERhdGFUeXBlOiBzdHJpbmcgPSAnYW5ub3RfcHJlc2V0cyc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb25maWd1cmUgQW5ub3RQcmVzZXRzIGNsYXNzIHdpdGggZGF0YSB0eXBlLiBEYXRhIHR5cGUgaXMgdXNlZCB0byBmaWx0ZXIgZ2xvYmFsIGl0ZW1zLlxyXG4gICAqIEBwYXJhbSBwcmVzZXREYXRhVHlwZSBEYXRhIHR5cGUgb2YgZ2xvYmFsIGl0ZW1zIHVzZWQgdG8gc3RvcmUgYW5ub3RhdGlvbiBwcmVzZXRzLlxyXG4gICAqL1xyXG4gIHVzZShwcmVzZXREYXRhVHlwZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLnByZXNldERhdGFUeXBlID0gcHJlc2V0RGF0YVR5cGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBnbG9iYWwgaXRlbSBjb250YWluaW5nIGFubm90YXRpb24gcHJlc2V0cyAob25seSBvbmUgc2hvdWxkIGV4aXN0KS5cclxuICAgKiBAcGFyYW0gZnJlc2ggRm9yY2UgZnJlc2ggZmV0Y2ggb2YgZ2xvYmFsIGl0ZW0sIG90aGVyd2lzZSBjYWNoZWQgdmVyc2lvbiBtaWdodCBiZSB1c2VkXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBnZXRQcmVzZXRzSXRlbShmcmVzaDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICBpZiAoIXRoaXMuZGF0YSB8fCBmcmVzaCkge1xyXG4gICAgICBsZXQgcHJlc2V0c0l0ZW0gPSAoXHJcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnF1ZXJ5KHtcclxuICAgICAgICAgIHJlZmVyZW5jZXM6IFtudWxsXSxcclxuICAgICAgICAgIGRhdGFfdHlwZXM6IFt0aGlzLnByZXNldERhdGFUeXBlXSxcclxuICAgICAgICB9KVxyXG4gICAgICApLmZpbmQoKGl0ZW0pID0+IHRydWUpO1xyXG4gICAgICBpZiAoIXByZXNldHNJdGVtKSB7XHJcbiAgICAgICAgcHJlc2V0c0l0ZW0gPSBhd2FpdCB0aGlzLmNyZWF0ZVByZXNldHNJdGVtKHsgcHJlc2V0czogW10gfSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kYXRhID0gcHJlc2V0c0l0ZW07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGdsb2JhbCBpdGVtIGNvbnRhaW5pbmcgYW5ub3RhdGlvbiBwcmVzZXRzIChvbmx5IG9uZSBzaG91bGQgZXhpc3QpLlxyXG4gICAqIEBwYXJhbSB2YWx1ZSBBbm5vdGF0aW9uIHByZXNldFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlUHJlc2V0c0l0ZW0oXHJcbiAgICB2YWx1ZTogQW5ub3RQcmVzZXRPYmplY3QsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmNyZWF0ZVZhbHVlKFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgYEdsb2JhbCBhbm5vdGF0aW9uIHByZXNldHNgLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICB0aGlzLnByZXNldERhdGFUeXBlLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbm5vdGF0aW9uIHByZXNldHMuXHJcbiAgICogQHBhcmFtIGZyZXNoIEZvcmNlIGZyZXNoIGZldGNoXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QW5ub3RQcmVzZXRzKGZyZXNoOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPEFubm90UHJlc2V0R2V0UmVzdWx0PiB7XHJcbiAgICBjb25zdCBwcmVzZXRJdGVtID0gYXdhaXQgdGhpcy5nZXRQcmVzZXRzSXRlbShmcmVzaCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcmVzZXRzOiAoSlNPTi5wYXJzZShwcmVzZXRJdGVtLnZhbHVlIGFzIHN0cmluZykgYXMgQW5ub3RQcmVzZXRPYmplY3QpXHJcbiAgICAgICAgLnByZXNldHMsXHJcbiAgICAgIGxhc3RNb2RpZmllZEF0OiBwcmVzZXRJdGVtLm1vZGlmaWVkX2F0LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byBtZXJnZSBhbm5vdGF0aW9uIHByZXNldHMgZHVyaW5nIHBhcmFsbGVsIHVwZGF0ZXMuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBtZXJnZVByZXNldHMoXHJcbiAgICBwcmltYXJ5QXJyOiBBbm5vdFByZXNldFtdLFxyXG4gICAgc2Vjb25kYXJ5QXJyOiBBbm5vdFByZXNldFtdLFxyXG4gICAgbG9jYWxWZXJzaW9uOiBudW1iZXIsXHJcbiAgKTogQW5ub3RQcmVzZXRbXSB7XHJcbiAgICBjb25zdCBuZXdBcnIgPSBbLi4ucHJpbWFyeUFycl07XHJcbiAgICAvLyBpdGVtIGZyb20gc2Vjb25kYXJ5IGFycmF5IGlzIHB1c2hlZCBvbmx5IGlmIGl0ZW0gd2l0aCB0aGUgc2FtZSBpZCBpcyBub3QgcHJlc2VudCBpbiBwcmltYXJ5IGFycmF5LCBhbmQgY3JlYXRlZEF0IGRhdGUgaXMgYmlnZ2VyIHRoYW4gbG9jYWxWZXJzaW9uIGRhdGUsIG1lYW5pbmcgaXRlbSBpcyBuZXdcclxuICAgIHNlY29uZGFyeUFyci5mb3JFYWNoKChzZWNJdGVtKSA9PlxyXG4gICAgICBuZXdBcnIuc29tZSgocHJpbUl0ZW0pID0+IHByaW1JdGVtLmlkID09PSBzZWNJdGVtLmlkKSB8fFxyXG4gICAgICAhc2VjSXRlbS5jcmVhdGVkQXQgfHxcclxuICAgICAgc2VjSXRlbS5jcmVhdGVkQXQgPD0gbG9jYWxWZXJzaW9uXHJcbiAgICAgICAgPyBudWxsXHJcbiAgICAgICAgOiBuZXdBcnIucHVzaChzZWNJdGVtKSxcclxuICAgICk7XHJcbiAgICByZXR1cm4gbmV3QXJyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGFubm90YXRpb24gcHJlc2V0cy5cclxuICAgKiBAcGFyYW0gdmFsdWUgTmV3IHByZXNldHNcclxuICAgKiBAcGFyYW0gbG9jYWxWZXJzaW9uIExvY2FsIHZlcnNpb24gb2YgcHJlc2V0cyAobW9kaWZpZWRfYXQgYXR0cmlidXRlIG9mIGdsb2JhbCBpdGVtKVxyXG4gICAqIEBwYXJhbSBmYWlsT25QYXJhbGxlbFVwZGF0ZSBGb3JjZSB1cGRhdGUgZmFpbCBpZiBsb2NhbCB2ZXJzaW9uIGlzIG91dGRhdGVkXHJcbiAgICovXHJcbiAgYXN5bmMgdXBkYXRlQW5ub3RQcmVzZXRzKFxyXG4gICAgdmFsdWU6IEFubm90UHJlc2V0W10sXHJcbiAgICBsb2NhbFZlcnNpb246IG51bWJlcixcclxuICAgIGZhaWxPblBhcmFsbGVsVXBkYXRlOiBib29sZWFuID0gZmFsc2UsXHJcbiAgKTogUHJvbWlzZTxBbm5vdFByZXNldFVwZGF0ZVJlc3VsdD4ge1xyXG4gICAgLy8gZmV0Y2ggZnJlc2ggcHJlc2V0c1xyXG4gICAgY29uc3QgcmVtb3RlUHJlc2V0c0l0ZW0gPSBhd2FpdCB0aGlzLmdldFByZXNldHNJdGVtKHRydWUpO1xyXG4gICAgY29uc3QgcmVtb3RlUHJlc2V0cyA9IChcclxuICAgICAgSlNPTi5wYXJzZShyZW1vdGVQcmVzZXRzSXRlbS52YWx1ZSBhcyBzdHJpbmcpIGFzIEFubm90UHJlc2V0T2JqZWN0XHJcbiAgICApLnByZXNldHM7XHJcblxyXG4gICAgbGV0IGxvY2FsUHJlc2V0cyA9IHZhbHVlO1xyXG4gICAgbGV0IHN1Y2Nlc3NmdWxVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIGlmIChyZW1vdGVQcmVzZXRzSXRlbS5tb2RpZmllZF9hdCAhPT0gbG9jYWxWZXJzaW9uKSB7XHJcbiAgICAgIGlmIChmYWlsT25QYXJhbGxlbFVwZGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBwcmVzZXRzOiByZW1vdGVQcmVzZXRzLFxyXG4gICAgICAgICAgc3VjY2Vzc2Z1bFVwZGF0ZTogZmFsc2UsXHJcbiAgICAgICAgICBsYXN0TW9kaWZpZWRBdDogcmVtb3RlUHJlc2V0c0l0ZW0ubW9kaWZpZWRfYXQsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBsb2NhbFByZXNldHMgPSB0aGlzLm1lcmdlUHJlc2V0cyhcclxuICAgICAgICByZW1vdGVQcmVzZXRzLFxyXG4gICAgICAgIGxvY2FsUHJlc2V0cyxcclxuICAgICAgICBsb2NhbFZlcnNpb24sXHJcbiAgICAgICk7XHJcbiAgICAgIHN1Y2Nlc3NmdWxVcGRhdGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC51cGRhdGUocmVtb3RlUHJlc2V0c0l0ZW0uaWQsIHtcclxuICAgICAgICAuLi5yZW1vdGVQcmVzZXRzSXRlbSxcclxuICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoeyBwcmVzZXRzOiBsb2NhbFByZXNldHMgfSksXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCB1cGRhdGVkUHJlc2V0cyA9IChcclxuICAgICAgICBKU09OLnBhcnNlKHVwZGF0ZWRJdGVtLnZhbHVlKSBhcyBBbm5vdFByZXNldE9iamVjdFxyXG4gICAgICApLnByZXNldHM7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcHJlc2V0czogdXBkYXRlZFByZXNldHMsXHJcbiAgICAgICAgc3VjY2Vzc2Z1bFVwZGF0ZTogc3VjY2Vzc2Z1bFVwZGF0ZSxcclxuICAgICAgICBsYXN0TW9kaWZpZWRBdDogdXBkYXRlZEl0ZW0ubW9kaWZpZWRfYXQsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGlmICgoZSBhcyBIVFRQRXJyb3IpLnN0YXR1c0NvZGUgPT09IDQwOSkge1xyXG4gICAgICAgIGNvbnN0IHJldHJ5QXR0ZW1wdCA9IGF3YWl0IHRoaXMudXBkYXRlQW5ub3RQcmVzZXRzKFxyXG4gICAgICAgICAgbG9jYWxQcmVzZXRzLFxyXG4gICAgICAgICAgcmVtb3RlUHJlc2V0c0l0ZW0ubW9kaWZpZWRfYXQsXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4geyAuLi5yZXRyeUF0dGVtcHQsIHN1Y2Nlc3NmdWxVcGRhdGU6IHN1Y2Nlc3NmdWxVcGRhdGUgfTtcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGVsZXRlIGFubm90YXRpb24gcHJlc2V0cy5cclxuICAgKi9cclxuICBhc3luYyBkZWxldGVBbm5vdFByZXNldHMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBwcmVzZXRzSXRlbSA9IGF3YWl0IHRoaXMuZ2V0UHJlc2V0c0l0ZW0odHJ1ZSk7XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZGVsZXRlKHByZXNldHNJdGVtLmlkKTtcclxuICAgIHRoaXMuZGF0YSA9IG51bGw7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBHbG9iYWxTdG9yYWdlIGZyb20gJy4uL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlJztcclxuaW1wb3J0IHsgR2xvYmFsSXRlbSB9IGZyb20gJy4uL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtJztcclxuaW1wb3J0IHsgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUgfSBmcm9tICcuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbS1yZWZlcmVuY2UtdHlwZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKb2JDb25maWcge1xyXG4gIHByb3RlY3RlZCBjb250ZXh0OiBHbG9iYWxTdG9yYWdlO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBvYmplY3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJvdGVjdGVkIGNvbmZpZ0RhdGFUeXBlOiBzdHJpbmcgPSAnYXBwX2pvYl9jb25maWcnO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBHbG9iYWxTdG9yYWdlKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uZmlndXJlIEpvYkNvbmZpZyBjbGFzcyB3aXRoIGRhdGEgdHlwZS4gRGF0YSB0eXBlIGlzIHVzZWQgdG8gZmlsdGVyIGdsb2JhbCBpdGVtcy5cclxuICAgKiBAcGFyYW0gY29uZmlnRGF0YVR5cGUgRGF0YSB0eXBlIG9mIGdsb2JhbCBpdGVtcyB1c2VkIHRvIHN0b3JlIGpvYiBjb25maWdzLlxyXG4gICAqL1xyXG4gIHVzZShjb25maWdEYXRhVHlwZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLmNvbmZpZ0RhdGFUeXBlID0gY29uZmlnRGF0YVR5cGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBnbG9iYWwgaXRlbSBjb250YWluaW5nIGpvYiBjb25maWcgb2YgYW4gQXBwLlxyXG4gICAqIEBwYXJhbSBhcHBJZCBJRCBvZiBBcHBcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGZldGNoSm9iQ29uZmlnSXRlbShcclxuICAgIGFwcElkOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxHbG9iYWxJdGVtIHwgdW5kZWZpbmVkPiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoe1xyXG4gICAgICAgIHJlZmVyZW5jZXM6IFthcHBJZF0sXHJcbiAgICAgICAgZGF0YV90eXBlczogW3RoaXMuY29uZmlnRGF0YVR5cGVdLFxyXG4gICAgICB9KVxyXG4gICAgKS5maW5kKEJvb2xlYW4pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGpvYiBjb25maWcgb2YgYW4gQXBwLlxyXG4gICAqIEBwYXJhbSBhcHBJZCBJRCBvZiBBcHBcclxuICAgKi9cclxuICBhc3luYyBnZXRKb2JDb25maWcoYXBwSWQ6IHN0cmluZyk6IFByb21pc2U8b2JqZWN0IHwgZmFsc2U+IHtcclxuICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLmZldGNoSm9iQ29uZmlnSXRlbShhcHBJZCk7XHJcbiAgICBpZiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtLnZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBqb2IgY29uZmlnIG9mIGFuIEFwcC5cclxuICAgKiBAcGFyYW0gYXBwSWQgSUQgb2YgQXBwXHJcbiAgICogQHBhcmFtIHZhbHVlIEpvYiBjb25maWcgb2YgYW4gQXBwXHJcbiAgICovXHJcbiAgYXN5bmMgY3JlYXRlSm9iQ29uZmlnKGFwcElkOiBzdHJpbmcsIHZhbHVlOiBvYmplY3QpOiBQcm9taXNlPG9iamVjdCB8IGZhbHNlPiB7XHJcbiAgICBjb25zdCBleGlzdGluZ0NvbmZpZyA9IGF3YWl0IHRoaXMuZmV0Y2hKb2JDb25maWdJdGVtKGFwcElkKTtcclxuICAgIGlmIChleGlzdGluZ0NvbmZpZykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmNyZWF0ZVZhbHVlKFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgYEpvYiBjb25maWcgb2YgQXBwYCxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICBhcHBJZCxcclxuICAgICAgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUuSk9CLFxyXG4gICAgICB0aGlzLmNvbmZpZ0RhdGFUeXBlLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSBqb2IgY29uZmlnIG9mIGFuIEFwcC5cclxuICAgKiBAcGFyYW0gYXBwSWQgSUQgb2YgQXBwXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlSm9iQ29uZmlnKGFwcElkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGV4aXN0aW5nQ29uZmlnID0gYXdhaXQgdGhpcy5mZXRjaEpvYkNvbmZpZ0l0ZW0oYXBwSWQpO1xyXG4gICAgaWYgKCFleGlzdGluZ0NvbmZpZykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQuZGVsZXRlKGV4aXN0aW5nQ29uZmlnLmlkKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmF0aW9uQUkgZnJvbSAnLi9yYXRpb25haSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tICcuL3R5cGVzL2dsb2JhbC1pdGVtJztcclxuaW1wb3J0IHsgR2xvYmFsU3RvcmFnZVF1ZXJ5IH0gZnJvbSAnLi90eXBlcy9nbG9iYWwtc3RvcmFnZS1xdWVyeSc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1MaXN0IH0gZnJvbSAnLi90eXBlcy9nbG9iYWwtaXRlbS1saXN0JztcclxuaW1wb3J0IHsgUG9zdEdsb2JhbEl0ZW1zIH0gZnJvbSAnLi90eXBlcy9wb3N0LWdsb2JhbC1pdGVtcyc7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW1zIH0gZnJvbSAnLi90eXBlcy9nbG9iYWwtaXRlbXMnO1xyXG5pbXBvcnQgeyBHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSB9IGZyb20gJy4vdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGUnO1xyXG5pbXBvcnQgeyBQb3N0R2xvYmFsSXRlbSB9IGZyb20gJy4vdHlwZXMvcG9zdC1nbG9iYWwtaXRlbSc7XHJcbmltcG9ydCB7IEdsb2JhbERhdGFDcmVhdG9yVHlwZSB9IGZyb20gJy4vdHlwZXMvZ2xvYmFsLWRhdGEtY3JlYXRvci10eXBlJztcclxuaW1wb3J0IHsgUHV0R2xvYmFsSXRlbSB9IGZyb20gJy4vdHlwZXMvcHV0LWdsb2JhbC1pdGVtJztcclxuaW1wb3J0IFdzaU1ldGFkYXRhIGZyb20gJy4uL2V4dGVuc2lvbnMvd3NpLW1ldGFkYXRhJztcclxuaW1wb3J0IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXMgZnJvbSAnLi4vZXh0ZW5zaW9ucy92aXN1YWxpemF0aW9uLXRlbXBsYXRlcyc7XHJcbmltcG9ydCBBbm5vdFByZXNldHMgZnJvbSAnLi4vZXh0ZW5zaW9ucy9hbm5vdC1wcmVzZXRzJztcclxuaW1wb3J0IEpvYkNvbmZpZyBmcm9tICcuLi9leHRlbnNpb25zL2pvYi1jb25maWcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2xvYmFsU3RvcmFnZSB7XHJcbiAgcHJvdGVjdGVkIGNvbnRleHQ6IFJhdGlvbkFJO1xyXG4gIHByb3RlY3RlZCBkYXRhOiBHbG9iYWxJdGVtIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHdzaU1ldGFkYXRhOiBXc2lNZXRhZGF0YTtcclxuICB2aXNUZW1wbGF0ZXM6IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXM7XHJcbiAgYW5ub3RQcmVzZXRzOiBBbm5vdFByZXNldHM7XHJcbiAgam9iQ29uZmlnOiBKb2JDb25maWc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJhdGlvbkFJKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgdGhpcy53c2lNZXRhZGF0YSA9IG5ldyBXc2lNZXRhZGF0YSh0aGlzKTtcclxuICAgIHRoaXMudmlzVGVtcGxhdGVzID0gbmV3IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXModGhpcyk7XHJcbiAgICB0aGlzLmFubm90UHJlc2V0cyA9IG5ldyBBbm5vdFByZXNldHModGhpcyk7XHJcbiAgICB0aGlzLmpvYkNvbmZpZyA9IG5ldyBKb2JDb25maWcodGhpcyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXQoaXRlbUlkOiBzdHJpbmcpOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgIGNvbnN0IGdsb2JhbEl0ZW06IEdsb2JhbEl0ZW0gPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoXHJcbiAgICAgIGAvZ2xvYmFsLXN0b3JhZ2UvJHtpdGVtSWR9YCxcclxuICAgICk7XHJcbiAgICByZXR1cm4gZ2xvYmFsSXRlbTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFZhbHVlKGl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLmdldChpdGVtSWQpO1xyXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtLnZhbHVlKTtcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBpdGVtLnZhbHVlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcXVlcnkocXVlcnk6IEdsb2JhbFN0b3JhZ2VRdWVyeSk6IFByb21pc2U8R2xvYmFsSXRlbVtdPiB7XHJcbiAgICBjb25zdCBkYXRhOiBHbG9iYWxJdGVtTGlzdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9nbG9iYWwtc3RvcmFnZS9xdWVyeWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YS5pdGVtcztcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZShpdGVtczogUG9zdEdsb2JhbEl0ZW1zKTogUHJvbWlzZTxHbG9iYWxJdGVtcz4ge1xyXG4gICAgY29uc3QgY3JlYXRlZEl0ZW1zOiBHbG9iYWxJdGVtcyA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9nbG9iYWwtc3RvcmFnZWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBib2R5OiBpdGVtcyxcclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZWRJdGVtcztcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZVZhbHVlKFxyXG4gICAgdmFsdWU6IGFueSxcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxyXG4gICAgcmVmZXJlbmNlX2lkPzogc3RyaW5nLFxyXG4gICAgcmVmZXJlbmNlX3R5cGU/OiBHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSxcclxuICAgIGRhdGFfdHlwZT86IHN0cmluZyxcclxuICApOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG5cclxuICAgIGNvbnN0IG5ld0l0ZW06IFBvc3RHbG9iYWxJdGVtID0ge1xyXG4gICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgICAgIGNyZWF0b3JfaWQ6IHRoaXMuY29udGV4dC51c2VySWQsXHJcbiAgICAgIGNyZWF0b3JfdHlwZTogR2xvYmFsRGF0YUNyZWF0b3JUeXBlLlVTRVIsXHJcbiAgICAgIHJlZmVyZW5jZV9pZDogcmVmZXJlbmNlX2lkLFxyXG4gICAgICByZWZlcmVuY2VfdHlwZTogcmVmZXJlbmNlX3R5cGUsXHJcbiAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgIGRhdGFfdHlwZTogZGF0YV90eXBlLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMuY3JlYXRlKG5ld0l0ZW0pKSBhcyBHbG9iYWxJdGVtO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlKGl0ZW1JZDogc3RyaW5nLCBpdGVtOiBQdXRHbG9iYWxJdGVtKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICBjb25zdCB1cGRhdGVkSXRlbTogR2xvYmFsSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYC9nbG9iYWwtc3RvcmFnZS8ke2l0ZW1JZH1gLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBib2R5OiBpdGVtLFxyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICAgIHJldHVybiB1cGRhdGVkSXRlbTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZVZhbHVlKGl0ZW1JZDogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICBjb25zdCBpdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL2dsb2JhbC1zdG9yYWdlLyR7aXRlbUlkfWAsXHJcbiAgICApO1xyXG4gICAgaXRlbS52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIGNvbnN0IHVwZGF0ZWRJdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KFxyXG4gICAgICBgL2dsb2JhbC1zdG9yYWdlLyR7aXRlbUlkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgIGJvZHk6IGl0ZW0sXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHVwZGF0ZWRJdGVtO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlKGl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9nbG9iYWwtc3RvcmFnZS8ke2l0ZW1JZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUmF3T3B0aW9ucyB9IGZyb20gJy4uLy4uL2Jhc2UnO1xyXG5pbXBvcnQgUm9vdCBmcm9tICcuLi9yb290L3Jvb3QnO1xyXG5pbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tICcuL2dsb2JhbC1zdG9yYWdlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhdGlvbkFJIHtcclxuICBzdGF0aWMgcmVsYXRpdmVBcGlQYXRoID0gJy9yYXRpb25haSc7XHJcblxyXG4gIGNvbnRleHQ6IFJvb3Q7XHJcblxyXG4gIC8vY3VzdG9tXHJcbiAgZ2xvYmFsU3RvcmFnZTogR2xvYmFsU3RvcmFnZTtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIHRoaXMuZ2xvYmFsU3RvcmFnZSA9IG5ldyBHbG9iYWxTdG9yYWdlKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHVzZXJJZCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC51c2VySWQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSYXdPcHRpb25zID0ge30pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5yYXdRdWVyeShcclxuICAgICAgYCR7UmF0aW9uQUkucmVsYXRpdmVBcGlQYXRofSR7ZW5kcG9pbnR9YCxcclxuICAgICAgb3B0aW9ucyxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVtcGF0aW9uQVBJT3B0aW9ucywgUmF3QVBJLCBSYXdPcHRpb25zIH0gZnJvbSAnLi4vLi4vYmFzZSc7XHJcbmltcG9ydCB7IFJvb3RBUEkgfSBmcm9tICcuLi8uLi9yb290JztcclxuaW1wb3J0IFNjb3BlIGZyb20gJy4uL3Njb3BlL3Njb3BlJztcclxuaW1wb3J0IEFwcHMgZnJvbSAnLi9hcHBzJztcclxuaW1wb3J0IENhc2VzIGZyb20gJy4vY2FzZXMnO1xyXG5pbXBvcnQgRXhhbWluYXRpb25zIGZyb20gJy4vZXhhbWluYXRpb25zJztcclxuaW1wb3J0IFNsaWRlcyBmcm9tICcuL3NsaWRlcyc7XHJcbmltcG9ydCBSYXRpb25BSSBmcm9tICcuLi9yYXRpb25haS9yYXRpb25haSc7XHJcbmltcG9ydCB7IFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uIH0gZnJvbSAnLi90eXBlcy93b3JrYmVuY2gtc2VydmljZS1hcGktdi0zLWN1c3RvbS1tb2RlbHMtZXhhbWluYXRpb25zLWV4YW1pbmF0aW9uJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvb3QgZXh0ZW5kcyBSb290QVBJIHtcclxuICBzdGF0aWMgYXBpUGF0aCA9ICcvdjMnO1xyXG5cclxuICAvL2ludGVyZmFjZVxyXG4gIHByb3RlY3RlZCByYXc6IFJhd0FQSTtcclxuICBwcm90ZWN0ZWQgZGVmYXVsdFNjb3BlS2V5OiBzdHJpbmcgPSAnJztcclxuICByYXRpb25haTogUmF0aW9uQUk7XHJcbiAgdmVyc2lvbjogc3RyaW5nO1xyXG4gIHJvb3RVUkk6IHN0cmluZztcclxuXHJcbiAgc2NvcGVzOiBNYXA8c3RyaW5nLCBTY29wZT47XHJcblxyXG4gIC8vY3VzdG9tXHJcbiAgYXBwczogQXBwcztcclxuICBjYXNlczogQ2FzZXM7XHJcbiAgZXhhbWluYXRpb25zOiBFeGFtaW5hdGlvbnM7XHJcbiAgc2xpZGVzOiBTbGlkZXM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEVtcGF0aW9uQVBJT3B0aW9ucykge1xyXG4gICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICB0aGlzLnZlcnNpb24gPSAndjMnO1xyXG4gICAgdGhpcy5yb290VVJJID0gdGhpcy5vcHRpb25zLmFwaVVybCArIFJvb3QuYXBpUGF0aDtcclxuICAgIHRoaXMucmF3ID0gbmV3IFJhd0FQSSh0aGlzLnJvb3RVUkkpO1xyXG4gICAgdGhpcy5yYXRpb25haSA9IG5ldyBSYXRpb25BSSh0aGlzKTtcclxuXHJcbiAgICB0aGlzLmFwcHMgPSBuZXcgQXBwcyh0aGlzKTtcclxuICAgIHRoaXMuY2FzZXMgPSBuZXcgQ2FzZXModGhpcyk7XHJcbiAgICB0aGlzLmV4YW1pbmF0aW9ucyA9IG5ldyBFeGFtaW5hdGlvbnModGhpcyk7XHJcbiAgICB0aGlzLnNsaWRlcyA9IG5ldyBTbGlkZXModGhpcyk7XHJcblxyXG4gICAgdGhpcy5zY29wZXMgPSBuZXcgTWFwPHN0cmluZywgU2NvcGU+KCk7XHJcbiAgfVxyXG5cclxuICBnZXQgZGVmYXVsdFNjb3BlKCk6IFNjb3BlIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLnNjb3Blcy5nZXQodGhpcy5kZWZhdWx0U2NvcGVLZXkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBuZXdTY29wZUZyb20oXHJcbiAgICBleGFtaW5hdGlvbjogV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24sXHJcbiAgKSB7XHJcbiAgICBjb25zdCBzY29wZSA9IG5ldyBTY29wZSh0aGlzKTtcclxuICAgIGF3YWl0IHNjb3BlLmZyb20oZXhhbWluYXRpb24pO1xyXG4gICAgdGhpcy5zY29wZXMuc2V0KGV4YW1pbmF0aW9uLmlkLCBzY29wZSk7XHJcbiAgICBpZiAodGhpcy5kZWZhdWx0U2NvcGVLZXkgPT09ICcnKSB0aGlzLmRlZmF1bHRTY29wZUtleSA9IGV4YW1pbmF0aW9uLmlkO1xyXG4gICAgcmV0dXJuIHNjb3BlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBuZXdTY29wZVVzZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHNjb3BlID0gbmV3IFNjb3BlKHRoaXMpO1xyXG4gICAgYXdhaXQgc2NvcGUudXNlKGNhc2VJZCwgYXBwSWQpO1xyXG4gICAgdGhpcy5zY29wZXMuc2V0KHNjb3BlLmFjdGl2ZUV4YW1pbmF0aW9uSWQsIHNjb3BlKTtcclxuICAgIGlmICh0aGlzLmRlZmF1bHRTY29wZUtleSA9PT0gJycpXHJcbiAgICAgIHRoaXMuZGVmYXVsdFNjb3BlS2V5ID0gc2NvcGUuYWN0aXZlRXhhbWluYXRpb25JZDtcclxuICAgIHJldHVybiBzY29wZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFNjb3BlRnJvbShcclxuICAgIGV4YW1pbmF0aW9uOiBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbixcclxuICApIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHRoaXMuc2NvcGVzLmdldChleGFtaW5hdGlvbi5pZCkgfHwgKGF3YWl0IHRoaXMubmV3U2NvcGVGcm9tKGV4YW1pbmF0aW9uKSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRTY29wZVVzZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ/OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IG1hdGNoaW5nU2NvcGVzID0gWy4uLnRoaXMuc2NvcGVzLnZhbHVlcygpXS5maWx0ZXIoXHJcbiAgICAgIChzY3ApID0+XHJcbiAgICAgICAgc2NwLmFjdGl2ZUNhc2VJZCA9PT0gY2FzZUlkICYmXHJcbiAgICAgICAgKGFwcElkID8gc2NwLmFjdGl2ZUFwcElkID09PSBhcHBJZCA6IHRydWUpLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBtYXRjaGluZ1Njb3Blcy5sZW5ndGggPiAwXHJcbiAgICAgID8gbWF0Y2hpbmdTY29wZXNbMF1cclxuICAgICAgOiBhd2FpdCB0aGlzLm5ld1Njb3BlVXNlKGNhc2VJZCwgYXBwSWQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmF3T3B0aW9ucyA9IHt9KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGF3YWl0IHN1cGVyLnJhd1F1ZXJ5KGVuZHBvaW50LCBvcHRpb25zKTtcclxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgb3B0aW9ucy5oZWFkZXJzWydVc2VyLUlkJ10gPSB0aGlzLnVzZXJJZDtcclxuICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgIG9wdGlvbnMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID1cclxuICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSB8fCBgQmVhcmVyICR7dGhpcy5yYXdUb2tlbn1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMucmF3Lmh0dHAoZW5kcG9pbnQsIG9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiRXZlbnRTb3VyY2UiLCJldmVudHMiLCJhZGRPbmNlSGFuZGxlciIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJ1c2VyRGF0YSIsInRpbWVzIiwicHJpb3JpdHkiLCJzZWxmIiwidGhpcyIsImNvdW50Iiwib25jZUhhbmRsZXIiLCJldmVudCIsInJlbW92ZUhhbmRsZXIiLCJhZGRIYW5kbGVyIiwiaXNGdW5jdGlvbiIsImluZGV4IiwibGVuZ3RoIiwiaGFuZGxlcnMiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwicHVzaCIsIm51bWJlck9mSGFuZGxlcnMiLCJyZW1vdmVBbGxIYW5kbGVycyIsImV2ZW50VHlwZSIsImdldEhhbmRsZXIiLCJhcHBseSIsInNvdXJjZSIsImFyZ3MiLCJldmVudFNvdXJjZSIsImdldEF3YWl0aW5nSGFuZGxlciIsIlByb21pc2UiLCJyZXNvbHZlIiwibG9vcCIsInJlc3VsdCIsInR5cGUiLCJ0aGVuIiwicmFpc2VFdmVudCIsImV2ZW50QXJncyIsInJhaXNlRXZlbnRBd2FpdGluZyIsImF3YWl0aW5nSGFuZGxlciIsIlN0cmluZyIsImNsYXNzMnR5cGUiLCJ0b1N0cmluZyIsIlNUQVRVU19DT0RFUyIsIkhUVFBFcnJvciIsIkVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJleHRyYXMiLCJzdXBlciIsImFyZ3VtZW50cyIsImFzc2lnbiIsIm5hbWUiLCJzdWZmaXgiLCJyZXBsYWNlIiwic3BsaXQiLCJyZWR1Y2UiLCJhY2MiLCJjIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImh0dHBFcnJvclRvTmFtZSIsInN0YXR1c0NvZGUiLCJSYXdBUEkiLCJjb25zdHJ1Y3RvciIsInVybCIsIm9wdGlvbnMiLCJfcGFyc2VRdWVyeVBhcmFtcyIsInBhcmFtcyIsInVuZGVmaW5lZCIsImsiLCJ2IiwiVVJMU2VhcmNoUGFyYW1zIiwiX2ZldGNoIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwicmVzcG9uc2VUeXBlIiwiZSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJlcnJvciIsIm9rIiwiaHR0cCIsImVuZHBvaW50IiwiaGFzQm9keSIsInN0YXJ0c1dpdGgiLCJxdWVyeSIsIkpTT04iLCJzdHJpbmdpZnkiLCJBYnN0cmFjdEFQSSIsImdldENhbGxlck5hbWUiLCJvcmlnIiwicHJlcGFyZVN0YWNrVHJhY2UiLCJzdGFjayIsInJlcXVpcmVzIiwiZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCIsInRva2VuIiwiZXhwIiwiRGF0ZSIsIm5vdyIsInBhcnNlSnd0VG9rZW4iLCJwYXJzZSIsImF0b2IiLCJzbGVlcCIsIm1zIiwic2V0VGltZW91dCIsIkxvZ2dlciIsImNvbnNvbGUiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwiUm9vdENvbnRleHQiLCJSb290QVBJIiwiYWNjZXNzVG9rZW4iLCJfdG9rZW5FeHBpcmVzIiwiX3Jhd1Rva2VuIiwid29ya2JlbmNoQXBpVXJsIiwiYXBpVXJsIiwiYXBpUm9vdFBhdGgiLCJlbmRzV2l0aCIsImFub255bW91c1VzZXJJZCIsIl91c2VySWQiLCJjYWNoZWQiLCJmcm9tIiwid2l0aEV2ZW50IiwicmVzZXQiLCJ0b2tlblRpbWVvdXQiLCJ1c2VySWQiLCJzdWIiLCJ1c2UiLCJkZWZhdWx0U2NvcGVLZXkiLCJzY29wZXMiLCJmb3JFYWNoIiwic2NwIiwiY2xlYXIiLCJyYXdUb2tlbiIsInJhd1F1ZXJ5IiwiZXZlbnRPYmplY3QiLCJuZXdUb2tlbiIsIlNjb3BlQ29udGV4dCIsIlNjb3BlQVBJIiwiQXBwcyIsImNvbnRleHQiLCJkYXRhIiwiX2RlZmF1bHRBcHAiLCJsaXN0IiwiYXBwcyIsInRpc3N1ZXMiLCJzdGFpbnMiLCJqb2JfbW9kZXMiLCJhcHAiLCJpdGVtcyIsIm5hbWVfc2hvcnQiLCJ2ZW5kb3JfbmFtZSIsImdldE51bWJlciIsInZhcmlhYmxlIiwiTnVtYmVyIiwibWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwIiwic3RyIiwic2VwYXJhdG9yIiwiZ3JvdXBJZHgiLCJtYXRjaGVzIiwiUmVnRXhwIiwiZXhlYyIsIkNhc2VFeHBsb3JlciIsImN1c3RvbUNhc2VzIiwiY2FzZUhpZXJhcmNoeSIsImNhc2VUaXNzdWVzIiwiY2FzZVN0YWlucyIsImlkZW50aWZpZXJTZXBhcmF0b3IiLCJoaWVyYXJjaHlTcGVjIiwiaGllcmFyY2h5TmFtZU92ZXJyaWRlcyIsImdldEN1c3RvbUNhc2VzIiwibWFwIiwiY2FzZU9iaiIsInBhdGhJbkhpZXJhcmNoeSIsImdldENhc2VIaWVyYXJjaHlQYXRoIiwicGF0aEZpbmlzaGVkIiwicHJldiIsImN1cnIiLCJ2YWwiLCJnZXRDYXNlVmFsdWUiLCJyZXR1cm5WYWwiLCJnZXRDYXNlIiwiY2FzZUlkIiwiZmluZCIsImNzIiwiaWQiLCJnZXRDYXNlWWVhciIsImdldENhc2VNb250aCIsImdldENhc2VEYXkiLCJnZXRDYXNlRGVzY3JpcHRpb24iLCJnZXRDYXNlVGlzc3VlcyIsImdldENhc2VTdGFpbnMiLCJpc05hTiIsImdldENhc2VJZGVudGlmaWVyUGFydCIsImV2YWx1YXRlQ2FzZVZhbHVlIiwiZXZhbFZhbHVlIiwiY2FzZVZhbHVlIiwiZXZhdWxhdGVDYXNlWWVhciIsImV2YXVsYXRlQ2FzZU1vbnRoIiwiZXZhdWxhdGVDYXNlRGF5IiwiZXZhbHVhdGVDYXNlRGVzY3JpcHRpb24iLCJldmFsdWF0ZUNhc2VUaXNzdWVzIiwiZXZhbHVhdGVDYXNlU3RhaW5zIiwiZXZhdWxhdGVDYXNlSWRlbnRpZmllclBhcnQiLCJlcG9jaFRpbWUiLCJjcmVhdGVkX2F0IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJwYXJ0SWR4IiwicGFydHMiLCJsb2NhbF9pZCIsImRlc2NyaXB0aW9uIiwia2V5cyIsInN0cmluZ1RvTWF0Y2giLCJ0b2tlblN0cmluZyIsInRva2VucyIsImZpbHRlciIsIkJvb2xlYW4iLCJzZWFyY2hUZXJtUmVnZXgiLCJqb2luIiwibWF0Y2giLCJtYXRjaFN0cmluZ09uVG9rZW5zIiwiZXZlcnkiLCJ0aXNzdWUiLCJpbmNsdWRlcyIsInN0YWluIiwiaGllcmFyY2h5TGV2ZWwiLCJrZXlJZHgiLCJjYXNlcyIsImN1cnJlbnRIaWVyYXJjaHlQYXRoIiwibGV2ZWxOYW1lIiwibGFzdExldmVsIiwiZ3JvdXBzIiwiaXRlbSIsIm92ZXJyaWRlTmFtZSIsImhpZXJhcmNoeSIsInNlYXJjaCIsImZpbHRlcmVkQ2FzZXMiLCJsb2NhbGl6YXRpb24iLCJhbGxUaXNzdWVzIiwiZW50cmllcyIsInRpc05hbWUiLCJ0aXNWYWx1ZSIsImxvY05hbWUiLCJ0IiwiTWFwIiwidmFsdWVzIiwiYWxsU3RhaW5zIiwic3RuTmFtZSIsInN0blZhbHVlIiwicyIsIldzaUV4cGxvcmVyIiwibGFzdENhc2VJZCIsInNsaWRlc0RhdGEiLCJtYXNrc0RhdGEiLCJtYXNrSWRlbnRpZmllclNlcGFyYXRvciIsIm1hc2tJZGVudGlmaWVyVmFsdWUiLCJnZXRBbGxTbGlkZXMiLCJzbGlkZXMiLCJzbGlkZSIsIm1hc2tzIiwiQ2FzZXMiLCJjYXNlRXhwbG9yZXIiLCJ3c2lFeHBsb3JlciIsIkV4YW1pbmF0aW9ucyIsImNyZWF0ZSIsImFwcElkIiwiY2FzZV9pZCIsImFwcF9pZCIsInNraXAiLCJsaW1pdCIsImV4YW1pbmF0aW9uSWQiLCJzY29wZSIsIlN0b3JhZ2UiLCJnZXRSYXciLCJmbHVzaCIsImNvbnRlbnQiLCJzZXQiLCJ2YWx1ZVJhdyIsImRhdGFSYXciLCJlcmFzZSIsIkFubm90YXRpb25zIiwidXBsb2FkIiwidXBkYXRlIiwiZGVsZXRlIiwiZXh0ZXJuYWxJZHMiLCJDb2xsZWN0aW9ucyIsImNvbGxlY3Rpb25JZCIsImNvbGxlY3Rpb24iLCJxdWVyeUl0ZW1zIiwiY3JlYXRlSXRlbXMiLCJkZWxldGVJdGVtIiwiaXRlbUlkIiwiSm9icyIsImdldEpvYnMiLCJqb2JJZCIsIlBpeGVsbWFwcyIsInBpeGVsbWFwSWQiLCJwb3N0IiwicGl4ZWxtYXBzIiwiZ2V0VGlsZSIsImxldmVsIiwidGlsZVgiLCJ0aWxlWSIsInVwbG9hZFRpbGUiLCJ0aWxlIiwiZGVsZXRlVGlsZSIsImJ1bGtHZXRUaWxlIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJidWxrVXBsb2FkVGlsZSIsInRpbGVzIiwiU2NvcGUiLCJzY29wZUNvbnRleHQiLCJfZGVmYXVsdEV4YW1pbmF0aW9uSWQiLCJfdG9rZW5SZWZldGNoSW50ZXJ2YWwiLCJhY3RpdmVFeGFtaW5hdGlvbklkIiwiYWN0aXZlQ2FzZUlkIiwiYWN0aXZlQXBwSWQiLCJyYXciLCJhcGlQYXRoIiwic3RvcmFnZSIsImFubm90YXRpb25zIiwiY29sbGVjdGlvbnMiLCJqb2JzIiwiZmluZEV4YW1pbmF0aW9uIiwiZXhhbWluYXRpb25zIiwiY3JlYXRvcnMiLCJpdGVtX2NvdW50IiwiZXhhbWluYXRpb24iLCJleCIsInN0YXRlIiwiZGVmYXVsdCIsInNjb3BlVG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJ0aW1lb3V0Iiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwic2NvcGVfaWQiLCJHbG9iYWxEYXRhQ3JlYXRvclR5cGUiLCJHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSIsIlRlbXBsYXRlVHlwZSIsIlNsaWRlcyIsInNsaWRlSW5mbyIsInNsaWRlSWQiLCJzbGlkZVRodW1ibmFpbCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiZm9ybWF0IiwiaW1hZ2VfZm9ybWF0Iiwic2xpZGVMYWJlbCIsImxvYWRUaWxlIiwieCIsInkiLCJXc2lNZXRhZGF0YSIsImRlZmF1bHRTbGlkZU1ldGFkYXRhIiwidmlzdWFsaXphdGlvbiIsImRlZmF1bHRNYXNrTWV0YWRhdGEiLCJnZXRXc2lNZXRhZGF0YUl0ZW0iLCJ3c2lJZCIsImlzU2xpZGUiLCJtZXRhZGF0YSIsInJlZmVyZW5jZXMiLCJwIiwiZGF0YV90eXBlIiwiY3JlYXRlV3NpTWV0YWRhdGFJdGVtIiwiY3JlYXRlVmFsdWUiLCJXU0kiLCJnZXRTbGlkZU1ldGFkYXRhIiwidXBkYXRlU2xpZGVNZXRhZGF0YSIsIm1ldGFkYXRhSXRlbSIsInVwZGF0ZWRJdGVtIiwiZ2V0U2hhZGVyc0NvbmZpZyIsInNoYWRlcnMiLCJzaGFkZXJzQ29uZmlnIiwic2hhZGVyVGVtcCIsInZpc1RlbXBsYXRlcyIsImdldFRlbXBsYXRlIiwiU2hhZGVyIiwic2hhZGVyVGVtcGxhdGUiLCJkYXRhUmVmZXJlbmNlcyIsImRhdGFSZWZzIiwiZ2V0VmlzdWFsaXphdGlvbnMiLCJzbGlkZVZpcyIsInBhcmFtc1RlbXBsYXRlIiwiUGFyYW1zIiwiYmFja2dyb3VuZCIsIkJhY2tncm91bmQiLCJ0ZW1wbGF0ZSIsImRhdGFSZWYiLCJ2aXN1YWxpemF0aW9ucyIsImFsbCIsInZpcyIsIlZpc3VhbGl6YXRpb24iLCJ2aXNUZW1wbGF0ZSIsImdldE1hc2tNZXRhZGF0YSIsIm1hc2tJZCIsInRlbXBsYXRlc0dsb2JhbEl0ZW1EYXRhVHlwZSIsIlZpc3VhbGl6YXRpb25UZW1wbGF0ZXMiLCJmZXRjaFRlbXBsYXRlSXRlbSIsImRhdGFfdHlwZXMiLCJ0bXBsIiwiY3JlYXRlVGVtcGxhdGUiLCJkZWxldGVUZW1wbGF0ZSIsImV4aXN0aW5nVG1wbCIsIkFubm90UHJlc2V0cyIsInByZXNldERhdGFUeXBlIiwiZ2V0UHJlc2V0c0l0ZW0iLCJmcmVzaCIsInByZXNldHNJdGVtIiwiY3JlYXRlUHJlc2V0c0l0ZW0iLCJwcmVzZXRzIiwiZ2V0QW5ub3RQcmVzZXRzIiwicHJlc2V0SXRlbSIsImxhc3RNb2RpZmllZEF0IiwibW9kaWZpZWRfYXQiLCJtZXJnZVByZXNldHMiLCJwcmltYXJ5QXJyIiwic2Vjb25kYXJ5QXJyIiwibG9jYWxWZXJzaW9uIiwibmV3QXJyIiwic2VjSXRlbSIsInNvbWUiLCJwcmltSXRlbSIsImNyZWF0ZWRBdCIsInVwZGF0ZUFubm90UHJlc2V0cyIsImZhaWxPblBhcmFsbGVsVXBkYXRlIiwicmVtb3RlUHJlc2V0c0l0ZW0iLCJyZW1vdGVQcmVzZXRzIiwibG9jYWxQcmVzZXRzIiwic3VjY2Vzc2Z1bFVwZGF0ZSIsInJldHJ5QXR0ZW1wdCIsImRlbGV0ZUFubm90UHJlc2V0cyIsIkpvYkNvbmZpZyIsImNvbmZpZ0RhdGFUeXBlIiwiZmV0Y2hKb2JDb25maWdJdGVtIiwiZ2V0Sm9iQ29uZmlnIiwiY3JlYXRlSm9iQ29uZmlnIiwiSk9CIiwiZGVsZXRlSm9iQ29uZmlnIiwiZXhpc3RpbmdDb25maWciLCJHbG9iYWxTdG9yYWdlIiwid3NpTWV0YWRhdGEiLCJhbm5vdFByZXNldHMiLCJqb2JDb25maWciLCJnZXRWYWx1ZSIsInJlZmVyZW5jZV9pZCIsInJlZmVyZW5jZV90eXBlIiwibmV3SXRlbSIsImNyZWF0b3JfaWQiLCJjcmVhdG9yX3R5cGUiLCJVU0VSIiwidXBkYXRlVmFsdWUiLCJSYXRpb25BSSIsImdsb2JhbFN0b3JhZ2UiLCJyZWxhdGl2ZUFwaVBhdGgiLCJSb290IiwidmVyc2lvbiIsInJvb3RVUkkiLCJyYXRpb25haSIsImRlZmF1bHRTY29wZSIsIm5ld1Njb3BlRnJvbSIsIm5ld1Njb3BlVXNlIiwiZ2V0U2NvcGVGcm9tIiwiZ2V0U2NvcGVVc2UiLCJtYXRjaGluZ1Njb3BlcyJdLCJzb3VyY2VSb290IjoiIn0=