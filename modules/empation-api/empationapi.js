var EmpationAPI;(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{AbstractAPI:()=>u,EventSource:()=>n,HTTPError:()=>o,Logger:()=>l,RawAPI:()=>a,RootAPI:()=>p,RootContext:()=>f,STATUS_CODES:()=>s,ScopeAPI:()=>y,ScopeContext:()=>v,V3:()=>i,getJwtTokenExpiresTimeout:()=>c,parseJwtToken:()=>d,sleep:()=>h});var i={};t.r(i),t.d(i,{Apps:()=>g,Cases:()=>C,Examinations:()=>$,RationAI:()=>rt,Root:()=>ut,Scope:()=>J,Slides:()=>z,Storage:()=>k});class n{constructor(){this.events={}}addOnceHandler(t,e,i,n,s){const r=this;n=n||1;let o=0;const a=function(i){return o++,o===n&&r.removeHandler(t,a),e(i)};this.addHandler(t,a,i,s)}addHandler(t,e,i=null,s=0){let r=this.events[t];if(r||(this.events[t]=r=[]),e&&n.isFunction(e)){let t=r.length,n={handler:e,userData:i||null,priority:s||0};for(r[t]=n;t>0&&r[t-1].priority<r[t].priority;)r[t]=r[t-1],r[t-1]=n,t--}}removeHandler(t,e){const i=this.events[t],n=[];if(i&&Array.isArray(i)){for(let t=0;t<i.length;t++)i[t].handler!==e&&n.push(i[t]);this.events[t]=n}}numberOfHandlers(t){const e=this.events[t];return e?e.length:0}removeAllHandlers(t){if(t)this.events[t]=[];else for(const t in this.events)this.events[t]=[]}getHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){let n,s=e.length;for(n=0;n<s;n++)e[n]&&(i.eventSource=t,i.userData=e[n].userData,e[n].handler(i))}):null}getAwaitingHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){return new Promise((s=>{const r=e.length;!function o(a){if(a>=r||!e[a])return s("Resolved!"),null;i.eventSource=t,i.userData=e[a].userData;let u=e[a].handler(i);return u=u&&"promise"===n.type(u)?u:Promise.resolve(),u.then((()=>o(a+1)))}(0)}))}):null}raiseEvent(t,e){const i=this.getHandler(t);if(i)return i(this,e||{})}raiseEventAwaiting(t,e){const i=this.getAwaitingHandler(t);return i?i(this,e||{}):Promise.resolve("No handler for this event registered.")}static isFunction(t){return"function"===this.type(t)}static type(t){return null==t?String(t):this.class2type[t.toString()]||("function"==typeof t?"function":"object")}}n.class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};const s={100:"Continue",101:"Switching protocols",102:"Processing",103:"Early Hints",200:"Ok",201:"Created",202:"Accepted",203:"Non Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Too Long",414:"Request Uri Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"Im A Teapot",419:"Insufficient Space On Resource",420:"Method Failure",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"Http Version Not Supported",507:"Insufficient Storage",511:"Network Authentication Required"};var r=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class o extends Error{constructor(t,e,i){super(e||s[t]||`HTTP Code ${t}`),arguments.length>=3&&i&&Object.assign(this,i),this.name=function(t){const e=4==(t/100|0)||5==(t/100|0)?"error":"";return` ${String(s[t]||`HTTP Code ${t}`).replace(/error$/i,"")} ${e}`.split(" ").reduce(((t,e)=>t+(e?e.charAt(0).toUpperCase()+e.slice(1):"")))}(t),this.statusCode=t}}class a{constructor(t,e={}){this.url=t,this.options=e}_parseQueryParams(t){if(t){if("string"==typeof t)return t;if(t.constructor===Object||void 0===t.constructor)for(let e in t){null==t[e]&&delete t[e]}return`?${new URLSearchParams(t)}`}return""}_fetch(t,e){return r(this,void 0,void 0,(function*(){const i=yield fetch(t,{method:e.method,headers:e.headers,body:e.body});let n;try{n=yield i[e.responseType||"json"]()}catch(e){throw new o(500,`Failed to parse response data. Original status: ${i.status} | ${i.statusText}`,{url:t,error:e})}if(!i.ok)throw new o(i.status,i.statusText,n);return n}))}http(t,e){return r(this,void 0,void 0,(function*(){const i=!!e.body;return e.method=e.method||(i?"POST":"GET"),t.startsWith("/")||(t=`/${t}`),e.query=this._parseQueryParams(e.query),e.headers=e.headers||{},e.headers["Content-Type"]="application/json",e.body&&"string"!=typeof e.body?e.body=JSON.stringify(e.body):e.body=void 0,yield this._fetch(this.url+t+e.query,e)}))}}class u extends n{getCallerName(){const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,e)=>e;const{stack:e}=new Error;Error.prepareStackTrace=t;return(null==e?void 0:e[2])||"unknown context"}requires(t,e){if(!e)throw`ArgumentError[${this.getCallerName()}] ${t} is missing - required property!`}}function c(t){return 1e3*t.exp-Date.now()||3e5}function d(t){return JSON.parse(atob(t.split(".")[1]))}function h(t){return new Promise((e=>setTimeout(e,t)))}class l{static error(...t){console.error("E:EmpationAPI",...t)}static warn(...t){console.warn("W:EmpationAPI",...t)}static info(...t){console.info("I:EmpationAPI",...t)}static debug(...t){console.debug("D:EmpationAPI",...t)}}class f{}class p extends u{constructor(t){if(super(),this.accessToken=null,this._tokenExpires=0,this._rawToken="",!t.workbenchApiUrl)throw"WB Api url is required!";let e;e=t.apiRootPath?t.apiRootPath.startsWith("/")?`${t.workbenchApiUrl}${t.apiRootPath}`:`${t.workbenchApiUrl}/${t.apiRootPath}`:t.workbenchApiUrl,e.endsWith("/")&&(e=e.slice(0,-1)),this.options={apiUrl:e,workbenchApiUrl:t.workbenchApiUrl,anonymousUserId:t.anonymousUserId||"anonymous",apiRootPath:t.apiRootPath||""},this._userId=this.options.anonymousUserId,this.cached={}}from(t,e=!0){if(!t)return this.reset();this._rawToken=t,e=e&&!this.accessToken,this.accessToken=d(t);const i=c(this.accessToken);this._tokenExpires=Date.now()+i/2;const n=this.accessToken.sub;if(!n||n.length>50)throw"Invalid User ID! Must be valid string shorter than 50 characters!";this._userId=n,this.userId!==n&&e&&this.raiseEvent("init")}use(t,e=!0){if(e=e&&!this._userId,this.reset(),!t||t.length>50)throw"Invalid User ID! Must be valid string shorter than 50 characters!";this._userId=t,e&&this.raiseEvent("init_no_token")}reset(){this._rawToken="",this._tokenExpires=0,this.accessToken=null,this._userId=this.options.anonymousUserId,this.defaultScopeKey="",this.scopes.forEach((t=>t.reset())),this.scopes.clear(),this.raiseEvent("reset")}get userId(){return this._userId}get rawToken(){return this._rawToken}rawQuery(t,e){return i=this,n=void 0,r=function*(){if(!this._userId)throw"User must be configured to access Empaia API: either provide a valid 'anonymous' user ID through env variables, or configure the Root API with a valid token.";if(this._tokenExpires>0&&Date.now()>this._tokenExpires){const t={newToken:""};yield this.raiseEventAwaiting("token-refresh",t),this.from(t.newToken)}},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{u(r.next(t))}catch(t){e(t)}}function a(t){try{u(r.throw(t))}catch(t){e(t)}}function u(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}u((r=r.apply(i,n||[])).next())}));var i,n,s,r}}class v{}class y extends u{}var m=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class g extends f{constructor(t){super(),this.data=null,this._defaultApp=null,this.context=t}list(){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:{apps:null,tissues:null,stains:null,job_modes:null}})}))}query(t){return m(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:t})}))}default(){return m(this,void 0,void 0,(function*(){this.data||(yield this.list());for(let t of this.data.items)if("MAP3"===t.name_short&&"rationai"===t.vendor_name){this._defaultApp=t;break}if(!this._defaultApp)throw"Default APP not present in the infrastructure! Was it imported?";return this._defaultApp}))}}const x=t=>("string"==typeof t&&(t=Number(t)),t),w=(t,e,i,n)=>{const s=new RegExp(e).exec(t);return!(!s||i<1||i>=s.length)&&s[i]===n};var b=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class T{constructor(t){this.customCases=null,this.caseHierarchy=null,this.caseTissues=null,this.caseStains=null,this.identifierSeparator="",this.hierarchySpec=[],this.context=t}use(t,e){this.hierarchySpec=e,this.identifierSeparator=t}getCustomCases(){return b(this,void 0,void 0,(function*(){return this.customCases||(this.customCases=(yield this.context.list()).items.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:this.getCaseHierarchyPath(t)})))),this.customCases}))}getCaseHierarchyPath(t){if(!this.identifierSeparator||!this.hierarchySpec)throw"ArgumentError[CaseExplorer] identifierSeparator or hierarchySpec is missing - required property!";let e=!1;return this.hierarchySpec.reduce(((i,n)=>{const s=this.getCaseValue(n,t),r=e?i:`${i}/${s}`;return"OTHER"===s&&(e=!0),r}),"")}getCase(t){return b(this,void 0,void 0,(function*(){let e;return this.customCases&&(e=this.customCases.find((e=>e.id===t))),e||(e=yield this.context.get(t)),Object.assign(Object.assign({},e),{pathInHierarchy:this.getCaseHierarchyPath(e)})}))}getCaseValue(t,e){switch(t){case"year":return this.getCaseYear(e);case"month":return this.getCaseMonth(e);case"day":return this.getCaseDay(e);case"description":return this.getCaseDescription(e);case"tissues":return this.getCaseTissues(e);case"stains":return this.getCaseStains(e);default:if("id_part_"===t.slice(0,8)&&!isNaN(Number(t.slice(8))))return this.getCaseIdentifierPart(e,Number(t.slice(8)));throw`KeyError[CaseExplorer] "${t}" is not supported!`}}evaluateCaseValue(t,e,i){const n=this.getCaseValue(t,i);switch(t){case"year":return this.evaulateCaseYear(n,e);case"month":return this.evaulateCaseMonth(n,e);case"day":return this.evaulateCaseDay(n,e);case"description":return this.evaluateCaseDescription(n,e);case"tissues":return this.evaluateCaseTissues(n,e);case"stains":return this.evaluateCaseStains(n,e);default:return this.evaulateCaseIdentifierPart(n,e)}}getCaseYear(t){return(e=t.created_at,new Date(1e3*x(e)).getFullYear()).toString();var e}getCaseMonth(t){return(e=t.created_at,new Date(1e3*x(e)).getMonth()).toString();var e}getCaseDay(t){return(e=t.created_at,new Date(1e3*x(e)).getDate()).toString();var e}getCaseIdentifierPart(t,e){if(!this.identifierSeparator)throw"ArgumentError[CaseExplorer] identifierSeparator is missing - required property!";const i=new RegExp(this.identifierSeparator).exec(t.local_id||"");if(!i)return"OTHER";if(e<1||e>=i.length)throw'KeyError[CaseExplorer] invalid key "id_part_<index>", group index is not valid!';return i[e]}getCaseDescription(t){return t.description||""}getCaseTissues(t){return Object.keys(t.tissues)}getCaseStains(t){return Object.keys(t.stains)}evaulateCaseYear(t,e){return t===e}evaulateCaseMonth(t,e){return t===e}evaulateCaseDay(t,e){return t===e}evaulateCaseIdentifierPart(t,e){return t===e}evaluateCaseDescription(t,e){return((t,e)=>{const i=e.split(" ").filter(Boolean).map((t=>`(?=.*\\b${t}\\b)`)),n=new RegExp(i.join(""),"gim");return null!==t.match(n)})(t,e)}evaluateCaseTissues(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}evaluateCaseStains(t,e){return e instanceof Array||(e=[e]),e.every((e=>t.includes(e)))}hierarchyLevel(t,e,i,n,s){if(e>=t.length)return{levelName:s,lastLevel:!0,items:i.map((t=>Object.assign(Object.assign({},t),{pathInHierarchy:n})))};const r=(o=i=>{const n=this.getCaseValue(t[e],i);return Array.isArray(n)?n[0]||"":n},i.reduce(((t,e)=>{var i;return(t[i=o(e)]||(t[i]=[])).push(e),t}),{}));var o;const a=Object.keys(r).map((i=>"OTHER"===i?this.hierarchyLevel(t,t.length,r[i],`${n}/${i}`,i):this.hierarchyLevel(t,e+1,r[i],`${n}/${i}`,i)));return{levelName:s,lastLevel:!1,items:a}}hierarchy(){return b(this,void 0,void 0,(function*(){if(!this.caseHierarchy){const t=yield this.getCustomCases();this.caseHierarchy=this.hierarchyLevel(this.hierarchySpec,0,t,"")}return this.caseHierarchy}))}search(t){return b(this,void 0,void 0,(function*(){let e=yield this.getCustomCases();return t.forEach((({key:t,value:i})=>e=e.filter((e=>this.evaluateCaseValue(t,i,e))))),e}))}tissues(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseTissues){const e=yield this.getCustomCases(),i=new Set;e.forEach((e=>Object.entries(e.tissues).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.add(t))))),this.caseTissues=[...i]}return this.caseTissues}))}stains(t="EN"){return b(this,void 0,void 0,(function*(){if(!this.caseStains){const e=yield this.getCustomCases(),i=new Set;e.forEach((e=>Object.entries(e.stains).map((([e,i])=>({name:e,locName:i[t]}))).forEach((t=>i.add(t))))),this.caseStains=[...i]}return this.caseStains}))}}var I=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class S{constructor(t){this.lastCaseId=null,this.data=null,this.slidesData=null,this.masksData=null,this.maskIdentifierSeparator="",this.maskIdentifierValue="",this.context=t}use(t,e){this.maskIdentifierSeparator=t,this.maskIdentifierValue=e}getAllSlides(t){return I(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.data||(this.data=(yield this.context.slides(t)).items),this.data}))}slides(t){return I(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.slidesData||(this.slidesData=(yield this.getAllSlides(t)).filter((t=>!w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.slidesData}))}masks(t){return I(this,void 0,void 0,(function*(){return this.lastCaseId===t&&this.masksData||(this.masksData=(yield this.getAllSlides(t)).filter((t=>w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.masksData}))}}var P=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class C extends f{constructor(t){super(),this.data=null,this.context=t,this.caseExplorer=new T(this),this.wsiExplorer=new S(this)}list(){return P(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/cases")),this.data}))}get(t){return P(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}`)}))}slides(t){return P(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}/slides`)}))}}var E=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class $ extends f{constructor(t){super(),this.data=null,this.context=t}create(t,e){return E(this,void 0,void 0,(function*(){const i=this.context;return i.requires("caseId",t),i.rawQuery("/examinations",{method:"PUT",body:{case_id:t,app_id:e}})}))}query(t,e,i){return E(this,void 0,void 0,(function*(){return this.context.rawQuery("/examinations/query",{method:"PUT",body:t,query:{skip:e,limit:i}})}))}get(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}`)}))}scope(t){return E(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}/scope`,{method:"PUT"})}))}}var _=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class k extends v{constructor(t){super(),this.data=null,this.context=t}getRaw(){return _(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/app-ui-storage/user")),this.data}))}flush(){return _(this,void 0,void 0,(function*(){return this.data?yield this.context.rawQuery("/app-ui-storage/user",{method:"PUT",body:this.data}):null}))}get(t){return _(this,void 0,void 0,(function*(){const e=yield this.getRaw();return"string"==typeof e.content[t]?JSON.parse(e.content[t]):e.content[t]}))}set(t,e,i){return _(this,void 0,void 0,(function*(){const n=JSON.stringify(e),s=yield this.getRaw();s.content[t]=n,this.data=s,i&&this.flush()}))}erase(){return _(this,void 0,void 0,(function*(){this.data={content:{}},this.flush()}))}}var A=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class O extends v{constructor(t){super(),this.context=t}upload(t,e={}){return A(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}create(t,e={}){return A(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}delete(t){return A(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/annotations/${t}`,{method:"DELETE"})}))}update(t,e,i={}){return A(this,void 0,void 0,(function*(){return yield this.delete(t),!i.externalIds&&e.id&&(i.externalIds=!0),yield this.create(e,i)}))}}var R=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class j extends v{constructor(t){super(),this.data=null,this.context=t}get(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}`)}))}create(t){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/collections",{method:"POST",body:t})}))}delete(t){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}`,{method:"DELETE"})}))}queryItems(t,e){return R(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}/items/query`,{method:"PUT",body:e})}))}createItems(t,e){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items`,{method:"POST",body:Object.assign({},e)})}))}deleteItem(t,e){return R(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items/${e}`,{method:"DELETE"})}))}}var U=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class Q extends v{constructor(t){super(),this.data=null,this.context=t}getJobs(){return U(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/jobs")).items}))}get(t){return U(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/jobs/${t}`)}))}}var D=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class q extends v{constructor(t){super(),this.data=null,this.context=t}get(t){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}`)}))}post(t){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/pixelmaps",{method:"POST",body:t})}))}delete(t){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}`,{method:"DELETE"})}))}query(t){return D(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/pixelmaps/query",{method:"PUT",body:t})).items}))}getTile(t,e,i,n){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{responseType:"blob"})}))}uploadTile(t,e,i,n,s){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{method:"PUT",body:s})}))}deleteTile(t,e,i,n){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/${i}/${n}/data`,{method:"DELETE"})}))}bulkGetTile(t,e,i,n,s,r){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/start/${i}/${n}/end/${s}/${r}/data`,{responseType:"blob"})}))}bulkUploadTile(t,e,i,n,s,r,o){return D(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/pixelmaps/${t}/level/${e}/position/start/${i}/${n}/end/${s}/${r}/data`,{method:"PUT",body:o})}))}}var N=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class M extends y{constructor(t){super(),this.scopeContext=null,this._defaultExaminationId="",this._tokenRefetchInterval=null,this.activeExaminationId="",this.activeCaseId="",this.activeAppId="",this.context=t,this.raw=new a(this.context.options.apiUrl+M.apiPath),this.storage=new k(this),this.annotations=new O(this),this.collections=new j(this),this.jobs=new Q(this),this.pixelmaps=new q(this)}use(t,e=void 0){return N(this,void 0,void 0,(function*(){this.requires("root::userId",this.context.userId);const i=e=>N(this,void 0,void 0,(function*(){let i=yield this.context.examinations.query({apps:[e],creators:[this.context.userId]});if(i.item_count>0){let t=i.items.find((t=>"OPEN"===t.state));if(t)return t}return yield this.context.examinations.create(t,e)}));let n;if(e?n=yield i(e):this._defaultExaminationId&&(n=yield this.context.examinations.get(this._defaultExaminationId)),!n){let t=yield this.context.apps.default();n=yield i(t.app_id),this._defaultExaminationId=n.id}yield this.from(n)}))}get scopeToken(){var t;return null===(t=this.scopeContext)||void 0===t?void 0:t.access_token}from(t){return N(this,void 0,void 0,(function*(){this.reset(),this.scopeContext=yield this.context.examinations.scope(t.id),this.activeCaseId=t.case_id,this.activeAppId=t.app_id,this.activeExaminationId=t.id;const e=c(d(this.scopeContext.access_token));this._tokenRefetchInterval=setInterval((()=>N(this,void 0,void 0,(function*(){this.scopeContext=yield this.context.examinations.scope(t.id)}))),e),this.raiseEvent("init")}))}reset(){this.activeExaminationId="",this.scopeContext=null,this._tokenRefetchInterval&&(clearInterval(this._tokenRefetchInterval),this._tokenRefetchInterval=null,this.raiseEvent("reset"))}rawQuery(t,e){var i,n;return N(this,void 0,void 0,(function*(){this.requires("this.scopeContext",this.scopeContext),(e=e||{}).headers=e.headers||{},e.headers.Authorization=`Bearer ${null===(i=this.scopeContext)||void 0===i?void 0:i.access_token}`,t&&!t.startsWith("/")&&(t=`/${t}`);try{return yield this.raw.http(`/${null===(n=this.scopeContext)||void 0===n?void 0:n.scope_id}${t}`,e)}catch(i){if(401===i.statusCode)return this.scopeContext=yield this.context.examinations.scope(this.activeExaminationId),yield this.raw.http(`/${this.scopeContext.scope_id}${t}`,e);throw i}}))}}M.apiPath="/v3/scopes";const J=M;var H,L,V,F=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class z extends f{constructor(t){super(),this.data=null,this.context=t}slideInfo(t){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/info`)}))}slideThumbnail(t,e,i,n){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/thumbnail/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}slideLabel(t,e,i,n){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/label/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}loadTile(t,e,i,n,s){return F(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/tile/level/${e}/tile/${i}/${n}`,{query:{image_format:s},responseType:"blob"})}))}}!function(t){t.USER="user",t.SCOPE="scope",t.JOB="job"}(H||(H={})),function(t){t.ANNOTATION="annotation",t.COLLECTION="collection",t.CLASS="class",t.PRIMITIVE="primitive",t.WSI="wsi",t.CASE="case",t.USER="user",t.SCOPE="scope",t.JOB="job"}(L||(L={})),function(t){t.Background="background",t.Params="params",t.Shader="shader",t.Visualization="visualization"}(V||(V={}));var W=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class B{constructor(t){this.data=null,this.defaultSlideMetadata={visualization:{}},this.defaultMaskMetadata={},this.context=t}getWsiMetadataItem(t,e=!0){return W(this,void 0,void 0,(function*(){let i=(yield this.context.query({references:[t]})).find((t=>t.data_type===(e?"slide":"mask")+"_metadata"));return i||(i=yield this.createWsiMetadataItem(t,e?this.defaultSlideMetadata:this.defaultMaskMetadata)),i}))}createWsiMetadataItem(t,e,i=!0){return W(this,void 0,void 0,(function*(){return yield this.context.createValue(e,`Metadata of ${i?"slide":"mask"} ${t}`,void 0,t,L.WSI,(i?"slide":"mask")+"_metadata")}))}getSlideMetadata(t){return W(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t)).value)}))}updateSlideMetadata(t,e){return W(this,void 0,void 0,(function*(){const i=yield this.getWsiMetadataItem(t);try{const t=yield this.context.update(i.id,Object.assign(Object.assign({},i),{value:JSON.stringify(e)}));return JSON.parse(t.value)}catch(t){return!1}}))}getShadersConfig(t){return W(this,void 0,void 0,(function*(){const e={};for(let i=0;i<t.length;i++){const n=yield this.context.visTemplates.getTemplate(V.Shader,t[i].shaderTemplate);e[t[i].id]=Object.assign(Object.assign({},n),{name:t[i].name||t[i].id,dataReferences:t[i].dataRefs})}return e}))}getVisualizations(t){var e;return W(this,void 0,void 0,(function*(){const i=(yield this.getSlideMetadata(t)).visualization;return{params:i.paramsTemplate&&(yield this.context.visTemplates.getTemplate(V.Params,i.paramsTemplate))||void 0,data:i.data,background:Object.assign(Object.assign({},i.background?yield this.context.visTemplates.getTemplate(V.Background,null===(e=i.background)||void 0===e?void 0:e.template):{}),{data:i.background&&i.background.dataRef}),visualizations:i.visualizations&&(yield Promise.all(i.visualizations.map((t=>W(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield this.context.visTemplates.getTemplate(V.Visualization,t.visTemplate)),{name:t.name,shaders:yield this.getShadersConfig(t.shaders)})}))))))}}))}getMaskMetadata(t){return W(this,void 0,void 0,(function*(){return JSON.parse((yield this.getWsiMetadataItem(t,!1)).value)}))}}var K=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};const G="vis_templates";class Y{constructor(t){this.data=null,this.context=t}fetchTemplateItem(t,e){return K(this,void 0,void 0,(function*(){return(yield this.context.query({references:[null],data_types:[`${G}_${t}`]})).find((t=>t.name===e))}))}getTemplate(t,e){return K(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&JSON.parse(i.value)}))}createTemplate(t,e,i){return K(this,void 0,void 0,(function*(){return!(yield this.fetchTemplateItem(t,e))&&(yield this.context.createValue(i,`${e}`,void 0,void 0,void 0,`${G}_${t}`))}))}deleteTemplate(t,e){return K(this,void 0,void 0,(function*(){const i=yield this.fetchTemplateItem(t,e);return!!i&&(yield this.context.delete(i.id),!0)}))}}var X=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class Z{constructor(t){this.data=null,this.presetDataType="annot_presets",this.context=t}use(t){this.presetDataType=t}getPresetsItem(t=!1){return X(this,void 0,void 0,(function*(){if(!this.data||t){let t=(yield this.context.query({references:[null],data_types:[this.presetDataType]})).find((t=>!0));t||(t=yield this.createPresetsItem({presets:[]})),this.data=t}return this.data}))}createPresetsItem(t){return X(this,void 0,void 0,(function*(){return yield this.context.createValue(t,"Global annotation presets",void 0,void 0,void 0,this.presetDataType)}))}getAnnotPresets(t=!1){return X(this,void 0,void 0,(function*(){const e=yield this.getPresetsItem(t);return{presets:JSON.parse(e.value).presets,lastModifiedAt:e.modified_at}}))}mergePresets(t,e,i){const n=[...t];return e.forEach((t=>n.some((e=>e.id===t.id))||!t.createdAt||t.createdAt<=i?null:n.push(t))),n}updateAnnotPresets(t,e,i=!1){return X(this,void 0,void 0,(function*(){const n=yield this.getPresetsItem(!0),s=JSON.parse(n.value).presets;let r=t,o=!0;if(n.modified_at!==e){if(i)return{presets:s,successfulUpdate:!1,lastModifiedAt:n.modified_at};r=this.mergePresets(s,r,e),o=!1}try{const t=yield this.context.update(n.id,Object.assign(Object.assign({},n),{value:JSON.stringify({presets:r})}));return{presets:JSON.parse(t.value).presets,successfulUpdate:o,lastModifiedAt:t.modified_at}}catch(t){if(409===t.statusCode){const t=yield this.updateAnnotPresets(r,n.modified_at);return Object.assign(Object.assign({},t),{successfulUpdate:o})}throw t}}))}deleteAnnotPresets(){return X(this,void 0,void 0,(function*(){const t=yield this.getPresetsItem(!0);yield this.context.delete(t.id),this.data=null}))}}var tt=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class et{constructor(t){this.data=null,this.configDataType="app_job_config",this.context=t}use(t){this.configDataType=t}fetchJobConfigItem(t){return tt(this,void 0,void 0,(function*(){return(yield this.context.query({references:[t],data_types:[this.configDataType]})).find(Boolean)}))}getJobConfig(t){return tt(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&JSON.parse(e.value)}))}createJobConfig(t,e){return tt(this,void 0,void 0,(function*(){return!(yield this.fetchJobConfigItem(t))&&(yield this.context.createValue(e,"Job config of App",void 0,t,L.JOB,this.configDataType))}))}deleteJobConfig(t){return tt(this,void 0,void 0,(function*(){const e=yield this.fetchJobConfigItem(t);return!!e&&(yield this.context.delete(e.id),!0)}))}}var it=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class nt{constructor(t){this.data=null,this.context=t,this.wsiMetadata=new B(this),this.visTemplates=new Y(this),this.annotPresets=new Z(this),this.jobConfig=new et(this)}get(t){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`)}))}getValue(t){return it(this,void 0,void 0,(function*(){const e=yield this.get(t);if("string"===e.type)try{return JSON.parse(e.value)}catch(t){return e.value}return e.value}))}query(t){return it(this,void 0,void 0,(function*(){return(yield this.context.rawQuery("/global-storage/query",{method:"PUT",body:t})).items}))}create(t){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/global-storage",{method:"POST",body:t})}))}createValue(t,e,i,n,s,r){return it(this,void 0,void 0,(function*(){t=JSON.stringify(t);const o={name:e,description:i,creator_id:this.context.userId,creator_type:H.USER,reference_id:n,reference_type:s,type:"string",value:t,data_type:r};return yield this.create(o)}))}update(t,e){return it(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:e})}))}updateValue(t,e){return it(this,void 0,void 0,(function*(){const i=yield this.context.rawQuery(`/global-storage/${t}`);return i.value=JSON.stringify(e),yield this.context.rawQuery(`/global-storage/${t}`,{method:"PUT",body:i})}))}delete(t){return it(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/global-storage/${t}`,{method:"DELETE"})}))}}class st{constructor(t){this.context=t,this.globalStorage=new nt(this)}get userId(){return this.context.userId}rawQuery(t,e={}){return i=this,n=void 0,r=function*(){return this.context.rawQuery(`${st.relativeApiPath}${t}`,e)},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{u(r.next(t))}catch(t){e(t)}}function a(t){try{u(r.throw(t))}catch(t){e(t)}}function u(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(o,a)}u((r=r.apply(i,n||[])).next())}));var i,n,s,r}}st.relativeApiPath="/rationai";const rt=st;var ot=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{u(n.next(t))}catch(t){r(t)}}function a(t){try{u(n.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class at extends p{constructor(t){super(t),this.defaultScopeKey="",this.version="v3",this.rootURI=this.options.apiUrl+at.apiPath,this.raw=new a(this.rootURI),this.rationai=new rt(this),this.apps=new g(this),this.cases=new C(this),this.examinations=new $(this),this.slides=new z(this),this.scopes=new Map}get defaultScope(){return this.scopes.get(this.defaultScopeKey)}newScopeFrom(t){return ot(this,void 0,void 0,(function*(){const e=new J(this);return yield e.from(t),this.scopes.set(t.id,e),""===this.defaultScopeKey&&(this.defaultScopeKey=t.id),e}))}newScopeUse(t,e){return ot(this,void 0,void 0,(function*(){const i=new J(this);return yield i.use(t,e),this.scopes.set(i.activeExaminationId,i),""===this.defaultScopeKey&&(this.defaultScopeKey=i.activeExaminationId),i}))}getScopeFrom(t){return ot(this,void 0,void 0,(function*(){return this.scopes.get(t.id)||(yield this.newScopeFrom(t))}))}getScopeUse(t,e){return ot(this,void 0,void 0,(function*(){const i=[...this.scopes.values()].filter((i=>i.activeCaseId===t&&(!e||i.activeAppId===e)));return i.length>0?i[0]:yield this.newScopeUse(t,e)}))}rawQuery(t,e={}){const i=Object.create(null,{rawQuery:{get:()=>super.rawQuery}});return ot(this,void 0,void 0,(function*(){return yield i.rawQuery.call(this,t,e),(e=e||{}).headers=e.headers||{},e.headers["User-Id"]=this.userId,this.accessToken&&(e.headers.Authorization=e.headers.Authorization||`Bearer ${this.rawToken}`),this.raw.http(t,e)}))}}at.apiPath="/v3";const ut=at;EmpationAPI=e})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WTFSLEVBQWdCb0YsRywwQ0FDdEMsTUFBTU0sRUFBUSxJQUFJLEVBQU05USxNQUl4QixhQUhNOFEsRUFBTWhKLElBQUlzRCxFQUFRb0YsR0FDeEJ4USxLQUFLZ0ksT0FBT21KLElBQUlMLEVBQU04QyxvQkFBcUI5QyxHQUNmLEtBQXpCOVEsS0FBSytILGtCQUF3Qi9ILEtBQUsrSCxnQkFBa0IrSSxFQUFNOEMscUJBQ3REOUMsQ0FDWCxHLENBRU0sWUFBQWlNLENBQWF0SSxHLDBDQUNmLE9BQU96VSxLQUFLZ0ksT0FBT2xKLElBQUkyVixFQUFZbEosWUFBYXZMLEtBQUs2YyxhQUFhcEksR0FDdEUsRyxDQUVNLFdBQUF1SSxDQUFZNVIsRUFBZ0JvRixHLDBDQUM5QixNQUFNeU0sRUFBaUIsSUFBSWpkLEtBQUtnSSxPQUFPa1YsVUFBVTNQLFFBQVFyRixHQUFRQSxFQUFJMkwsZUFBaUJ6SSxLQUFXb0YsR0FBUXRJLEVBQUk0TCxjQUFnQnRELEtBQzdILE9BQU95TSxFQUFlemMsT0FBUyxFQUFJeWMsRUFBZSxTQUFXamQsS0FBSzhjLFlBQVkxUixFQUFRb0YsRUFDMUYsRyxDQUVNLFFBQUFuSSxDQUFTckQsRUFBa0JwQixFQUFvQixDQUFDLEcsMEdBUWxELGFBUE0sRUFBTXlFLFNBQVEsVUFBQ3JELEVBQVVwQixJQUMvQkEsRUFBVUEsR0FBVyxDQUFDLEdBQ2RXLFFBQVVYLEVBQVFXLFNBQVcsQ0FBQyxFQUN0Q1gsRUFBUVcsUUFBUSxXQUFhdkUsS0FBSzRILE9BQzlCNUgsS0FBSzhHLGNBQ0xsRCxFQUFRVyxRQUF1QixjQUFJWCxFQUFRVyxRQUF1QixlQUFLLFVBQVV2RSxLQUFLb0ksWUFFbkZwSSxLQUFLK1QsSUFBSWhQLEtBQUtDLEVBQVVwQixFQUNuQyxHLEVBdEVPLEdBQUFvUSxRQUFVLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL2V2ZW50cy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy9zdGF0dXMtY29kZXMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvYmFzZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy9yb290LnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3Njb3BlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3QvYXBwcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL3V0aWxzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvY2FzZS1leHBsb3Jlci50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL3dzaS1leHBsb3Jlci50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yb290L2Nhc2VzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3QvZXhhbWluYXRpb25zLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Njb3BlL3N0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvYW5ub3RhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvY29sbGVjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvam9icy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9zY29wZS9waXhlbG1hcHMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvc2NvcGUudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWRhdGEtY3JlYXRvci10eXBlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtLXJlZmVyZW5jZS10eXBlLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvdHlwZXMvdGVtcGxhdGUtdHlwZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yb290L3NsaWRlcy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL3dzaS1tZXRhZGF0YS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL3Zpc3VhbGl6YXRpb24tdGVtcGxhdGVzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL2V4dGVuc2lvbnMvYW5ub3QtcHJlc2V0cy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL2pvYi1jb25maWcudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcmF0aW9uYWkvZ2xvYmFsLXN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcmF0aW9uYWkvcmF0aW9uYWkudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvcm9vdC9yb290LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLyoqXHJcbiAqIE9wZW5TZWFkcmFnb24gaW5zcGlyZWQgZXZlbnQgc3lzdGVtIGZvciByZWR1Y3Rpb24gb2YgZGVwZW5kZW5jaWVzIGFuZCB1bmlmb3JtIGV2ZW50IGFwcHJvYWNoXHJcbiAqL1xyXG5cclxuZXhwb3J0IHR5cGUgRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBhbnkpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgY2xhc3MgRXZlbnRTb3VyY2Uge1xyXG4gICAgZXZlbnRzOiB7W2tleTogc3RyaW5nXTogYW55fSA9IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGFuIGV2ZW50IGhhbmRsZXIgdG8gYmUgdHJpZ2dlcmVkIG9ubHkgb25jZSAob3IgYSBnaXZlbiBudW1iZXIgb2YgdGltZXMpXHJcbiAgICAgKiBmb3IgYSBnaXZlbiBldmVudC4gSXQgaXMgbm90IHJlbW92YWJsZSB3aXRoIHJlbW92ZUhhbmRsZXIoKS5cclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAtIE5hbWUgb2YgZXZlbnQgdG8gcmVnaXN0ZXIuXHJcbiAgICAgKiBAcGFyYW0ge0V2ZW50SGFuZGxlcn0gaGFuZGxlciAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBldmVudFxyXG4gICAgICogaXMgdHJpZ2dlcmVkLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFt1c2VyRGF0YT1udWxsXSAtIEFyYml0cmFyeSBvYmplY3QgdG8gYmUgcGFzc2VkIHVuY2hhbmdlZFxyXG4gICAgICogdG8gdGhlIGhhbmRsZXIuXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3RpbWVzPTFdIC0gVGhlIG51bWJlciBvZiB0aW1lcyB0byBoYW5kbGUgdGhlIGV2ZW50XHJcbiAgICAgKiBiZWZvcmUgcmVtb3ZpbmcgaXQuXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3ByaW9yaXR5PTBdIC0gSGFuZGxlciBwcmlvcml0eS4gQnkgZGVmYXVsdCwgYWxsIHByaW9yaXRpZXMgYXJlIDAuIEhpZ2hlciBudW1iZXIgPSBwcmlvcml0eS5cclxuICAgICAqL1xyXG4gICAgYWRkT25jZUhhbmRsZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50SGFuZGxlciwgdXNlckRhdGE6IG9iamVjdCwgdGltZXM6IG51bWJlciwgcHJpb3JpdHk6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRpbWVzID0gdGltZXMgfHwgMTtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGNvbnN0IG9uY2VIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQ6IG9iamVjdCkge1xyXG4gICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPT09IHRpbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnJlbW92ZUhhbmRsZXIoZXZlbnROYW1lLCBvbmNlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hZGRIYW5kbGVyKGV2ZW50TmFtZSwgb25jZUhhbmRsZXIsIHVzZXJEYXRhLCBwcmlvcml0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gZXZlbnQgaGFuZGxlciBmb3IgYSBnaXZlbiBldmVudC5cclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAtIE5hbWUgb2YgZXZlbnQgdG8gcmVnaXN0ZXIuXHJcbiAgICAgKiBAcGFyYW0ge0V2ZW50SGFuZGxlcn0gaGFuZGxlciAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBldmVudCBpcyB0cmlnZ2VyZWQuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3VzZXJEYXRhPW51bGxdIC0gQXJiaXRyYXJ5IG9iamVjdCB0byBiZSBwYXNzZWQgdW5jaGFuZ2VkIHRvIHRoZSBoYW5kbGVyLlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcmlvcml0eT0wXSAtIEhhbmRsZXIgcHJpb3JpdHkuIEJ5IGRlZmF1bHQsIGFsbCBwcmlvcml0aWVzIGFyZSAwLiBIaWdoZXIgbnVtYmVyID0gcHJpb3JpdHkuXHJcbiAgICAgKi9cclxuICAgIGFkZEhhbmRsZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50SGFuZGxlciwgdXNlckRhdGE6IG9iamVjdCB8IG51bGwgPSBudWxsLCBwcmlvcml0eTogbnVtYmVyID0gMCkge1xyXG4gICAgICAgIGxldCBldmVudHMgPSB0aGlzLmV2ZW50c1sgZXZlbnROYW1lIF07XHJcbiAgICAgICAgaWYgKCAhZXZlbnRzICkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1sgZXZlbnROYW1lIF0gPSBldmVudHMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCBoYW5kbGVyICYmIEV2ZW50U291cmNlLmlzRnVuY3Rpb24oIGhhbmRsZXIgKSApIHtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gZXZlbnRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGV2ZW50ID0geyBoYW5kbGVyOiBoYW5kbGVyLCB1c2VyRGF0YTogdXNlckRhdGEgfHwgbnVsbCwgcHJpb3JpdHk6IHByaW9yaXR5IHx8IDAgfTtcclxuICAgICAgICAgICAgZXZlbnRzWyBpbmRleCBdID0gZXZlbnQ7XHJcbiAgICAgICAgICAgIHdoaWxlICggaW5kZXggPiAwICYmIGV2ZW50c1sgaW5kZXggLSAxIF0ucHJpb3JpdHkgPCBldmVudHNbIGluZGV4IF0ucHJpb3JpdHkgKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudHNbIGluZGV4IF0gPSBldmVudHNbIGluZGV4IC0gMSBdO1xyXG4gICAgICAgICAgICAgICAgZXZlbnRzWyBpbmRleCAtIDEgXSA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgaW5kZXgtLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHNwZWNpZmljIGV2ZW50IGhhbmRsZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IGZvciB3aGljaCB0aGUgaGFuZGxlciBpcyB0byBiZSByZW1vdmVkLlxyXG4gICAgICogQHBhcmFtIHtFdmVudEhhbmRsZXJ9IGhhbmRsZXIgLSBGdW5jdGlvbiB0byBiZSByZW1vdmVkLlxyXG4gICAgICovXHJcbiAgICByZW1vdmVIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBldmVudHMgPSB0aGlzLmV2ZW50c1sgZXZlbnROYW1lIF0sXHJcbiAgICAgICAgICAgIGhhbmRsZXJzOiBFdmVudEhhbmRsZXJbXSA9IFtdO1xyXG4gICAgICAgIGlmICggIWV2ZW50cyApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkoIGV2ZW50cyApICkge1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGV2ZW50c1tpXS5oYW5kbGVyICE9PSBoYW5kbGVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLnB1c2goIGV2ZW50c1sgaSBdICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdID0gaGFuZGxlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBhbW91bnQgb2YgaGFuZGxlcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGluc3BlY3QuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBhbW91bnQgb2YgZXZlbnRzXHJcbiAgICAgKi9cclxuICAgIG51bWJlck9mSGFuZGxlcnMoZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBldmVudHMgPSB0aGlzLmV2ZW50c1sgZXZlbnROYW1lIF07XHJcbiAgICAgICAgaWYgKCAhZXZlbnRzICkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50cy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYWxsIGV2ZW50IGhhbmRsZXJzIGZvciBhIGdpdmVuIGV2ZW50IHR5cGUuIElmIG5vIHR5cGUgaXMgZ2l2ZW4gYWxsXHJcbiAgICAgKiBldmVudCBoYW5kbGVycyBmb3IgZXZlcnkgZXZlbnQgdHlwZSBhcmUgcmVtb3ZlZC5cclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAtIE5hbWUgb2YgZXZlbnQgZm9yIHdoaWNoIGFsbCBoYW5kbGVycyBhcmUgdG8gYmUgcmVtb3ZlZC5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlQWxsSGFuZGxlcnMoZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIGV2ZW50TmFtZSApe1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50c1sgZXZlbnROYW1lIF0gPSBbXTtcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgIGZvciAoIGNvbnN0IGV2ZW50VHlwZSBpbiB0aGlzLmV2ZW50cyApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzWyBldmVudFR5cGUgXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgZnVuY3Rpb24gd2hpY2ggaXRlcmF0ZXMgdGhlIGxpc3Qgb2YgYWxsIGhhbmRsZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQsIGNhbGxpbmcgdGhlIGhhbmRsZXIgZm9yIGVhY2guXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIGdldCBoYW5kbGVycyBmb3IuXHJcbiAgICAgKi9cclxuICAgIGdldEhhbmRsZXIoZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdO1xyXG4gICAgICAgIGlmICggIWV2ZW50cyB8fCAhZXZlbnRzLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50cyA9IGV2ZW50cy5sZW5ndGggPT09IDEgP1xyXG4gICAgICAgICAgICBbIGV2ZW50c1sgMCBdIF0gOlxyXG4gICAgICAgICAgICBBcnJheS5hcHBseSggbnVsbCwgZXZlbnRzICk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICggc291cmNlOiBhbnksIGFyZ3M6IGFueSApIHtcclxuICAgICAgICAgICAgbGV0IGksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBldmVudHMubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBldmVudHNbIGkgXSApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLmV2ZW50U291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MudXNlckRhdGEgPSBldmVudHNbIGkgXS51c2VyRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudHNbIGkgXS5oYW5kbGVyKCBhcmdzICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgZnVuY3Rpb24gd2hpY2ggaXRlcmF0ZXMgdGhlIGxpc3Qgb2YgYWxsIGhhbmRsZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQsXHJcbiAgICAgKiBjYWxsaW5nIHRoZSBoYW5kbGVyIGZvciBlYWNoIGFuZCBhd2FpdGluZyBhc3luYyBvbmVzLlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCB0byBnZXQgaGFuZGxlcnMgZm9yLlxyXG4gICAgICovXHJcbiAgICBnZXRBd2FpdGluZ0hhbmRsZXIoIGV2ZW50TmFtZSkge1xyXG4gICAgICAgIGxldCBldmVudHMgPSB0aGlzLmV2ZW50c1sgZXZlbnROYW1lIF07XHJcbiAgICAgICAgaWYgKCAhZXZlbnRzIHx8ICFldmVudHMubGVuZ3RoICkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnRzID0gZXZlbnRzLmxlbmd0aCA9PT0gMSA/XHJcbiAgICAgICAgICAgIFsgZXZlbnRzWyAwIF0gXSA6XHJcbiAgICAgICAgICAgIEFycmF5LmFwcGx5KCBudWxsLCBldmVudHMgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICggc291cmNlLCBhcmdzICkge1xyXG4gICAgICAgICAgICAvLyBXZSByZXR1cm4gYSBwcm9taXNlIHRoYXQgZ2V0cyByZXNvbHZlZCBhZnRlciBhbGwgdGhlIGV2ZW50cyBmaW5pc2guXHJcbiAgICAgICAgICAgIC8vIFJldHVybmluZyBsb29wIHJlc3VsdCBpcyBub3QgY29ycmVjdCwgbG9vcCBwcm9taXNlcyBjaGFpbiBkeW5hbWljYWxseVxyXG4gICAgICAgICAgICAvLyBhbmQgb3V0ZXIgY29kZSBjb3VsZCBwcm9jZXNzIGZpbmlzaGluZyBsb2dpY3MgaW4gdGhlIG1pZGRsZSBvZiBldmVudCBsb29wLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBldmVudHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbG9vcChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaW5kZXggPj0gbGVuZ3RoIHx8ICFldmVudHNbIGluZGV4IF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoXCJSZXNvbHZlZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhcmdzLmV2ZW50U291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MudXNlckRhdGEgPSBldmVudHNbIGluZGV4IF0udXNlckRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGV2ZW50c1sgaW5kZXggXS5oYW5kbGVyKCBhcmdzICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gKCFyZXN1bHQgfHwgRXZlbnRTb3VyY2UudHlwZShyZXN1bHQpICE9PSBcInByb21pc2VcIikgPyBQcm9taXNlLnJlc29sdmUoKSA6IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKCkgPT4gbG9vcChpbmRleCArIDEpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxvb3AoMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VyIGFuIGV2ZW50LCBvcHRpb25hbGx5IHBhc3NpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cclxuICAgICAqIEBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSAtIE5hbWUgb2YgZXZlbnQgdG8gcmVnaXN0ZXIuXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRBcmdzIC0gRXZlbnQtc3BlY2lmaWMgZGF0YS5cclxuICAgICAqL1xyXG4gICAgcmFpc2VFdmVudCggZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50QXJncz86IGFueSApIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5nZXRIYW5kbGVyKCBldmVudE5hbWUgKTtcclxuICAgICAgICBpZiAoIGhhbmRsZXIgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyKCB0aGlzLCBldmVudEFyZ3MgfHwge30gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXIgYW4gZXZlbnQsIG9wdGlvbmFsbHkgcGFzc2luZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxyXG4gICAgICogVGhpcyBldmVudHMgYXdhaXRzIGV2ZXJ5IGFzeW5jaHJvbm91cyBvciBwcm9taXNlLXJldHVybmluZyBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50QXJncyAtIEV2ZW50LXNwZWNpZmljIGRhdGEuXHJcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfHVuZGVmaW5lZH0gLSBQcm9taXNlIHJlc29sdmVkIHVwb24gdGhlIGV2ZW50IGNvbXBsZXRpb24uXHJcbiAgICAgKi9cclxuICAgIHJhaXNlRXZlbnRBd2FpdGluZyggZXZlbnROYW1lLCBldmVudEFyZ3MgKSB7XHJcbiAgICAgICAgLy91bmNvbW1lbnQgaWYgeW91IHdhbnQgdG8gZ2V0IGEgbG9nIG9mIGFsbCBldmVudHNcclxuICAgICAgICAvLyQuY29uc29sZS5sb2coIFwiQXdhaXRpbmcgZXZlbnQgZmlyZWQ6XCIsIGV2ZW50TmFtZSApO1xyXG5cclxuICAgICAgICBjb25zdCBhd2FpdGluZ0hhbmRsZXIgPSB0aGlzLmdldEF3YWl0aW5nSGFuZGxlcihldmVudE5hbWUpO1xyXG4gICAgICAgIGlmIChhd2FpdGluZ0hhbmRsZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0aW5nSGFuZGxlcih0aGlzLCBldmVudEFyZ3MgfHwge30pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFwiTm8gaGFuZGxlciBmb3IgdGhpcyBldmVudCByZWdpc3RlcmVkLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2xhc3MydHlwZSA9IHtcclxuICAgICAgICAnW29iamVjdCBCb29sZWFuXSc6ICAgICAgICdib29sZWFuJyxcclxuICAgICAgICAnW29iamVjdCBOdW1iZXJdJzogICAgICAgICdudW1iZXInLFxyXG4gICAgICAgICdbb2JqZWN0IFN0cmluZ10nOiAgICAgICAgJ3N0cmluZycsXHJcbiAgICAgICAgJ1tvYmplY3QgRnVuY3Rpb25dJzogICAgICAnZnVuY3Rpb24nLFxyXG4gICAgICAgICdbb2JqZWN0IEFzeW5jRnVuY3Rpb25dJzogJ2Z1bmN0aW9uJyxcclxuICAgICAgICAnW29iamVjdCBQcm9taXNlXSc6ICAgICAgICdwcm9taXNlJyxcclxuICAgICAgICAnW29iamVjdCBBcnJheV0nOiAgICAgICAgICdhcnJheScsXHJcbiAgICAgICAgJ1tvYmplY3QgRGF0ZV0nOiAgICAgICAgICAnZGF0ZScsXHJcbiAgICAgICAgJ1tvYmplY3QgUmVnRXhwXSc6ICAgICAgICAncmVnZXhwJyxcclxuICAgICAgICAnW29iamVjdCBPYmplY3RdJzogICAgICAgICdvYmplY3QnXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGFrZW4gZnJvbSBqUXVlcnkgMS42LjFcclxuICAgICAqIEBmdW5jdGlvbiBpc0Z1bmN0aW9uXHJcbiAgICAgKiBAbWVtYmVyb2YgT3BlblNlYWRyYWdvblxyXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cDovL3d3dy5qcXVlcnkuY29tLyBqUXVlcnl9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpc0Z1bmN0aW9uKCBvYmo6IG9iamVjdCApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlKG9iaikgPT09IFwiZnVuY3Rpb25cIjtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUYWtlbiBmcm9tIGpRdWVyeSAxLjYuMVxyXG4gICAgICogQGZ1bmN0aW9uIHR5cGVcclxuICAgICAqIEBtZW1iZXJvZiBPcGVuU2VhZHJhZ29uXHJcbiAgICAgKiBAc2VlIHtAbGluayBodHRwOi8vd3d3LmpxdWVyeS5jb20vIGpRdWVyeX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHR5cGUoIG9iajogb2JqZWN0ICkge1xyXG4gICAgICAgIHJldHVybiAoIG9iaiA9PT0gbnVsbCApIHx8ICggb2JqID09PSB1bmRlZmluZWQgKSA/XHJcbiAgICAgICAgICAgIFN0cmluZyggb2JqICkgOlxyXG4gICAgICAgICAgICB0aGlzLmNsYXNzMnR5cGVbIG9iai50b1N0cmluZygpIGFzIGtleW9mIHR5cGVvZiB0aGlzLmNsYXNzMnR5cGVdIHx8ICh0eXBlb2Yob2JqKSA9PT0gJ2Z1bmN0aW9uJyA/IFwiZnVuY3Rpb25cIiA6IFwib2JqZWN0XCIpXHJcbiAgICB9O1xyXG59XHJcbiIsIi8vIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL3ByZXR0eW11Y2hicnljZS9odHRwLXN0YXR1cy1jb2Rlcy9ibG9iL21hc3Rlci9zcmMvc3RhdHVzLWNvZGVzLnRzXHJcbmV4cG9ydCBjb25zdCBTVEFUVVNfQ09ERVMgPSB7XHJcbiAgICAxMDA6ICdDb250aW51ZScsXHJcbiAgICAxMDE6ICdTd2l0Y2hpbmcgcHJvdG9jb2xzJyxcclxuICAgIDEwMjogJ1Byb2Nlc3NpbmcnLFxyXG4gICAgMTAzOiAnRWFybHkgSGludHMnLFxyXG4gICAgMjAwOiAnT2snLFxyXG4gICAgMjAxOiAnQ3JlYXRlZCcsXHJcbiAgICAyMDI6ICdBY2NlcHRlZCcsXHJcbiAgICAyMDM6ICdOb24gQXV0aG9yaXRhdGl2ZSBJbmZvcm1hdGlvbicsXHJcbiAgICAyMDQ6ICdObyBDb250ZW50JyxcclxuICAgIDIwNTogJ1Jlc2V0IENvbnRlbnQnLFxyXG4gICAgMjA2OiAnUGFydGlhbCBDb250ZW50JyxcclxuICAgIDIwNzogJ011bHRpIFN0YXR1cycsXHJcbiAgICAzMDA6ICdNdWx0aXBsZSBDaG9pY2VzJyxcclxuICAgIDMwMTogJ01vdmVkIFBlcm1hbmVudGx5JyxcclxuICAgIDMwMjogJ01vdmVkIFRlbXBvcmFyaWx5JyxcclxuICAgIDMwMzogJ1NlZSBPdGhlcicsXHJcbiAgICAzMDQ6ICdOb3QgTW9kaWZpZWQnLFxyXG4gICAgMzA1OiAnVXNlIFByb3h5JyxcclxuICAgIDMwNzogJ1RlbXBvcmFyeSBSZWRpcmVjdCcsXHJcbiAgICAzMDg6ICdQZXJtYW5lbnQgUmVkaXJlY3QnLFxyXG4gICAgNDAwOiAnQmFkIFJlcXVlc3QnLFxyXG4gICAgNDAxOiAnVW5hdXRob3JpemVkJyxcclxuICAgIDQwMjogJ1BheW1lbnQgUmVxdWlyZWQnLFxyXG4gICAgNDAzOiAnRm9yYmlkZGVuJyxcclxuICAgIDQwNDogJ05vdCBGb3VuZCcsXHJcbiAgICA0MDU6ICdNZXRob2QgTm90IEFsbG93ZWQnLFxyXG4gICAgNDA2OiAnTm90IEFjY2VwdGFibGUnLFxyXG4gICAgNDA3OiAnUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQnLFxyXG4gICAgNDA4OiAnUmVxdWVzdCBUaW1lb3V0JyxcclxuICAgIDQwOTogJ0NvbmZsaWN0JyxcclxuICAgIDQxMDogJ0dvbmUnLFxyXG4gICAgNDExOiAnTGVuZ3RoIFJlcXVpcmVkJyxcclxuICAgIDQxMjogJ1ByZWNvbmRpdGlvbiBGYWlsZWQnLFxyXG4gICAgNDEzOiAnUmVxdWVzdCBUb28gTG9uZycsXHJcbiAgICA0MTQ6ICdSZXF1ZXN0IFVyaSBUb28gTG9uZycsXHJcbiAgICA0MTU6ICdVbnN1cHBvcnRlZCBNZWRpYSBUeXBlJyxcclxuICAgIDQxNjogJ1JlcXVlc3RlZCBSYW5nZSBOb3QgU2F0aXNmaWFibGUnLFxyXG4gICAgNDE3OiAnRXhwZWN0YXRpb24gRmFpbGVkJyxcclxuICAgIC8qKlxyXG4gICAgICogT2ZmaWNpYWwgRG9jdW1lbnRhdGlvbiBAIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMyMzI0I3NlY3Rpb24tMi4zLjJcclxuICAgICAqXHJcbiAgICAgKiBBbnkgYXR0ZW1wdCB0byBicmV3IGNvZmZlZSB3aXRoIGEgdGVhcG90IHNob3VsZCByZXN1bHQgaW4gdGhlIGVycm9yIGNvZGUgXCI0MTggSSdtIGEgdGVhcG90XCIuIFRoZSByZXN1bHRpbmcgZW50aXR5IGJvZHkgTWF5IGJlIHNob3J0IGFuZCBzdG91dC5cclxuICAgICAqL1xyXG4gICAgNDE4OiAnSW0gQSBUZWFwb3QnLFxyXG4gICAgNDE5OiAnSW5zdWZmaWNpZW50IFNwYWNlIE9uIFJlc291cmNlJyxcclxuICAgIDQyMDogJ01ldGhvZCBGYWlsdXJlJyxcclxuICAgIDQyMTogJ01pc2RpcmVjdGVkIFJlcXVlc3QnLFxyXG4gICAgNDIyOiAnVW5wcm9jZXNzYWJsZSBFbnRpdHknLFxyXG4gICAgNDIzOiAnTG9ja2VkJyxcclxuICAgIDQyNDogJ0ZhaWxlZCBEZXBlbmRlbmN5JyxcclxuICAgIDQyNjogJ1VwZ3JhZGUgUmVxdWlyZWQnLFxyXG4gICAgNDI4OiAnUHJlY29uZGl0aW9uIFJlcXVpcmVkJyxcclxuICAgIDQyOTogJ1RvbyBNYW55IFJlcXVlc3RzJyxcclxuICAgIDQzMTogJ1JlcXVlc3QgSGVhZGVyIEZpZWxkcyBUb28gTGFyZ2UnLFxyXG4gICAgNDUxOiAnVW5hdmFpbGFibGUgRm9yIExlZ2FsIFJlYXNvbnMnLFxyXG4gICAgNTAwOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcclxuICAgIDUwMTogJ05vdCBJbXBsZW1lbnRlZCcsXHJcbiAgICA1MDI6ICdCYWQgR2F0ZXdheScsXHJcbiAgICA1MDM6ICdTZXJ2aWNlIFVuYXZhaWxhYmxlJyxcclxuICAgIDUwNDogJ0dhdGV3YXkgVGltZW91dCcsXHJcbiAgICA1MDU6ICdIdHRwIFZlcnNpb24gTm90IFN1cHBvcnRlZCcsXHJcbiAgICA1MDc6ICdJbnN1ZmZpY2llbnQgU3RvcmFnZScsXHJcbiAgICA1MTE6ICdOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkJ1xyXG59O1xyXG4iLCJpbXBvcnQge0V2ZW50U291cmNlfSBmcm9tIFwiLi9ldmVudHNcIjtcclxuaW1wb3J0IHsgU1RBVFVTX0NPREVTIH0gZnJvbSAnLi9zdGF0dXMtY29kZXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbXBhdGlvbkFQSU9wdGlvbnMge1xyXG4gICAgYW5vbnltb3VzVXNlcklkPzogc3RyaW5nO1xyXG4gICAgd29ya2JlbmNoQXBpVXJsOiBzdHJpbmc7XHJcbiAgICBhcGlSb290UGF0aD86IHN0cmluZztcclxufVxyXG5cclxudHlwZSBSZXNwb25zZVR5cGUgPSBcImpzb25cIiB8IFwiYmxvYlwiIHwgXCJ0ZXh0XCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJhd09wdGlvbnMge1xyXG4gICAgYm9keT86IG9iamVjdCB8IHN0cmluZztcclxuICAgIHF1ZXJ5PzogYW55O1xyXG4gICAgbWV0aG9kPzogc3RyaW5nO1xyXG4gICAgaGVhZGVycz86IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9O1xyXG4gICAgcmVzcG9uc2VUeXBlPzogUmVzcG9uc2VUeXBlO1xyXG59XHJcblxyXG4vL2h0dHBzOi8vZ2lzdC5naXRodWIuY29tL1Rvb1RhbGxOYXRlLzRmZDY0MWY4MjBlMTMyNTY5NTQ4N2RmZDg4M2U1Mjg1XHJcbmZ1bmN0aW9uIGh0dHBFcnJvclRvTmFtZShjb2RlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgY29uc3Qgc3VmZml4ID0gKGNvZGUgLyAxMDAgfCAwKSA9PT0gNCB8fCAoY29kZSAvIDEwMCB8IDApID09PSA1ID8gJ2Vycm9yJyA6ICcnO1xyXG4gICAgbGV0IG5hbWUgPSBgICR7U3RyaW5nKFNUQVRVU19DT0RFU1tjb2RlIGFzIGtleW9mIHR5cGVvZiBTVEFUVVNfQ09ERVNdIHx8IGBIVFRQIENvZGUgJHtjb2RlfWApLnJlcGxhY2UoL2Vycm9yJC9pLCAnJyl9ICR7c3VmZml4fWA7XHJcbiAgICByZXR1cm4gbmFtZS5zcGxpdChcIiBcIikucmVkdWNlKChhY2MsIGMpID0+IGFjY1xyXG4gICAgICAgICsgKGMgPyAoYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGMuc2xpY2UoMSkpIDogXCJcIikpO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSFRUUEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG5cclxuICAgIHN0YXR1c0NvZGU6IG51bWJlcjtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueVxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb2RlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZywgZXh0cmFzPzogUmVjb3JkPHN0cmluZywgYW55Pikge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgU1RBVFVTX0NPREVTW2NvZGUgYXMga2V5b2YgdHlwZW9mIFNUQVRVU19DT0RFU10gfHwgYEhUVFAgQ29kZSAke2NvZGV9YCk7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMyAmJiBleHRyYXMpIHtcclxuICAgICAgICAgICAgLy8gbm9pbnNwZWN0aW9uIFR5cGVTY3JpcHRWYWxpZGF0ZVR5cGVzXHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgZXh0cmFzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5uYW1lID0gaHR0cEVycm9yVG9OYW1lKGNvZGUpO1xyXG4gICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IGNvZGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmF3QXBpT3B0aW9ucyB7fVxyXG5cclxuZXhwb3J0IGNsYXNzIFJhd0FQSSB7XHJcbiAgICBwdWJsaWMgdXJsOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgb3B0aW9uczogUmF3T3B0aW9ucztcclxuICAgIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBvcHRpb25zOiBSYXdBcGlPcHRpb25zID0ge30pIHtcclxuICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3BhcnNlUXVlcnlQYXJhbXMocGFyYW1zOiBzdHJpbmcgfCB7W2tleTogc3RyaW5nXTogc3RyaW5nfSkge1xyXG4gICAgICAgIGlmIChwYXJhbXMpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIpIHJldHVybiBwYXJhbXM7XHJcblxyXG4gICAgICAgICAgICAvL2NsZWFudXAgcGxhaW4gb2JqZWN0c1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgcGFyYW1zLmNvbnN0cnVjdG9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgaW4gcGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHBhcmFtc1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQpIGRlbGV0ZSBwYXJhbXNba107XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBgPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIF9mZXRjaCh1cmw6IHN0cmluZywgb3B0aW9uczogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBvcHRpb25zLm1ldGhvZCxcclxuICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBvcHRpb25zLmJvZHlcclxuICAgICAgICB9IGFzIFJlcXVlc3RJbml0KTtcclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCByZXNwb25zZVtvcHRpb25zLnJlc3BvbnNlVHlwZSB8fCBcImpzb25cIl0oKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBIVFRQRXJyb3IoNTAwLFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBwYXJzZSByZXNwb25zZSBkYXRhLiBPcmlnaW5hbCBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfSB8ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEhUVFBFcnJvcihyZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQsIHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaHR0cChlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSYXdPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBoYXNCb2R5ID0gISFvcHRpb25zLmJvZHk7XHJcbiAgICAgICAgb3B0aW9ucy5tZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCAoaGFzQm9keSA/IFwiUE9TVFwiIDogXCJHRVRcIik7XHJcbiAgICAgICAgaWYgKCFlbmRwb2ludC5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgICAgICAgICAgZW5kcG9pbnQgPSBgLyR7ZW5kcG9pbnR9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3B0aW9ucy5xdWVyeSA9IHRoaXMuX3BhcnNlUXVlcnlQYXJhbXMob3B0aW9ucy5xdWVyeSk7XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcclxuICAgICAgICBpZiAob3B0aW9ucy5ib2R5ICYmIHR5cGVvZiBvcHRpb25zLmJvZHkgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5ib2R5KTtcclxuICAgICAgICB9IGVsc2Ugb3B0aW9ucy5ib2R5ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZmV0Y2godGhpcy51cmwgKyBlbmRwb2ludCArIG9wdGlvbnMucXVlcnksIG9wdGlvbnMpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL3RvZG8gY29uc2lkZXIgaW1wbGVtZW50aW5nICdvYnNlcnZlJyBtZXRob2QgdGhhdCByZWdpc3RlcnMgYW5kIHdhdGNoZXMgY2VydGFpbiBwcm9wZXJ0eSBsaXN0Li5cclxuZXhwb3J0IGNsYXNzIEFic3RyYWN0QVBJIGV4dGVuZHMgRXZlbnRTb3VyY2Uge1xyXG4gICAgLy90b2RvIHRyeSBmaWd1cmluZyBvdXQgaG93IHRvIHByaW50IHRoZSBjbGFzcyBuYW1lIHRvb1xyXG4gICAgLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yODAzODkvaG93LWRvLXlvdS1maW5kLW91dC10aGUtY2FsbGVyLWZ1bmN0aW9uLWluLWphdmFzY3JpcHRcclxuICAgIHByaXZhdGUgZ2V0Q2FsbGVyTmFtZSgpIHtcclxuICAgICAgICAvLyBHZXQgc3RhY2sgYXJyYXlcclxuICAgICAgICBjb25zdCBvcmlnID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7XHJcbiAgICAgICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSAoZXJyb3IsIHN0YWNrKSA9PiBzdGFjaztcclxuICAgICAgICBjb25zdCB7IHN0YWNrIH0gPSBuZXcgRXJyb3IoKTtcclxuICAgICAgICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IG9yaWc7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbGxlciA9IHN0YWNrPy5bMl07XHJcbiAgICAgICAgcmV0dXJuIGNhbGxlciA/IGNhbGxlciA6ICd1bmtub3duIGNvbnRleHQnO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVpcmVzKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgYEFyZ3VtZW50RXJyb3JbJHt0aGlzLmdldENhbGxlck5hbWUoKX1dICR7bmFtZX0gaXMgbWlzc2luZyAtIHJlcXVpcmVkIHByb3BlcnR5IWBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBpbnRlcmZhY2UgSnd0VG9rZW5CYXNlIHtcclxuICAgIHN1Yjogc3RyaW5nLFxyXG4gICAgZXhwOiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSnd0VG9rZW4gZXh0ZW5kcyBKd3RUb2tlbkJhc2Uge1xyXG4gICAgaWF0OiBudW1iZXI7XHJcbiAgICBqdGk6IHN0cmluZztcclxuICAgIGlzczogc3RyaW5nO1xyXG4gICAgYXVkOiBzdHJpbmc7XHJcbiAgICB0eXA6IHN0cmluZztcclxuICAgIGF6cDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Snd0VG9rZW5FeHBpcmVzVGltZW91dCh0b2tlbjogSnd0VG9rZW5CYXNlKSB7XHJcbiAgICAvL3RpbWVvdXQgT1IgMzAwIHNlY3NcclxuICAgIHJldHVybiB0b2tlbi5leHAqMWUzIC0gRGF0ZS5ub3coKSB8fCAzMDBlMztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY29wZVRva2VuIGV4dGVuZHMgSnd0VG9rZW5CYXNlIHtcclxuICAgIHRva2VuX2lkOiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnd0VG9rZW4odG9rZW46IHN0cmluZyk6IEp3dFRva2VuQmFzZSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShhdG9iKHRva2VuLnNwbGl0KCcuJylbMV0pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuICAgIHN0YXRpYyBlcnJvciguLi5hcmdzOiBhbnkpOnZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFOkVtcGF0aW9uQVBJXCIsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHdhcm4oLi4uYXJnczogYW55KTp2b2lkIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oXCJXOkVtcGF0aW9uQVBJXCIsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGluZm8oLi4uYXJnczogYW55KTp2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oXCJJOkVtcGF0aW9uQVBJXCIsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGRlYnVnKC4uLmFyZ3M6IGFueSk6dm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIkQ6RW1wYXRpb25BUElcIiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtBYnN0cmFjdEFQSSwgRW1wYXRpb25BUElPcHRpb25zLCBSYXdBUEksIFJhd09wdGlvbnN9IGZyb20gXCIuL2Jhc2VcIjtcclxuaW1wb3J0IHtTY29wZUFQSX0gZnJvbSBcIi4vc2NvcGVcIjtcclxuaW1wb3J0IHtnZXRKd3RUb2tlbkV4cGlyZXNUaW1lb3V0LCBKd3RUb2tlbkJhc2UsIHBhcnNlSnd0VG9rZW59IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUm9vdENvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGNvbnRleHQ6IFJvb3RBUEk7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGF0YTogYW55O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJvb3RBUElPcHRpb25zIHtcclxuICAgIGFub255bW91c1VzZXJJZDogc3RyaW5nO1xyXG4gICAgd29ya2JlbmNoQXBpVXJsOiBzdHJpbmc7XHJcbiAgICBhcGlVcmw6IHN0cmluZztcclxuICAgIGFwaVJvb3RQYXRoOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIEJhc2VBUEkgaW1wbGVtZW50cyBBYnN0cmFjdEFQSSBvdmVyIC92W3ZlcnNpb25dXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSb290QVBJIGV4dGVuZHMgQWJzdHJhY3RBUEkge1xyXG5cclxuICAgIC8vIFJhd0FQSSBpbXBsZW1lbnRzIGFjY2VzcyB0byB0aGUgaHR0cCBlbmRwb2ludHNcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCByYXc6IFJhd0FQSTtcclxuICAgIC8vIGRlZmF1bHQgU2NvcGVBUEkgaW1wbGVtZW50cyBBYnN0cmFjdEFQSSBvdmVyIC92W3ZlcnNpb25dL3Njb3Blc1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRlZmF1bHRTY29wZUtleTogc3RyaW5nO1xyXG5cclxuICAgIC8vIE1hcCBvZiBTY29wZUFQSSwgdGhhdCBpbXBsZW1lbnQgQWJzdHJhY3RBUEkgb3ZlciAvdlt2ZXJzaW9uXS9zY29wZXMsIGFsbG93cyBrZWVwaW5nIG11bHRpcGxlIHNjb3BlcyBvcGVuIGF0IG9uY2VcclxuICAgIGFic3RyYWN0IHNjb3BlczogTWFwPHN0cmluZywgU2NvcGVBUEk+O1xyXG5cclxuICAgIC8vIFByb3BlcnRpZXNcclxuICAgIGFic3RyYWN0IHZlcnNpb246IHN0cmluZztcclxuICAgIGFic3RyYWN0IHJvb3RVUkk6IHN0cmluZztcclxuICAgIG9wdGlvbnM6IFJvb3RBUElPcHRpb25zO1xyXG4gICAgY2FjaGVkOiBvYmplY3Q7XHJcbiAgICBhY2Nlc3NUb2tlbjogSnd0VG9rZW5CYXNlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBfdXNlcklkOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF90b2tlbkV4cGlyZXM6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF9yYXdUb2tlbjogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3Iob3B0aW9uczogRW1wYXRpb25BUElPcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKCFvcHRpb25zLndvcmtiZW5jaEFwaVVybCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIldCIEFwaSB1cmwgaXMgcmVxdWlyZWQhXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYXBpVXJsO1xyXG4gICAgICAgIGlmICghb3B0aW9ucy5hcGlSb290UGF0aCkge1xyXG4gICAgICAgICAgICBhcGlVcmwgPSBvcHRpb25zLndvcmtiZW5jaEFwaVVybDtcclxuICAgICAgICB9IGVsc2UgaWYgKCFvcHRpb25zLmFwaVJvb3RQYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XHJcbiAgICAgICAgICAgIGFwaVVybCA9IGAke29wdGlvbnMud29ya2JlbmNoQXBpVXJsfS8ke29wdGlvbnMuYXBpUm9vdFBhdGh9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcGlVcmwgPSBgJHtvcHRpb25zLndvcmtiZW5jaEFwaVVybH0ke29wdGlvbnMuYXBpUm9vdFBhdGh9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFwaVVybC5lbmRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgICAgIGFwaVVybCA9IGFwaVVybC5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYXBpVXJsLFxyXG4gICAgICAgICAgICB3b3JrYmVuY2hBcGlVcmw6IG9wdGlvbnMud29ya2JlbmNoQXBpVXJsLFxyXG4gICAgICAgICAgICBhbm9ueW1vdXNVc2VySWQ6IG9wdGlvbnMuYW5vbnltb3VzVXNlcklkIHx8ICdhbm9ueW1vdXMnLFxyXG4gICAgICAgICAgICBhcGlSb290UGF0aDogb3B0aW9ucy5hcGlSb290UGF0aCB8fCBcIlwiLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdGhpcy5vcHRpb25zLmFub255bW91c1VzZXJJZDtcclxuICAgICAgICB0aGlzLmNhY2hlZCA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hhbmdlIHRoZSBVc2VyIGFjdG9yIGZvciB0aGUgQVBJLiBOb3RlOiB0aGUgYXBpIHdpbGxcclxuICAgICAqIHJlc2V0IGl0J3Mgd2hvbGUgc3RhdGUuXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gc2V0dXAgY29udGV4dCBmcm9tIG9iamVjdFxyXG4gICAgICogQHBhcmFtIHdpdGhFdmVudFxyXG4gICAgICovXHJcbiAgICBmcm9tKHRva2VuOiBzdHJpbmcsIHdpdGhFdmVudD10cnVlKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yYXdUb2tlbiA9IHRva2VuO1xyXG4gICAgICAgIHdpdGhFdmVudCA9IHdpdGhFdmVudCAmJiAhdGhpcy5hY2Nlc3NUb2tlbjsgLy9maXJlIGV2ZW50IG9ubHkgd2hlbiB3ZSBjb25maWd1cmUgbmV3IHNlc3Npb25cclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gcGFyc2VKd3RUb2tlbih0b2tlbikgYXMgSnd0VG9rZW5CYXNlO1xyXG4gICAgICAgIGNvbnN0IHRva2VuVGltZW91dCA9IGdldEp3dFRva2VuRXhwaXJlc1RpbWVvdXQodGhpcy5hY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5FeHBpcmVzID0gRGF0ZS5ub3coKSArIHRva2VuVGltZW91dCAvIDI7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gdGhpcy5hY2Nlc3NUb2tlbi5zdWI7XHJcbiAgICAgICAgaWYgKCF1c2VySWQgfHwgdXNlcklkLmxlbmd0aCA+IDUwKSB0aHJvdyBcIkludmFsaWQgVXNlciBJRCEgTXVzdCBiZSB2YWxpZCBzdHJpbmcgc2hvcnRlciB0aGFuIDUwIGNoYXJhY3RlcnMhXCI7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIGlmICh0aGlzLnVzZXJJZCA9PT0gdXNlcklkKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHdpdGhFdmVudCkgdGhpcy5yYWlzZUV2ZW50KCdpbml0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2UgdGhlIFVzZXIgYWN0b3IgZm9yIHRoZSBBUEksIHdpdGhvdXQgcHJvdmlkaW5nIHRva2VuLiBVc2VkIGluIG5vLXRva2VuIGNvbmZpZ3VyYXRpb24uIE5vdGU6IHRoZSBhcGkgd2lsbFxyXG4gICAgICogcmVzZXQgaXQncyB3aG9sZSBzdGF0ZS5cclxuICAgICAqIEBwYXJhbSB0b2tlbiBzZXR1cCBjb250ZXh0IGZyb20gb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gd2l0aEV2ZW50XHJcbiAgICAgKi9cclxuICAgIHVzZSh1c2VySWQ6IHN0cmluZywgd2l0aEV2ZW50PXRydWUpOiB2b2lkIHtcclxuICAgICAgICB3aXRoRXZlbnQgPSB3aXRoRXZlbnQgJiYgIXRoaXMuX3VzZXJJZDsgLy9maXJlIGV2ZW50IG9ubHkgd2hlbiB3ZSBjb25maWd1cmUgbmV3IHNlc3Npb25cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgaWYgKCF1c2VySWQgfHwgdXNlcklkLmxlbmd0aCA+IDUwKSB0aHJvdyBcIkludmFsaWQgVXNlciBJRCEgTXVzdCBiZSB2YWxpZCBzdHJpbmcgc2hvcnRlciB0aGFuIDUwIGNoYXJhY3RlcnMhXCI7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIGlmICh3aXRoRXZlbnQpIHRoaXMucmFpc2VFdmVudCgnaW5pdF9ub190b2tlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX3Jhd1Rva2VuID0gXCJcIjtcclxuICAgICAgICB0aGlzLl90b2tlbkV4cGlyZXMgPSAwO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHRoaXMub3B0aW9ucy5hbm9ueW1vdXNVc2VySWQ7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0U2NvcGVLZXkgPSBcIlwiXHJcbiAgICAgICAgdGhpcy5zY29wZXMuZm9yRWFjaCgoc2NwKSA9PiBzY3AucmVzZXQoKSk7XHJcbiAgICAgICAgdGhpcy5zY29wZXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnJhaXNlRXZlbnQoJ3Jlc2V0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHVzZXJJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJhd1Rva2VuKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1Rva2VuO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJhd1F1ZXJ5KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM/OiBSYXdPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAoIXRoaXMuX3VzZXJJZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIlVzZXIgbXVzdCBiZSBjb25maWd1cmVkIHRvIGFjY2VzcyBFbXBhaWEgQVBJOiBlaXRoZXIgcHJvdmlkZSBhIHZhbGlkICdhbm9ueW1vdXMnIHVzZXIgSUQgdGhyb3VnaCBlbnYgdmFyaWFibGVzLCBvciBjb25maWd1cmUgdGhlIFJvb3QgQVBJIHdpdGggYSB2YWxpZCB0b2tlbi5cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl90b2tlbkV4cGlyZXMgPiAwICYmIERhdGUubm93KCkgPiB0aGlzLl90b2tlbkV4cGlyZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRPYmplY3QgPSB7bmV3VG9rZW46IFwiXCJ9O1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQGV2ZW50IHRva2VuLXJlZnJlc2hcclxuICAgICAgICAgICAgICogQXdhaXRpbmcgZXZlbnQuIFByb3ZpZGUgbmV3VG9rZW4gdmFsdWUgaW4gdGhlIGV2ZW50IGhhbmRsZXIgYXJndW1lbnQgcGFyYW1zIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBmb3IgdGhlIHJvb3QgQVBJIHRvIGNvbnN1bWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJhaXNlRXZlbnRBd2FpdGluZygndG9rZW4tcmVmcmVzaCcsIGV2ZW50T2JqZWN0KTtcclxuICAgICAgICAgICAgdGhpcy5mcm9tKGV2ZW50T2JqZWN0Lm5ld1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQge0Fic3RyYWN0QVBJLCBSYXdBUEksIFJhd09wdGlvbnN9IGZyb20gXCIuL2Jhc2VcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTY29wZUNvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGNvbnRleHQ6IFNjb3BlQVBJO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRhdGE6IGFueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNjb3BlIEJpbmRzIEV4YW1pbmF0aW9uIGFuZCBVc2VyLlxyXG4gKi9cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNjb3BlQVBJIGV4dGVuZHMgQWJzdHJhY3RBUEkge1xyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCByYXc6IFJhd0FQSTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZSB0aGUgYWN0aXZlIFNjb3BlIGZvciB0aGUgQVBJLiBOb3RlOiB0aGUgc2NvcGUgc3RhdGUgd2lsbCByZXNldC5cclxuICAgICAqIEBwYXJhbSBjYXNlSWQgY2FzZSBpZCAtIG1hbmFnZXMgdGhlIGFjdGl2ZSBzY29wZVxyXG4gICAgICogQHBhcmFtIGFwcElkIG1hbmFnZXMgdGhlIGFjdGl2ZSBzY29wZSB0aHJvdWdoIGV4YW1pbmF0aW9uPHVzZXIsIGFwcD5cclxuICAgICAqICAgICAgICAgIGlmIHVuZGVmaW5lZCwgdGhlIGV4YW1pbmF0aW9uIGlzIG1hbmFnZWQgaW50ZXJuYWxseVxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCB1c2UoY2FzZUlkOiBzdHJpbmcsIGFwcElkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZSB0aGUgYWN0aXZlIFNjb3BlIGZvciB0aGUgQVBJLiBOb3RlOiB0aGUgc2NvcGUgc3RhdGUgd2lsbCByZXNldC5cclxuICAgICAqIEBwYXJhbSBleGFtaW5hdGlvbiBzZXR1cCBjb250ZXh0IGZyb20gb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IGZyb20oZXhhbWluYXRpb246IG9iamVjdCk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgYWJzdHJhY3QgcmVzZXQoKTogdm9pZDtcclxuXHJcbiAgICBhYnN0cmFjdCByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zPzogUmF3T3B0aW9ucyk6IFByb21pc2U8YW55PjtcclxufVxyXG5cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IHtSb290QVBJLCBSb290Q29udGV4dH0gZnJvbSBcIi4uLy4uL3Jvb3RcIjtcclxuaW1wb3J0IFJvb3QgZnJvbSBcIi4vcm9vdFwiO1xyXG5pbXBvcnQge0FwcExpc3R9IGZyb20gXCIuL3R5cGVzL2FwcC1saXN0XCI7XHJcbmltcG9ydCB7QXBwUXVlcnl9IGZyb20gXCIuL3R5cGVzL2FwcC1xdWVyeVwiO1xyXG5pbXBvcnQge0FwcE91dHB1dH0gZnJvbSBcIi4vdHlwZXMvYXBwLW91dHB1dFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwcyBleHRlbmRzIFJvb3RDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBSb290QVBJO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IEFwcExpc3QgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgX2RlZmF1bHRBcHA6IEFwcE91dHB1dCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJvb3QpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbGlzdCgpOiBQcm9taXNlPEFwcExpc3Q+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYXBwcy9xdWVyeScsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgICBhcHBzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdGlzc3VlczogbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0YWluczogbnVsbCxcclxuICAgICAgICAgICAgICAgIGpvYl9tb2RlczogbnVsbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkgYXMgQXBwTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBxdWVyeShxdWVyeTogQXBwUXVlcnkpOiBQcm9taXNlPEFwcExpc3Q+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYXBwcy9xdWVyeScsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBib2R5OiBxdWVyeVxyXG4gICAgICAgIH0pIGFzIEFwcExpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVmYXVsdCgpOiBQcm9taXNlPEFwcE91dHB1dD4ge1xyXG4gICAgICAgIGlmICghdGhpcy5kYXRhKSBhd2FpdCB0aGlzLmxpc3QoKTtcclxuICAgICAgICBmb3IgKGxldCBhcHAgb2YgdGhpcy5kYXRhIS5pdGVtcykge1xyXG4gICAgICAgICAgICBpZiAoYXBwLm5hbWVfc2hvcnQgPT09IFwiTUFQM1wiICYmIGFwcC52ZW5kb3JfbmFtZSA9PT0gXCJyYXRpb25haVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWZhdWx0QXBwID0gYXBwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kZWZhdWx0QXBwKSB0aHJvdyBcIkRlZmF1bHQgQVBQIG5vdCBwcmVzZW50IGluIHRoZSBpbmZyYXN0cnVjdHVyZSEgV2FzIGl0IGltcG9ydGVkP1wiO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZhdWx0QXBwO1xyXG4gICAgfVxyXG59XHJcbiIsImNvbnN0IGdldE51bWJlciA9ICh2YXJpYWJsZTogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XHJcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIHZhcmlhYmxlID0gTnVtYmVyKHZhcmlhYmxlKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHZhcmlhYmxlXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRZZWFyRnJvbUVwb2NoVGltZSA9IChlcG9jaFRpbWU6IG51bWJlciB8IHN0cmluZykgPT4ge1xyXG4gIHJldHVybiBuZXcgRGF0ZShnZXROdW1iZXIoZXBvY2hUaW1lKSAqIDEwMDApLmdldEZ1bGxZZWFyKClcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldE1vbnRoRnJvbUVwb2NoVGltZSA9IChlcG9jaFRpbWU6IG51bWJlciB8IHN0cmluZykgPT4ge1xyXG4gIHJldHVybiBuZXcgRGF0ZShnZXROdW1iZXIoZXBvY2hUaW1lKSAqIDEwMDApLmdldE1vbnRoKClcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldERheUZyb21FcG9jaFRpbWUgPSAoZXBvY2hUaW1lOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoZ2V0TnVtYmVyKGVwb2NoVGltZSkgKiAxMDAwKS5nZXREYXRlKClcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1hdGNoU3RyaW5nT25TZXBhcmF0b3JHcm91cCA9IChzdHI6IHN0cmluZywgc2VwYXJhdG9yOiBzdHJpbmcsIGdyb3VwSWR4OiBudW1iZXIsIHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBtYXRjaGVzID0gbmV3IFJlZ0V4cChzZXBhcmF0b3IpLmV4ZWMoc3RyKVxyXG4gICAgICBpZighbWF0Y2hlcyB8fCBncm91cElkeCA8IDEgfHwgZ3JvdXBJZHggPj0gbWF0Y2hlcy5sZW5ndGgpIFxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICByZXR1cm4gbWF0Y2hlc1tncm91cElkeF0gPT09IHZhbHVlXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYXRjaFN0cmluZ09uVG9rZW5zID0gKHN0cmluZ1RvTWF0Y2g6IHN0cmluZywgdG9rZW5TdHJpbmc6IHN0cmluZykgPT4ge1xyXG4gIGNvbnN0IHRva2VucyA9IHRva2VuU3RyaW5nXHJcbiAgICAuc3BsaXQoJyAnKVxyXG4gICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgLm1hcCh0b2tlbiA9PiBgKD89LipcXFxcYiR7dG9rZW59XFxcXGIpYCk7XHJcblxyXG5jb25zdCBzZWFyY2hUZXJtUmVnZXggPSBuZXcgUmVnRXhwKHRva2Vucy5qb2luKCcnKSwgJ2dpbScpO1xyXG5yZXR1cm4gc3RyaW5nVG9NYXRjaC5tYXRjaChzZWFyY2hUZXJtUmVnZXgpICE9PSBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ3JvdXBCeSA9IDxULCBLIGV4dGVuZHMga2V5b2YgYW55PihhcnI6IFRbXSwga2V5OiAoaTogVCkgPT4gSykgPT5cclxuICBhcnIucmVkdWNlKChncm91cHMsIGl0ZW0pID0+IHtcclxuICAgIChncm91cHNba2V5KGl0ZW0pXSB8fD0gW10pLnB1c2goaXRlbSk7XHJcbiAgICByZXR1cm4gZ3JvdXBzO1xyXG4gIH0sIHt9IGFzIFJlY29yZDxLLCBUW10+KTsiLCJpbXBvcnQgQ2FzZXMgZnJvbSBcIi4uL3Jvb3QvY2FzZXNcIjtcclxuaW1wb3J0IHsgQ2FzZSB9IGZyb20gXCIuLi9yb290L3R5cGVzL2Nhc2VcIjtcclxuaW1wb3J0IHsgQ2FzZUggfSBmcm9tIFwiLi90eXBlcy9jYXNlLWhcIjtcclxuaW1wb3J0IHsgQ2FzZUhpZXJhcmNoeSB9IGZyb20gXCIuL3R5cGVzL2Nhc2UtaGllcmFyY2h5LXJlc3VsdFwiO1xyXG5pbXBvcnQgeyBDYXNlU2VhcmNoUGFyYW1zIH0gZnJvbSBcIi4vdHlwZXMvY2FzZS1zZWFyY2gtcGFyYW1zXCI7XHJcbmltcG9ydCB7IGdldERheUZyb21FcG9jaFRpbWUsIGdldE1vbnRoRnJvbUVwb2NoVGltZSwgZ2V0WWVhckZyb21FcG9jaFRpbWUsIGdyb3VwQnksIG1hdGNoU3RyaW5nT25Ub2tlbnMgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgQ2FzZVRpc3N1ZXNTdGFpbnMgPSB7XHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIGxvY05hbWU6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FzZUV4cGxvcmVyIHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBDYXNlcztcclxuICAgIHByb3RlY3RlZCBjdXN0b21DYXNlczogQ2FzZUhbXSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJvdGVjdGVkIGNhc2VIaWVyYXJjaHk6IENhc2VIaWVyYXJjaHkgfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBjYXNlVGlzc3VlczogQ2FzZVRpc3N1ZXNTdGFpbnNbXSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJvdGVjdGVkIGNhc2VTdGFpbnM6IENhc2VUaXNzdWVzU3RhaW5zW10gfCBudWxsID0gbnVsbDsgXHJcblxyXG4gICAgaWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nID0gXCJcIjtcclxuICAgIGhpZXJhcmNoeVNwZWM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogQ2FzZXMpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHVzZShpZGVudGlmaWVyU2VwYXJhdG9yOiBzdHJpbmcsIGhpZXJhcmNoeVNwZWM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuaGllcmFyY2h5U3BlYyA9IGhpZXJhcmNoeVNwZWM7XHJcbiAgICAgIHRoaXMuaWRlbnRpZmllclNlcGFyYXRvciA9IGlkZW50aWZpZXJTZXBhcmF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDdXN0b21DYXNlcygpIHtcclxuICAgICAgaWYoIXRoaXMuY3VzdG9tQ2FzZXMpIHtcclxuICAgICAgICB0aGlzLmN1c3RvbUNhc2VzID0gKGF3YWl0IHRoaXMuY29udGV4dC5saXN0KCkpLml0ZW1zLm1hcCgoY2FzZU9iaikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHsuLi5jYXNlT2JqLCBwYXRoSW5IaWVyYXJjaHk6IHRoaXMuZ2V0Q2FzZUhpZXJhcmNoeVBhdGgoY2FzZU9iail9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jdXN0b21DYXNlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXNlSGllcmFyY2h5UGF0aChjYXNlT2JqOiBDYXNlKSB7XHJcbiAgICAgIGlmKCF0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IgfHwgIXRoaXMuaGllcmFyY2h5U3BlYykge1xyXG4gICAgICAgIHRocm93IGBBcmd1bWVudEVycm9yW0Nhc2VFeHBsb3Jlcl0gaWRlbnRpZmllclNlcGFyYXRvciBvciBoaWVyYXJjaHlTcGVjIGlzIG1pc3NpbmcgLSByZXF1aXJlZCBwcm9wZXJ0eSFgXHJcbiAgICAgIH1cclxuICAgICAgbGV0IHBhdGhGaW5pc2hlZCA9IGZhbHNlXHJcbiAgICAgIHJldHVybiB0aGlzLmhpZXJhcmNoeVNwZWMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5nZXRDYXNlVmFsdWUoY3VyciwgY2FzZU9iaik7XHJcblxyXG4gICAgICAgIGNvbnN0IHJldHVyblZhbCA9IHBhdGhGaW5pc2hlZCA/IHByZXYgOiBgJHtwcmV2fS8ke3ZhbH1gXHJcbiAgICAgICAgaWYodmFsID09PSBcIk9USEVSXCIpIHtcclxuICAgICAgICAgIHBhdGhGaW5pc2hlZCA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldHVyblZhbDtcclxuICAgICAgfSwgXCJcIilcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRDYXNlKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxDYXNlSD4ge1xyXG4gICAgICBsZXQgY2FzZU9iajogQ2FzZSB8IHVuZGVmaW5lZDtcclxuICAgICAgaWYodGhpcy5jdXN0b21DYXNlcykge1xyXG4gICAgICAgIGNhc2VPYmogPSB0aGlzLmN1c3RvbUNhc2VzLmZpbmQoKGNzKSA9PiBjcy5pZCA9PT0gY2FzZUlkKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZighY2FzZU9iaikge1xyXG4gICAgICAgIGNhc2VPYmogPSBhd2FpdCB0aGlzLmNvbnRleHQuZ2V0KGNhc2VJZClcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsuLi5jYXNlT2JqLCBwYXRoSW5IaWVyYXJjaHk6IHRoaXMuZ2V0Q2FzZUhpZXJhcmNoeVBhdGgoY2FzZU9iail9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlVmFsdWUoa2V5OiBzdHJpbmcsIGNzOiBDYXNlKSB7XHJcbiAgICAgIHN3aXRjaChrZXkpIHtcclxuICAgICAgICBjYXNlIFwieWVhclwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlWWVhcihjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcIm1vbnRoXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldENhc2VNb250aChjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRheVwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlRGF5KGNzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwiZGVzY3JpcHRpb25cIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZURlc2NyaXB0aW9uKGNzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwidGlzc3Vlc1wiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlVGlzc3VlcyhjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcInN0YWluc1wiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlU3RhaW5zKGNzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICBpZihrZXkuc2xpY2UoMCwgOCkgPT09IFwiaWRfcGFydF9cIiAmJiAhaXNOYU4oTnVtYmVyKGtleS5zbGljZSg4KSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhc2VJZGVudGlmaWVyUGFydChjcywgTnVtYmVyKGtleS5zbGljZSg4KSkpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aHJvdyBgS2V5RXJyb3JbQ2FzZUV4cGxvcmVyXSBcXFwiJHtrZXl9XFxcIiBpcyBub3Qgc3VwcG9ydGVkIWBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV2YWx1YXRlQ2FzZVZhbHVlKGtleTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdLCBjczogQ2FzZSkge1xyXG4gICAgICBjb25zdCBjYXNlVmFsdWUgPSB0aGlzLmdldENhc2VWYWx1ZShrZXksIGNzKVxyXG4gICAgICBzd2l0Y2goa2V5KSB7XHJcbiAgICAgICAgY2FzZSBcInllYXJcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlWWVhcihjYXNlVmFsdWUgYXMgc3RyaW5nLCBldmFsVmFsdWUgYXMgc3RyaW5nKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwibW9udGhcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlTW9udGgoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRheVwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5ldmF1bGF0ZUNhc2VEYXkoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRlc2NyaXB0aW9uXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQ2FzZURlc2NyaXB0aW9uKGNhc2VWYWx1ZSBhcyBzdHJpbmcsIGV2YWxWYWx1ZSBhcyBzdHJpbmcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJ0aXNzdWVzXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQ2FzZVRpc3N1ZXMoY2FzZVZhbHVlIGFzIHN0cmluZ1tdLCBldmFsVmFsdWUgYXMgKHN0cmluZyB8c3RyaW5nW10pKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwic3RhaW5zXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQ2FzZVN0YWlucyhjYXNlVmFsdWUgYXMgc3RyaW5nW10sIGV2YWxWYWx1ZSBhcyAoc3RyaW5nIHxzdHJpbmdbXSkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgIC8vIGFueSBpbnZhbGlkIGtleSB3aWxsIGJlIGNhdWdodCBpbiBnZXRDYXNlVmFsdWUgY2FsbFxyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlSWRlbnRpZmllclBhcnQoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldENhc2VZZWFyKGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGdldFllYXJGcm9tRXBvY2hUaW1lKGNzLmNyZWF0ZWRfYXQpLnRvU3RyaW5nKClcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0Q2FzZU1vbnRoKGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGdldE1vbnRoRnJvbUVwb2NoVGltZShjcy5jcmVhdGVkX2F0KS50b1N0cmluZygpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VEYXkoY3M6IENhc2UpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gZ2V0RGF5RnJvbUVwb2NoVGltZShjcy5jcmVhdGVkX2F0KS50b1N0cmluZygpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VJZGVudGlmaWVyUGFydChjczogQ2FzZSwgcGFydElkeDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgaWYoIXRoaXMuaWRlbnRpZmllclNlcGFyYXRvcikge1xyXG4gICAgICAgIHRocm93IGBBcmd1bWVudEVycm9yW0Nhc2VFeHBsb3Jlcl0gaWRlbnRpZmllclNlcGFyYXRvciBpcyBtaXNzaW5nIC0gcmVxdWlyZWQgcHJvcGVydHkhYFxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBhcnRzID0gbmV3IFJlZ0V4cCh0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IpLmV4ZWMoY3MubG9jYWxfaWQgfHwgXCJcIilcclxuICAgICAgaWYoIXBhcnRzKSBcclxuICAgICAgICByZXR1cm4gXCJPVEhFUlwiXHJcbiAgICAgIGlmKHBhcnRJZHggPCAxIHx8IHBhcnRJZHggPj0gcGFydHMubGVuZ3RoKVxyXG4gICAgICAgIHRocm93IGBLZXlFcnJvcltDYXNlRXhwbG9yZXJdIGludmFsaWQga2V5IFxcXCJpZF9wYXJ0XzxpbmRleD5cXFwiLCBncm91cCBpbmRleCBpcyBub3QgdmFsaWQhYFxyXG4gICAgICByZXR1cm4gcGFydHNbcGFydElkeF1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0Q2FzZURlc2NyaXB0aW9uKGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGNzLmRlc2NyaXB0aW9uIHx8IFwiXCJcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0Q2FzZVRpc3N1ZXMoY3M6IENhc2UpOiBzdHJpbmdbXSB7XHJcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjcy50aXNzdWVzKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlU3RhaW5zKGNzOiBDYXNlKTogc3RyaW5nW10ge1xyXG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoY3Muc3RhaW5zKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXZhdWxhdGVDYXNlWWVhcih2YWx1ZTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdmFsdWUgPT09IGV2YWxWYWx1ZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZXZhdWxhdGVDYXNlTW9udGgodmFsdWU6IHN0cmluZywgZXZhbFZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YXVsYXRlQ2FzZURheSh2YWx1ZTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdmFsdWUgPT09IGV2YWxWYWx1ZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZXZhdWxhdGVDYXNlSWRlbnRpZmllclBhcnQodmFsdWU6IHN0cmluZywgZXZhbFZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YWx1YXRlQ2FzZURlc2NyaXB0aW9uKHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiBtYXRjaFN0cmluZ09uVG9rZW5zKHZhbHVlLCBldmFsVmFsdWUpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YWx1YXRlQ2FzZVRpc3N1ZXModmFsdWU6IHN0cmluZ1tdLCBldmFsVmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdKTogYm9vbGVhbiB7XHJcbiAgICAgIGlmKCEoZXZhbFZhbHVlIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgZXZhbFZhbHVlID0gW2V2YWxWYWx1ZV07XHJcbiAgICAgIH1cclxuICAgICAgLy8gQUxMIHNlYXJjaGVkIHRpc3N1ZXMgYXJlIHByZXNlbnQgaW4gY2FzZVxyXG4gICAgICByZXR1cm4gZXZhbFZhbHVlLmV2ZXJ5KCh0aXNzdWUpID0+IHZhbHVlLmluY2x1ZGVzKHRpc3N1ZSkpXHJcblxyXG4gICAgICAvLyBTT01FIHNlYXJjaGVkIHRpc3N1ZXMgYXJlIHByZXNlbnQgaW4gY2FzZVxyXG4gICAgICAvLyByZXR1cm4gZXZhbFZhbHVlLnNvbWUoKHRpc3N1ZSkgPT4gdmFsdWUuaW5jbHVkZXModGlzc3VlKSlcclxuICAgIH1cclxuICAgIHByaXZhdGUgZXZhbHVhdGVDYXNlU3RhaW5zKHZhbHVlOiBzdHJpbmdbXSwgZXZhbFZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgICBpZighKGV2YWxWYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgIGV2YWxWYWx1ZSA9IFtldmFsVmFsdWVdO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEFMTCBzZWFyY2hlZCBzdGFpbnMgYXJlIHByZXNlbnQgaW4gY2FzZVxyXG4gICAgICByZXR1cm4gZXZhbFZhbHVlLmV2ZXJ5KChzdGFpbikgPT4gdmFsdWUuaW5jbHVkZXMoc3RhaW4pKVxyXG5cclxuICAgICAgLy8gU09NRSBzZWFyY2hlZCBzdGFpbnMgYXJlIHByZXNlbnQgaW4gY2FzZVxyXG4gICAgICAvLyByZXR1cm4gZXZhbFZhbHVlLnNvbWUoKHN0YWluKSA9PiB2YWx1ZS5pbmNsdWRlcyhzdGFpbikpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoaWVyYXJjaHlMZXZlbChrZXlzOiBzdHJpbmdbXSwga2V5SWR4OiBudW1iZXIsIGNhc2VzOiBDYXNlW10sIGN1cnJlbnRIaWVyYXJjaHlQYXRoOiBzdHJpbmcsIG5hbWU/OiBzdHJpbmcpOiBDYXNlSGllcmFyY2h5IHtcclxuICAgICAgaWYgKGtleUlkeCA+PSBrZXlzLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiB7IGxldmVsTmFtZTogbmFtZSwgbGFzdExldmVsOiB0cnVlLCBpdGVtczogY2FzZXMubWFwKChjYXNlT2JqKSA9PiB7IHJldHVybiB7Li4uY2FzZU9iaiwgcGF0aEluSGllcmFyY2h5OiBjdXJyZW50SGllcmFyY2h5UGF0aH19KX1cclxuICAgICAgfVxyXG4gICAgICAvLyBncm91cGluZyBieSBhcnJheSB2YWx1ZXModGlzc3Vlcywgc3RhaW5zKSBpcyBub3QgZXhwZWN0ZWQsIGJ1dCB3b3JrcyBieSBncm91cGluZyBvbiBmaXJzdCB2YWx1ZSBvZiBhcnJheVxyXG4gICAgICBjb25zdCBncm91cHMgPSBncm91cEJ5KGNhc2VzLCAoY3MpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0Q2FzZVZhbHVlKGtleXNba2V5SWR4XSwgY3MpO1xyXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWVbMF0gfHwgXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgY29uc3QgaXRlbXMgPSBPYmplY3Qua2V5cyhncm91cHMpLm1hcCgobmFtZSkgPT4ge1xyXG4gICAgICAgIGlmKG5hbWUgPT09IFwiT1RIRVJcIikge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGllcmFyY2h5TGV2ZWwoa2V5cywga2V5cy5sZW5ndGgsIGdyb3Vwc1tuYW1lXSwgYCR7Y3VycmVudEhpZXJhcmNoeVBhdGh9LyR7bmFtZX1gLCBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGllcmFyY2h5TGV2ZWwoa2V5cywga2V5SWR4ICsgMSwgZ3JvdXBzW25hbWVdLCBgJHtjdXJyZW50SGllcmFyY2h5UGF0aH0vJHtuYW1lfWAsIG5hbWUpO1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgcmV0dXJuIHsgbGV2ZWxOYW1lOiBuYW1lLCBsYXN0TGV2ZWw6IGZhbHNlLCBpdGVtczogaXRlbXMgfTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBoaWVyYXJjaHkoKTogUHJvbWlzZTxDYXNlSGllcmFyY2h5PiB7XHJcbiAgICAgIGlmKCF0aGlzLmNhc2VIaWVyYXJjaHkpIHtcclxuICAgICAgICBjb25zdCBjYXNlcyA9IGF3YWl0IHRoaXMuZ2V0Q3VzdG9tQ2FzZXMoKTtcclxuICAgICAgICB0aGlzLmNhc2VIaWVyYXJjaHkgPSB0aGlzLmhpZXJhcmNoeUxldmVsKHRoaXMuaGllcmFyY2h5U3BlYywgMCwgY2FzZXMsIFwiXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmNhc2VIaWVyYXJjaHk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2VhcmNoKHF1ZXJ5OiBDYXNlU2VhcmNoUGFyYW1zW10pOiBQcm9taXNlPENhc2VIW10+IHtcclxuICAgICAgbGV0IGZpbHRlcmVkQ2FzZXMgPSBhd2FpdCB0aGlzLmdldEN1c3RvbUNhc2VzKCk7XHJcbiAgICAgIHF1ZXJ5LmZvckVhY2goKHtrZXksIHZhbHVlfSkgPT4gZmlsdGVyZWRDYXNlcyA9IGZpbHRlcmVkQ2FzZXMuZmlsdGVyKChjcykgPT4gdGhpcy5ldmFsdWF0ZUNhc2VWYWx1ZShrZXksIHZhbHVlLCBjcykpKTtcclxuXHJcbiAgICAgIHJldHVybiBmaWx0ZXJlZENhc2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRpc3N1ZXMobG9jYWxpemF0aW9uOiBzdHJpbmcgPSBcIkVOXCIpOiBQcm9taXNlPENhc2VUaXNzdWVzU3RhaW5zW10+IHtcclxuICAgICAgaWYoIXRoaXMuY2FzZVRpc3N1ZXMpIHtcclxuICAgICAgICBjb25zdCBjYXNlcyA9IGF3YWl0IHRoaXMuZ2V0Q3VzdG9tQ2FzZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYWxsVGlzc3VlczogU2V0PENhc2VUaXNzdWVzU3RhaW5zPiA9IG5ldyBTZXQoKTtcclxuICAgICAgICBjYXNlcy5mb3JFYWNoKChjKSA9PiBPYmplY3QuZW50cmllcyhjLnRpc3N1ZXMpLm1hcCgoW3Rpc05hbWUsIHRpc1ZhbHVlXTogW3N0cmluZywgYW55XSkgPT4gKHtuYW1lOiB0aXNOYW1lLCBsb2NOYW1lOiB0aXNWYWx1ZVtsb2NhbGl6YXRpb25dfSkpLmZvckVhY2goKHQpID0+IGFsbFRpc3N1ZXMuYWRkKHQpKSk7XHJcbiAgICAgICAgdGhpcy5jYXNlVGlzc3VlcyA9IFsuLi5hbGxUaXNzdWVzXTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5jYXNlVGlzc3VlcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzdGFpbnMobG9jYWxpemF0aW9uOiBzdHJpbmcgPSBcIkVOXCIpOiBQcm9taXNlPENhc2VUaXNzdWVzU3RhaW5zW10+IHtcclxuICAgICAgaWYoIXRoaXMuY2FzZVN0YWlucykge1xyXG4gICAgICAgIGNvbnN0IGNhc2VzID0gYXdhaXQgdGhpcy5nZXRDdXN0b21DYXNlcygpO1xyXG5cclxuICAgICAgICBjb25zdCBhbGxTdGFpbnM6IFNldDxDYXNlVGlzc3Vlc1N0YWlucz4gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgY2FzZXMuZm9yRWFjaCgoYykgPT4gT2JqZWN0LmVudHJpZXMoYy5zdGFpbnMpLm1hcCgoW3N0bk5hbWUsIHN0blZhbHVlXTogW3N0cmluZywgYW55XSkgPT4gKHtuYW1lOiBzdG5OYW1lLCBsb2NOYW1lOiBzdG5WYWx1ZVtsb2NhbGl6YXRpb25dfSkpLmZvckVhY2goKHMpID0+IGFsbFN0YWlucy5hZGQocykpKTtcclxuICAgICAgICB0aGlzLmNhc2VTdGFpbnMgPSBbLi4uYWxsU3RhaW5zXTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5jYXNlU3RhaW5zO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBDYXNlcyBmcm9tIFwiLi4vcm9vdC9jYXNlc1wiO1xyXG5pbXBvcnQgeyBTbGlkZSB9IGZyb20gXCIuLi9yb290L3R5cGVzL3NsaWRlXCI7XHJcbmltcG9ydCB7IG1hdGNoU3RyaW5nT25TZXBhcmF0b3JHcm91cCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXc2lFeHBsb3JlciB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogQ2FzZXM7XHJcbiAgICBwcm90ZWN0ZWQgbGFzdENhc2VJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogU2xpZGVbXSB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJvdGVjdGVkIHNsaWRlc0RhdGE6IFNsaWRlW10gfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBtYXNrc0RhdGE6IFNsaWRlW10gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBtYXNrSWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nID0gXCJcIjtcclxuICAgIG1hc2tJZGVudGlmaWVyVmFsdWU6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogQ2FzZXMpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHVzZShtYXNrSWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nLCBtYXNrSWRlbnRpZmllclZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgdGhpcy5tYXNrSWRlbnRpZmllclNlcGFyYXRvciA9IG1hc2tJZGVudGlmaWVyU2VwYXJhdG9yO1xyXG4gICAgICB0aGlzLm1hc2tJZGVudGlmaWVyVmFsdWUgPSBtYXNrSWRlbnRpZmllclZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0QWxsU2xpZGVzKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxTbGlkZVtdPiB7XHJcbiAgICAgIGlmICh0aGlzLmxhc3RDYXNlSWQgIT09IGNhc2VJZCB8fCAhdGhpcy5kYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gKGF3YWl0IHRoaXMuY29udGV4dC5zbGlkZXMoY2FzZUlkKSkuaXRlbXM7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVbXT4ge1xyXG4gICAgICBpZiAodGhpcy5sYXN0Q2FzZUlkICE9PSBjYXNlSWQgfHwgIXRoaXMuc2xpZGVzRGF0YSkge1xyXG4gICAgICAgIHRoaXMuc2xpZGVzRGF0YSA9IChhd2FpdCB0aGlzLmdldEFsbFNsaWRlcyhjYXNlSWQpKS5maWx0ZXIoKHNsaWRlKSA9PiB7IFxyXG4gICAgICAgICAgcmV0dXJuICFtYXRjaFN0cmluZ09uU2VwYXJhdG9yR3JvdXAoc2xpZGUubG9jYWxfaWQgfHwgXCJcIiwgdGhpcy5tYXNrSWRlbnRpZmllclNlcGFyYXRvciwgMSwgdGhpcy5tYXNrSWRlbnRpZmllclZhbHVlKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLnNsaWRlc0RhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFza3MoY2FzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlW10+IHtcclxuICAgICAgaWYgKHRoaXMubGFzdENhc2VJZCAhPT0gY2FzZUlkIHx8ICF0aGlzLm1hc2tzRGF0YSkge1xyXG4gICAgICAgIHRoaXMubWFza3NEYXRhID0gKGF3YWl0IHRoaXMuZ2V0QWxsU2xpZGVzKGNhc2VJZCkpLmZpbHRlcigoc2xpZGUpID0+IHsgXHJcbiAgICAgICAgICByZXR1cm4gbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwKHNsaWRlLmxvY2FsX2lkIHx8IFwiXCIsIHRoaXMubWFza0lkZW50aWZpZXJTZXBhcmF0b3IsIDEsIHRoaXMubWFza0lkZW50aWZpZXJWYWx1ZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5tYXNrc0RhdGE7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtSb290QVBJLCBSb290Q29udGV4dH0gZnJvbSBcIi4uLy4uL3Jvb3RcIjtcclxuaW1wb3J0IENhc2VFeHBsb3JlciBmcm9tIFwiLi4vZXh0ZW5zaW9ucy9jYXNlLWV4cGxvcmVyXCI7XHJcbmltcG9ydCBXc2lFeHBsb3JlciBmcm9tIFwiLi4vZXh0ZW5zaW9ucy93c2ktZXhwbG9yZXJcIjtcclxuaW1wb3J0IFJvb3QgZnJvbSBcIi4vcm9vdFwiO1xyXG5pbXBvcnQgeyBDYXNlIH0gZnJvbSBcIi4vdHlwZXMvY2FzZVwiO1xyXG5pbXBvcnQge0Nhc2VMaXN0fSBmcm9tIFwiLi90eXBlcy9jYXNlLWxpc3RcIjtcclxuaW1wb3J0IHsgU2xpZGVMaXN0IH0gZnJvbSBcIi4vdHlwZXMvc2xpZGUtbGlzdFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FzZXMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdEFQSTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBDYXNlTGlzdCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNhc2VFeHBsb3JlcjogQ2FzZUV4cGxvcmVyO1xyXG4gICAgd3NpRXhwbG9yZXI6IFdzaUV4cGxvcmVyO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cclxuICAgICAgICB0aGlzLmNhc2VFeHBsb3JlciA9IG5ldyBDYXNlRXhwbG9yZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy53c2lFeHBsb3JlciA9IG5ldyBXc2lFeHBsb3Jlcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsaXN0KCk6IFByb21pc2U8Q2FzZUxpc3Q+IHtcclxuICAgICAgICBpZighdGhpcy5kYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2Nhc2VzJykgYXMgQ2FzZUxpc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0KGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxDYXNlPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2Nhc2VzLyR7Y2FzZUlkfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVMaXN0PiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2Nhc2VzLyR7Y2FzZUlkfS9zbGlkZXNgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge1Jvb3RDb250ZXh0fSBmcm9tIFwiLi4vLi4vcm9vdFwiO1xyXG5pbXBvcnQgUm9vdCBmcm9tIFwiLi9yb290XCI7XHJcbmltcG9ydCB7XHJcbiAgICBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvblxyXG59IGZyb20gXCIuL3R5cGVzL3dvcmtiZW5jaC1zZXJ2aWNlLWFwaS12LTMtY3VzdG9tLW1vZGVscy1leGFtaW5hdGlvbnMtZXhhbWluYXRpb25cIjtcclxuaW1wb3J0IHtFeGFtaW5hdGlvblF1ZXJ5fSBmcm9tIFwiLi90eXBlcy9leGFtaW5hdGlvbi1xdWVyeVwiO1xyXG5pbXBvcnQge0V4YW1pbmF0aW9uTGlzdH0gZnJvbSBcIi4vdHlwZXMvZXhhbWluYXRpb24tbGlzdFwiO1xyXG5pbXBvcnQge1Njb3BlVG9rZW5BbmRTY29wZUlkfSBmcm9tIFwiLi90eXBlcy9zY29wZS10b2tlbi1hbmQtc2NvcGUtaWRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4YW1pbmF0aW9ucyBleHRlbmRzIFJvb3RDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBSb290O1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IEV4YW1pbmF0aW9uTGlzdCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJvb3QpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY3JlYXRlKGNhc2VJZDogc3RyaW5nLCBhcHBJZDogc3RyaW5nKTogUHJvbWlzZTxXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbj4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgc2VsZi5yZXF1aXJlcygnY2FzZUlkJywgY2FzZUlkKTtcclxuICAgICAgICByZXR1cm4gc2VsZi5yYXdRdWVyeSgnL2V4YW1pbmF0aW9ucycsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgY2FzZV9pZDogY2FzZUlkLFxyXG4gICAgICAgICAgICAgICAgYXBwX2lkOiBhcHBJZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcXVlcnkocXVlcnk6IEV4YW1pbmF0aW9uUXVlcnksIHNraXA/OiBudW1iZXIgfCB1bmRlZmluZWQsIGxpbWl0PzogbnVtYmVyIHwgdW5kZWZpbmVkKTogUHJvbWlzZTxFeGFtaW5hdGlvbkxpc3Q+IHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcy5jb250ZXh0O1xyXG4gICAgICAgIHJldHVybiBzZWxmLnJhd1F1ZXJ5KGAvZXhhbWluYXRpb25zL3F1ZXJ5YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICBib2R5OiBxdWVyeSxcclxuICAgICAgICAgICAgcXVlcnk6IHtza2lwLCBsaW1pdH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXQoZXhhbWluYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbj4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgc2VsZi5yZXF1aXJlcygnZXhhbWluYXRpb25JZCcsIGV4YW1pbmF0aW9uSWQpO1xyXG4gICAgICAgIHJldHVybiBzZWxmLnJhd1F1ZXJ5KGAvZXhhbWluYXRpb25zLyR7ZXhhbWluYXRpb25JZH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzY29wZShleGFtaW5hdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPFNjb3BlVG9rZW5BbmRTY29wZUlkPiB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICBzZWxmLnJlcXVpcmVzKCdleGFtaW5hdGlvbklkJywgZXhhbWluYXRpb25JZCk7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucmF3UXVlcnkoYC9leGFtaW5hdGlvbnMvJHtleGFtaW5hdGlvbklkfS9zY29wZWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQ29udGV4dCB9IGZyb20gXCIuLi8uLi9zY29wZVwiO1xyXG5pbXBvcnQgU2NvcGUgZnJvbSBcIi4vc2NvcGVcIjtcclxuaW1wb3J0IHsgQXBwVWlTdG9yYWdlIH0gZnJvbSBcIi4vdHlwZXMvYXBwLXVpLXN0b3JhZ2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2UgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFNjb3BlO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IEFwcFVpU3RvcmFnZSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFNjb3BlKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFJhdygpOiBQcm9taXNlPEFwcFVpU3RvcmFnZT4ge1xyXG4gICAgICAgIGlmKCF0aGlzLmRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYXBwLXVpLXN0b3JhZ2UvdXNlcicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEgYXMgQXBwVWlTdG9yYWdlXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmx1c2goKTogUHJvbWlzZTxBcHBVaVN0b3JhZ2UgfCBudWxsPiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYXBwLXVpLXN0b3JhZ2UvdXNlcicsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBib2R5OiB0aGlzLmRhdGFcclxuICAgICAgICB9KSBhcyBBcHBVaVN0b3JhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0KGtleTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXRSYXcoKVxyXG4gICAgICAgIGlmKHR5cGVvZiBkYXRhLmNvbnRlbnRba2V5XSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhLmNvbnRlbnRba2V5XSBhcyBzdHJpbmcpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGF0YS5jb250ZW50W2tleV1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIGZsdXNoPzogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlUmF3ID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpXHJcbiAgICAgICAgY29uc3QgZGF0YVJhdyA9IGF3YWl0IHRoaXMuZ2V0UmF3KClcclxuICAgICAgICBkYXRhUmF3LmNvbnRlbnRba2V5XSA9IHZhbHVlUmF3XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVJhd1xyXG5cclxuICAgICAgICBpZiAoZmx1c2gpIHtcclxuICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBlcmFzZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmRhdGEgPSB7Y29udGVudDp7fX1cclxuICAgICAgICB0aGlzLmZsdXNoKClcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tIFwiLi4vLi4vc2NvcGVcIjtcclxuaW1wb3J0IFNjb3BlIGZyb20gXCIuL3Njb3BlXCI7XHJcbmltcG9ydCB7UG9pbnRBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb2ludC1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7TGluZUFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL2xpbmUtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge0Fycm93QW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvYXJyb3ctYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge0NpcmNsZUFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL2NpcmNsZS1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UmVjdGFuZ2xlQW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcmVjdGFuZ2xlLWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtQb2x5Z29uQW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9seWdvbi1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UG9zdFBvaW50QW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtcG9pbnQtYW5ub3RhdGlvbnNcIjtcclxuaW1wb3J0IHtQb3N0TGluZUFubm90YXRpb25zfSBmcm9tIFwiLi90eXBlcy9wb3N0LWxpbmUtYW5ub3RhdGlvbnNcIjtcclxuaW1wb3J0IHtQb3N0QXJyb3dBbm5vdGF0aW9uc30gZnJvbSBcIi4vdHlwZXMvcG9zdC1hcnJvdy1hbm5vdGF0aW9uc1wiO1xyXG5pbXBvcnQge1Bvc3RDaXJjbGVBbm5vdGF0aW9uc30gZnJvbSBcIi4vdHlwZXMvcG9zdC1jaXJjbGUtYW5ub3RhdGlvbnNcIjtcclxuaW1wb3J0IHtQb3N0UmVjdGFuZ2xlQW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtcmVjdGFuZ2xlLWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdFBvbHlnb25Bbm5vdGF0aW9uc30gZnJvbSBcIi4vdHlwZXMvcG9zdC1wb2x5Z29uLWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdFBvaW50QW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9zdC1wb2ludC1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UG9zdExpbmVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LWxpbmUtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RBcnJvd0Fubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3Bvc3QtYXJyb3ctYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RDaXJjbGVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LWNpcmNsZS1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UG9zdFJlY3RhbmdsZUFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3Bvc3QtcmVjdGFuZ2xlLWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtQb3N0UG9seWdvbkFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3Bvc3QtcG9seWdvbi1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7QW5ub3RhdGlvbkxpc3RSZXNwb25zZX0gZnJvbSBcIi4vdHlwZXMvYW5ub3RhdGlvbi1saXN0LXJlc3BvbnNlXCI7XHJcbmltcG9ydCB7SWRPYmplY3R9IGZyb20gXCIuL3R5cGVzL2lkLW9iamVjdFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zIHtcclxuICAgIGlzUm9pPzogYm9vbGVhbjtcclxuICAgIGV4dGVybmFsSWRzPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5ub3RhdGlvbnMgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFNjb3BlO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IHVuZGVmaW5lZDsgLy91bnVzZWRcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBvc3QgbXVsdGlwbGUgYW5ub3RhdGlvbnMgYXMgb25lLiBJbnJlYWxpdHkgdGhlIHNhbWUgZW5kcG9pbnQgYXMgY3JlYXRlKC4uLilcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBsb2FkKGRhdGE6IFBvc3RQb2ludEFubm90YXRpb25zIHwgUG9zdExpbmVBbm5vdGF0aW9ucyB8IFBvc3RBcnJvd0Fubm90YXRpb25zIHwgUG9zdENpcmNsZUFubm90YXRpb25zIHwgUG9zdFJlY3RhbmdsZUFubm90YXRpb25zIHwgUG9zdFBvbHlnb25Bbm5vdGF0aW9ucyxcclxuICAgICAgICAgICAgICAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge31cclxuICAgICk6IFByb21pc2U8QW5ub3RhdGlvbkxpc3RSZXNwb25zZT4ge1xyXG4gICAgICAgIC8vdGhlIHNhbWUgYXMgY3JlYXRlIGJ1dCBmb3IgdHlwZXMgaXRzIHNpbXBsZXIgdG8gc3BsaXRcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYW5ub3RhdGlvbnMnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIHF1ZXJ5OiBvcHRpb25zLFxyXG4gICAgICAgICAgICBib2R5OiB0aGlzLmRhdGFcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBhbm5vdGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBjcmVhdGUoZGF0YTogUG9zdFBvaW50QW5ub3RhdGlvbiB8IFBvc3RMaW5lQW5ub3RhdGlvbiB8IFBvc3RBcnJvd0Fubm90YXRpb24gfCBQb3N0Q2lyY2xlQW5ub3RhdGlvbiB8IFBvc3RSZWN0YW5nbGVBbm5vdGF0aW9uIHwgUG9zdFBvbHlnb25Bbm5vdGF0aW9uLFxyXG4gICAgICAgICAgICAgICAgIG9wdGlvbnM6IFBvc3RBbm5vdGF0aW9uUXVlcnlQYXJhbXMgPSB7fVxyXG4gICAgKTogUHJvbWlzZTwoUG9pbnRBbm5vdGF0aW9uIHwgTGluZUFubm90YXRpb24gfCBBcnJvd0Fubm90YXRpb24gfCBDaXJjbGVBbm5vdGF0aW9uIHwgUmVjdGFuZ2xlQW5ub3RhdGlvbiB8IFBvbHlnb25Bbm5vdGF0aW9uKT4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9hbm5vdGF0aW9ucycsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgcXVlcnk6IG9wdGlvbnMsXHJcbiAgICAgICAgICAgIGJvZHk6IHRoaXMuZGF0YVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxJZE9iamVjdD4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9hbm5vdGF0aW9ucy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlKFxyXG4gICAgICAgIGlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGF0YTogUG9zdFBvaW50QW5ub3RhdGlvbiB8IFBvc3RMaW5lQW5ub3RhdGlvbiB8IFBvc3RBcnJvd0Fubm90YXRpb24gfCBQb3N0Q2lyY2xlQW5ub3RhdGlvbiB8IFBvc3RSZWN0YW5nbGVBbm5vdGF0aW9uIHwgUG9zdFBvbHlnb25Bbm5vdGF0aW9uLFxyXG4gICAgICAgIG9wdGlvbnM6IFBvc3RBbm5vdGF0aW9uUXVlcnlQYXJhbXMgPSB7fSxcclxuICAgICk6IFByb21pc2U8KFBvaW50QW5ub3RhdGlvbiB8IExpbmVBbm5vdGF0aW9uIHwgQXJyb3dBbm5vdGF0aW9uIHwgQ2lyY2xlQW5ub3RhdGlvbiB8IFJlY3RhbmdsZUFubm90YXRpb24gfCBQb2x5Z29uQW5ub3RhdGlvbik+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZShpZCk7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBtaWdodCBjYXJyeSBpZCBidXQgdXNlciBmb3Jnb3QgdG8gc2V0IGV4dGVybmFsIElEcyB0byB0cnVlXHJcbiAgICAgICAgaWYgKCFvcHRpb25zLmV4dGVybmFsSWRzICYmIGRhdGEuaWQpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5leHRlcm5hbElkcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tIFwiLi4vLi4vc2NvcGVcIjtcclxuaW1wb3J0IFNjb3BlIGZyb20gXCIuL3Njb3BlXCI7XHJcbmltcG9ydCB7IENvbGxlY3Rpb24gfSBmcm9tIFwiLi90eXBlcy9jb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IEl0ZW1RdWVyeSB9IGZyb20gXCIuL3R5cGVzL2l0ZW0tcXVlcnlcIjtcclxuaW1wb3J0IHsgSXRlbVF1ZXJ5TGlzdCB9IGZyb20gXCIuL3R5cGVzL2l0ZW0tcXVlcnktbGlzdFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sbGVjdGlvbnMgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFNjb3BlO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IENvbGxlY3Rpb24gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXQoY29sbGVjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPENvbGxlY3Rpb24+IHtcclxuICAgICAgICBjb25zdCBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9YCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZShjb2xsZWN0aW9uOiBDb2xsZWN0aW9uKTogUHJvbWlzZTxDb2xsZWN0aW9uPiB7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZENvbGxlY3Rpb246IENvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jb2xsZWN0aW9uc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgYm9keTogY29sbGVjdGlvbixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gY3JlYXRlZENvbGxlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlKGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcXVlcnlJdGVtcyhjb2xsZWN0aW9uSWQ6IHN0cmluZywgcXVlcnk6IEl0ZW1RdWVyeSk6IFByb21pc2U8SXRlbVF1ZXJ5TGlzdD4ge1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5UmVzdWx0OiBJdGVtUXVlcnlMaXN0ID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9L2l0ZW1zL3F1ZXJ5YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHJldHVybiBxdWVyeVJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjcmVhdGVJdGVtcyhjb2xsZWN0aW9uSWQ6IHN0cmluZywgaXRlbXM6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfS9pdGVtc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgLi4uaXRlbXMsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZUl0ZW0oY29sbGVjdGlvbklkOiBzdHJpbmcsIGl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uSWR9L2l0ZW1zLyR7aXRlbUlkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQ29udGV4dCB9IGZyb20gXCIuLi8uLi9zY29wZVwiO1xyXG5pbXBvcnQgU2NvcGUgZnJvbSBcIi4vc2NvcGVcIjtcclxuaW1wb3J0IHsgSm9iIH0gZnJvbSBcIi4vdHlwZXMvam9iXCI7XHJcbmltcG9ydCB7IEpvYkxpc3QgfSBmcm9tIFwiLi90eXBlcy9qb2ItbGlzdFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSm9icyBleHRlbmRzIFNjb3BlQ29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogU2NvcGU7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogSm9iW10gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRKb2JzKCk6IFByb21pc2U8Sm9iW10+IHtcclxuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2pvYnMnKSBhcyBKb2JMaXN0KS5pdGVtc1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldChqb2JJZDogc3RyaW5nKTogUHJvbWlzZTxKb2I+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2pvYnMvJHtqb2JJZH1gKSBhcyBKb2I7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgU2NvcGVDb250ZXh0IH0gZnJvbSBcIi4uLy4uL3Njb3BlXCI7XHJcbmltcG9ydCBTY29wZSBmcm9tIFwiLi9zY29wZVwiO1xyXG5pbXBvcnQgeyBDb250aW51b3VzUGl4ZWxtYXAgfSBmcm9tIFwiLi90eXBlcy9jb250aW51b3VzLXBpeGVsbWFwXCI7XHJcbmltcG9ydCB7IERpc2NyZXRlUGl4ZWxtYXAgfSBmcm9tIFwiLi90eXBlcy9kaXNjcmV0ZS1waXhlbG1hcFwiO1xyXG5pbXBvcnQgeyBJZE9iamVjdCB9IGZyb20gXCIuL3R5cGVzL2lkLW9iamVjdFwiO1xyXG5pbXBvcnQgeyBOb21pbmFsUGl4ZWxtYXAgfSBmcm9tIFwiLi90eXBlcy9ub21pbmFsLXBpeGVsbWFwXCI7XHJcbmltcG9ydCB7IFBpeGVsbWFwTGlzdCB9IGZyb20gXCIuL3R5cGVzL3BpeGVsbWFwLWxpc3RcIjtcclxuaW1wb3J0IHsgUGl4ZWxtYXBRdWVyeSB9IGZyb20gXCIuL3R5cGVzL3BpeGVsbWFwLXF1ZXJ5XCI7XHJcblxyXG50eXBlIFBpeGVsbWFwID0gQ29udGludW91c1BpeGVsbWFwIHwgRGlzY3JldGVQaXhlbG1hcCB8IE5vbWluYWxQaXhlbG1hcDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBpeGVsbWFwcyBleHRlbmRzIFNjb3BlQ29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogU2NvcGU7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogUGl4ZWxtYXAgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXQocGl4ZWxtYXBJZDogc3RyaW5nKTogUHJvbWlzZTxQaXhlbG1hcD4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9waXhlbG1hcHMvJHtwaXhlbG1hcElkfWApIGFzIFBpeGVsbWFwO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHBvc3QocGl4ZWxtYXBzOiBQaXhlbG1hcHMpOiBQcm9taXNlPENvbnRpbnVvdXNQaXhlbG1hcCB8IERpc2NyZXRlUGl4ZWxtYXAgfCBOb21pbmFsUGl4ZWxtYXAgfCBQaXhlbG1hcExpc3Q+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvcGl4ZWxtYXBzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBib2R5OiBwaXhlbG1hcHMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlKHBpeGVsbWFwSWQ6IHN0cmluZyk6IFByb21pc2U8SWRPYmplY3Q+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICB9KSBhcyBJZE9iamVjdDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBxdWVyeShxdWVyeTogUGl4ZWxtYXBRdWVyeSk6IFByb21pc2U8UGl4ZWxtYXBbXT4ge1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvcGl4ZWxtYXBzL3F1ZXJ5YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IHF1ZXJ5LFxyXG4gICAgICAgIH0pIGFzIFBpeGVsbWFwTGlzdDtcclxuICAgICAgICByZXR1cm4gcXVlcnlSZXN1bHQuaXRlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0VGlsZShwaXhlbG1hcElkOiBzdHJpbmcsIGxldmVsOiBudW1iZXIsIHRpbGVYOiBudW1iZXIsIHRpbGVZOiBudW1iZXIpOiBQcm9taXNlPEJsb2I+IHtcclxuICAgICAgICBjb25zdCB0aWxlID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vJHt0aWxlWH0vJHt0aWxlWX0vZGF0YWAsIHtcclxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBcImJsb2JcIixcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGlsZTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGxvYWRUaWxlKHBpeGVsbWFwSWQ6IHN0cmluZywgbGV2ZWw6IG51bWJlciwgdGlsZVg6IG51bWJlciwgdGlsZVk6IG51bWJlciwgdGlsZTogQmxvYik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vJHt0aWxlWH0vJHt0aWxlWX0vZGF0YWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBib2R5OiB0aWxlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlVGlsZShwaXhlbG1hcElkOiBzdHJpbmcsIGxldmVsOiBudW1iZXIsIHRpbGVYOiBudW1iZXIsIHRpbGVZOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3BpeGVsbWFwcy8ke3BpeGVsbWFwSWR9L2xldmVsLyR7bGV2ZWx9L3Bvc2l0aW9uLyR7dGlsZVh9LyR7dGlsZVl9L2RhdGFgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGJ1bGtHZXRUaWxlKHBpeGVsbWFwSWQ6IHN0cmluZywgbGV2ZWw6IG51bWJlciwgc3RhcnRYOiBudW1iZXIsIHN0YXJ0WTogbnVtYmVyLCBlbmRYOiBudW1iZXIsIGVuZFk6IG51bWJlcik6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgICAgIGNvbnN0IHRpbGVzID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvcGl4ZWxtYXBzLyR7cGl4ZWxtYXBJZH0vbGV2ZWwvJHtsZXZlbH0vcG9zaXRpb24vc3RhcnQvJHtzdGFydFh9LyR7c3RhcnRZfS9lbmQvJHtlbmRYfS8ke2VuZFl9L2RhdGFgLCB7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJibG9iXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRpbGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGJ1bGtVcGxvYWRUaWxlKHBpeGVsbWFwSWQ6IHN0cmluZywgbGV2ZWw6IG51bWJlciwgc3RhcnRYOiBudW1iZXIsIHN0YXJ0WTogbnVtYmVyLCBlbmRYOiBudW1iZXIsIGVuZFk6IG51bWJlciwgdGlsZXM6IEJsb2IpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3BpeGVsbWFwcy8ke3BpeGVsbWFwSWR9L2xldmVsLyR7bGV2ZWx9L3Bvc2l0aW9uL3N0YXJ0LyR7c3RhcnRYfS8ke3N0YXJ0WX0vZW5kLyR7ZW5kWH0vJHtlbmRZfS9kYXRhYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IHRpbGVzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtTY29wZUFQSX0gZnJvbSBcIi4uLy4uL3Njb3BlXCI7XHJcbmltcG9ydCB7UmF3QVBJLCBSYXdPcHRpb25zfSBmcm9tIFwiLi4vLi4vYmFzZVwiO1xyXG5pbXBvcnQge1Njb3BlVG9rZW5BbmRTY29wZUlkfSBmcm9tIFwiLi4vcm9vdC90eXBlcy9zY29wZS10b2tlbi1hbmQtc2NvcGUtaWRcIjtcclxuaW1wb3J0IHtcclxuICAgIFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uXHJcbn0gZnJvbSBcIi4uL3Jvb3QvdHlwZXMvd29ya2JlbmNoLXNlcnZpY2UtYXBpLXYtMy1jdXN0b20tbW9kZWxzLWV4YW1pbmF0aW9ucy1leGFtaW5hdGlvblwiO1xyXG5pbXBvcnQgUm9vdCBmcm9tIFwiLi4vcm9vdC9yb290XCI7XHJcbmltcG9ydCBTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcclxuaW1wb3J0IHtnZXRKd3RUb2tlbkV4cGlyZXNUaW1lb3V0LCBwYXJzZUp3dFRva2VuLCBTY29wZVRva2VufSBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcclxuaW1wb3J0IEFubm90YXRpb25zIGZyb20gXCIuL2Fubm90YXRpb25zXCI7XHJcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tIFwiLi9jb2xsZWN0aW9uc1wiO1xyXG5pbXBvcnQgSm9icyBmcm9tIFwiLi9qb2JzXCI7XHJcbmltcG9ydCBQaXhlbG1hcHMgZnJvbSBcIi4vcGl4ZWxtYXBzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY29wZSBleHRlbmRzIFNjb3BlQVBJIHtcclxuICAgIHN0YXRpYyBhcGlQYXRoID0gJy92My9zY29wZXMnO1xyXG5cclxuICAgIC8vIEludGVyZmFjZVxyXG4gICAgcmF3OiBSYXdBUEk7XHJcbiAgICBjb250ZXh0OiBSb290O1xyXG4gICAgc3RvcmFnZTogU3RvcmFnZTtcclxuICAgIGFubm90YXRpb25zOiBBbm5vdGF0aW9ucztcclxuICAgIGNvbGxlY3Rpb25zOiBDb2xsZWN0aW9ucztcclxuICAgIGpvYnM6IEpvYnM7XHJcbiAgICBwaXhlbG1hcHM6IFBpeGVsbWFwcztcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsXHJcbiAgICBzY29wZUNvbnRleHQ6IFNjb3BlVG9rZW5BbmRTY29wZUlkIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9kZWZhdWx0RXhhbWluYXRpb25JZDogc3RyaW5nID0gXCJcIjtcclxuICAgIHByaXZhdGUgX3Rva2VuUmVmZXRjaEludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGFjdGl2ZUV4YW1pbmF0aW9uSWQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBhY3RpdmVDYXNlSWQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBhY3RpdmVBcHBJZDogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIHRoaXMucmF3ID0gbmV3IFJhd0FQSSh0aGlzLmNvbnRleHQub3B0aW9ucy5hcGlVcmwgKyBTY29wZS5hcGlQYXRoKTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgU3RvcmFnZSh0aGlzKTtcclxuICAgICAgICB0aGlzLmFubm90YXRpb25zID0gbmV3IEFubm90YXRpb25zKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbnModGhpcyk7XHJcbiAgICAgICAgdGhpcy5qb2JzID0gbmV3IEpvYnModGhpcyk7XHJcbiAgICAgICAgdGhpcy5waXhlbG1hcHMgPSBuZXcgUGl4ZWxtYXBzKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVzZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vdG9kbyBjb25zaWRlciBjYWNoaW5nXHJcblxyXG4gICAgICAgIHRoaXMucmVxdWlyZXMoXCJyb290Ojp1c2VySWRcIiwgdGhpcy5jb250ZXh0LnVzZXJJZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbmRFeGFtaW5hdGlvbiA9IGFzeW5jIChhcHBJZDogc3RyaW5nKTpcclxuICAgICAgICAgICAgUHJvbWlzZTxXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbj4gPT4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGV4YW1pbmF0aW9ucyA9IGF3YWl0IHRoaXMuY29udGV4dC5leGFtaW5hdGlvbnMucXVlcnkoe1xyXG4gICAgICAgICAgICAgICAgYXBwczogW2FwcElkXSxcclxuICAgICAgICAgICAgICAgIGNyZWF0b3JzOiBbdGhpcy5jb250ZXh0LnVzZXJJZF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChleGFtaW5hdGlvbnMuaXRlbV9jb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBleGFtaW5hdGlvbiA9IGV4YW1pbmF0aW9ucy5pdGVtcy5maW5kKGV4ID0+IGV4LnN0YXRlID09PSBcIk9QRU5cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhhbWluYXRpb24pIHJldHVybiBleGFtaW5hdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5jcmVhdGUoY2FzZUlkLCBhcHBJZCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGV4YW1pbmF0aW9uO1xyXG4gICAgICAgIGlmIChhcHBJZCkge1xyXG4gICAgICAgICAgICBleGFtaW5hdGlvbiA9IGF3YWl0IGZpbmRFeGFtaW5hdGlvbihhcHBJZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9kZWZhdWx0RXhhbWluYXRpb25JZCkge1xyXG4gICAgICAgICAgICBleGFtaW5hdGlvbiA9IGF3YWl0IHRoaXMuY29udGV4dC5leGFtaW5hdGlvbnMuZ2V0KHRoaXMuX2RlZmF1bHRFeGFtaW5hdGlvbklkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZXhhbWluYXRpb24pIHtcclxuICAgICAgICAgICAgbGV0IGFwcCA9IGF3YWl0IHRoaXMuY29udGV4dC5hcHBzLmRlZmF1bHQoKTtcclxuICAgICAgICAgICAgZXhhbWluYXRpb24gPSBhd2FpdCBmaW5kRXhhbWluYXRpb24oYXBwLmFwcF9pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRFeGFtaW5hdGlvbklkID0gZXhhbWluYXRpb24uaWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLmZyb20oZXhhbWluYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzY29wZVRva2VuKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NvcGVDb250ZXh0Py5hY2Nlc3NfdG9rZW47XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZnJvbShleGFtaW5hdGlvbjogV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5zY29wZUNvbnRleHQgPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLnNjb3BlKGV4YW1pbmF0aW9uLmlkKTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUNhc2VJZCA9IGV4YW1pbmF0aW9uLmNhc2VfaWQ7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVBcHBJZCA9IGV4YW1pbmF0aW9uLmFwcF9pZDtcclxuICAgICAgICB0aGlzLmFjdGl2ZUV4YW1pbmF0aW9uSWQgPSBleGFtaW5hdGlvbi5pZDtcclxuICAgICAgICBjb25zdCB0b2tlbiA9IHBhcnNlSnd0VG9rZW4odGhpcy5zY29wZUNvbnRleHQuYWNjZXNzX3Rva2VuKSBhcyBTY29wZVRva2VuO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBnZXRKd3RUb2tlbkV4cGlyZXNUaW1lb3V0KHRva2VuKTtcclxuICAgICAgICB0aGlzLl90b2tlblJlZmV0Y2hJbnRlcnZhbCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY29wZUNvbnRleHQgPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLnNjb3BlKGV4YW1pbmF0aW9uLmlkKTtcclxuICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICB0aGlzLnJhaXNlRXZlbnQoJ2luaXQnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZUV4YW1pbmF0aW9uSWQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl90b2tlblJlZmV0Y2hJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Rva2VuUmVmZXRjaEludGVydmFsID0gbnVsbDtcclxuICAgICAgICAgICAgLy90b2RvIGNsZWFyIGFsbCBjYWNoZWQgZGF0YVxyXG4gICAgICAgICAgICB0aGlzLnJhaXNlRXZlbnQoJ3Jlc2V0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJhd1F1ZXJ5KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM/OiBSYXdPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICB0aGlzLnJlcXVpcmVzKCd0aGlzLnNjb3BlQ29udGV4dCcsIHRoaXMuc2NvcGVDb250ZXh0KTtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBCZWFyZXIgJHt0aGlzLnNjb3BlQ29udGV4dD8uYWNjZXNzX3Rva2VufWA7XHJcbiAgICAgICAgaWYgKGVuZHBvaW50ICYmICFlbmRwb2ludC5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgICAgICAgICAgZW5kcG9pbnQgPSBgLyR7ZW5kcG9pbnR9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJhdy5odHRwKGAvJHt0aGlzLnNjb3BlQ29udGV4dD8uc2NvcGVfaWR9JHtlbmRwb2ludH1gLCBvcHRpb25zKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnN0YXR1c0NvZGUgPT09IDQwMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29wZUNvbnRleHQgPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLnNjb3BlKHRoaXMuYWN0aXZlRXhhbWluYXRpb25JZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yYXcuaHR0cChgLyR7dGhpcy5zY29wZUNvbnRleHQuc2NvcGVfaWR9JHtlbmRwb2ludH1gLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuZXhwb3J0IGVudW0gR2xvYmFsRGF0YUNyZWF0b3JUeXBlIHtcclxuICBVU0VSID0gXCJ1c2VyXCIsXHJcbiAgU0NPUEUgPSBcInNjb3BlXCIsXHJcbiAgSk9CID0gXCJqb2JcIlxyXG59IiwiLyogdHNsaW50OmRpc2FibGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuZXhwb3J0IGVudW0gR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUge1xyXG4gIEFOTk9UQVRJT04gPSBcImFubm90YXRpb25cIixcclxuICBDT0xMRUNUSU9OID0gXCJjb2xsZWN0aW9uXCIsXHJcbiAgQ0xBU1MgPSBcImNsYXNzXCIsXHJcbiAgUFJJTUlUSVZFID0gXCJwcmltaXRpdmVcIixcclxuICBXU0kgPSBcIndzaVwiLFxyXG4gIENBU0UgPSBcImNhc2VcIixcclxuICBVU0VSID0gXCJ1c2VyXCIsXHJcbiAgU0NPUEUgPSBcInNjb3BlXCIsXHJcbiAgSk9CID0gXCJqb2JcIlxyXG59IiwiLyogdHNsaW50OmRpc2FibGUgKi9cclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuZXhwb3J0IGVudW0gVGVtcGxhdGVUeXBlIHtcclxuICBCYWNrZ3JvdW5kID0gJ2JhY2tncm91bmQnLFxyXG4gIFBhcmFtcyA9ICdwYXJhbXMnLFxyXG4gIFNoYWRlciA9ICdzaGFkZXInLFxyXG4gIFZpc3VhbGl6YXRpb24gPSAndmlzdWFsaXphdGlvbidcclxufSIsImltcG9ydCB7Um9vdEFQSSwgUm9vdENvbnRleHR9IGZyb20gXCIuLi8uLi9yb290XCI7XHJcbmltcG9ydCBSb290IGZyb20gXCIuL3Jvb3RcIjtcclxuaW1wb3J0IHsgU2xpZGUgfSBmcm9tIFwiLi90eXBlcy9zbGlkZVwiO1xyXG5pbXBvcnQgeyBTbGlkZUluZm8gfSBmcm9tIFwiLi90eXBlcy9zbGlkZS1pbmZvXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdEFQSTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBTbGlkZUluZm8gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNsaWRlSW5mbyhzbGlkZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlSW5mbz4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9zbGlkZXMvJHtzbGlkZUlkfS9pbmZvYClcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzbGlkZVRodW1ibmFpbChzbGlkZUlkOiBzdHJpbmcsIG1heFdpZHRoOiBudW1iZXIsIG1heEhlaWdodDogbnVtYmVyLCBmb3JtYXQ/OiBzdHJpbmcpOiBQcm9taXNlPEJsb2I+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvc2xpZGVzLyR7c2xpZGVJZH0vdGh1bWJuYWlsL21heF9zaXplLyR7bWF4V2lkdGh9LyR7bWF4SGVpZ2h0fWAsIHtcclxuICAgICAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgICAgICAgIGltYWdlX2Zvcm1hdDogZm9ybWF0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJibG9iXCJcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNsaWRlTGFiZWwoc2xpZGVJZDogc3RyaW5nLCBtYXhXaWR0aDogbnVtYmVyLCBtYXhIZWlnaHQ6IG51bWJlciwgZm9ybWF0Pzogc3RyaW5nKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3NsaWRlcy8ke3NsaWRlSWR9L2xhYmVsL21heF9zaXplLyR7bWF4V2lkdGh9LyR7bWF4SGVpZ2h0fWAsIHtcclxuICAgICAgICAgICAgcXVlcnk6IHtcclxuICAgICAgICAgICAgICAgIGltYWdlX2Zvcm1hdDogZm9ybWF0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJibG9iXCJcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRUaWxlKHNsaWRlSWQ6IHN0cmluZywgbGV2ZWw6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGZvcm1hdD86IHN0cmluZyk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9zbGlkZXMvJHtzbGlkZUlkfS90aWxlL2xldmVsLyR7bGV2ZWx9L3RpbGUvJHt4fS8ke3l9YCwge1xyXG4gICAgICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VfZm9ybWF0OiBmb3JtYXRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBcImJsb2JcIlxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEdsb2JhbFN0b3JhZ2UgZnJvbSBcIi4uL3JhdGlvbmFpL2dsb2JhbC1zdG9yYWdlXCI7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tIFwiLi4vcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW1cIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUgfSBmcm9tIFwiLi4vcmF0aW9uYWkvdHlwZXMvZ2xvYmFsLWl0ZW0tcmVmZXJlbmNlLXR5cGVcIjtcclxuaW1wb3J0IHsgTWFza01ldGFkYXRhIH0gZnJvbSBcIi4vdHlwZXMvbWFzay1tZXRhZGF0YVwiO1xyXG5pbXBvcnQgeyBTaGFkZXIsIFNsaWRlTWV0YWRhdGEgfSBmcm9tIFwiLi90eXBlcy9zbGlkZS1tZXRhZGF0YVwiO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVR5cGUgfSBmcm9tIFwiLi90eXBlcy90ZW1wbGF0ZS10eXBlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXc2lNZXRhZGF0YSB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogR2xvYmFsU3RvcmFnZTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBHbG9iYWxJdGVtIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBkZWZhdWx0U2xpZGVNZXRhZGF0YTogU2xpZGVNZXRhZGF0YSA9IHsgdmlzdWFsaXphdGlvbjoge30gfVxyXG4gICAgcHJpdmF0ZSBkZWZhdWx0TWFza01ldGFkYXRhOiBNYXNrTWV0YWRhdGEgPSB7fVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNsaWRlXHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRXc2lNZXRhZGF0YUl0ZW0od3NpSWQ6IHN0cmluZywgaXNTbGlkZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgICAgbGV0IG1ldGFkYXRhID0gKGF3YWl0IHRoaXMuY29udGV4dC5xdWVyeSh7cmVmZXJlbmNlczogW3dzaUlkXX0pKS5maW5kKChwKSA9PiBwLmRhdGFfdHlwZSA9PT0gYCR7aXNTbGlkZSA/IFwic2xpZGVcIiA6IFwibWFza1wifV9tZXRhZGF0YWApO1xyXG4gICAgICBpZiAoIW1ldGFkYXRhKSB7XHJcbiAgICAgICAgbWV0YWRhdGEgPSAgYXdhaXQgdGhpcy5jcmVhdGVXc2lNZXRhZGF0YUl0ZW0od3NpSWQsIGlzU2xpZGUgPyB0aGlzLmRlZmF1bHRTbGlkZU1ldGFkYXRhIDogdGhpcy5kZWZhdWx0TWFza01ldGFkYXRhKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBtZXRhZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlV3NpTWV0YWRhdGFJdGVtKHdzaUlkOiBzdHJpbmcsIHZhbHVlOiBhbnksIGlzU2xpZGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LmNyZWF0ZVZhbHVlKHZhbHVlLCBgTWV0YWRhdGEgb2YgJHtpc1NsaWRlID8gXCJzbGlkZVwiIDogXCJtYXNrXCJ9ICR7d3NpSWR9YCwgdW5kZWZpbmVkLCB3c2lJZCwgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUuV1NJLCBgJHtpc1NsaWRlID8gXCJzbGlkZVwiIDogXCJtYXNrXCJ9X21ldGFkYXRhYClcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRTbGlkZU1ldGFkYXRhKHNsaWRlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVNZXRhZGF0YT4ge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZSgoYXdhaXQgdGhpcy5nZXRXc2lNZXRhZGF0YUl0ZW0oc2xpZGVJZCkpLnZhbHVlIGFzIHN0cmluZylcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGVTbGlkZU1ldGFkYXRhKHNsaWRlSWQ6IHN0cmluZywgdmFsdWU6IFNsaWRlTWV0YWRhdGEpOiBQcm9taXNlPFNsaWRlTWV0YWRhdGEgfCBmYWxzZT4ge1xyXG4gICAgICBjb25zdCBtZXRhZGF0YUl0ZW0gPSBhd2FpdCB0aGlzLmdldFdzaU1ldGFkYXRhSXRlbShzbGlkZUlkKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IGF3YWl0IHRoaXMuY29udGV4dC51cGRhdGUobWV0YWRhdGFJdGVtLmlkLCB7Li4ubWV0YWRhdGFJdGVtLCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkodmFsdWUpfSlcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh1cGRhdGVkSXRlbS52YWx1ZSlcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRTaGFkZXJzQ29uZmlnKHNoYWRlcnM6IFNoYWRlcltdKTogUHJvbWlzZTxvYmplY3Q+IHtcclxuICAgICAgY29uc3Qgc2hhZGVyc0NvbmZpZyA9IHt9XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHNoYWRlclRlbXAgPSBhd2FpdCB0aGlzLmNvbnRleHQudmlzVGVtcGxhdGVzLmdldFRlbXBsYXRlKFRlbXBsYXRlVHlwZS5TaGFkZXIsIHNoYWRlcnNbaV0uc2hhZGVyVGVtcGxhdGUpO1xyXG4gICAgICAgIHNoYWRlcnNDb25maWdbc2hhZGVyc1tpXS5pZF0gPSB7XHJcbiAgICAgICAgICAuLi5zaGFkZXJUZW1wLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogc2hhZGVyc1tpXS5uYW1lIHx8IHNoYWRlcnNbaV0uaWQsXHJcbiAgICAgICAgICAgICAgICBkYXRhUmVmZXJlbmNlczogc2hhZGVyc1tpXS5kYXRhUmVmcyxcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNoYWRlcnNDb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0VmlzdWFsaXphdGlvbnMoc2xpZGVJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgY29uc3Qgc2xpZGVWaXMgPSAoYXdhaXQgdGhpcy5nZXRTbGlkZU1ldGFkYXRhKHNsaWRlSWQpKS52aXN1YWxpemF0aW9uO1xyXG4gICAgICBjb25zdCB2aXN1YWxpemF0aW9ucyA9IHtcclxuICAgICAgICBwYXJhbXM6IHNsaWRlVmlzLnBhcmFtc1RlbXBsYXRlID8gKGF3YWl0IHRoaXMuY29udGV4dC52aXNUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoVGVtcGxhdGVUeXBlLlBhcmFtcywgc2xpZGVWaXMucGFyYW1zVGVtcGxhdGUpIHx8IHVuZGVmaW5lZCkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGF0YTogc2xpZGVWaXMuZGF0YSxcclxuICAgICAgICBiYWNrZ3JvdW5kOiB7XHJcbiAgICAgICAgICAuLi4oc2xpZGVWaXMuYmFja2dyb3VuZCA/IGF3YWl0IHRoaXMuY29udGV4dC52aXNUZW1wbGF0ZXMuZ2V0VGVtcGxhdGUoVGVtcGxhdGVUeXBlLkJhY2tncm91bmQsIHNsaWRlVmlzLmJhY2tncm91bmQ/LnRlbXBsYXRlKSA6IHt9KSxcclxuICAgICAgICAgIGRhdGE6IHNsaWRlVmlzLmJhY2tncm91bmQgJiYgc2xpZGVWaXMuYmFja2dyb3VuZC5kYXRhUmVmLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlzdWFsaXphdGlvbnM6IHNsaWRlVmlzLnZpc3VhbGl6YXRpb25zICYmIGF3YWl0IFByb21pc2UuYWxsKHNsaWRlVmlzLnZpc3VhbGl6YXRpb25zLm1hcChhc3luYyAodmlzKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gKHtcclxuICAgICAgICAgICAgLi4uYXdhaXQgdGhpcy5jb250ZXh0LnZpc1RlbXBsYXRlcy5nZXRUZW1wbGF0ZShUZW1wbGF0ZVR5cGUuVmlzdWFsaXphdGlvbiwgdmlzLnZpc1RlbXBsYXRlKSxcclxuICAgICAgICAgICAgbmFtZTogdmlzLm5hbWUsXHJcbiAgICAgICAgICAgIHNoYWRlcnM6IGF3YWl0IHRoaXMuZ2V0U2hhZGVyc0NvbmZpZyh2aXMuc2hhZGVycyksXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB2aXN1YWxpemF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICAvLyBNQVNLXHJcblxyXG4gICAgYXN5bmMgZ2V0TWFza01ldGFkYXRhKHNsaWRlSWQ6IHN0cmluZyk6IFByb21pc2U8TWFza01ldGFkYXRhPiB7XHJcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKChhd2FpdCB0aGlzLmdldFdzaU1ldGFkYXRhSXRlbShzbGlkZUlkLCBmYWxzZSkpLnZhbHVlIGFzIHN0cmluZylcclxuICAgIH1cclxufSIsImltcG9ydCBHbG9iYWxTdG9yYWdlIGZyb20gXCIuLi9yYXRpb25haS9nbG9iYWwtc3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBHbG9iYWxJdGVtIH0gZnJvbSBcIi4uL3JhdGlvbmFpL3R5cGVzL2dsb2JhbC1pdGVtXCI7XHJcbmltcG9ydCB7IFRlbXBsYXRlVHlwZSB9IGZyb20gXCIuL3R5cGVzL3RlbXBsYXRlLXR5cGVcIjtcclxuXHJcbmNvbnN0IHRlbXBsYXRlc0dsb2JhbEl0ZW1EYXRhVHlwZSA9IFwidmlzX3RlbXBsYXRlc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaXN1YWxpemF0aW9uVGVtcGxhdGVzIHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBHbG9iYWxTdG9yYWdlO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IG9iamVjdCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZldGNoVGVtcGxhdGVJdGVtKHR5cGU6IFRlbXBsYXRlVHlwZSwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxHbG9iYWxJdGVtIHwgdW5kZWZpbmVkPiB7XHJcbiAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5jb250ZXh0LnF1ZXJ5KHtyZWZlcmVuY2VzOiBbbnVsbF0sIGRhdGFfdHlwZXM6IFtgJHt0ZW1wbGF0ZXNHbG9iYWxJdGVtRGF0YVR5cGV9XyR7dHlwZX1gXX0pKS5maW5kKChpdGVtKSA9PiBpdGVtLm5hbWUgPT09IG5hbWUpXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0VGVtcGxhdGUodHlwZTogVGVtcGxhdGVUeXBlLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPG9iamVjdCB8IGZhbHNlPiB7XHJcbiAgICAgIGNvbnN0IHRtcGwgPSBhd2FpdCB0aGlzLmZldGNoVGVtcGxhdGVJdGVtKHR5cGUsIG5hbWUpXHJcbiAgICAgIGlmICh0bXBsKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodG1wbC52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZVRlbXBsYXRlKHR5cGU6IFRlbXBsYXRlVHlwZSwgbmFtZTogc3RyaW5nLCB2YWx1ZTogb2JqZWN0KTogUHJvbWlzZTxvYmplY3QgfCBmYWxzZT4ge1xyXG4gICAgICBjb25zdCBleGlzdGluZ1RtcGwgPSBhd2FpdCB0aGlzLmZldGNoVGVtcGxhdGVJdGVtKHR5cGUsIG5hbWUpXHJcbiAgICAgIGlmIChleGlzdGluZ1RtcGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5jcmVhdGVWYWx1ZSh2YWx1ZSwgYCR7bmFtZX1gLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBgJHt0ZW1wbGF0ZXNHbG9iYWxJdGVtRGF0YVR5cGV9XyR7dHlwZX1gKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZVRlbXBsYXRlKHR5cGU6IFRlbXBsYXRlVHlwZSwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nVG1wbCA9IGF3YWl0IHRoaXMuZmV0Y2hUZW1wbGF0ZUl0ZW0odHlwZSwgbmFtZSlcclxuICAgICAgaWYgKCFleGlzdGluZ1RtcGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LmRlbGV0ZShleGlzdGluZ1RtcGwuaWQpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEhUVFBFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9zcmMvYmFzZVwiO1xyXG5pbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tIFwiLi4vcmF0aW9uYWkvZ2xvYmFsLXN0b3JhZ2VcIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbSB9IGZyb20gXCIuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbVwiO1xyXG5pbXBvcnQgeyBBbm5vdFByZXNldCwgQW5ub3RQcmVzZXRPYmplY3QgfSBmcm9tIFwiLi90eXBlcy9hbm5vdC1wcmVzZXRcIjtcclxuXHJcbnR5cGUgQW5ub3RQcmVzZXRHZXRSZXN1bHQgPSB7XHJcbiAgcHJlc2V0czogQW5ub3RQcmVzZXRbXTtcclxuICBsYXN0TW9kaWZpZWRBdDogbnVtYmVyO1xyXG59XHJcblxyXG50eXBlIEFubm90UHJlc2V0VXBkYXRlUmVzdWx0ID0ge1xyXG4gIHByZXNldHM6IEFubm90UHJlc2V0W107XHJcbiAgc3VjY2Vzc2Z1bFVwZGF0ZTogYm9vbGVhbjtcclxuICBsYXN0TW9kaWZpZWRBdDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbm5vdFByZXNldHMge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2U7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogR2xvYmFsSXRlbSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHByb3RlY3RlZCBwcmVzZXREYXRhVHlwZTogc3RyaW5nID0gXCJhbm5vdF9wcmVzZXRzXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogR2xvYmFsU3RvcmFnZSkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdXNlZCBvbmx5IGluIHRlc3RzXHJcbiAgICB1c2UocHJlc2V0RGF0YVR5cGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICB0aGlzLnByZXNldERhdGFUeXBlID0gcHJlc2V0RGF0YVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRQcmVzZXRzSXRlbShmcmVzaDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICAgIGlmICghdGhpcy5kYXRhIHx8IGZyZXNoKSB7XHJcbiAgICAgICAgbGV0IHByZXNldHNJdGVtID0gKGF3YWl0IHRoaXMuY29udGV4dC5xdWVyeSh7cmVmZXJlbmNlczogW251bGxdLCBkYXRhX3R5cGVzOiBbdGhpcy5wcmVzZXREYXRhVHlwZV19KSkuZmluZCgoaXRlbSkgPT4gdHJ1ZSk7XHJcbiAgICAgICAgaWYgKCFwcmVzZXRzSXRlbSkge1xyXG4gICAgICAgICAgcHJlc2V0c0l0ZW0gPSAgYXdhaXQgdGhpcy5jcmVhdGVQcmVzZXRzSXRlbSh7cHJlc2V0czogW119KVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGEgPSBwcmVzZXRzSXRlbTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5kYXRhXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVQcmVzZXRzSXRlbSh2YWx1ZTogQW5ub3RQcmVzZXRPYmplY3QpOiBQcm9taXNlPEdsb2JhbEl0ZW0+IHtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5jcmVhdGVWYWx1ZSh2YWx1ZSwgYEdsb2JhbCBhbm5vdGF0aW9uIHByZXNldHNgLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLnByZXNldERhdGFUeXBlKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEFubm90UHJlc2V0cyhmcmVzaDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxBbm5vdFByZXNldEdldFJlc3VsdD4ge1xyXG4gICAgICBjb25zdCBwcmVzZXRJdGVtID0gYXdhaXQgdGhpcy5nZXRQcmVzZXRzSXRlbShmcmVzaCk7XHJcbiAgICAgIHJldHVybiB7cHJlc2V0czogKEpTT04ucGFyc2UocHJlc2V0SXRlbS52YWx1ZSBhcyBzdHJpbmcpIGFzIEFubm90UHJlc2V0T2JqZWN0KS5wcmVzZXRzLCBsYXN0TW9kaWZpZWRBdDogcHJlc2V0SXRlbS5tb2RpZmllZF9hdH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtZXJnZVByZXNldHMocHJpbWFyeUFycjogQW5ub3RQcmVzZXRbXSwgc2Vjb25kYXJ5QXJyOiBBbm5vdFByZXNldFtdLCBsb2NhbFZlcnNpb246IG51bWJlcik6IEFubm90UHJlc2V0W10ge1xyXG4gICAgICBjb25zdCBuZXdBcnIgPSBbLi4ucHJpbWFyeUFycl07XHJcbiAgICAgIC8vIGl0ZW0gZnJvbSBzZWNvbmRhcnkgYXJyYXkgaXMgcHVzaGVkIG9ubHkgaWYgaXRlbSB3aXRoIHRoZSBzYW1lIGlkIGlzIG5vdCBwcmVzZW50IGluIHByaW1hcnkgYXJyYXksIGFuZCBjcmVhdGVkQXQgZGF0ZSBpcyBiaWdnZXIgdGhhbiBsb2NhbFZlcnNpb24gZGF0ZSwgbWVhbmluZyBpdGVtIGlzIG5ld1xyXG4gICAgICBzZWNvbmRhcnlBcnIuZm9yRWFjaCgoc2VjSXRlbSkgPT4gKChuZXdBcnIuc29tZSgocHJpbUl0ZW0pID0+IHByaW1JdGVtLmlkID09PSBzZWNJdGVtLmlkKSB8fCAhc2VjSXRlbS5jcmVhdGVkQXQgfHwgc2VjSXRlbS5jcmVhdGVkQXQgPD0gbG9jYWxWZXJzaW9uKSA/IG51bGwgOiBuZXdBcnIucHVzaChzZWNJdGVtKSkpXHJcbiAgICByZXR1cm4gbmV3QXJyO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZUFubm90UHJlc2V0cyh2YWx1ZTogQW5ub3RQcmVzZXRbXSwgbG9jYWxWZXJzaW9uOiBudW1iZXIsIGZhaWxPblBhcmFsbGVsVXBkYXRlOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPEFubm90UHJlc2V0VXBkYXRlUmVzdWx0PiB7XHJcbiAgICAgIC8vIGZldGNoIGZyZXNoIHByZXNldHNcclxuICAgICAgY29uc3QgcmVtb3RlUHJlc2V0c0l0ZW0gPSBhd2FpdCB0aGlzLmdldFByZXNldHNJdGVtKHRydWUpO1xyXG4gICAgICBjb25zdCByZW1vdGVQcmVzZXRzID0gKEpTT04ucGFyc2UocmVtb3RlUHJlc2V0c0l0ZW0udmFsdWUgYXMgc3RyaW5nKSBhcyBBbm5vdFByZXNldE9iamVjdCkucHJlc2V0cztcclxuXHJcbiAgICAgIGxldCBsb2NhbFByZXNldHMgPSB2YWx1ZTtcclxuICAgICAgbGV0IHN1Y2Nlc3NmdWxVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgaWYocmVtb3RlUHJlc2V0c0l0ZW0ubW9kaWZpZWRfYXQgIT09IGxvY2FsVmVyc2lvbikge1xyXG4gICAgICAgIGlmKGZhaWxPblBhcmFsbGVsVXBkYXRlKSB7XHJcbiAgICAgICAgICByZXR1cm4geyBwcmVzZXRzOiByZW1vdGVQcmVzZXRzLCBzdWNjZXNzZnVsVXBkYXRlOiBmYWxzZSwgbGFzdE1vZGlmaWVkQXQ6IHJlbW90ZVByZXNldHNJdGVtLm1vZGlmaWVkX2F0fVxyXG4gICAgICAgIH1cclxuICAgICAgICBsb2NhbFByZXNldHMgPSB0aGlzLm1lcmdlUHJlc2V0cyhyZW1vdGVQcmVzZXRzLCBsb2NhbFByZXNldHMsIGxvY2FsVmVyc2lvbik7XHJcbiAgICAgICAgc3VjY2Vzc2Z1bFVwZGF0ZSA9IGZhbHNlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEl0ZW0gPSBhd2FpdCB0aGlzLmNvbnRleHQudXBkYXRlKHJlbW90ZVByZXNldHNJdGVtLmlkLCB7Li4ucmVtb3RlUHJlc2V0c0l0ZW0sIHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7cHJlc2V0czogbG9jYWxQcmVzZXRzfSl9KVxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcmVzZXRzID0gIChKU09OLnBhcnNlKHVwZGF0ZWRJdGVtLnZhbHVlKSBhcyBBbm5vdFByZXNldE9iamVjdCkucHJlc2V0cztcclxuICAgICAgICByZXR1cm4ge3ByZXNldHM6IHVwZGF0ZWRQcmVzZXRzLCBzdWNjZXNzZnVsVXBkYXRlOiBzdWNjZXNzZnVsVXBkYXRlLCBsYXN0TW9kaWZpZWRBdDogdXBkYXRlZEl0ZW0ubW9kaWZpZWRfYXR9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZigoZSBhcyBIVFRQRXJyb3IpLnN0YXR1c0NvZGUgPT09IDQwOSkge1xyXG4gICAgICAgICAgY29uc3QgcmV0cnlBdHRlbXB0ID0gIGF3YWl0IHRoaXMudXBkYXRlQW5ub3RQcmVzZXRzKGxvY2FsUHJlc2V0cywgcmVtb3RlUHJlc2V0c0l0ZW0ubW9kaWZpZWRfYXQpO1xyXG4gICAgICAgICAgcmV0dXJuIHsuLi5yZXRyeUF0dGVtcHQsIHN1Y2Nlc3NmdWxVcGRhdGU6IHN1Y2Nlc3NmdWxVcGRhdGV9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVBbm5vdFByZXNldHMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGNvbnN0IHByZXNldHNJdGVtID0gYXdhaXQgdGhpcy5nZXRQcmVzZXRzSXRlbSh0cnVlKTtcclxuICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LmRlbGV0ZShwcmVzZXRzSXRlbS5pZCk7XHJcbiAgICAgIHRoaXMuZGF0YSA9IG51bGw7XHJcbiAgICB9XHJcbiAgXHJcbn0iLCJpbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tIFwiLi4vcmF0aW9uYWkvZ2xvYmFsLXN0b3JhZ2VcIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbSB9IGZyb20gXCIuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbVwiO1xyXG5pbXBvcnQgeyBHbG9iYWxJdGVtUmVmZXJlbmNlVHlwZSB9IGZyb20gXCIuLi9yYXRpb25haS90eXBlcy9nbG9iYWwtaXRlbS1yZWZlcmVuY2UtdHlwZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSm9iQ29uZmlnIHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBHbG9iYWxTdG9yYWdlO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IG9iamVjdCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHByb3RlY3RlZCBjb25maWdEYXRhVHlwZTogc3RyaW5nID0gXCJhcHBfam9iX2NvbmZpZ1wiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IEdsb2JhbFN0b3JhZ2UpIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVzZWQgb25seSBpbiB0ZXN0c1xyXG4gICAgdXNlKGNvbmZpZ0RhdGFUeXBlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgdGhpcy5jb25maWdEYXRhVHlwZSA9IGNvbmZpZ0RhdGFUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2hKb2JDb25maWdJdGVtKGFwcElkOiBzdHJpbmcpOiBQcm9taXNlPEdsb2JhbEl0ZW0gfCB1bmRlZmluZWQ+IHtcclxuICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmNvbnRleHQucXVlcnkoe3JlZmVyZW5jZXM6IFthcHBJZF0sIGRhdGFfdHlwZXM6IFt0aGlzLmNvbmZpZ0RhdGFUeXBlXX0pKS5maW5kKEJvb2xlYW4pXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0Sm9iQ29uZmlnKGFwcElkOiBzdHJpbmcpOiBQcm9taXNlPG9iamVjdCB8IGZhbHNlPiB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLmZldGNoSm9iQ29uZmlnSXRlbShhcHBJZClcclxuICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtLnZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY3JlYXRlSm9iQ29uZmlnKGFwcElkOiBzdHJpbmcsIHZhbHVlOiBvYmplY3QpOiBQcm9taXNlPG9iamVjdCB8IGZhbHNlPiB7XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ29uZmlnID0gYXdhaXQgdGhpcy5mZXRjaEpvYkNvbmZpZ0l0ZW0oYXBwSWQpO1xyXG4gICAgICBpZiAoZXhpc3RpbmdDb25maWcpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5jcmVhdGVWYWx1ZSh2YWx1ZSwgYEpvYiBjb25maWcgb2YgQXBwYCwgdW5kZWZpbmVkLCBhcHBJZCwgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUuSk9CLCB0aGlzLmNvbmZpZ0RhdGFUeXBlKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZUpvYkNvbmZpZyhhcHBJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ29uZmlnID0gYXdhaXQgdGhpcy5mZXRjaEpvYkNvbmZpZ0l0ZW0oYXBwSWQpXHJcbiAgICAgIGlmICghZXhpc3RpbmdDb25maWcpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LmRlbGV0ZShleGlzdGluZ0NvbmZpZy5pZCk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFJhdGlvbkFJIGZyb20gXCIuL3JhdGlvbmFpXCI7XHJcbmltcG9ydCB7IEdsb2JhbEl0ZW0gfSBmcm9tIFwiLi90eXBlcy9nbG9iYWwtaXRlbVwiO1xyXG5pbXBvcnQgeyBHbG9iYWxTdG9yYWdlUXVlcnkgfSBmcm9tIFwiLi90eXBlcy9nbG9iYWwtc3RvcmFnZS1xdWVyeVwiO1xyXG5pbXBvcnQgeyBHbG9iYWxJdGVtTGlzdCB9IGZyb20gXCIuL3R5cGVzL2dsb2JhbC1pdGVtLWxpc3RcIjtcclxuaW1wb3J0IHsgUG9zdEdsb2JhbEl0ZW1zIH0gZnJvbSBcIi4vdHlwZXMvcG9zdC1nbG9iYWwtaXRlbXNcIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbXMgfSBmcm9tIFwiLi90eXBlcy9nbG9iYWwtaXRlbXNcIjtcclxuaW1wb3J0IHsgR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUgfSBmcm9tIFwiLi90eXBlcy9nbG9iYWwtaXRlbS1yZWZlcmVuY2UtdHlwZVwiO1xyXG5pbXBvcnQgeyBQb3N0R2xvYmFsSXRlbSB9IGZyb20gXCIuL3R5cGVzL3Bvc3QtZ2xvYmFsLWl0ZW1cIjtcclxuaW1wb3J0IHsgR2xvYmFsRGF0YUNyZWF0b3JUeXBlIH0gZnJvbSBcIi4vdHlwZXMvZ2xvYmFsLWRhdGEtY3JlYXRvci10eXBlXCI7XHJcbmltcG9ydCB7IFB1dEdsb2JhbEl0ZW0gfSBmcm9tIFwiLi90eXBlcy9wdXQtZ2xvYmFsLWl0ZW1cIjtcclxuaW1wb3J0IFdzaU1ldGFkYXRhIGZyb20gXCIuLi9leHRlbnNpb25zL3dzaS1tZXRhZGF0YVwiO1xyXG5pbXBvcnQgVmlzdWFsaXphdGlvblRlbXBsYXRlcyBmcm9tIFwiLi4vZXh0ZW5zaW9ucy92aXN1YWxpemF0aW9uLXRlbXBsYXRlc1wiO1xyXG5pbXBvcnQgQW5ub3RQcmVzZXRzIGZyb20gXCIuLi9leHRlbnNpb25zL2Fubm90LXByZXNldHNcIjtcclxuaW1wb3J0IEpvYkNvbmZpZyBmcm9tIFwiLi4vZXh0ZW5zaW9ucy9qb2ItY29uZmlnXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHbG9iYWxTdG9yYWdlIHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBSYXRpb25BSTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBHbG9iYWxJdGVtIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgd3NpTWV0YWRhdGE6IFdzaU1ldGFkYXRhO1xyXG4gICAgdmlzVGVtcGxhdGVzOiBWaXN1YWxpemF0aW9uVGVtcGxhdGVzO1xyXG4gICAgYW5ub3RQcmVzZXRzOiBBbm5vdFByZXNldHM7XHJcbiAgICBqb2JDb25maWc6IEpvYkNvbmZpZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSYXRpb25BSSkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy53c2lNZXRhZGF0YSA9IG5ldyBXc2lNZXRhZGF0YSh0aGlzKVxyXG4gICAgICAgIHRoaXMudmlzVGVtcGxhdGVzID0gbmV3IFZpc3VhbGl6YXRpb25UZW1wbGF0ZXModGhpcylcclxuICAgICAgICB0aGlzLmFubm90UHJlc2V0cyA9IG5ldyBBbm5vdFByZXNldHModGhpcyk7XHJcbiAgICAgICAgdGhpcy5qb2JDb25maWcgPSBuZXcgSm9iQ29uZmlnKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldChpdGVtSWQ6IHN0cmluZyk6IFByb21pc2U8R2xvYmFsSXRlbT4ge1xyXG4gICAgICBjb25zdCBnbG9iYWxJdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvZ2xvYmFsLXN0b3JhZ2UvJHtpdGVtSWR9YCk7XHJcbiAgICAgIHJldHVybiBnbG9iYWxJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFZhbHVlKGl0ZW1JZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IHRoaXMuZ2V0KGl0ZW1JZClcclxuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpdGVtLnZhbHVlKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIHJldHVybiBpdGVtLnZhbHVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBpdGVtLnZhbHVlXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcXVlcnkocXVlcnk6IEdsb2JhbFN0b3JhZ2VRdWVyeSk6IFByb21pc2U8R2xvYmFsSXRlbVtdPiB7XHJcbiAgICAgIGNvbnN0IGRhdGE6IEdsb2JhbEl0ZW1MaXN0ID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvZ2xvYmFsLXN0b3JhZ2UvcXVlcnlgLCB7XHJcbiAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICBib2R5OiBxdWVyeSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gZGF0YS5pdGVtc1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZShpdGVtczogUG9zdEdsb2JhbEl0ZW1zKTogUHJvbWlzZTxHbG9iYWxJdGVtcz4ge1xyXG4gICAgICBjb25zdCBjcmVhdGVkSXRlbXM6IEdsb2JhbEl0ZW1zID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvZ2xvYmFsLXN0b3JhZ2VgLCB7XHJcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgYm9keTogaXRlbXMsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGNyZWF0ZWRJdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjcmVhdGVWYWx1ZSh2YWx1ZTogYW55LCBuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uPzogc3RyaW5nLCByZWZlcmVuY2VfaWQ/OiBzdHJpbmcsIHJlZmVyZW5jZV90eXBlPzogR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUsIGRhdGFfdHlwZT86IHN0cmluZyk6IFByb21pc2U8R2xvYmFsSXRlbT4ge1xyXG4gICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuXHJcbiAgICAgIGNvbnN0IG5ld0l0ZW06IFBvc3RHbG9iYWxJdGVtID0ge1xyXG4gICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcclxuICAgICAgICAgIGNyZWF0b3JfaWQ6IHRoaXMuY29udGV4dC51c2VySWQsXHJcbiAgICAgICAgICBjcmVhdG9yX3R5cGU6IEdsb2JhbERhdGFDcmVhdG9yVHlwZS5VU0VSLFxyXG4gICAgICAgICAgcmVmZXJlbmNlX2lkOiByZWZlcmVuY2VfaWQsXHJcbiAgICAgICAgICByZWZlcmVuY2VfdHlwZTogcmVmZXJlbmNlX3R5cGUsXHJcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgZGF0YV90eXBlOiBkYXRhX3R5cGVcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlKG5ld0l0ZW0pIGFzIEdsb2JhbEl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlKGl0ZW1JZDogc3RyaW5nLCBpdGVtOiBQdXRHbG9iYWxJdGVtKTogUHJvbWlzZTxHbG9iYWxJdGVtPiB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvZ2xvYmFsLXN0b3JhZ2UvJHtpdGVtSWR9YCwge1xyXG4gICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgYm9keTogaXRlbSxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB1cGRhdGVkSXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGVWYWx1ZShpdGVtSWQ6IHN0cmluZywgdmFsdWU6IGFueSk6IFByb21pc2U8R2xvYmFsSXRlbT4ge1xyXG4gICAgICBjb25zdCBpdGVtOiBHbG9iYWxJdGVtID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvZ2xvYmFsLXN0b3JhZ2UvJHtpdGVtSWR9YCk7XHJcbiAgICAgIGl0ZW0udmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSlcclxuICAgICAgY29uc3QgdXBkYXRlZEl0ZW06IEdsb2JhbEl0ZW0gPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9nbG9iYWwtc3RvcmFnZS8ke2l0ZW1JZH1gLCB7XHJcbiAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICBib2R5OiBpdGVtLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHVwZGF0ZWRJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZShpdGVtSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9nbG9iYWwtc3RvcmFnZS8ke2l0ZW1JZH1gLCB7XHJcbiAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7UmF3T3B0aW9uc30gZnJvbSBcIi4uLy4uL2Jhc2VcIjtcclxuaW1wb3J0IFJvb3QgZnJvbSBcIi4uL3Jvb3Qvcm9vdFwiO1xyXG5pbXBvcnQgR2xvYmFsU3RvcmFnZSBmcm9tIFwiLi9nbG9iYWwtc3RvcmFnZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmF0aW9uQUkge1xyXG4gICAgc3RhdGljIHJlbGF0aXZlQXBpUGF0aCA9ICcvcmF0aW9uYWknO1xyXG5cclxuICAgIGNvbnRleHQ6IFJvb3Q7XHJcblxyXG4gICAgLy9jdXN0b21cclxuICAgIGdsb2JhbFN0b3JhZ2U6IEdsb2JhbFN0b3JhZ2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogUm9vdCkge1xyXG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICB0aGlzLmdsb2JhbFN0b3JhZ2UgPSBuZXcgR2xvYmFsU3RvcmFnZSh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdXNlcklkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC51c2VySWQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmF3T3B0aW9ucz17fSk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5yYXdRdWVyeShgJHtSYXRpb25BSS5yZWxhdGl2ZUFwaVBhdGh9JHtlbmRwb2ludH1gLCBvcHRpb25zKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0VtcGF0aW9uQVBJT3B0aW9ucywgUmF3QVBJLCBSYXdPcHRpb25zfSBmcm9tIFwiLi4vLi4vYmFzZVwiO1xyXG5pbXBvcnQge1Jvb3RBUEl9IGZyb20gXCIuLi8uLi9yb290XCI7XHJcbmltcG9ydCBTY29wZSBmcm9tIFwiLi4vc2NvcGUvc2NvcGVcIjtcclxuaW1wb3J0IEFwcHMgZnJvbSBcIi4vYXBwc1wiO1xyXG5pbXBvcnQgQ2FzZXMgZnJvbSBcIi4vY2FzZXNcIjtcclxuaW1wb3J0IEV4YW1pbmF0aW9ucyBmcm9tIFwiLi9leGFtaW5hdGlvbnNcIjtcclxuaW1wb3J0IFNsaWRlcyBmcm9tIFwiLi9zbGlkZXNcIjtcclxuaW1wb3J0IFJhdGlvbkFJIGZyb20gXCIuLi9yYXRpb25haS9yYXRpb25haVwiO1xyXG5pbXBvcnQgeyBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbiB9IGZyb20gXCIuL3R5cGVzL3dvcmtiZW5jaC1zZXJ2aWNlLWFwaS12LTMtY3VzdG9tLW1vZGVscy1leGFtaW5hdGlvbnMtZXhhbWluYXRpb25cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvb3QgZXh0ZW5kcyBSb290QVBJIHtcclxuICAgIHN0YXRpYyBhcGlQYXRoID0gJy92Myc7XHJcblxyXG4gICAgLy9pbnRlcmZhY2VcclxuICAgIHByb3RlY3RlZCByYXc6IFJhd0FQSTtcclxuICAgIHByb3RlY3RlZCBkZWZhdWx0U2NvcGVLZXk6IHN0cmluZyA9IFwiXCI7XHJcbiAgICByYXRpb25haTogUmF0aW9uQUk7XHJcbiAgICB2ZXJzaW9uOiBzdHJpbmc7XHJcbiAgICByb290VVJJOiBzdHJpbmc7XHJcbiAgICBcclxuICAgIHNjb3BlczogTWFwPHN0cmluZywgU2NvcGU+O1xyXG5cclxuICAgIC8vY3VzdG9tXHJcbiAgICBhcHBzOiBBcHBzO1xyXG4gICAgY2FzZXM6IENhc2VzO1xyXG4gICAgZXhhbWluYXRpb25zOiBFeGFtaW5hdGlvbnM7XHJcbiAgICBzbGlkZXM6IFNsaWRlcztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBFbXBhdGlvbkFQSU9wdGlvbnMpIHtcclxuICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSBcInYzXCI7XHJcbiAgICAgICAgdGhpcy5yb290VVJJID0gdGhpcy5vcHRpb25zLmFwaVVybCArIFJvb3QuYXBpUGF0aDtcclxuICAgICAgICB0aGlzLnJhdyA9IG5ldyBSYXdBUEkodGhpcy5yb290VVJJKTtcclxuICAgICAgICB0aGlzLnJhdGlvbmFpID0gbmV3IFJhdGlvbkFJKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmFwcHMgPSBuZXcgQXBwcyh0aGlzKTtcclxuICAgICAgICB0aGlzLmNhc2VzID0gbmV3IENhc2VzKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXhhbWluYXRpb25zID0gbmV3IEV4YW1pbmF0aW9ucyh0aGlzKTtcclxuICAgICAgICB0aGlzLnNsaWRlcyA9IG5ldyBTbGlkZXModGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcGVzID0gbmV3IE1hcDxzdHJpbmcsIFNjb3BlPigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkZWZhdWx0U2NvcGUoKTogU2NvcGUgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjb3Blcy5nZXQodGhpcy5kZWZhdWx0U2NvcGVLZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbmV3U2NvcGVGcm9tKGV4YW1pbmF0aW9uOiBXb3JrYmVuY2hTZXJ2aWNlQXBpVjNDdXN0b21Nb2RlbHNFeGFtaW5hdGlvbnNFeGFtaW5hdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHNjb3BlID0gbmV3IFNjb3BlKHRoaXMpO1xyXG4gICAgICAgIGF3YWl0IHNjb3BlLmZyb20oZXhhbWluYXRpb24pO1xyXG4gICAgICAgIHRoaXMuc2NvcGVzLnNldChleGFtaW5hdGlvbi5pZCwgc2NvcGUpO1xyXG4gICAgICAgIGlmKHRoaXMuZGVmYXVsdFNjb3BlS2V5ID09PSBcIlwiKSB0aGlzLmRlZmF1bHRTY29wZUtleSA9IGV4YW1pbmF0aW9uLmlkO1xyXG4gICAgICAgIHJldHVybiBzY29wZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIG5ld1Njb3BlVXNlKGNhc2VJZDogc3RyaW5nLCBhcHBJZD86IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHNjb3BlID0gbmV3IFNjb3BlKHRoaXMpO1xyXG4gICAgICAgIGF3YWl0IHNjb3BlLnVzZShjYXNlSWQsIGFwcElkKTtcclxuICAgICAgICB0aGlzLnNjb3Blcy5zZXQoc2NvcGUuYWN0aXZlRXhhbWluYXRpb25JZCwgc2NvcGUpO1xyXG4gICAgICAgIGlmKHRoaXMuZGVmYXVsdFNjb3BlS2V5ID09PSBcIlwiKSB0aGlzLmRlZmF1bHRTY29wZUtleSA9IHNjb3BlLmFjdGl2ZUV4YW1pbmF0aW9uSWQ7XHJcbiAgICAgICAgcmV0dXJuIHNjb3BlO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldFNjb3BlRnJvbShleGFtaW5hdGlvbjogV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY29wZXMuZ2V0KGV4YW1pbmF0aW9uLmlkKSB8fCBhd2FpdCB0aGlzLm5ld1Njb3BlRnJvbShleGFtaW5hdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0U2NvcGVVc2UoY2FzZUlkOiBzdHJpbmcsIGFwcElkPzogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdTY29wZXMgPSBbLi4udGhpcy5zY29wZXMudmFsdWVzKCldLmZpbHRlcigoc2NwKSA9PiBzY3AuYWN0aXZlQ2FzZUlkID09PSBjYXNlSWQgJiYgKGFwcElkID8gc2NwLmFjdGl2ZUFwcElkID09PSBhcHBJZCA6IHRydWUpKTtcclxuICAgICAgICByZXR1cm4gbWF0Y2hpbmdTY29wZXMubGVuZ3RoID4gMCA/IG1hdGNoaW5nU2NvcGVzWzBdIDogYXdhaXQgdGhpcy5uZXdTY29wZVVzZShjYXNlSWQsIGFwcElkKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJhd1F1ZXJ5KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnM9e30pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLnJhd1F1ZXJ5KGVuZHBvaW50LCBvcHRpb25zKTtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzW1wiVXNlci1JZFwiXSA9IHRoaXMudXNlcklkO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gfHwgYEJlYXJlciAke3RoaXMucmF3VG9rZW59YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3Lmh0dHAoZW5kcG9pbnQsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJFdmVudFNvdXJjZSIsImV2ZW50cyIsImFkZE9uY2VIYW5kbGVyIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsInVzZXJEYXRhIiwidGltZXMiLCJwcmlvcml0eSIsInNlbGYiLCJ0aGlzIiwiY291bnQiLCJvbmNlSGFuZGxlciIsImV2ZW50IiwicmVtb3ZlSGFuZGxlciIsImFkZEhhbmRsZXIiLCJpc0Z1bmN0aW9uIiwiaW5kZXgiLCJsZW5ndGgiLCJoYW5kbGVycyIsIkFycmF5IiwiaXNBcnJheSIsImkiLCJwdXNoIiwibnVtYmVyT2ZIYW5kbGVycyIsInJlbW92ZUFsbEhhbmRsZXJzIiwiZXZlbnRUeXBlIiwiZ2V0SGFuZGxlciIsImFwcGx5Iiwic291cmNlIiwiYXJncyIsImV2ZW50U291cmNlIiwiZ2V0QXdhaXRpbmdIYW5kbGVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJsb29wIiwicmVzdWx0IiwidHlwZSIsInRoZW4iLCJyYWlzZUV2ZW50IiwiZXZlbnRBcmdzIiwicmFpc2VFdmVudEF3YWl0aW5nIiwiYXdhaXRpbmdIYW5kbGVyIiwiU3RyaW5nIiwiY2xhc3MydHlwZSIsInRvU3RyaW5nIiwiU1RBVFVTX0NPREVTIiwiSFRUUEVycm9yIiwiRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImV4dHJhcyIsInN1cGVyIiwiYXJndW1lbnRzIiwiYXNzaWduIiwibmFtZSIsInN1ZmZpeCIsInJlcGxhY2UiLCJzcGxpdCIsInJlZHVjZSIsImFjYyIsImMiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiaHR0cEVycm9yVG9OYW1lIiwic3RhdHVzQ29kZSIsIlJhd0FQSSIsImNvbnN0cnVjdG9yIiwidXJsIiwib3B0aW9ucyIsIl9wYXJzZVF1ZXJ5UGFyYW1zIiwicGFyYW1zIiwidW5kZWZpbmVkIiwiayIsInYiLCJVUkxTZWFyY2hQYXJhbXMiLCJfZmV0Y2giLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJyZXNwb25zZVR5cGUiLCJlIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImVycm9yIiwib2siLCJodHRwIiwiZW5kcG9pbnQiLCJoYXNCb2R5Iiwic3RhcnRzV2l0aCIsInF1ZXJ5IiwiSlNPTiIsInN0cmluZ2lmeSIsIkFic3RyYWN0QVBJIiwiZ2V0Q2FsbGVyTmFtZSIsIm9yaWciLCJwcmVwYXJlU3RhY2tUcmFjZSIsInN0YWNrIiwicmVxdWlyZXMiLCJnZXRKd3RUb2tlbkV4cGlyZXNUaW1lb3V0IiwidG9rZW4iLCJleHAiLCJEYXRlIiwibm93IiwicGFyc2VKd3RUb2tlbiIsInBhcnNlIiwiYXRvYiIsInNsZWVwIiwibXMiLCJzZXRUaW1lb3V0IiwiTG9nZ2VyIiwiY29uc29sZSIsIndhcm4iLCJpbmZvIiwiZGVidWciLCJSb290Q29udGV4dCIsIlJvb3RBUEkiLCJhY2Nlc3NUb2tlbiIsIl90b2tlbkV4cGlyZXMiLCJfcmF3VG9rZW4iLCJ3b3JrYmVuY2hBcGlVcmwiLCJhcGlVcmwiLCJhcGlSb290UGF0aCIsImVuZHNXaXRoIiwiYW5vbnltb3VzVXNlcklkIiwiX3VzZXJJZCIsImNhY2hlZCIsImZyb20iLCJ3aXRoRXZlbnQiLCJyZXNldCIsInRva2VuVGltZW91dCIsInVzZXJJZCIsInN1YiIsInVzZSIsImRlZmF1bHRTY29wZUtleSIsInNjb3BlcyIsImZvckVhY2giLCJzY3AiLCJjbGVhciIsInJhd1Rva2VuIiwicmF3UXVlcnkiLCJldmVudE9iamVjdCIsIm5ld1Rva2VuIiwiU2NvcGVDb250ZXh0IiwiU2NvcGVBUEkiLCJBcHBzIiwiY29udGV4dCIsImRhdGEiLCJfZGVmYXVsdEFwcCIsImxpc3QiLCJhcHBzIiwidGlzc3VlcyIsInN0YWlucyIsImpvYl9tb2RlcyIsImFwcCIsIml0ZW1zIiwibmFtZV9zaG9ydCIsInZlbmRvcl9uYW1lIiwiZ2V0TnVtYmVyIiwidmFyaWFibGUiLCJOdW1iZXIiLCJtYXRjaFN0cmluZ09uU2VwYXJhdG9yR3JvdXAiLCJzdHIiLCJzZXBhcmF0b3IiLCJncm91cElkeCIsIm1hdGNoZXMiLCJSZWdFeHAiLCJleGVjIiwiQ2FzZUV4cGxvcmVyIiwiY3VzdG9tQ2FzZXMiLCJjYXNlSGllcmFyY2h5IiwiY2FzZVRpc3N1ZXMiLCJjYXNlU3RhaW5zIiwiaWRlbnRpZmllclNlcGFyYXRvciIsImhpZXJhcmNoeVNwZWMiLCJnZXRDdXN0b21DYXNlcyIsIm1hcCIsImNhc2VPYmoiLCJwYXRoSW5IaWVyYXJjaHkiLCJnZXRDYXNlSGllcmFyY2h5UGF0aCIsInBhdGhGaW5pc2hlZCIsInByZXYiLCJjdXJyIiwidmFsIiwiZ2V0Q2FzZVZhbHVlIiwicmV0dXJuVmFsIiwiZ2V0Q2FzZSIsImNhc2VJZCIsImZpbmQiLCJjcyIsImlkIiwiZ2V0Q2FzZVllYXIiLCJnZXRDYXNlTW9udGgiLCJnZXRDYXNlRGF5IiwiZ2V0Q2FzZURlc2NyaXB0aW9uIiwiZ2V0Q2FzZVRpc3N1ZXMiLCJnZXRDYXNlU3RhaW5zIiwiaXNOYU4iLCJnZXRDYXNlSWRlbnRpZmllclBhcnQiLCJldmFsdWF0ZUNhc2VWYWx1ZSIsImV2YWxWYWx1ZSIsImNhc2VWYWx1ZSIsImV2YXVsYXRlQ2FzZVllYXIiLCJldmF1bGF0ZUNhc2VNb250aCIsImV2YXVsYXRlQ2FzZURheSIsImV2YWx1YXRlQ2FzZURlc2NyaXB0aW9uIiwiZXZhbHVhdGVDYXNlVGlzc3VlcyIsImV2YWx1YXRlQ2FzZVN0YWlucyIsImV2YXVsYXRlQ2FzZUlkZW50aWZpZXJQYXJ0IiwiZXBvY2hUaW1lIiwiY3JlYXRlZF9hdCIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwicGFydElkeCIsInBhcnRzIiwibG9jYWxfaWQiLCJkZXNjcmlwdGlvbiIsImtleXMiLCJzdHJpbmdUb01hdGNoIiwidG9rZW5TdHJpbmciLCJ0b2tlbnMiLCJmaWx0ZXIiLCJCb29sZWFuIiwic2VhcmNoVGVybVJlZ2V4Iiwiam9pbiIsIm1hdGNoIiwibWF0Y2hTdHJpbmdPblRva2VucyIsImV2ZXJ5IiwidGlzc3VlIiwiaW5jbHVkZXMiLCJzdGFpbiIsImhpZXJhcmNoeUxldmVsIiwia2V5SWR4IiwiY2FzZXMiLCJjdXJyZW50SGllcmFyY2h5UGF0aCIsImxldmVsTmFtZSIsImxhc3RMZXZlbCIsImdyb3VwcyIsIml0ZW0iLCJoaWVyYXJjaHkiLCJzZWFyY2giLCJmaWx0ZXJlZENhc2VzIiwibG9jYWxpemF0aW9uIiwiYWxsVGlzc3VlcyIsIlNldCIsImVudHJpZXMiLCJ0aXNOYW1lIiwidGlzVmFsdWUiLCJsb2NOYW1lIiwidCIsImFkZCIsImFsbFN0YWlucyIsInN0bk5hbWUiLCJzdG5WYWx1ZSIsInMiLCJXc2lFeHBsb3JlciIsImxhc3RDYXNlSWQiLCJzbGlkZXNEYXRhIiwibWFza3NEYXRhIiwibWFza0lkZW50aWZpZXJTZXBhcmF0b3IiLCJtYXNrSWRlbnRpZmllclZhbHVlIiwiZ2V0QWxsU2xpZGVzIiwic2xpZGVzIiwic2xpZGUiLCJtYXNrcyIsIkNhc2VzIiwiY2FzZUV4cGxvcmVyIiwid3NpRXhwbG9yZXIiLCJFeGFtaW5hdGlvbnMiLCJjcmVhdGUiLCJhcHBJZCIsImNhc2VfaWQiLCJhcHBfaWQiLCJza2lwIiwibGltaXQiLCJleGFtaW5hdGlvbklkIiwic2NvcGUiLCJTdG9yYWdlIiwiZ2V0UmF3IiwiZmx1c2giLCJjb250ZW50Iiwic2V0IiwidmFsdWVSYXciLCJkYXRhUmF3IiwiZXJhc2UiLCJBbm5vdGF0aW9ucyIsInVwbG9hZCIsInVwZGF0ZSIsImRlbGV0ZSIsImV4dGVybmFsSWRzIiwiQ29sbGVjdGlvbnMiLCJjb2xsZWN0aW9uSWQiLCJjb2xsZWN0aW9uIiwicXVlcnlJdGVtcyIsImNyZWF0ZUl0ZW1zIiwiZGVsZXRlSXRlbSIsIml0ZW1JZCIsIkpvYnMiLCJnZXRKb2JzIiwiam9iSWQiLCJQaXhlbG1hcHMiLCJwaXhlbG1hcElkIiwicG9zdCIsInBpeGVsbWFwcyIsImdldFRpbGUiLCJsZXZlbCIsInRpbGVYIiwidGlsZVkiLCJ1cGxvYWRUaWxlIiwidGlsZSIsImRlbGV0ZVRpbGUiLCJidWxrR2V0VGlsZSIsInN0YXJ0WCIsInN0YXJ0WSIsImVuZFgiLCJlbmRZIiwiYnVsa1VwbG9hZFRpbGUiLCJ0aWxlcyIsIlNjb3BlIiwic2NvcGVDb250ZXh0IiwiX2RlZmF1bHRFeGFtaW5hdGlvbklkIiwiX3Rva2VuUmVmZXRjaEludGVydmFsIiwiYWN0aXZlRXhhbWluYXRpb25JZCIsImFjdGl2ZUNhc2VJZCIsImFjdGl2ZUFwcElkIiwicmF3IiwiYXBpUGF0aCIsInN0b3JhZ2UiLCJhbm5vdGF0aW9ucyIsImNvbGxlY3Rpb25zIiwiam9icyIsImZpbmRFeGFtaW5hdGlvbiIsImV4YW1pbmF0aW9ucyIsImNyZWF0b3JzIiwiaXRlbV9jb3VudCIsImV4YW1pbmF0aW9uIiwiZXgiLCJzdGF0ZSIsImRlZmF1bHQiLCJzY29wZVRva2VuIiwiYWNjZXNzX3Rva2VuIiwidGltZW91dCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInNjb3BlX2lkIiwiR2xvYmFsRGF0YUNyZWF0b3JUeXBlIiwiR2xvYmFsSXRlbVJlZmVyZW5jZVR5cGUiLCJUZW1wbGF0ZVR5cGUiLCJTbGlkZXMiLCJzbGlkZUluZm8iLCJzbGlkZUlkIiwic2xpZGVUaHVtYm5haWwiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImZvcm1hdCIsImltYWdlX2Zvcm1hdCIsInNsaWRlTGFiZWwiLCJsb2FkVGlsZSIsIngiLCJ5IiwiV3NpTWV0YWRhdGEiLCJkZWZhdWx0U2xpZGVNZXRhZGF0YSIsInZpc3VhbGl6YXRpb24iLCJkZWZhdWx0TWFza01ldGFkYXRhIiwiZ2V0V3NpTWV0YWRhdGFJdGVtIiwid3NpSWQiLCJpc1NsaWRlIiwibWV0YWRhdGEiLCJyZWZlcmVuY2VzIiwicCIsImRhdGFfdHlwZSIsImNyZWF0ZVdzaU1ldGFkYXRhSXRlbSIsImNyZWF0ZVZhbHVlIiwiV1NJIiwiZ2V0U2xpZGVNZXRhZGF0YSIsInVwZGF0ZVNsaWRlTWV0YWRhdGEiLCJtZXRhZGF0YUl0ZW0iLCJ1cGRhdGVkSXRlbSIsImdldFNoYWRlcnNDb25maWciLCJzaGFkZXJzIiwic2hhZGVyc0NvbmZpZyIsInNoYWRlclRlbXAiLCJ2aXNUZW1wbGF0ZXMiLCJnZXRUZW1wbGF0ZSIsIlNoYWRlciIsInNoYWRlclRlbXBsYXRlIiwiZGF0YVJlZmVyZW5jZXMiLCJkYXRhUmVmcyIsImdldFZpc3VhbGl6YXRpb25zIiwic2xpZGVWaXMiLCJwYXJhbXNUZW1wbGF0ZSIsIlBhcmFtcyIsImJhY2tncm91bmQiLCJCYWNrZ3JvdW5kIiwidGVtcGxhdGUiLCJkYXRhUmVmIiwidmlzdWFsaXphdGlvbnMiLCJhbGwiLCJ2aXMiLCJWaXN1YWxpemF0aW9uIiwidmlzVGVtcGxhdGUiLCJnZXRNYXNrTWV0YWRhdGEiLCJ0ZW1wbGF0ZXNHbG9iYWxJdGVtRGF0YVR5cGUiLCJWaXN1YWxpemF0aW9uVGVtcGxhdGVzIiwiZmV0Y2hUZW1wbGF0ZUl0ZW0iLCJkYXRhX3R5cGVzIiwidG1wbCIsImNyZWF0ZVRlbXBsYXRlIiwiZGVsZXRlVGVtcGxhdGUiLCJleGlzdGluZ1RtcGwiLCJBbm5vdFByZXNldHMiLCJwcmVzZXREYXRhVHlwZSIsImdldFByZXNldHNJdGVtIiwiZnJlc2giLCJwcmVzZXRzSXRlbSIsImNyZWF0ZVByZXNldHNJdGVtIiwicHJlc2V0cyIsImdldEFubm90UHJlc2V0cyIsInByZXNldEl0ZW0iLCJsYXN0TW9kaWZpZWRBdCIsIm1vZGlmaWVkX2F0IiwibWVyZ2VQcmVzZXRzIiwicHJpbWFyeUFyciIsInNlY29uZGFyeUFyciIsImxvY2FsVmVyc2lvbiIsIm5ld0FyciIsInNlY0l0ZW0iLCJzb21lIiwicHJpbUl0ZW0iLCJjcmVhdGVkQXQiLCJ1cGRhdGVBbm5vdFByZXNldHMiLCJmYWlsT25QYXJhbGxlbFVwZGF0ZSIsInJlbW90ZVByZXNldHNJdGVtIiwicmVtb3RlUHJlc2V0cyIsImxvY2FsUHJlc2V0cyIsInN1Y2Nlc3NmdWxVcGRhdGUiLCJyZXRyeUF0dGVtcHQiLCJkZWxldGVBbm5vdFByZXNldHMiLCJKb2JDb25maWciLCJjb25maWdEYXRhVHlwZSIsImZldGNoSm9iQ29uZmlnSXRlbSIsImdldEpvYkNvbmZpZyIsImNyZWF0ZUpvYkNvbmZpZyIsIkpPQiIsImRlbGV0ZUpvYkNvbmZpZyIsImV4aXN0aW5nQ29uZmlnIiwiR2xvYmFsU3RvcmFnZSIsIndzaU1ldGFkYXRhIiwiYW5ub3RQcmVzZXRzIiwiam9iQ29uZmlnIiwiZ2V0VmFsdWUiLCJyZWZlcmVuY2VfaWQiLCJyZWZlcmVuY2VfdHlwZSIsIm5ld0l0ZW0iLCJjcmVhdG9yX2lkIiwiY3JlYXRvcl90eXBlIiwiVVNFUiIsInVwZGF0ZVZhbHVlIiwiUmF0aW9uQUkiLCJnbG9iYWxTdG9yYWdlIiwicmVsYXRpdmVBcGlQYXRoIiwiUm9vdCIsInZlcnNpb24iLCJyb290VVJJIiwicmF0aW9uYWkiLCJNYXAiLCJkZWZhdWx0U2NvcGUiLCJuZXdTY29wZUZyb20iLCJuZXdTY29wZVVzZSIsImdldFNjb3BlRnJvbSIsImdldFNjb3BlVXNlIiwibWF0Y2hpbmdTY29wZXMiLCJ2YWx1ZXMiXSwic291cmNlUm9vdCI6IiJ9