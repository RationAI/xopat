var EmpationAPI;(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{AbstractAPI:()=>d,EventSource:()=>n,HTTPError:()=>c,Logger:()=>a,RawAPI:()=>h,RootAPI:()=>y,RootContext:()=>l,STATUS_CODES:()=>r,ScopeContext:()=>p,ScopesAPI:()=>f,V3:()=>i,parseJwtToken:()=>s,sleep:()=>o});var i={};t.r(i),t.d(i,{Apps:()=>m,Cases:()=>R,Examinations:()=>E,Root:()=>H,Scopes:()=>D,Slides:()=>M,Storage:()=>T});class n{constructor(){this.events={}}addOnceHandler(t,e,i,n,r){const s=this;n=n||1;let o=0;const a=function(i){return o++,o===n&&s.removeHandler(t,a),e(i)};this.addHandler(t,a,i,r)}addHandler(t,e,i,r){let s=this.events[t];if(s||(this.events[t]=s=[]),e&&n.isFunction(e)){let t=s.length,n={handler:e,userData:i||null,priority:r||0};for(s[t]=n;t>0&&s[t-1].priority<s[t].priority;)s[t]=s[t-1],s[t-1]=n,t--}}removeHandler(t,e){const i=this.events[t],n=[];if(i&&Array.isArray(i)){for(let t=0;t<i.length;t++)i[t].handler!==e&&n.push(i[t]);this.events[t]=n}}numberOfHandlers(t){const e=this.events[t];return e?e.length:0}removeAllHandlers(t){if(t)this.events[t]=[];else for(const t in this.events)this.events[t]=[]}getHandler(t){let e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,i){let n,r=e.length;for(n=0;n<r;n++)e[n]&&(i.eventSource=t,i.userData=e[n].userData,e[n].handler(i))}):null}raiseEvent(t,e){const i=this.getHandler(t);if(i)return i(this,e||{})}static isFunction(t){return"function"===this.type(t)}static type(t){return null==t?String(t):this.class2type[String.toString.call(t)]||"object"}}n.class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};const r={100:"Continue",101:"Switching protocols",102:"Processing",103:"Early Hints",200:"Ok",201:"Created",202:"Accepted",203:"Non Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Too Long",414:"Request Uri Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"Im A Teapot",419:"Insufficient Space On Resource",420:"Method Failure",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"Http Version Not Supported",507:"Insufficient Storage",511:"Network Authentication Required"};function s(t){return JSON.parse(atob(t.split(".")[1]))}function o(t){return new Promise((e=>setTimeout(e,t)))}class a{static error(...t){console.error("E:EmpationAPI",...t)}static warn(...t){console.warn("W:EmpationAPI",...t)}static info(...t){console.info("I:EmpationAPI",...t)}static debug(...t){console.debug("D:EmpationAPI",...t)}}var u=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class c extends Error{constructor(t,e,i){super(e||r[t]||`HTTP Code ${t}`),arguments.length>=3&&i&&Object.assign(this,i),this.name=function(t){const e=4==(t/100|0)||5==(t/100|0)?"error":"";return` ${String(r[t]||`HTTP Code ${t}`).replace(/error$/i,"")} ${e}`.split(" ").reduce(((t,e)=>t+(e?e.charAt(0).toUpperCase()+e.slice(1):"")))}(t),this.statusCode=t}}class h{constructor(t,e){this._queue=[],this._retryRoutine=null,this.url=t,this._handler=e.errorHandler,this._maxRetryCount=e.maxRetryCount,this._timeout=e.nextRetryInMs}_parseQueryParams(t){if(t){if("string"==typeof t)return t;if(t.constructor===Object||void 0===t.constructor)for(let e in t){null==t[e]&&delete t[e]}return`?${new URLSearchParams(t)}`}return""}_setRetryIn(t,e){t>=this._maxRetryCount?a.error("Automated retry failed: maxRetryCount exceeded!"):this._retryRoutine=setTimeout(this._replay.bind(this,t),e),this._handler({queue:this._queue,retryCount:t,maxRetryCount:this._maxRetryCount,nextRetryInMs:e})}_recordFailed(t,e,i,n){this._queue.length<1&&this._setRetryIn(i,n),this._queue.push(Object.assign({url:t},e))}_replay(t=0){return u(this,void 0,void 0,(function*(){if(!(this._queue.length<1)){this._retryRoutine&&(clearTimeout(this._retryRoutine),this._retryRoutine=null);try{const t=this._queue[0];yield this._fetch(t.url,t),this._queue.shift()}catch(e){t++,a.warn("Replay attempt ",t," failed: ",e);const i=Array.isArray(this._timeout)?this._timeout[Math.min(this._timeout.length-1,t)]:this._timeout;throw this._setRetryIn(t,i),e}yield this._replay()}}))}_fetch(t,e){return u(this,void 0,void 0,(function*(){const i=yield fetch(t,{method:e.method,headers:e.headers,body:e.body});let n;try{n=yield i[e.responseType||"json"]()}catch(e){throw new c(500,`Failed to parse response data. Original status: ${i.status} | ${i.statusText}`,{url:t,error:e})}if(!i.ok)throw new c(i.status,i.statusText,n);return n}))}http(t,e){return u(this,void 0,void 0,(function*(){const i=!!e.body;e.method=e.method||(i?"POST":"GET"),t.startsWith("/")||(t=`/${t}`),e.query=this._parseQueryParams(e.query),e.headers=e.headers||{},e.headers["Content-Type"]="application/json",e.responseType=e.responseType,e.body&&"string"!=typeof e.body?e.body=JSON.stringify(e.body):e.body=void 0;let n=null;try{return yield this._fetch(this.url+t+e.query,e)}catch(t){n=t}Array.isArray(this._timeout)&&this._timeout.length<1?this._timeout=[5e3]:this._timeout||(this._timeout=5e3);const r=Array.isArray(this._timeout)?this._timeout[0]:this._timeout;if(this._recordFailed(this.url+t+e.query,e,0,r),n)throw n}))}}class d extends n{getCallerName(){const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,e)=>e;const{stack:e}=new Error;Error.prepareStackTrace=t;return(null==e?void 0:e[2])||"unknown context"}requires(t,e){if(!e)throw`ArgumentError[${this.getCallerName()}] ${t} is missing - required property!`}raiseConnectionError(t){this.raiseEvent("connection-error",t)}}class l{}class y extends d{constructor(t){if(super(),!t.workbenchApiUrl)throw"WB Api url is required!";let e;e=t.apiRootPath?t.apiRootPath.startsWith("/")?`${t.workbenchApiUrl}${t.apiRootPath}`:`${t.workbenchApiUrl}/${t.apiRootPath}`:t.workbenchApiUrl,e.endsWith("/")&&(e=e.slice(0,-1)),this.options={apiUrl:e,workbenchApiUrl:t.workbenchApiUrl,anonymousUserId:t.anonymousUserId||"anonymous",apiRootPath:t.apiRootPath||"",maxRetryCount:void 0===t.maxRetryCount?4:t.maxRetryCount,nextRetryInMs:t.nextRetryInMs||[5e3,1e4,2e4,3e4]},this.cached={}}}class p{}class f extends d{}var v=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class m extends l{constructor(t){super(),this.data=null,this._defaultApp=null,this.context=t}list(){return v(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:{apps:null,tissues:null,stains:null,job_modes:null}})}))}query(t){return v(this,void 0,void 0,(function*(){return this.data=yield this.context.rawQuery("/apps/query",{method:"PUT",body:t})}))}default(){return v(this,void 0,void 0,(function*(){this.data||(yield this.list());for(let t of this.data.items)if("MAP3"===t.name_short&&"rationai"===t.vendor_name){this._defaultApp=t;break}if(!this._defaultApp)throw"Default APP not present in the infrastructure! Was it imported?";return this._defaultApp}))}}const x=t=>("string"==typeof t&&(t=Number(t)),t),w=(t,e,i,n)=>{const r=new RegExp(e).exec(t);return!(!r||i<1||i>=r.length)&&r[i]===n};var g=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class _{constructor(t){this.data=null,this.identifierSeparator="",this.context=t}use(t){this.identifierSeparator!==t&&(this.identifierSeparator=t)}getCaseValue(t,e){switch(t){case"year":return this.getCaseYear(e);case"month":return this.getCaseMonth(e);case"day":return this.getCaseDay(e);case"description":return this.getCaseDescription(e);case"tissues":return this.getCaseTissues(e);case"stains":return this.getCaseStains(e);default:if("id_part_"===t.slice(0,8)&&!isNaN(Number(t.slice(8))))return this.getCaseIdentifierPart(e,Number(t.slice(8)));throw`KeyError[CaseExplorer] "${t}" is not supported!`}}evaluateCaseValue(t,e,i){const n=this.getCaseValue(t,i);switch(t){case"year":return this.evaulateCaseYear(n,e);case"month":return this.evaulateCaseMonth(n,e);case"day":return this.evaulateCaseDay(n,e);case"description":return this.evaluateCaseDescription(n,e);case"tissues":return this.evaluateCaseTissues(n,e);case"stains":return this.evaluateCaseStains(n,e);default:return this.evaulateCaseIdentifierPart(n,e)}}getCaseYear(t){return(e=t.created_at,new Date(1e3*x(e)).getFullYear()).toString();var e}getCaseMonth(t){return(e=t.created_at,new Date(1e3*x(e)).getMonth()).toString();var e}getCaseDay(t){return(e=t.created_at,new Date(1e3*x(e)).getDate()).toString();var e}getCaseIdentifierPart(t,e){if(!this.identifierSeparator)throw"ArgumentError[CaseExplorer] identifierSeparator is missing - required property!";const i=new RegExp(this.identifierSeparator).exec(t.local_id||"");if(!i)return"OTHER";if(e<1||e>=i.length)throw'KeyError[CaseExplorer] invalid key "id_part_<index>", group index is not valid!';return i[e]}getCaseDescription(t){return t.description||""}getCaseTissues(t){return Object.keys(t.tissues)}getCaseStains(t){return Object.keys(t.stains)}evaulateCaseYear(t,e){return t===e}evaulateCaseMonth(t,e){return t===e}evaulateCaseDay(t,e){return t===e}evaulateCaseIdentifierPart(t,e){return t===e}evaluateCaseDescription(t,e){return((t,e)=>{const i=e.split(" ").filter(Boolean).map((t=>`(?=.*\\b${t}\\b)`)),n=new RegExp(i.join(""),"gim");return null!==t.match(n)})(t,e)}evaluateCaseTissues(t,e){return e.every((e=>Object.keys(t).includes(e)))}evaluateCaseStains(t,e){return e.every((e=>Object.keys(t).includes(e)))}hierarchyLevel(t,e,i,n){if(e>=t.length)return{levelName:n,lastLevel:!0,items:i};const r=(s=i=>{const n=this.getCaseValue(t[e],i);return Array.isArray(n)?n[0]||"":n},i.reduce(((t,e)=>{var i;return(t[i=s(e)]||(t[i]=[])).push(e),t}),{}));var s;const o=Object.keys(r).map((i=>"OTHER"===i?this.hierarchyLevel(t,t.length,r[i],i):this.hierarchyLevel(t,e+1,r[i],i)));return{levelName:n,lastLevel:!1,items:o}}hierarchy(t){return g(this,void 0,void 0,(function*(){const e=(yield this.context.list()).items;return this.hierarchyLevel(t,0,e)}))}search(t){return g(this,void 0,void 0,(function*(){let e=(yield this.context.list()).items;return t.forEach((({key:t,value:i})=>e=e.filter((e=>this.evaluateCaseValue(t,i,e))))),e}))}tissues(){return g(this,void 0,void 0,(function*(){const t=(yield this.context.list()).items,e=new Set;return t.forEach((t=>Object.values(t.tissues).map((t=>t.EN)).forEach((t=>e.add(t))))),[...e]}))}stains(){return g(this,void 0,void 0,(function*(){const t=(yield this.context.list()).items,e=new Set;return t.forEach((t=>Object.values(t.stains).map((t=>t.EN)).forEach((t=>e.add(t))))),[...e]}))}}var b=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class C{constructor(t){this.data=null,this.slidesData=null,this.masksData=null,this.maskIdentifierSeparator="",this.maskIdentifierValue="",this.context=t}use(t,e){this.maskIdentifierSeparator=t,this.maskIdentifierValue=e}getAllSlides(t){return b(this,void 0,void 0,(function*(){return this.data||(this.data=(yield this.context.slides(t)).items),this.data}))}actualSlides(t){return b(this,void 0,void 0,(function*(){return this.slidesData||(this.slidesData=(yield this.getAllSlides(t)).filter((t=>!w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.slidesData}))}masks(t){return b(this,void 0,void 0,(function*(){return this.masksData||(this.masksData=(yield this.getAllSlides(t)).filter((t=>w(t.local_id||"",this.maskIdentifierSeparator,1,this.maskIdentifierValue)))),this.masksData}))}}var I=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class R extends l{constructor(t){super(),this.data=null,this.context=t,this.caseExplorer=new _(this),this.slideExplorer=new C(this)}list(){return I(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/cases")),this.data}))}get(t){return I(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}`)}))}slides(t){return I(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/cases/${t}/slides`)}))}}var P=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class E extends l{constructor(t){super(),this.data=null,this.context=t}create(t,e){return P(this,void 0,void 0,(function*(){const i=this.context;return i.requires("caseId",t),i.rawQuery("/examinations",{method:"PUT",body:{case_id:t,app_id:e}})}))}query(t,e,i){return P(this,void 0,void 0,(function*(){return this.context.rawQuery("/examinations/query",{method:"PUT",body:t,query:{skip:e,limit:i}})}))}get(t){return P(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}`)}))}scope(t){return P(this,void 0,void 0,(function*(){const e=this.context;return e.requires("examinationId",t),e.rawQuery(`/examinations/${t}/scope`,{method:"PUT"})}))}}var S=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class T extends p{constructor(t){super(),this.data=null,this.context=t}getRaw(){return S(this,void 0,void 0,(function*(){return this.data||(this.data=yield this.context.rawQuery("/app-ui-storage/user")),this.data}))}flush(){return S(this,void 0,void 0,(function*(){return this.data?yield this.context.rawQuery("/app-ui-storage/user",{method:"PUT",body:this.data}):null}))}get(t){return S(this,void 0,void 0,(function*(){const e=yield this.getRaw();return"string"==typeof e.content[t]?JSON.parse(e.content[t]):e.content[t]}))}set(t,e,i){return S(this,void 0,void 0,(function*(){const n=JSON.stringify(e),r=yield this.getRaw();r.content[t]=n,this.data=r,i&&this.flush()}))}erase(){return S(this,void 0,void 0,(function*(){this.data={content:{}},this.flush()}))}}var A=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class k extends p{constructor(t){super(),this.context=t}upload(t,e={}){return A(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}create(t,e={}){return A(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/annotations",{method:"POST",query:e,body:this.data})}))}delete(t){return A(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/annotations/${t}`,{method:"DELETE"})}))}update(t,e,i={}){return A(this,void 0,void 0,(function*(){return yield this.delete(t),!i.externalIds&&e.id&&(i.externalIds=!0),yield this.create(e,i)}))}}var q=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class $ extends p{constructor(t){super(),this.data=null,this.context=t}get(t){return q(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}`)}))}create(t){return q(this,void 0,void 0,(function*(){return yield this.context.rawQuery("/collections",{method:"POST",body:t})}))}delete(t){return q(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}`,{method:"DELETE"})}))}queryItems(t,e){return q(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/collections/${t}/items/query`,{method:"PUT",body:e})}))}createItems(t,e){return q(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items`,{method:"POST",body:Object.assign({},e)})}))}deleteItem(t,e){return q(this,void 0,void 0,(function*(){yield this.context.rawQuery(`/collections/${t}/items/${e}`,{method:"DELETE"})}))}}var O=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class U extends f{constructor(t){super(),this.scopeContext=null,this._defaultExaminationId="",this._activeExaminationId="",this._tokenRefetchInterval=null,this.context=t,this.raw=new h(this.context.options.apiUrl+U.apiPath,{errorHandler:this.raiseConnectionError.bind(this),maxRetryCount:this.context.options.maxRetryCount,nextRetryInMs:this.context.options.nextRetryInMs}),this.storage=new T(this),this.annotations=new k(this),this.collections=new $(this)}use(t,e=void 0){return O(this,void 0,void 0,(function*(){this.requires("root::userId",this.context.userId);const i=e=>O(this,void 0,void 0,(function*(){let i=yield this.context.examinations.query({apps:[e],creators:[this.context.userId]});if(i.item_count>0){let t=i.items.find((t=>"OPEN"===t.state));if(t)return t}return yield this.context.examinations.create(t,e)}));let n;if(e?n=yield i(e):this._defaultExaminationId&&(n=yield this.context.examinations.get(this._defaultExaminationId)),!n){let t=yield this.context.apps.default();n=yield i(t.app_id),this._defaultExaminationId=n.id}yield this.from(n)}))}get scopeToken(){var t;return null===(t=this.scopeContext)||void 0===t?void 0:t.access_token}from(t){return O(this,void 0,void 0,(function*(){this.reset(),this.scopeContext=yield this.context.examinations.scope(t.id),this._activeExaminationId=t.id;const e=1e3*s(this.scopeContext.access_token).exp-Date.now()-2e4||28e4;this._tokenRefetchInterval=setInterval((()=>O(this,void 0,void 0,(function*(){this.scopeContext=yield this.context.examinations.scope(t.id)}))),e),this.raiseEvent("init")}))}reset(){this._activeExaminationId="",this.scopeContext=null,this._tokenRefetchInterval&&(clearInterval(this._tokenRefetchInterval),this._tokenRefetchInterval=null,this.raiseEvent("reset"))}rawQuery(t,e){var i,n;return O(this,void 0,void 0,(function*(){this.requires("this.scopeContext",this.scopeContext),(e=e||{}).headers=e.headers||{},e.headers.Authorization=`Bearer ${null===(i=this.scopeContext)||void 0===i?void 0:i.access_token}`,t&&!t.startsWith("/")&&(t=`/${t}`);try{return yield this.raw.http(`/${null===(n=this.scopeContext)||void 0===n?void 0:n.scope_id}${t}`,e)}catch(i){if(401===i.statusCode)return this.scopeContext=yield this.context.examinations.scope(this._activeExaminationId),yield this.raw.http(`/${this.scopeContext.scope_id}${t}`,e);throw i}}))}}U.apiPath="/v3/scopes";const D=U;var j=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class M extends l{constructor(t){super(),this.data=null,this.context=t}slideInfo(t){return j(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/info`)}))}slideThumbnail(t,e,i,n){return j(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/thumbnail/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}slideLabel(t,e,i,n){return j(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/label/max_size/${e}/${i}`,{query:{image_format:n},responseType:"blob"})}))}loadTile(t,e,i,n,r){return j(this,void 0,void 0,(function*(){return yield this.context.rawQuery(`/slides/${t}/tile/level/${e}/tile/${i}/${n}`,{query:{image_format:r},responseType:"blob"})}))}}var Q=function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))};class N extends y{constructor(t){super(t),this._accessToken=null,this.version="v3",this._userId=this.options.anonymousUserId,this.rootURI=this.options.apiUrl+N.apiPath,this.raw=new h(this.rootURI,{errorHandler:this.raiseConnectionError.bind(this),maxRetryCount:this.options.maxRetryCount,nextRetryInMs:this.options.nextRetryInMs}),this.scopes=new D(this),this.apps=new m(this),this.cases=new R(this),this.examinations=new E(this),this.slides=new M(this)}get userId(){return this._userId}use(t){return Q(this,void 0,void 0,(function*(){if(!t||t.length>50)throw"Invalid User ID! Must be valid string shorter than 50 characters!";this._userId!==t&&(this._userId=t,this.raiseEvent("init"))}))}rawQuery(t,e={}){return Q(this,void 0,void 0,(function*(){return(e=e||{}).headers=e.headers||{},e.headers["User-Id"]=this._userId,this._accessToken&&(e.headers.Authorization=e.headers.Authorization||`Bearer ${this._accessToken}`),this.raw.http(t,e)}))}from(t){return Q(this,void 0,void 0,(function*(){this._accessToken=t;const e=s(t).sub;yield this.use(e)}))}reset(){this._userId=this.options.anonymousUserId,this.scopes.reset(),this.raiseEvent("reset")}}N.apiPath="/v3";const H=N;EmpationAPI=e})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Oi8vRW1wYXRpb25BUEkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0VtcGF0aW9uQVBJL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy9ldmVudHMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvc3RhdHVzLWNvZGVzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL2Jhc2UudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvcm9vdC50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy9zY29wZS50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yb290L2FwcHMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy91dGlscy50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9leHRlbnNpb25zL2Nhc2UtZXhwbG9yZXIudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvZXh0ZW5zaW9ucy9zbGlkZS1leHBsb3Jlci50cyIsIndlYnBhY2s6Ly9FbXBhdGlvbkFQSS8uL3NyYy92My9yb290L2Nhc2VzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3QvZXhhbWluYXRpb25zLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Njb3BlL3N0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvYW5ub3RhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvY29sbGVjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vRW1wYXRpb25BUEkvLi9zcmMvdjMvc2NvcGUvc2NvcGVzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3Qvc2xpZGVzLnRzIiwid2VicGFjazovL0VtcGF0aW9uQVBJLy4vc3JjL3YzL3Jvb3Qvcm9vdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qKlxyXG4gKiBPcGVuU2VhZHJhZ29uIGluc3BpcmVkIGV2ZW50IHN5c3RlbSBmb3IgcmVkdWN0aW9uIG9mIGRlcGVuZGVuY2llcyBhbmQgdW5pZm9ybSBldmVudCBhcHByb2FjaFxyXG4gKi9cclxuXHJcbmV4cG9ydCB0eXBlIEV2ZW50SGFuZGxlciA9IChldmVudDogb2JqZWN0KSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV2ZW50U291cmNlIHtcclxuICAgIGV2ZW50czoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhbiBldmVudCBoYW5kbGVyIHRvIGJlIHRyaWdnZXJlZCBvbmx5IG9uY2UgKG9yIGEgZ2l2ZW4gbnVtYmVyIG9mIHRpbWVzKVxyXG4gICAgICogZm9yIGEgZ2l2ZW4gZXZlbnQuIEl0IGlzIG5vdCByZW1vdmFibGUgd2l0aCByZW1vdmVIYW5kbGVyKCkuXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtFdmVudEhhbmRsZXJ9IGhhbmRsZXIgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gZXZlbnRcclxuICAgICAqIGlzIHRyaWdnZXJlZC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdXNlckRhdGE9bnVsbF0gLSBBcmJpdHJhcnkgb2JqZWN0IHRvIGJlIHBhc3NlZCB1bmNoYW5nZWRcclxuICAgICAqIHRvIHRoZSBoYW5kbGVyLlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0aW1lcz0xXSAtIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaGFuZGxlIHRoZSBldmVudFxyXG4gICAgICogYmVmb3JlIHJlbW92aW5nIGl0LlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtwcmlvcml0eT0wXSAtIEhhbmRsZXIgcHJpb3JpdHkuIEJ5IGRlZmF1bHQsIGFsbCBwcmlvcml0aWVzIGFyZSAwLiBIaWdoZXIgbnVtYmVyID0gcHJpb3JpdHkuXHJcbiAgICAgKi9cclxuICAgIGFkZE9uY2VIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIsIHVzZXJEYXRhOiBvYmplY3QsIHRpbWVzOiBudW1iZXIsIHByaW9yaXR5OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICB0aW1lcyA9IHRpbWVzIHx8IDE7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICBjb25zdCBvbmNlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50OiBvYmplY3QpIHtcclxuICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgaWYgKGNvdW50ID09PSB0aW1lcykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5yZW1vdmVIYW5kbGVyKGV2ZW50TmFtZSwgb25jZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyKGV2ZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYWRkSGFuZGxlcihldmVudE5hbWUsIG9uY2VIYW5kbGVyLCB1c2VyRGF0YSwgcHJpb3JpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IHRvIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtFdmVudEhhbmRsZXJ9IGhhbmRsZXIgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFt1c2VyRGF0YT1udWxsXSAtIEFyYml0cmFyeSBvYmplY3QgdG8gYmUgcGFzc2VkIHVuY2hhbmdlZCB0byB0aGUgaGFuZGxlci5cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbcHJpb3JpdHk9MF0gLSBIYW5kbGVyIHByaW9yaXR5LiBCeSBkZWZhdWx0LCBhbGwgcHJpb3JpdGllcyBhcmUgMC4gSGlnaGVyIG51bWJlciA9IHByaW9yaXR5LlxyXG4gICAgICovXHJcbiAgICBhZGRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIsIHVzZXJEYXRhOiBvYmplY3QsIHByaW9yaXR5OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdO1xyXG4gICAgICAgIGlmICggIWV2ZW50cyApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdID0gZXZlbnRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggaGFuZGxlciAmJiBFdmVudFNvdXJjZS5pc0Z1bmN0aW9uKCBoYW5kbGVyICkgKSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGV2ZW50cy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBldmVudCA9IHsgaGFuZGxlcjogaGFuZGxlciwgdXNlckRhdGE6IHVzZXJEYXRhIHx8IG51bGwsIHByaW9yaXR5OiBwcmlvcml0eSB8fCAwIH07XHJcbiAgICAgICAgICAgIGV2ZW50c1sgaW5kZXggXSA9IGV2ZW50O1xyXG4gICAgICAgICAgICB3aGlsZSAoIGluZGV4ID4gMCAmJiBldmVudHNbIGluZGV4IC0gMSBdLnByaW9yaXR5IDwgZXZlbnRzWyBpbmRleCBdLnByaW9yaXR5ICkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRzWyBpbmRleCBdID0gZXZlbnRzWyBpbmRleCAtIDEgXTtcclxuICAgICAgICAgICAgICAgIGV2ZW50c1sgaW5kZXggLSAxIF0gPSBldmVudDtcclxuICAgICAgICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYSBzcGVjaWZpYyBldmVudCBoYW5kbGVyIGZvciBhIGdpdmVuIGV2ZW50LlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCBmb3Igd2hpY2ggdGhlIGhhbmRsZXIgaXMgdG8gYmUgcmVtb3ZlZC5cclxuICAgICAqIEBwYXJhbSB7RXZlbnRIYW5kbGVyfSBoYW5kbGVyIC0gRnVuY3Rpb24gdG8gYmUgcmVtb3ZlZC5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlSGFuZGxlcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdLFxyXG4gICAgICAgICAgICBoYW5kbGVyczogRXZlbnRIYW5kbGVyW10gPSBbXTtcclxuICAgICAgICBpZiAoICFldmVudHMgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCBldmVudHMgKSApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBldmVudHNbaV0uaGFuZGxlciAhPT0gaGFuZGxlciApIHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVycy5wdXNoKCBldmVudHNbIGkgXSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzWyBldmVudE5hbWUgXSA9IGhhbmRsZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgYW1vdW50IG9mIGhhbmRsZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCB0byBpbnNwZWN0LlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gYW1vdW50IG9mIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBudW1iZXJPZkhhbmRsZXJzKGV2ZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdO1xyXG4gICAgICAgIGlmICggIWV2ZW50cyApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBldmVudHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGFsbCBldmVudCBoYW5kbGVycyBmb3IgYSBnaXZlbiBldmVudCB0eXBlLiBJZiBubyB0eXBlIGlzIGdpdmVuIGFsbFxyXG4gICAgICogZXZlbnQgaGFuZGxlcnMgZm9yIGV2ZXJ5IGV2ZW50IHR5cGUgYXJlIHJlbW92ZWQuXHJcbiAgICAgKiBAZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgLSBOYW1lIG9mIGV2ZW50IGZvciB3aGljaCBhbGwgaGFuZGxlcnMgYXJlIHRvIGJlIHJlbW92ZWQuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUFsbEhhbmRsZXJzKGV2ZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCBldmVudE5hbWUgKXtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbIGV2ZW50TmFtZSBdID0gW107XHJcbiAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICBmb3IgKCBjb25zdCBldmVudFR5cGUgaW4gdGhpcy5ldmVudHMgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50c1sgZXZlbnRUeXBlIF0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGZ1bmN0aW9uIHdoaWNoIGl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFsbCBoYW5kbGVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LCBjYWxsaW5nIHRoZSBoYW5kbGVyIGZvciBlYWNoLlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCB0byBnZXQgaGFuZGxlcnMgZm9yLlxyXG4gICAgICovXHJcbiAgICBnZXRIYW5kbGVyKGV2ZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGV2ZW50cyA9IHRoaXMuZXZlbnRzWyBldmVudE5hbWUgXTtcclxuICAgICAgICBpZiAoICFldmVudHMgfHwgIWV2ZW50cy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudHMgPSBldmVudHMubGVuZ3RoID09PSAxID9cclxuICAgICAgICAgICAgWyBldmVudHNbIDAgXSBdIDpcclxuICAgICAgICAgICAgQXJyYXkuYXBwbHkoIG51bGwsIGV2ZW50cyApO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoIHNvdXJjZTogYW55LCBhcmdzOiBhbnkgKSB7XHJcbiAgICAgICAgICAgIGxldCBpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgICAgIGlmICggZXZlbnRzWyBpIF0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5ldmVudFNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLnVzZXJEYXRhID0gZXZlbnRzWyBpIF0udXNlckRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzWyBpIF0uaGFuZGxlciggYXJncyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXIgYW4gZXZlbnQsIG9wdGlvbmFsbHkgcGFzc2luZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxyXG4gICAgICogQGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIC0gTmFtZSBvZiBldmVudCB0byByZWdpc3Rlci5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudEFyZ3MgLSBFdmVudC1zcGVjaWZpYyBkYXRhLlxyXG4gICAgICovXHJcbiAgICByYWlzZUV2ZW50KCBldmVudE5hbWU6IHN0cmluZywgZXZlbnRBcmdzPzogYW55ICkge1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmdldEhhbmRsZXIoIGV2ZW50TmFtZSApO1xyXG4gICAgICAgIGlmICggaGFuZGxlciApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIoIHRoaXMsIGV2ZW50QXJncyB8fCB7fSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjbGFzczJ0eXBlID0ge1xyXG4gICAgICAgICdbb2JqZWN0IEJvb2xlYW5dJzogICAgICAgJ2Jvb2xlYW4nLFxyXG4gICAgICAgICdbb2JqZWN0IE51bWJlcl0nOiAgICAgICAgJ251bWJlcicsXHJcbiAgICAgICAgJ1tvYmplY3QgU3RyaW5nXSc6ICAgICAgICAnc3RyaW5nJyxcclxuICAgICAgICAnW29iamVjdCBGdW5jdGlvbl0nOiAgICAgICdmdW5jdGlvbicsXHJcbiAgICAgICAgJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nOiAnZnVuY3Rpb24nLFxyXG4gICAgICAgICdbb2JqZWN0IFByb21pc2VdJzogICAgICAgJ3Byb21pc2UnLFxyXG4gICAgICAgICdbb2JqZWN0IEFycmF5XSc6ICAgICAgICAgJ2FycmF5JyxcclxuICAgICAgICAnW29iamVjdCBEYXRlXSc6ICAgICAgICAgICdkYXRlJyxcclxuICAgICAgICAnW29iamVjdCBSZWdFeHBdJzogICAgICAgICdyZWdleHAnLFxyXG4gICAgICAgICdbb2JqZWN0IE9iamVjdF0nOiAgICAgICAgJ29iamVjdCdcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUYWtlbiBmcm9tIGpRdWVyeSAxLjYuMVxyXG4gICAgICogQGZ1bmN0aW9uIGlzRnVuY3Rpb25cclxuICAgICAqIEBtZW1iZXJvZiBPcGVuU2VhZHJhZ29uXHJcbiAgICAgKiBAc2VlIHtAbGluayBodHRwOi8vd3d3LmpxdWVyeS5jb20vIGpRdWVyeX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzRnVuY3Rpb24oIG9iajogb2JqZWN0ICkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUob2JqKSA9PT0gXCJmdW5jdGlvblwiO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRha2VuIGZyb20galF1ZXJ5IDEuNi4xXHJcbiAgICAgKiBAZnVuY3Rpb24gdHlwZVxyXG4gICAgICogQG1lbWJlcm9mIE9wZW5TZWFkcmFnb25cclxuICAgICAqIEBzZWUge0BsaW5rIGh0dHA6Ly93d3cuanF1ZXJ5LmNvbS8galF1ZXJ5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgdHlwZSggb2JqOiBvYmplY3QgKSB7XHJcbiAgICAgICAgcmV0dXJuICggb2JqID09PSBudWxsICkgfHwgKCBvYmogPT09IHVuZGVmaW5lZCApID9cclxuICAgICAgICAgICAgU3RyaW5nKCBvYmogKSA6XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3MydHlwZVsgU3RyaW5nLnRvU3RyaW5nLmNhbGwob2JqKSBhcyBrZXlvZiB0eXBlb2YgdGhpcy5jbGFzczJ0eXBlXSB8fCBcIm9iamVjdFwiO1xyXG4gICAgfTtcclxufVxyXG4iLCIvLyBTb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9wcmV0dHltdWNoYnJ5Y2UvaHR0cC1zdGF0dXMtY29kZXMvYmxvYi9tYXN0ZXIvc3JjL3N0YXR1cy1jb2Rlcy50c1xyXG5leHBvcnQgY29uc3QgU1RBVFVTX0NPREVTID0ge1xyXG4gICAgMTAwOiAnQ29udGludWUnLFxyXG4gICAgMTAxOiAnU3dpdGNoaW5nIHByb3RvY29scycsXHJcbiAgICAxMDI6ICdQcm9jZXNzaW5nJyxcclxuICAgIDEwMzogJ0Vhcmx5IEhpbnRzJyxcclxuICAgIDIwMDogJ09rJyxcclxuICAgIDIwMTogJ0NyZWF0ZWQnLFxyXG4gICAgMjAyOiAnQWNjZXB0ZWQnLFxyXG4gICAgMjAzOiAnTm9uIEF1dGhvcml0YXRpdmUgSW5mb3JtYXRpb24nLFxyXG4gICAgMjA0OiAnTm8gQ29udGVudCcsXHJcbiAgICAyMDU6ICdSZXNldCBDb250ZW50JyxcclxuICAgIDIwNjogJ1BhcnRpYWwgQ29udGVudCcsXHJcbiAgICAyMDc6ICdNdWx0aSBTdGF0dXMnLFxyXG4gICAgMzAwOiAnTXVsdGlwbGUgQ2hvaWNlcycsXHJcbiAgICAzMDE6ICdNb3ZlZCBQZXJtYW5lbnRseScsXHJcbiAgICAzMDI6ICdNb3ZlZCBUZW1wb3JhcmlseScsXHJcbiAgICAzMDM6ICdTZWUgT3RoZXInLFxyXG4gICAgMzA0OiAnTm90IE1vZGlmaWVkJyxcclxuICAgIDMwNTogJ1VzZSBQcm94eScsXHJcbiAgICAzMDc6ICdUZW1wb3JhcnkgUmVkaXJlY3QnLFxyXG4gICAgMzA4OiAnUGVybWFuZW50IFJlZGlyZWN0JyxcclxuICAgIDQwMDogJ0JhZCBSZXF1ZXN0JyxcclxuICAgIDQwMTogJ1VuYXV0aG9yaXplZCcsXHJcbiAgICA0MDI6ICdQYXltZW50IFJlcXVpcmVkJyxcclxuICAgIDQwMzogJ0ZvcmJpZGRlbicsXHJcbiAgICA0MDQ6ICdOb3QgRm91bmQnLFxyXG4gICAgNDA1OiAnTWV0aG9kIE5vdCBBbGxvd2VkJyxcclxuICAgIDQwNjogJ05vdCBBY2NlcHRhYmxlJyxcclxuICAgIDQwNzogJ1Byb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkJyxcclxuICAgIDQwODogJ1JlcXVlc3QgVGltZW91dCcsXHJcbiAgICA0MDk6ICdDb25mbGljdCcsXHJcbiAgICA0MTA6ICdHb25lJyxcclxuICAgIDQxMTogJ0xlbmd0aCBSZXF1aXJlZCcsXHJcbiAgICA0MTI6ICdQcmVjb25kaXRpb24gRmFpbGVkJyxcclxuICAgIDQxMzogJ1JlcXVlc3QgVG9vIExvbmcnLFxyXG4gICAgNDE0OiAnUmVxdWVzdCBVcmkgVG9vIExvbmcnLFxyXG4gICAgNDE1OiAnVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZScsXHJcbiAgICA0MTY6ICdSZXF1ZXN0ZWQgUmFuZ2UgTm90IFNhdGlzZmlhYmxlJyxcclxuICAgIDQxNzogJ0V4cGVjdGF0aW9uIEZhaWxlZCcsXHJcbiAgICAvKipcclxuICAgICAqIE9mZmljaWFsIERvY3VtZW50YXRpb24gQCBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMjMyNCNzZWN0aW9uLTIuMy4yXHJcbiAgICAgKlxyXG4gICAgICogQW55IGF0dGVtcHQgdG8gYnJldyBjb2ZmZWUgd2l0aCBhIHRlYXBvdCBzaG91bGQgcmVzdWx0IGluIHRoZSBlcnJvciBjb2RlIFwiNDE4IEknbSBhIHRlYXBvdFwiLiBUaGUgcmVzdWx0aW5nIGVudGl0eSBib2R5IE1heSBiZSBzaG9ydCBhbmQgc3RvdXQuXHJcbiAgICAgKi9cclxuICAgIDQxODogJ0ltIEEgVGVhcG90JyxcclxuICAgIDQxOTogJ0luc3VmZmljaWVudCBTcGFjZSBPbiBSZXNvdXJjZScsXHJcbiAgICA0MjA6ICdNZXRob2QgRmFpbHVyZScsXHJcbiAgICA0MjE6ICdNaXNkaXJlY3RlZCBSZXF1ZXN0JyxcclxuICAgIDQyMjogJ1VucHJvY2Vzc2FibGUgRW50aXR5JyxcclxuICAgIDQyMzogJ0xvY2tlZCcsXHJcbiAgICA0MjQ6ICdGYWlsZWQgRGVwZW5kZW5jeScsXHJcbiAgICA0MjY6ICdVcGdyYWRlIFJlcXVpcmVkJyxcclxuICAgIDQyODogJ1ByZWNvbmRpdGlvbiBSZXF1aXJlZCcsXHJcbiAgICA0Mjk6ICdUb28gTWFueSBSZXF1ZXN0cycsXHJcbiAgICA0MzE6ICdSZXF1ZXN0IEhlYWRlciBGaWVsZHMgVG9vIExhcmdlJyxcclxuICAgIDQ1MTogJ1VuYXZhaWxhYmxlIEZvciBMZWdhbCBSZWFzb25zJyxcclxuICAgIDUwMDogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXHJcbiAgICA1MDE6ICdOb3QgSW1wbGVtZW50ZWQnLFxyXG4gICAgNTAyOiAnQmFkIEdhdGV3YXknLFxyXG4gICAgNTAzOiAnU2VydmljZSBVbmF2YWlsYWJsZScsXHJcbiAgICA1MDQ6ICdHYXRld2F5IFRpbWVvdXQnLFxyXG4gICAgNTA1OiAnSHR0cCBWZXJzaW9uIE5vdCBTdXBwb3J0ZWQnLFxyXG4gICAgNTA3OiAnSW5zdWZmaWNpZW50IFN0b3JhZ2UnLFxyXG4gICAgNTExOiAnTmV0d29yayBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZCdcclxufTtcclxuIiwiXHJcbmV4cG9ydCBpbnRlcmZhY2UgSnd0VG9rZW5CYXNlIHtcclxuICAgIHN1Yjogc3RyaW5nLFxyXG4gICAgZXhwOiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSnd0VG9rZW4gZXh0ZW5kcyBKd3RUb2tlbkJhc2Uge1xyXG4gICAgaWF0OiBudW1iZXI7XHJcbiAgICBqdGk6IHN0cmluZztcclxuICAgIGlzczogc3RyaW5nO1xyXG4gICAgYXVkOiBzdHJpbmc7XHJcbiAgICB0eXA6IHN0cmluZztcclxuICAgIGF6cDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNjb3BlVG9rZW4gZXh0ZW5kcyBKd3RUb2tlbkJhc2Uge1xyXG4gICAgdG9rZW5faWQ6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKd3RUb2tlbih0b2tlbjogc3RyaW5nKTogSnd0VG9rZW5CYXNlIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGF0b2IodG9rZW4uc3BsaXQoJy4nKVsxXSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xyXG4gICAgc3RhdGljIGVycm9yKC4uLmFyZ3M6IGFueSk6dm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkU6RW1wYXRpb25BUElcIiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgd2FybiguLi5hcmdzOiBhbnkpOnZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIlc6RW1wYXRpb25BUElcIiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaW5mbyguLi5hcmdzOiBhbnkpOnZvaWQge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIkk6RW1wYXRpb25BUElcIiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZGVidWcoLi4uYXJnczogYW55KTp2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmRlYnVnKFwiRDpFbXBhdGlvbkFQSVwiLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0V2ZW50U291cmNlfSBmcm9tIFwiLi9ldmVudHNcIjtcclxuaW1wb3J0IHsgU1RBVFVTX0NPREVTIH0gZnJvbSAnLi9zdGF0dXMtY29kZXMnO1xyXG5pbXBvcnQge0xvZ2dlcn0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW1wYXRpb25BUElPcHRpb25zIHtcclxuICAgIGFub255bW91c1VzZXJJZD86IHN0cmluZztcclxuICAgIHdvcmtiZW5jaEFwaVVybDogc3RyaW5nO1xyXG4gICAgYXBpUm9vdFBhdGg/OiBzdHJpbmc7XHJcbiAgICBtYXhSZXRyeUNvdW50PzogbnVtYmVyO1xyXG4gICAgbmV4dFJldHJ5SW5Ncz86IG51bWJlciB8IEFycmF5PG51bWJlcj47XHJcbn1cclxuXHJcbnR5cGUgUmVzcG9uc2VUeXBlID0gXCJqc29uXCIgfCBcImJsb2JcIiB8IFwidGV4dFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSYXdPcHRpb25zIHtcclxuICAgIGJvZHk/OiBvYmplY3QgfCBzdHJpbmc7XHJcbiAgICBxdWVyeT86IGFueTtcclxuICAgIG1ldGhvZD86IHN0cmluZztcclxuICAgIGhlYWRlcnM/OiB7W2tleTogc3RyaW5nXTogc3RyaW5nfTtcclxuICAgIHJlc3BvbnNlVHlwZT86IFJlc3BvbnNlVHlwZTtcclxufVxyXG5cclxuLy9odHRwczovL2dpc3QuZ2l0aHViLmNvbS9Ub29UYWxsTmF0ZS80ZmQ2NDFmODIwZTEzMjU2OTU0ODdkZmQ4ODNlNTI4NVxyXG5mdW5jdGlvbiBodHRwRXJyb3JUb05hbWUoY29kZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHN1ZmZpeCA9IChjb2RlIC8gMTAwIHwgMCkgPT09IDQgfHwgKGNvZGUgLyAxMDAgfCAwKSA9PT0gNSA/ICdlcnJvcicgOiAnJztcclxuICAgIGxldCBuYW1lID0gYCAke1N0cmluZyhTVEFUVVNfQ09ERVNbY29kZSBhcyBrZXlvZiB0eXBlb2YgU1RBVFVTX0NPREVTXSB8fCBgSFRUUCBDb2RlICR7Y29kZX1gKS5yZXBsYWNlKC9lcnJvciQvaSwgJycpfSAke3N1ZmZpeH1gO1xyXG4gICAgcmV0dXJuIG5hbWUuc3BsaXQoXCIgXCIpLnJlZHVjZSgoYWNjLCBjKSA9PiBhY2NcclxuICAgICAgICArIChjID8gKGMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjLnNsaWNlKDEpKSA6IFwiXCIpKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhUVFBFcnJvciBleHRlbmRzIEVycm9yIHtcclxuXHJcbiAgICBzdGF0dXNDb2RlOiBudW1iZXI7XHJcbiAgICBba2V5OiBzdHJpbmddOiBhbnlcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY29kZTogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcsIGV4dHJhcz86IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8IFNUQVRVU19DT0RFU1tjb2RlIGFzIGtleW9mIHR5cGVvZiBTVEFUVVNfQ09ERVNdIHx8IGBIVFRQIENvZGUgJHtjb2RlfWApO1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMgJiYgZXh0cmFzKSB7XHJcbiAgICAgICAgICAgIC8vIG5vaW5zcGVjdGlvbiBUeXBlU2NyaXB0VmFsaWRhdGVUeXBlc1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGV4dHJhcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubmFtZSA9IGh0dHBFcnJvclRvTmFtZShjb2RlKTtcclxuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBjb2RlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEh0dHBRdWV1ZUl0ZW0gZXh0ZW5kcyBSYXdPcHRpb25zIHtcclxuICAgIHVybDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdGlvbkVycm9yRXZlbnRBcmdzIHtcclxuICAgIHF1ZXVlOiBBcnJheTxIdHRwUXVldWVJdGVtPjtcclxuICAgIHJldHJ5Q291bnQ6IG51bWJlcjtcclxuICAgIG1heFJldHJ5Q291bnQ6IG51bWJlcjtcclxuICAgIG5leHRSZXRyeUluTXM6IG51bWJlciB8IEFycmF5PG51bWJlcj47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbm5lY3Rpb25FcnJvckV2ZW50ID0gKGFyZ3M6IENvbm5lY3Rpb25FcnJvckV2ZW50QXJncykgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJhd0FwaU9wdGlvbnMge1xyXG4gICAgZXJyb3JIYW5kbGVyOiBDb25uZWN0aW9uRXJyb3JFdmVudDtcclxuICAgIG1heFJldHJ5Q291bnQ6IG51bWJlcjtcclxuICAgIG5leHRSZXRyeUluTXM6IG51bWJlciB8IEFycmF5PG51bWJlcj47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSYXdBUEkge1xyXG4gICAgcHVibGljIHVybDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfcXVldWU6IEFycmF5PEh0dHBRdWV1ZUl0ZW0+ID0gW107XHJcbiAgICBwcml2YXRlIF9oYW5kbGVyOiBDb25uZWN0aW9uRXJyb3JFdmVudDtcclxuICAgIHByaXZhdGUgX3JldHJ5Um91dGluZTogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIF9tYXhSZXRyeUNvdW50O1xyXG4gICAgcHJpdmF0ZSBfdGltZW91dDogbnVtYmVyIHwgQXJyYXk8bnVtYmVyPjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgb3B0aW9uczogUmF3QXBpT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZXIgPSBvcHRpb25zLmVycm9ySGFuZGxlcjtcclxuICAgICAgICB0aGlzLl9tYXhSZXRyeUNvdW50ID0gb3B0aW9ucy5tYXhSZXRyeUNvdW50O1xyXG4gICAgICAgIHRoaXMuX3RpbWVvdXQgPSBvcHRpb25zLm5leHRSZXRyeUluTXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfcGFyc2VRdWVyeVBhcmFtcyhwYXJhbXM6IHN0cmluZyB8IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9KSB7XHJcbiAgICAgICAgaWYgKHBhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHBhcmFtcztcclxuXHJcbiAgICAgICAgICAgIC8vY2xlYW51cCBwbGFpbiBvYmplY3RzXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuY29uc3RydWN0b3IgPT09IE9iamVjdCB8fCBwYXJhbXMuY29uc3RydWN0b3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayBpbiBwYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gcGFyYW1zW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID09PSBudWxsIHx8IHYgPT09IHVuZGVmaW5lZCkgZGVsZXRlIHBhcmFtc1trXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGA/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcyl9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfc2V0UmV0cnlJbihyZXRyeUNvdW50OiBudW1iZXIsIHJldHJ5VGltZW91dDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHJldHJ5Q291bnQgPj0gdGhpcy5fbWF4UmV0cnlDb3VudCkge1xyXG4gICAgICAgICAgICBMb2dnZXIuZXJyb3IoXCJBdXRvbWF0ZWQgcmV0cnkgZmFpbGVkOiBtYXhSZXRyeUNvdW50IGV4Y2VlZGVkIVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9yZXRyeVJvdXRpbmUgPSBzZXRUaW1lb3V0KHRoaXMuX3JlcGxheS5iaW5kKHRoaXMsIHJldHJ5Q291bnQpLCByZXRyeVRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9oYW5kbGVyKHtcclxuICAgICAgICAgICAgcXVldWU6IHRoaXMuX3F1ZXVlLFxyXG4gICAgICAgICAgICByZXRyeUNvdW50OiByZXRyeUNvdW50LFxyXG4gICAgICAgICAgICBtYXhSZXRyeUNvdW50OiB0aGlzLl9tYXhSZXRyeUNvdW50LFxyXG4gICAgICAgICAgICBuZXh0UmV0cnlJbk1zOiByZXRyeVRpbWVvdXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWNvcmRGYWlsZWQodXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnMsIHJldHJ5Q291bnQ6IG51bWJlciwgcmV0cnlUaW1lb3V0OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fcXVldWUubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRSZXRyeUluKHJldHJ5Q291bnQsIHJldHJ5VGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goe3VybCwgLi4ub3B0aW9uc30pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgX3JlcGxheShyZXRyeUNvdW50PTApIHtcclxuICAgICAgICBpZiAodGhpcy5fcXVldWUubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9yZXRyeVJvdXRpbmUpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3JldHJ5Um91dGluZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JldHJ5Um91dGluZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9xdWV1ZVswXTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fZmV0Y2goaXRlbS51cmwsIGl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLl9xdWV1ZS5zaGlmdCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0cnlDb3VudCsrO1xyXG4gICAgICAgICAgICAvLyBpbmRleCAwID09IDFzdCByZXBsYXkgYXR0ZW1wdFxyXG4gICAgICAgICAgICBMb2dnZXIud2FybihcIlJlcGxheSBhdHRlbXB0IFwiLCByZXRyeUNvdW50LCBcIiBmYWlsZWQ6IFwiLCBlKTtcclxuICAgICAgICAgICAgY29uc3QgcmV0cnlUaW1lb3V0ID0gQXJyYXkuaXNBcnJheSh0aGlzLl90aW1lb3V0KSA/XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90aW1lb3V0W01hdGgubWluKHRoaXMuX3RpbWVvdXQubGVuZ3RoLTEsIHJldHJ5Q291bnQpXSA6IHRoaXMuX3RpbWVvdXQ7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldFJldHJ5SW4ocmV0cnlDb3VudCwgcmV0cnlUaW1lb3V0KTtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5fcmVwbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBfZmV0Y2godXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnMgfCBIdHRwUXVldWVJdGVtKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IG9wdGlvbnMubWV0aG9kLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IG9wdGlvbnMuYm9keVxyXG4gICAgICAgIH0gYXMgUmVxdWVzdEluaXQpO1xyXG5cclxuICAgICAgICBsZXQgcmVzdWx0O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlW29wdGlvbnMucmVzcG9uc2VUeXBlIHx8IFwianNvblwiXSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEhUVFBFcnJvcig1MDAsXHJcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlIGRhdGEuIE9yaWdpbmFsIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9IHwgJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgSFRUUEVycm9yKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCwgcmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBodHRwKGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IGhhc0JvZHkgPSAhIW9wdGlvbnMuYm9keTtcclxuICAgICAgICBvcHRpb25zLm1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8IChoYXNCb2R5ID8gXCJQT1NUXCIgOiBcIkdFVFwiKTtcclxuICAgICAgICBpZiAoIWVuZHBvaW50LnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICAgICAgICBlbmRwb2ludCA9IGAvJHtlbmRwb2ludH1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvcHRpb25zLnF1ZXJ5ID0gdGhpcy5fcGFyc2VRdWVyeVBhcmFtcyhvcHRpb25zLnF1ZXJ5KTtcclxuICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IFwiYXBwbGljYXRpb24vanNvblwiO1xyXG4gICAgICAgIG9wdGlvbnMucmVzcG9uc2VUeXBlID0gb3B0aW9ucy5yZXNwb25zZVR5cGU7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYm9keSAmJiB0eXBlb2Ygb3B0aW9ucy5ib2R5ICE9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSk7XHJcbiAgICAgICAgfSBlbHNlIG9wdGlvbnMuYm9keSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbGV0IGVyciA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2ZldGNoKHRoaXMudXJsICsgZW5kcG9pbnQgKyBvcHRpb25zLnF1ZXJ5LCBvcHRpb25zKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGVyciA9IGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl90aW1lb3V0KSAmJiB0aGlzLl90aW1lb3V0Lmxlbmd0aCA8IDEpIHRoaXMuX3RpbWVvdXQgPSBbNTAwMF07XHJcbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuX3RpbWVvdXQpIHRoaXMuX3RpbWVvdXQgPSA1MDAwO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBBcnJheS5pc0FycmF5KHRoaXMuX3RpbWVvdXQpID8gdGhpcy5fdGltZW91dFswXSA6IHRoaXMuX3RpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5fcmVjb3JkRmFpbGVkKHRoaXMudXJsICsgZW5kcG9pbnQgKyBvcHRpb25zLnF1ZXJ5LCBvcHRpb25zLCAwLCB0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL3RvZG8gY29uc2lkZXIgaW1wbGVtZW50aW5nICdvYnNlcnZlJyBtZXRob2QgdGhhdCByZWdpc3RlcnMgYW5kIHdhdGNoZXMgY2VydGFpbiBwcm9wZXJ0eSBsaXN0Li5cclxuZXhwb3J0IGNsYXNzIEFic3RyYWN0QVBJIGV4dGVuZHMgRXZlbnRTb3VyY2Uge1xyXG4gICAgLy90b2RvIHRyeSBmaWd1cmluZyBvdXQgaG93IHRvIHByaW50IHRoZSBjbGFzcyBuYW1lIHRvb1xyXG4gICAgLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yODAzODkvaG93LWRvLXlvdS1maW5kLW91dC10aGUtY2FsbGVyLWZ1bmN0aW9uLWluLWphdmFzY3JpcHRcclxuICAgIHByaXZhdGUgZ2V0Q2FsbGVyTmFtZSgpIHtcclxuICAgICAgICAvLyBHZXQgc3RhY2sgYXJyYXlcclxuICAgICAgICBjb25zdCBvcmlnID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7XHJcbiAgICAgICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSAoZXJyb3IsIHN0YWNrKSA9PiBzdGFjaztcclxuICAgICAgICBjb25zdCB7IHN0YWNrIH0gPSBuZXcgRXJyb3IoKTtcclxuICAgICAgICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IG9yaWc7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbGxlciA9IHN0YWNrPy5bMl07XHJcbiAgICAgICAgcmV0dXJuIGNhbGxlciA/IGNhbGxlciA6ICd1bmtub3duIGNvbnRleHQnO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVpcmVzKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgYEFyZ3VtZW50RXJyb3JbJHt0aGlzLmdldENhbGxlck5hbWUoKX1dICR7bmFtZX0gaXMgbWlzc2luZyAtIHJlcXVpcmVkIHByb3BlcnR5IWBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZXZlbnQgJ2Nvbm5lY3Rpb24tZXJyb3InXHJcbiAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICovXHJcbiAgICByYWlzZUNvbm5lY3Rpb25FcnJvcihhcmdzOiBDb25uZWN0aW9uRXJyb3JFdmVudEFyZ3MpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJhaXNlRXZlbnQoJ2Nvbm5lY3Rpb24tZXJyb3InLCBhcmdzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0Fic3RyYWN0QVBJLCBDb25uZWN0aW9uRXJyb3JFdmVudEFyZ3MsIEVtcGF0aW9uQVBJT3B0aW9ucywgUmF3QVBJLCBSYXdPcHRpb25zfSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCB7U2NvcGVzQVBJfSBmcm9tIFwiLi9zY29wZVwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJvb3RDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjb250ZXh0OiBSb290QVBJO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRhdGE6IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSb290QVBJT3B0aW9ucyB7XHJcbiAgICBhbm9ueW1vdXNVc2VySWQ6IHN0cmluZztcclxuICAgIHdvcmtiZW5jaEFwaVVybDogc3RyaW5nO1xyXG4gICAgYXBpVXJsOiBzdHJpbmc7XHJcbiAgICBhcGlSb290UGF0aDogc3RyaW5nO1xyXG4gICAgbWF4UmV0cnlDb3VudDogbnVtYmVyO1xyXG4gICAgbmV4dFJldHJ5SW5NczogbnVtYmVyIHwgQXJyYXk8bnVtYmVyPjtcclxufVxyXG5cclxuLy8gQmFzZUFQSSBpbXBsZW1lbnRzIEFic3RyYWN0QVBJIG92ZXIgL3ZbdmVyc2lvbl1cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJvb3RBUEkgZXh0ZW5kcyBBYnN0cmFjdEFQSSB7XHJcblxyXG4gICAgLy8gUmF3QVBJIGltcGxlbWVudHMgYWNjZXNzIHRvIHRoZSBodHRwIGVuZHBvaW50c1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHJhdzogUmF3QVBJO1xyXG4gICAgLy8gU2NvcGVzQVBJIGltcGxlbWVudHMgQWJzdHJhY3RBUEkgb3ZlciAvdlt2ZXJzaW9uXS9zY29wZXNcclxuICAgIGFic3RyYWN0IHNjb3BlczogU2NvcGVzQVBJO1xyXG5cclxuICAgIC8vIFByb3BlcnRpZXNcclxuICAgIGFic3RyYWN0IHZlcnNpb246IHN0cmluZztcclxuICAgIGFic3RyYWN0IHJvb3RVUkk6IHN0cmluZztcclxuICAgIG9wdGlvbnM6IFJvb3RBUElPcHRpb25zO1xyXG4gICAgY2FjaGVkOiBvYmplY3Q7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEVtcGF0aW9uQVBJT3B0aW9ucykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmICghb3B0aW9ucy53b3JrYmVuY2hBcGlVcmwpIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJXQiBBcGkgdXJsIGlzIHJlcXVpcmVkIVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGFwaVVybDtcclxuICAgICAgICBpZiAoIW9wdGlvbnMuYXBpUm9vdFBhdGgpIHtcclxuICAgICAgICAgICAgYXBpVXJsID0gb3B0aW9ucy53b3JrYmVuY2hBcGlVcmw7XHJcbiAgICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy5hcGlSb290UGF0aC5zdGFydHNXaXRoKFwiL1wiKSkge1xyXG4gICAgICAgICAgICBhcGlVcmwgPSBgJHtvcHRpb25zLndvcmtiZW5jaEFwaVVybH0vJHtvcHRpb25zLmFwaVJvb3RQYXRofWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBpVXJsID0gYCR7b3B0aW9ucy53b3JrYmVuY2hBcGlVcmx9JHtvcHRpb25zLmFwaVJvb3RQYXRofWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcGlVcmwuZW5kc1dpdGgoJy8nKSkge1xyXG4gICAgICAgICAgICBhcGlVcmwgPSBhcGlVcmwuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhcGlVcmwsXHJcbiAgICAgICAgICAgIHdvcmtiZW5jaEFwaVVybDogb3B0aW9ucy53b3JrYmVuY2hBcGlVcmwsXHJcbiAgICAgICAgICAgIGFub255bW91c1VzZXJJZDogb3B0aW9ucy5hbm9ueW1vdXNVc2VySWQgfHwgJ2Fub255bW91cycsXHJcbiAgICAgICAgICAgIGFwaVJvb3RQYXRoOiBvcHRpb25zLmFwaVJvb3RQYXRoIHx8IFwiXCIsXHJcbiAgICAgICAgICAgIG1heFJldHJ5Q291bnQ6IHR5cGVvZiBvcHRpb25zLm1heFJldHJ5Q291bnQgPT09IFwidW5kZWZpbmVkXCIgPyA0IDogb3B0aW9ucy5tYXhSZXRyeUNvdW50LFxyXG4gICAgICAgICAgICBuZXh0UmV0cnlJbk1zOiBvcHRpb25zLm5leHRSZXRyeUluTXMgfHwgWzUwMDAsIDEwMDAwLCAyMDAwMCwgMzAwMDBdLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jYWNoZWQgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZSB0aGUgVXNlciBhY3RvciBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIGFwaSB3aWxsXHJcbiAgICAgKiByZXNldCBpdCdzIHdob2xlIHN0YXRlLlxyXG4gICAgICogQHBhcmFtIHVzZXJJZFxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCB1c2UodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hhbmdlIHRoZSBVc2VyIGFjdG9yIGZvciB0aGUgQVBJLiBOb3RlOiB0aGUgYXBpIHdpbGxcclxuICAgICAqIHJlc2V0IGl0J3Mgd2hvbGUgc3RhdGUuXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gc2V0dXAgY29udGV4dCBmcm9tIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBmcm9tKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIGFic3RyYWN0IHJlc2V0KCk6IHZvaWQ7XHJcblxyXG4gICAgYWJzdHJhY3QgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9ucz86IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT47XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCB7QWJzdHJhY3RBUEksIFJhd0FQSSwgUmF3T3B0aW9uc30gZnJvbSBcIi4vYmFzZVwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNjb3BlQ29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgY29udGV4dDogU2NvcGVzQVBJO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRhdGE6IGFueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNjb3BlIEJpbmRzIEV4YW1pbmF0aW9uIGFuZCBVc2VyLlxyXG4gKi9cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNjb3Blc0FQSSBleHRlbmRzIEFic3RyYWN0QVBJIHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmF3OiBSYXdBUEk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2UgdGhlIGFjdGl2ZSBTY29wZSBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIHNjb3BlIHN0YXRlIHdpbGwgcmVzZXQuXHJcbiAgICAgKiBAcGFyYW0gY2FzZUlkIGNhc2UgaWQgLSBtYW5hZ2VzIHRoZSBhY3RpdmUgc2NvcGVcclxuICAgICAqIEBwYXJhbSBhcHBJZCBtYW5hZ2VzIHRoZSBhY3RpdmUgc2NvcGUgdGhyb3VnaCBleGFtaW5hdGlvbjx1c2VyLCBhcHA+XHJcbiAgICAgKiAgICAgICAgICBpZiB1bmRlZmluZWQsIHRoZSBleGFtaW5hdGlvbiBpcyBtYW5hZ2VkIGludGVybmFsbHlcclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgdXNlKGNhc2VJZDogc3RyaW5nLCBhcHBJZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2UgdGhlIGFjdGl2ZSBTY29wZSBmb3IgdGhlIEFQSS4gTm90ZTogdGhlIHNjb3BlIHN0YXRlIHdpbGwgcmVzZXQuXHJcbiAgICAgKiBAcGFyYW0gZXhhbWluYXRpb24gc2V0dXAgY29udGV4dCBmcm9tIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBmcm9tKGV4YW1pbmF0aW9uOiBvYmplY3QpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIGFic3RyYWN0IHJlc2V0KCk6IHZvaWQ7XHJcblxyXG4gICAgYWJzdHJhY3QgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9ucz86IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT47XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCB7Um9vdEFQSSwgUm9vdENvbnRleHR9IGZyb20gXCIuLi8uLi9yb290XCI7XHJcbmltcG9ydCBSb290IGZyb20gXCIuL3Jvb3RcIjtcclxuaW1wb3J0IHtBcHBMaXN0fSBmcm9tIFwiLi90eXBlcy9hcHAtbGlzdFwiO1xyXG5pbXBvcnQge0FwcFF1ZXJ5fSBmcm9tIFwiLi90eXBlcy9hcHAtcXVlcnlcIjtcclxuaW1wb3J0IHtBcHBPdXRwdXR9IGZyb20gXCIuL3R5cGVzL2FwcC1vdXRwdXRcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcHMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdEFQSTtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBBcHBMaXN0IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9kZWZhdWx0QXBwOiBBcHBPdXRwdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxpc3QoKTogUHJvbWlzZTxBcHBMaXN0PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcHMvcXVlcnknLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgYXBwczogbnVsbCxcclxuICAgICAgICAgICAgICAgIHRpc3N1ZXM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzdGFpbnM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBqb2JfbW9kZXM6IG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pIGFzIEFwcExpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcXVlcnkocXVlcnk6IEFwcFF1ZXJ5KTogUHJvbWlzZTxBcHBMaXN0PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeSgnL2FwcHMvcXVlcnknLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgYm9keTogcXVlcnlcclxuICAgICAgICB9KSBhcyBBcHBMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlZmF1bHQoKTogUHJvbWlzZTxBcHBPdXRwdXQ+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGF0YSkgYXdhaXQgdGhpcy5saXN0KCk7XHJcbiAgICAgICAgZm9yIChsZXQgYXBwIG9mIHRoaXMuZGF0YSEuaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKGFwcC5uYW1lX3Nob3J0ID09PSBcIk1BUDNcIiAmJiBhcHAudmVuZG9yX25hbWUgPT09IFwicmF0aW9uYWlcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmYXVsdEFwcCA9IGFwcDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5fZGVmYXVsdEFwcCkgdGhyb3cgXCJEZWZhdWx0IEFQUCBub3QgcHJlc2VudCBpbiB0aGUgaW5mcmFzdHJ1Y3R1cmUhIFdhcyBpdCBpbXBvcnRlZD9cIjtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdEFwcDtcclxuICAgIH1cclxufVxyXG4iLCJjb25zdCBnZXROdW1iZXIgPSAodmFyaWFibGU6IHN0cmluZyB8IG51bWJlcikgPT4ge1xyXG4gIGlmICh0eXBlb2YgdmFyaWFibGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICB2YXJpYWJsZSA9IE51bWJlcih2YXJpYWJsZSlcclxuICB9XHJcblxyXG4gIHJldHVybiB2YXJpYWJsZVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0WWVhckZyb21FcG9jaFRpbWUgPSAoZXBvY2hUaW1lOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoZ2V0TnVtYmVyKGVwb2NoVGltZSkgKiAxMDAwKS5nZXRGdWxsWWVhcigpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRNb250aEZyb21FcG9jaFRpbWUgPSAoZXBvY2hUaW1lOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICByZXR1cm4gbmV3IERhdGUoZ2V0TnVtYmVyKGVwb2NoVGltZSkgKiAxMDAwKS5nZXRNb250aCgpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXREYXlGcm9tRXBvY2hUaW1lID0gKGVwb2NoVGltZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKGdldE51bWJlcihlcG9jaFRpbWUpICogMTAwMCkuZ2V0RGF0ZSgpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYXRjaFN0cmluZ09uU2VwYXJhdG9yR3JvdXAgPSAoc3RyOiBzdHJpbmcsIHNlcGFyYXRvcjogc3RyaW5nLCBncm91cElkeDogbnVtYmVyLCB2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgY29uc3QgbWF0Y2hlcyA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yKS5leGVjKHN0cilcclxuICAgICAgaWYoIW1hdGNoZXMgfHwgZ3JvdXBJZHggPCAxIHx8IGdyb3VwSWR4ID49IG1hdGNoZXMubGVuZ3RoKSBcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgcmV0dXJuIG1hdGNoZXNbZ3JvdXBJZHhdID09PSB2YWx1ZVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbWF0Y2hTdHJpbmdPblRva2VucyA9IChzdHJpbmdUb01hdGNoOiBzdHJpbmcsIHRva2VuU3RyaW5nOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCB0b2tlbnMgPSB0b2tlblN0cmluZ1xyXG4gICAgLnNwbGl0KCcgJylcclxuICAgIC5maWx0ZXIoQm9vbGVhbilcclxuICAgIC5tYXAodG9rZW4gPT4gYCg/PS4qXFxcXGIke3Rva2VufVxcXFxiKWApO1xyXG5cclxuY29uc3Qgc2VhcmNoVGVybVJlZ2V4ID0gbmV3IFJlZ0V4cCh0b2tlbnMuam9pbignJyksICdnaW0nKTtcclxucmV0dXJuIHN0cmluZ1RvTWF0Y2gubWF0Y2goc2VhcmNoVGVybVJlZ2V4KSAhPT0gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdyb3VwQnkgPSA8VCwgSyBleHRlbmRzIGtleW9mIGFueT4oYXJyOiBUW10sIGtleTogKGk6IFQpID0+IEspID0+XHJcbiAgYXJyLnJlZHVjZSgoZ3JvdXBzLCBpdGVtKSA9PiB7XHJcbiAgICAoZ3JvdXBzW2tleShpdGVtKV0gfHw9IFtdKS5wdXNoKGl0ZW0pO1xyXG4gICAgcmV0dXJuIGdyb3VwcztcclxuICB9LCB7fSBhcyBSZWNvcmQ8SywgVFtdPik7IiwiaW1wb3J0IENhc2VzIGZyb20gXCIuLi9yb290L2Nhc2VzXCI7XHJcbmltcG9ydCB7IENhc2UgfSBmcm9tIFwiLi4vcm9vdC90eXBlcy9jYXNlXCI7XHJcbmltcG9ydCB7IENhc2VFeHBsb3JlclJlc3VsdHMgfSBmcm9tIFwiLi90eXBlcy9jYXNlLWV4cGxvcmVyLXJlc3VsdHNcIjtcclxuaW1wb3J0IHsgQ2FzZUhpZXJhcmNoeSB9IGZyb20gXCIuL3R5cGVzL2Nhc2UtaGllcmFyY2h5LXJlc3VsdFwiO1xyXG5pbXBvcnQgeyBDYXNlU2VhcmNoUGFyYW1zIH0gZnJvbSBcIi4vdHlwZXMvY2FzZS1zZWFyY2gtcGFyYW1zXCI7XHJcbmltcG9ydCB7IGdldERheUZyb21FcG9jaFRpbWUsIGdldE1vbnRoRnJvbUVwb2NoVGltZSwgZ2V0WWVhckZyb21FcG9jaFRpbWUsIGdyb3VwQnksIG1hdGNoU3RyaW5nT25Ub2tlbnMgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FzZUV4cGxvcmVyIHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBDYXNlcztcclxuICAgIHByb3RlY3RlZCBkYXRhOiBDYXNlRXhwbG9yZXJSZXN1bHRzIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgaWRlbnRpZmllclNlcGFyYXRvcjogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBDYXNlcykge1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXNlKGlkZW50aWZpZXJTZXBhcmF0b3I6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy5pZGVudGlmaWVyU2VwYXJhdG9yID09PSBpZGVudGlmaWVyU2VwYXJhdG9yKSByZXR1cm47XHJcbiAgICAgIHRoaXMuaWRlbnRpZmllclNlcGFyYXRvciA9IGlkZW50aWZpZXJTZXBhcmF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlVmFsdWUoa2V5OiBzdHJpbmcsIGNzOiBDYXNlKSB7XHJcbiAgICAgIHN3aXRjaChrZXkpIHtcclxuICAgICAgICBjYXNlIFwieWVhclwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlWWVhcihjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcIm1vbnRoXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldENhc2VNb250aChjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRheVwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlRGF5KGNzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwiZGVzY3JpcHRpb25cIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FzZURlc2NyaXB0aW9uKGNzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwidGlzc3Vlc1wiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlVGlzc3VlcyhjcylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcInN0YWluc1wiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXNlU3RhaW5zKGNzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICBpZihrZXkuc2xpY2UoMCwgOCkgPT09IFwiaWRfcGFydF9cIiAmJiAhaXNOYU4oTnVtYmVyKGtleS5zbGljZSg4KSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhc2VJZGVudGlmaWVyUGFydChjcywgTnVtYmVyKGtleS5zbGljZSg4KSkpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aHJvdyBgS2V5RXJyb3JbQ2FzZUV4cGxvcmVyXSBcXFwiJHtrZXl9XFxcIiBpcyBub3Qgc3VwcG9ydGVkIWBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV2YWx1YXRlQ2FzZVZhbHVlKGtleTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdLCBjczogQ2FzZSkge1xyXG4gICAgICBjb25zdCBjYXNlVmFsdWUgPSB0aGlzLmdldENhc2VWYWx1ZShrZXksIGNzKVxyXG4gICAgICBzd2l0Y2goa2V5KSB7XHJcbiAgICAgICAgY2FzZSBcInllYXJcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlWWVhcihjYXNlVmFsdWUgYXMgc3RyaW5nLCBldmFsVmFsdWUgYXMgc3RyaW5nKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXNlIFwibW9udGhcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXZhdWxhdGVDYXNlTW9udGgoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRheVwiOiB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5ldmF1bGF0ZUNhc2VEYXkoY2FzZVZhbHVlIGFzIHN0cmluZywgZXZhbFZhbHVlIGFzIHN0cmluZylcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSBcImRlc2NyaXB0aW9uXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQ2FzZURlc2NyaXB0aW9uKGNhc2VWYWx1ZSBhcyBzdHJpbmcsIGV2YWxWYWx1ZSBhcyBzdHJpbmcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJ0aXNzdWVzXCI6IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlQ2FzZVRpc3N1ZXMoY2FzZVZhbHVlIGFzIHN0cmluZ1tdLCBldmFsVmFsdWUgYXMgc3RyaW5nW10pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgXCJzdGFpbnNcIjoge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGVDYXNlU3RhaW5zKGNhc2VWYWx1ZSBhcyBzdHJpbmdbXSwgZXZhbFZhbHVlIGFzIHN0cmluZ1tdKVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAvLyBhbnkgaW52YWxpZCBrZXkgd2lsbCBiZSBjYXVnaHQgaW4gZ2V0Q2FzZVZhbHVlIGNhbGxcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV2YXVsYXRlQ2FzZUlkZW50aWZpZXJQYXJ0KGNhc2VWYWx1ZSBhcyBzdHJpbmcsIGV2YWxWYWx1ZSBhcyBzdHJpbmcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlWWVhcihjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBnZXRZZWFyRnJvbUVwb2NoVGltZShjcy5jcmVhdGVkX2F0KS50b1N0cmluZygpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VNb250aChjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBnZXRNb250aEZyb21FcG9jaFRpbWUoY3MuY3JlYXRlZF9hdCkudG9TdHJpbmcoKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlRGF5KGNzOiBDYXNlKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGdldERheUZyb21FcG9jaFRpbWUoY3MuY3JlYXRlZF9hdCkudG9TdHJpbmcoKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRDYXNlSWRlbnRpZmllclBhcnQoY3M6IENhc2UsIHBhcnRJZHg6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgIGlmKCF0aGlzLmlkZW50aWZpZXJTZXBhcmF0b3IpIHtcclxuICAgICAgICB0aHJvdyBgQXJndW1lbnRFcnJvcltDYXNlRXhwbG9yZXJdIGlkZW50aWZpZXJTZXBhcmF0b3IgaXMgbWlzc2luZyAtIHJlcXVpcmVkIHByb3BlcnR5IWBcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwYXJ0cyA9IG5ldyBSZWdFeHAodGhpcy5pZGVudGlmaWVyU2VwYXJhdG9yKS5leGVjKGNzLmxvY2FsX2lkIHx8IFwiXCIpXHJcbiAgICAgIGlmKCFwYXJ0cykgXHJcbiAgICAgICAgcmV0dXJuIFwiT1RIRVJcIlxyXG4gICAgICBpZihwYXJ0SWR4IDwgMSB8fCBwYXJ0SWR4ID49IHBhcnRzLmxlbmd0aClcclxuICAgICAgICB0aHJvdyBgS2V5RXJyb3JbQ2FzZUV4cGxvcmVyXSBpbnZhbGlkIGtleSBcXFwiaWRfcGFydF88aW5kZXg+XFxcIiwgZ3JvdXAgaW5kZXggaXMgbm90IHZhbGlkIWBcclxuICAgICAgcmV0dXJuIHBhcnRzW3BhcnRJZHhdXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VEZXNjcmlwdGlvbihjczogQ2FzZSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBjcy5kZXNjcmlwdGlvbiB8fCBcIlwiXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldENhc2VUaXNzdWVzKGNzOiBDYXNlKTogc3RyaW5nW10ge1xyXG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoY3MudGlzc3VlcylcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0Q2FzZVN0YWlucyhjczogQ2FzZSk6IHN0cmluZ1tdIHtcclxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGNzLnN0YWlucylcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGV2YXVsYXRlQ2FzZVllYXIodmFsdWU6IHN0cmluZywgZXZhbFZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YXVsYXRlQ2FzZU1vbnRoKHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gZXZhbFZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBldmF1bGF0ZUNhc2VEYXkodmFsdWU6IHN0cmluZywgZXZhbFZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID09PSBldmFsVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YXVsYXRlQ2FzZUlkZW50aWZpZXJQYXJ0KHZhbHVlOiBzdHJpbmcsIGV2YWxWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gZXZhbFZhbHVlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VEZXNjcmlwdGlvbih2YWx1ZTogc3RyaW5nLCBldmFsVmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gbWF0Y2hTdHJpbmdPblRva2Vucyh2YWx1ZSwgZXZhbFZhbHVlKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBldmFsdWF0ZUNhc2VUaXNzdWVzKHZhbHVlOiBzdHJpbmdbXSwgZXZhbFZhbHVlOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgICAvLyBBTEwgc2VhcmNoZWQgdGlzc3VlcyBhcmUgcHJlc2VudCBpbiBjYXNlXHJcbiAgICAgIHJldHVybiBldmFsVmFsdWUuZXZlcnkoKHRpc3N1ZSkgPT4gT2JqZWN0LmtleXModmFsdWUpLmluY2x1ZGVzKHRpc3N1ZSkpXHJcblxyXG4gICAgICAvLyBTT01FIHNlYXJjaGVkIHRpc3N1ZXMgYXJlIHByZXNlbnQgaW4gY2FzZVxyXG4gICAgICAvLyByZXR1cm4gZXZhbFZhbHVlLnNvbWUoKHRpc3N1ZSkgPT4gT2JqZWN0LmtleXModmFsdWUpLmluY2x1ZGVzKHRpc3N1ZSkpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV2YWx1YXRlQ2FzZVN0YWlucyh2YWx1ZTogc3RyaW5nW10sIGV2YWxWYWx1ZTogc3RyaW5nW10pOiBib29sZWFuIHtcclxuICAgICAgLy8gQUxMIHNlYXJjaGVkIHN0YWlucyBhcmUgcHJlc2VudCBpbiBjYXNlXHJcbiAgICAgIHJldHVybiBldmFsVmFsdWUuZXZlcnkoKHN0YWluKSA9PiBPYmplY3Qua2V5cyh2YWx1ZSkuaW5jbHVkZXMoc3RhaW4pKVxyXG5cclxuICAgICAgLy8gU09NRSBzZWFyY2hlZCBzdGFpbnMgYXJlIHByZXNlbnQgaW4gY2FzZVxyXG4gICAgICAvLyByZXR1cm4gZXZhbFZhbHVlLnNvbWUoKHN0YWluKSA9PiBPYmplY3Qua2V5cyh2YWx1ZSkuaW5jbHVkZXMoc3RhaW4pKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGllcmFyY2h5TGV2ZWwoa2V5czogc3RyaW5nW10sIGtleUlkeDogbnVtYmVyLCBjYXNlczogQ2FzZVtdLCBuYW1lPzogc3RyaW5nKTogQ2FzZUhpZXJhcmNoeSB7XHJcbiAgICAgIGlmIChrZXlJZHggPj0ga2V5cy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4geyBsZXZlbE5hbWU6IG5hbWUsIGxhc3RMZXZlbDogdHJ1ZSwgaXRlbXM6IGNhc2VzfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIGdyb3VwaW5nIGJ5IGFycmF5IHZhbHVlcyh0aXNzdWVzLCBzdGFpbnMpIGlzIG5vdCBleHBlY3RlZCwgYnV0IHdvcmtzIGJ5IGdyb3VwaW5nIG9uIGZpcnN0IHZhbHVlIG9mIGFycmF5XHJcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGdyb3VwQnkoY2FzZXMsIChjcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRDYXNlVmFsdWUoa2V5c1trZXlJZHhdLCBjcyk7XHJcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgIHJldHVybiB2YWx1ZVswXSB8fCBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zdCBpdGVtcyA9IE9iamVjdC5rZXlzKGdyb3VwcykubWFwKChuYW1lKSA9PiB7XHJcbiAgICAgICAgaWYobmFtZSA9PT0gXCJPVEhFUlwiKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5oaWVyYXJjaHlMZXZlbChrZXlzLCBrZXlzLmxlbmd0aCwgZ3JvdXBzW25hbWVdLCBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGllcmFyY2h5TGV2ZWwoa2V5cywga2V5SWR4ICsgMSwgZ3JvdXBzW25hbWVdLCBuYW1lKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHJldHVybiB7IGxldmVsTmFtZTogbmFtZSwgbGFzdExldmVsOiBmYWxzZSwgaXRlbXM6IGl0ZW1zIH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaGllcmFyY2h5KGtleXM6IHN0cmluZ1tdKTogUHJvbWlzZTxDYXNlSGllcmFyY2h5PiB7XHJcbiAgICAgIGNvbnN0IGNhc2VzID0gKGF3YWl0IHRoaXMuY29udGV4dC5saXN0KCkpLml0ZW1zO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuaGllcmFyY2h5TGV2ZWwoa2V5cywgMCwgY2FzZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNlYXJjaChxdWVyeTogQ2FzZVNlYXJjaFBhcmFtc1tdKTogUHJvbWlzZTxDYXNlW10+IHtcclxuICAgICAgbGV0IGZpbHRlcmVkQ2FzZXMgPSAoYXdhaXQgdGhpcy5jb250ZXh0Lmxpc3QoKSkuaXRlbXM7XHJcbiAgICAgIHF1ZXJ5LmZvckVhY2goKHtrZXksIHZhbHVlfSkgPT4gZmlsdGVyZWRDYXNlcyA9IGZpbHRlcmVkQ2FzZXMuZmlsdGVyKChjcykgPT4gdGhpcy5ldmFsdWF0ZUNhc2VWYWx1ZShrZXksIHZhbHVlLCBjcykpKTtcclxuXHJcbiAgICAgIHJldHVybiBmaWx0ZXJlZENhc2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHRpc3N1ZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICBjb25zdCBjYXNlcyA9IChhd2FpdCB0aGlzLmNvbnRleHQubGlzdCgpKS5pdGVtcztcclxuXHJcbiAgICAgIGNvbnN0IGFsbFRpc3N1ZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG4gICAgICBjYXNlcy5mb3JFYWNoKChjKSA9PiBPYmplY3QudmFsdWVzKGMudGlzc3VlcykubWFwKCh0aXNzdWU6IGFueSkgPT4gdGlzc3VlW1wiRU5cIl0pLmZvckVhY2goKHQpID0+IGFsbFRpc3N1ZXMuYWRkKHQpKSk7XHJcblxyXG4gICAgICByZXR1cm4gWy4uLmFsbFRpc3N1ZXNdO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHN0YWlucygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgIGNvbnN0IGNhc2VzID0gKGF3YWl0IHRoaXMuY29udGV4dC5saXN0KCkpLml0ZW1zO1xyXG5cclxuICAgICAgY29uc3QgYWxsU3RhaW5zOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuICAgICAgY2FzZXMuZm9yRWFjaCgoYykgPT4gT2JqZWN0LnZhbHVlcyhjLnN0YWlucykubWFwKChzdGFpbjogYW55KSA9PiBzdGFpbltcIkVOXCJdKS5mb3JFYWNoKCh0KSA9PiBhbGxTdGFpbnMuYWRkKHQpKSk7XHJcblxyXG4gICAgICByZXR1cm4gWy4uLmFsbFN0YWluc107XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IENhc2VzIGZyb20gXCIuLi9yb290L2Nhc2VzXCI7XHJcbmltcG9ydCB7IFNsaWRlIH0gZnJvbSBcIi4uL3Jvb3QvdHlwZXMvc2xpZGVcIjtcclxuaW1wb3J0IHsgbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlRXhwbG9yZXIge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IENhc2VzO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IFNsaWRlW10gfCBudWxsID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBzbGlkZXNEYXRhOiBTbGlkZVtdIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcm90ZWN0ZWQgbWFza3NEYXRhOiBTbGlkZVtdIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgbWFza0lkZW50aWZpZXJTZXBhcmF0b3I6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBtYXNrSWRlbnRpZmllclZhbHVlOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IENhc2VzKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICB1c2UobWFza0lkZW50aWZpZXJTZXBhcmF0b3I6IHN0cmluZywgbWFza0lkZW50aWZpZXJWYWx1ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubWFza0lkZW50aWZpZXJTZXBhcmF0b3IgPSBtYXNrSWRlbnRpZmllclNlcGFyYXRvcjtcclxuICAgICAgdGhpcy5tYXNrSWRlbnRpZmllclZhbHVlID0gbWFza0lkZW50aWZpZXJWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldEFsbFNsaWRlcyhjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVbXT4ge1xyXG4gICAgICBpZiAoIXRoaXMuZGF0YSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IChhd2FpdCB0aGlzLmNvbnRleHQuc2xpZGVzKGNhc2VJZCkpLml0ZW1zO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmRhdGFcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhY3R1YWxTbGlkZXMoY2FzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlW10+IHtcclxuICAgICAgaWYgKCF0aGlzLnNsaWRlc0RhdGEpIHtcclxuICAgICAgICB0aGlzLnNsaWRlc0RhdGEgPSAoYXdhaXQgdGhpcy5nZXRBbGxTbGlkZXMoY2FzZUlkKSkuZmlsdGVyKChzbGlkZSkgPT4geyBcclxuICAgICAgICAgIHJldHVybiAhbWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwKHNsaWRlLmxvY2FsX2lkIHx8IFwiXCIsIHRoaXMubWFza0lkZW50aWZpZXJTZXBhcmF0b3IsIDEsIHRoaXMubWFza0lkZW50aWZpZXJWYWx1ZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5zbGlkZXNEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1hc2tzKGNhc2VJZDogc3RyaW5nKTogUHJvbWlzZTxTbGlkZVtdPiB7XHJcbiAgICAgIGlmICghdGhpcy5tYXNrc0RhdGEpIHtcclxuICAgICAgICB0aGlzLm1hc2tzRGF0YSA9IChhd2FpdCB0aGlzLmdldEFsbFNsaWRlcyhjYXNlSWQpKS5maWx0ZXIoKHNsaWRlKSA9PiB7IFxyXG4gICAgICAgICAgcmV0dXJuIG1hdGNoU3RyaW5nT25TZXBhcmF0b3JHcm91cChzbGlkZS5sb2NhbF9pZCB8fCBcIlwiLCB0aGlzLm1hc2tJZGVudGlmaWVyU2VwYXJhdG9yLCAxLCB0aGlzLm1hc2tJZGVudGlmaWVyVmFsdWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMubWFza3NEYXRhO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7Um9vdEFQSSwgUm9vdENvbnRleHR9IGZyb20gXCIuLi8uLi9yb290XCI7XHJcbmltcG9ydCBDYXNlRXhwbG9yZXIgZnJvbSBcIi4uL2V4dGVuc2lvbnMvY2FzZS1leHBsb3JlclwiO1xyXG5pbXBvcnQgU2xpZGVFeHBsb3JlciBmcm9tIFwiLi4vZXh0ZW5zaW9ucy9zbGlkZS1leHBsb3JlclwiO1xyXG5pbXBvcnQgUm9vdCBmcm9tIFwiLi9yb290XCI7XHJcbmltcG9ydCB7IENhc2UgfSBmcm9tIFwiLi90eXBlcy9jYXNlXCI7XHJcbmltcG9ydCB7Q2FzZUxpc3R9IGZyb20gXCIuL3R5cGVzL2Nhc2UtbGlzdFwiO1xyXG5pbXBvcnQgeyBTbGlkZUxpc3QgfSBmcm9tIFwiLi90eXBlcy9zbGlkZS1saXN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXNlcyBleHRlbmRzIFJvb3RDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBSb290QVBJO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IENhc2VMaXN0IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY2FzZUV4cGxvcmVyOiBDYXNlRXhwbG9yZXI7XHJcbiAgICBzbGlkZUV4cGxvcmVyOiBTbGlkZUV4cGxvcmVyO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cclxuICAgICAgICB0aGlzLmNhc2VFeHBsb3JlciA9IG5ldyBDYXNlRXhwbG9yZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZUV4cGxvcmVyID0gbmV3IFNsaWRlRXhwbG9yZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbGlzdCgpOiBQcm9taXNlPENhc2VMaXN0PiB7XHJcbiAgICAgICAgaWYoIXRoaXMuZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9jYXNlcycpIGFzIENhc2VMaXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldChjYXNlSWQ6IHN0cmluZyk6IFByb21pc2U8Q2FzZT4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jYXNlcy8ke2Nhc2VJZH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzbGlkZXMoY2FzZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNsaWRlTGlzdD4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jYXNlcy8ke2Nhc2VJZH0vc2xpZGVzYCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtSb290Q29udGV4dH0gZnJvbSBcIi4uLy4uL3Jvb3RcIjtcclxuaW1wb3J0IFJvb3QgZnJvbSBcIi4vcm9vdFwiO1xyXG5pbXBvcnQge1xyXG4gICAgV29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb25cclxufSBmcm9tIFwiLi90eXBlcy93b3JrYmVuY2gtc2VydmljZS1hcGktdi0zLWN1c3RvbS1tb2RlbHMtZXhhbWluYXRpb25zLWV4YW1pbmF0aW9uXCI7XHJcbmltcG9ydCB7RXhhbWluYXRpb25RdWVyeX0gZnJvbSBcIi4vdHlwZXMvZXhhbWluYXRpb24tcXVlcnlcIjtcclxuaW1wb3J0IHtFeGFtaW5hdGlvbkxpc3R9IGZyb20gXCIuL3R5cGVzL2V4YW1pbmF0aW9uLWxpc3RcIjtcclxuaW1wb3J0IHtTY29wZVRva2VuQW5kU2NvcGVJZH0gZnJvbSBcIi4vdHlwZXMvc2NvcGUtdG9rZW4tYW5kLXNjb3BlLWlkXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeGFtaW5hdGlvbnMgZXh0ZW5kcyBSb290Q29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUm9vdDtcclxuICAgIHByb3RlY3RlZCBkYXRhOiBFeGFtaW5hdGlvbkxpc3QgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNyZWF0ZShjYXNlSWQ6IHN0cmluZywgYXBwSWQ6IHN0cmluZyk6IFByb21pc2U8V29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24+IHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcy5jb250ZXh0O1xyXG4gICAgICAgIHNlbGYucmVxdWlyZXMoJ2Nhc2VJZCcsIGNhc2VJZCk7XHJcbiAgICAgICAgcmV0dXJuIHNlbGYucmF3UXVlcnkoJy9leGFtaW5hdGlvbnMnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgIGNhc2VfaWQ6IGNhc2VJZCxcclxuICAgICAgICAgICAgICAgIGFwcF9pZDogYXBwSWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHF1ZXJ5KHF1ZXJ5OiBFeGFtaW5hdGlvblF1ZXJ5LCBza2lwPzogbnVtYmVyIHwgdW5kZWZpbmVkLCBsaW1pdD86IG51bWJlciB8IHVuZGVmaW5lZCk6IFByb21pc2U8RXhhbWluYXRpb25MaXN0PiB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXMuY29udGV4dDtcclxuICAgICAgICByZXR1cm4gc2VsZi5yYXdRdWVyeShgL2V4YW1pbmF0aW9ucy9xdWVyeWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgYm9keTogcXVlcnksXHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7c2tpcCwgbGltaXR9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0KGV4YW1pbmF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8V29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24+IHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcy5jb250ZXh0O1xyXG4gICAgICAgIHNlbGYucmVxdWlyZXMoJ2V4YW1pbmF0aW9uSWQnLCBleGFtaW5hdGlvbklkKTtcclxuICAgICAgICByZXR1cm4gc2VsZi5yYXdRdWVyeShgL2V4YW1pbmF0aW9ucy8ke2V4YW1pbmF0aW9uSWR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2NvcGUoZXhhbWluYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxTY29wZVRva2VuQW5kU2NvcGVJZD4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgc2VsZi5yZXF1aXJlcygnZXhhbWluYXRpb25JZCcsIGV4YW1pbmF0aW9uSWQpO1xyXG4gICAgICAgIHJldHVybiBzZWxmLnJhd1F1ZXJ5KGAvZXhhbWluYXRpb25zLyR7ZXhhbWluYXRpb25JZH0vc2NvcGVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tIFwiLi4vLi4vc2NvcGVcIjtcclxuaW1wb3J0IFNjb3BlcyBmcm9tIFwiLi9zY29wZXNcIjtcclxuaW1wb3J0IHsgQXBwVWlTdG9yYWdlIH0gZnJvbSBcIi4vdHlwZXMvYXBwLXVpLXN0b3JhZ2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2UgZXh0ZW5kcyBTY29wZUNvbnRleHQge1xyXG4gICAgcHJvdGVjdGVkIGNvbnRleHQ6IFNjb3BlcztcclxuICAgIHByb3RlY3RlZCBkYXRhOiBBcHBVaVN0b3JhZ2UgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZXMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0UmF3KCk6IFByb21pc2U8QXBwVWlTdG9yYWdlPiB7XHJcbiAgICAgICAgaWYoIXRoaXMuZGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9hcHAtdWktc3RvcmFnZS91c2VyJylcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSBhcyBBcHBVaVN0b3JhZ2VcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmbHVzaCgpOiBQcm9taXNlPEFwcFVpU3RvcmFnZSB8IG51bGw+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZGF0YSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9hcHAtdWktc3RvcmFnZS91c2VyJywge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IHRoaXMuZGF0YVxyXG4gICAgICAgIH0pIGFzIEFwcFVpU3RvcmFnZTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldFJhdygpXHJcbiAgICAgICAgaWYodHlwZW9mIGRhdGEuY29udGVudFtrZXldID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEuY29udGVudFtrZXldIGFzIHN0cmluZylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhLmNvbnRlbnRba2V5XVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgZmx1c2g/OiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWVSYXcgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSlcclxuICAgICAgICBjb25zdCBkYXRhUmF3ID0gYXdhaXQgdGhpcy5nZXRSYXcoKVxyXG4gICAgICAgIGRhdGFSYXcuY29udGVudFtrZXldID0gdmFsdWVSYXdcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhUmF3XHJcblxyXG4gICAgICAgIGlmIChmbHVzaCkge1xyXG4gICAgICAgICAgICB0aGlzLmZsdXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGVyYXNlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtjb250ZW50Ont9fVxyXG4gICAgICAgIHRoaXMuZmx1c2goKVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNjb3BlQ29udGV4dCB9IGZyb20gXCIuLi8uLi9zY29wZVwiO1xyXG5pbXBvcnQgU2NvcGVzIGZyb20gXCIuL3Njb3Blc1wiO1xyXG5pbXBvcnQge1BvaW50QW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9pbnQtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge0xpbmVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9saW5lLWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtBcnJvd0Fubm90YXRpb259IGZyb20gXCIuL3R5cGVzL2Fycm93LWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtDaXJjbGVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9jaXJjbGUtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1JlY3RhbmdsZUFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3JlY3RhbmdsZS1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UG9seWdvbkFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3BvbHlnb24tYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RQb2ludEFubm90YXRpb25zfSBmcm9tIFwiLi90eXBlcy9wb3N0LXBvaW50LWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdExpbmVBbm5vdGF0aW9uc30gZnJvbSBcIi4vdHlwZXMvcG9zdC1saW5lLWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdEFycm93QW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtYXJyb3ctYW5ub3RhdGlvbnNcIjtcclxuaW1wb3J0IHtQb3N0Q2lyY2xlQW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtY2lyY2xlLWFubm90YXRpb25zXCI7XHJcbmltcG9ydCB7UG9zdFJlY3RhbmdsZUFubm90YXRpb25zfSBmcm9tIFwiLi90eXBlcy9wb3N0LXJlY3RhbmdsZS1hbm5vdGF0aW9uc1wiO1xyXG5pbXBvcnQge1Bvc3RQb2x5Z29uQW5ub3RhdGlvbnN9IGZyb20gXCIuL3R5cGVzL3Bvc3QtcG9seWdvbi1hbm5vdGF0aW9uc1wiO1xyXG5pbXBvcnQge1Bvc3RQb2ludEFubm90YXRpb259IGZyb20gXCIuL3R5cGVzL3Bvc3QtcG9pbnQtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RMaW5lQW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9zdC1saW5lLWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtQb3N0QXJyb3dBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LWFycm93LWFubm90YXRpb25cIjtcclxuaW1wb3J0IHtQb3N0Q2lyY2xlQW5ub3RhdGlvbn0gZnJvbSBcIi4vdHlwZXMvcG9zdC1jaXJjbGUtYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge1Bvc3RSZWN0YW5nbGVBbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LXJlY3RhbmdsZS1hbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB7UG9zdFBvbHlnb25Bbm5vdGF0aW9ufSBmcm9tIFwiLi90eXBlcy9wb3N0LXBvbHlnb24tYW5ub3RhdGlvblwiO1xyXG5pbXBvcnQge0Fubm90YXRpb25MaXN0UmVzcG9uc2V9IGZyb20gXCIuL3R5cGVzL2Fubm90YXRpb24tbGlzdC1yZXNwb25zZVwiO1xyXG5pbXBvcnQge0lkT2JqZWN0fSBmcm9tIFwiLi90eXBlcy9pZC1vYmplY3RcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUG9zdEFubm90YXRpb25RdWVyeVBhcmFtcyB7XHJcbiAgICBpc1JvaT86IGJvb2xlYW47XHJcbiAgICBleHRlcm5hbElkcz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFubm90YXRpb25zIGV4dGVuZHMgU2NvcGVDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBTY29wZXM7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogdW5kZWZpbmVkOyAvL3VudXNlZFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFNjb3Blcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBvc3QgbXVsdGlwbGUgYW5ub3RhdGlvbnMgYXMgb25lLiBJbnJlYWxpdHkgdGhlIHNhbWUgZW5kcG9pbnQgYXMgY3JlYXRlKC4uLilcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBsb2FkKGRhdGE6IFBvc3RQb2ludEFubm90YXRpb25zIHwgUG9zdExpbmVBbm5vdGF0aW9ucyB8IFBvc3RBcnJvd0Fubm90YXRpb25zIHwgUG9zdENpcmNsZUFubm90YXRpb25zIHwgUG9zdFJlY3RhbmdsZUFubm90YXRpb25zIHwgUG9zdFBvbHlnb25Bbm5vdGF0aW9ucyxcclxuICAgICAgICAgICAgICAgICBvcHRpb25zOiBQb3N0QW5ub3RhdGlvblF1ZXJ5UGFyYW1zID0ge31cclxuICAgICk6IFByb21pc2U8QW5ub3RhdGlvbkxpc3RSZXNwb25zZT4ge1xyXG4gICAgICAgIC8vdGhlIHNhbWUgYXMgY3JlYXRlIGJ1dCBmb3IgdHlwZXMgaXRzIHNpbXBsZXIgdG8gc3BsaXRcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KCcvYW5ub3RhdGlvbnMnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIHF1ZXJ5OiBvcHRpb25zLFxyXG4gICAgICAgICAgICBib2R5OiB0aGlzLmRhdGFcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBhbm5vdGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBjcmVhdGUoZGF0YTogUG9zdFBvaW50QW5ub3RhdGlvbiB8IFBvc3RMaW5lQW5ub3RhdGlvbiB8IFBvc3RBcnJvd0Fubm90YXRpb24gfCBQb3N0Q2lyY2xlQW5ub3RhdGlvbiB8IFBvc3RSZWN0YW5nbGVBbm5vdGF0aW9uIHwgUG9zdFBvbHlnb25Bbm5vdGF0aW9uLFxyXG4gICAgICAgICAgICAgICAgIG9wdGlvbnM6IFBvc3RBbm5vdGF0aW9uUXVlcnlQYXJhbXMgPSB7fVxyXG4gICAgKTogUHJvbWlzZTwoUG9pbnRBbm5vdGF0aW9uIHwgTGluZUFubm90YXRpb24gfCBBcnJvd0Fubm90YXRpb24gfCBDaXJjbGVBbm5vdGF0aW9uIHwgUmVjdGFuZ2xlQW5ub3RhdGlvbiB8IFBvbHlnb25Bbm5vdGF0aW9uKT4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoJy9hbm5vdGF0aW9ucycsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgcXVlcnk6IG9wdGlvbnMsXHJcbiAgICAgICAgICAgIGJvZHk6IHRoaXMuZGF0YVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZShpZDogc3RyaW5nKTogUHJvbWlzZTxJZE9iamVjdD4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9hbm5vdGF0aW9ucy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlKFxyXG4gICAgICAgIGlkOiBzdHJpbmcsXHJcbiAgICAgICAgZGF0YTogUG9zdFBvaW50QW5ub3RhdGlvbiB8IFBvc3RMaW5lQW5ub3RhdGlvbiB8IFBvc3RBcnJvd0Fubm90YXRpb24gfCBQb3N0Q2lyY2xlQW5ub3RhdGlvbiB8IFBvc3RSZWN0YW5nbGVBbm5vdGF0aW9uIHwgUG9zdFBvbHlnb25Bbm5vdGF0aW9uLFxyXG4gICAgICAgIG9wdGlvbnM6IFBvc3RBbm5vdGF0aW9uUXVlcnlQYXJhbXMgPSB7fSxcclxuICAgICk6IFByb21pc2U8KFBvaW50QW5ub3RhdGlvbiB8IExpbmVBbm5vdGF0aW9uIHwgQXJyb3dBbm5vdGF0aW9uIHwgQ2lyY2xlQW5ub3RhdGlvbiB8IFJlY3RhbmdsZUFubm90YXRpb24gfCBQb2x5Z29uQW5ub3RhdGlvbik+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZShpZCk7XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBtaWdodCBjYXJyeSBpZCBidXQgdXNlciBmb3Jnb3QgdG8gc2V0IGV4dGVybmFsIElEcyB0byB0cnVlXHJcbiAgICAgICAgaWYgKCFvcHRpb25zLmV4dGVybmFsSWRzICYmIGRhdGEuaWQpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5leHRlcm5hbElkcyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTY29wZUNvbnRleHQgfSBmcm9tIFwiLi4vLi4vc2NvcGVcIjtcclxuaW1wb3J0IFNjb3BlcyBmcm9tIFwiLi9zY29wZXNcIjtcclxuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gXCIuL3R5cGVzL2NvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgSXRlbVF1ZXJ5IH0gZnJvbSBcIi4vdHlwZXMvaXRlbS1xdWVyeVwiO1xyXG5pbXBvcnQgeyBJdGVtUXVlcnlMaXN0IH0gZnJvbSBcIi4vdHlwZXMvaXRlbS1xdWVyeS1saXN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xsZWN0aW9ucyBleHRlbmRzIFNjb3BlQ29udGV4dCB7XHJcbiAgICBwcm90ZWN0ZWQgY29udGV4dDogU2NvcGVzO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IENvbGxlY3Rpb24gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBTY29wZXMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0KGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTxDb2xsZWN0aW9uPiB7XHJcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbjogQ29sbGVjdGlvbiA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfWApO1xyXG5cclxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjcmVhdGUoY29sbGVjdGlvbjogQ29sbGVjdGlvbik6IFByb21pc2U8Q29sbGVjdGlvbj4ge1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRDb2xsZWN0aW9uOiBDb2xsZWN0aW9uID0gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvY29sbGVjdGlvbnNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IGNvbGxlY3Rpb24sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGNyZWF0ZWRDb2xsZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZShjb2xsZWN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHF1ZXJ5SXRlbXMoY29sbGVjdGlvbklkOiBzdHJpbmcsIHF1ZXJ5OiBJdGVtUXVlcnkpOiBQcm9taXNlPEl0ZW1RdWVyeUxpc3Q+IHtcclxuICAgICAgICBjb25zdCBxdWVyeVJlc3VsdDogSXRlbVF1ZXJ5TGlzdCA9IGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfS9pdGVtcy9xdWVyeWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBib2R5OiBxdWVyeSxcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICByZXR1cm4gcXVlcnlSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY3JlYXRlSXRlbXMoY29sbGVjdGlvbklkOiBzdHJpbmcsIGl0ZW1zOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb25JZH0vaXRlbXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgIC4uLml0ZW1zLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVJdGVtKGNvbGxlY3Rpb25JZDogc3RyaW5nLCBpdGVtSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL2NvbGxlY3Rpb25zLyR7Y29sbGVjdGlvbklkfS9pdGVtcy8ke2l0ZW1JZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge1Njb3Blc0FQSX0gZnJvbSBcIi4uLy4uL3Njb3BlXCI7XHJcbmltcG9ydCB7UmF3QVBJLCBSYXdPcHRpb25zfSBmcm9tIFwiLi4vLi4vYmFzZVwiO1xyXG5pbXBvcnQge1Njb3BlVG9rZW5BbmRTY29wZUlkfSBmcm9tIFwiLi4vcm9vdC90eXBlcy9zY29wZS10b2tlbi1hbmQtc2NvcGUtaWRcIjtcclxuaW1wb3J0IHtcclxuICAgIFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uXHJcbn0gZnJvbSBcIi4uL3Jvb3QvdHlwZXMvd29ya2JlbmNoLXNlcnZpY2UtYXBpLXYtMy1jdXN0b20tbW9kZWxzLWV4YW1pbmF0aW9ucy1leGFtaW5hdGlvblwiO1xyXG5pbXBvcnQgUm9vdCBmcm9tIFwiLi4vcm9vdC9yb290XCI7XHJcbmltcG9ydCBTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcclxuaW1wb3J0IHtwYXJzZUp3dFRva2VuLCBTY29wZVRva2VufSBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcclxuaW1wb3J0IEFubm90YXRpb25zIGZyb20gXCIuL2Fubm90YXRpb25zXCI7XHJcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tIFwiLi9jb2xsZWN0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NvcGVzIGV4dGVuZHMgU2NvcGVzQVBJIHtcclxuICAgIHN0YXRpYyBhcGlQYXRoID0gJy92My9zY29wZXMnO1xyXG5cclxuICAgIC8vIEludGVyZmFjZVxyXG4gICAgcmF3OiBSYXdBUEk7XHJcbiAgICBjb250ZXh0OiBSb290O1xyXG4gICAgc3RvcmFnZTogU3RvcmFnZTtcclxuICAgIGFubm90YXRpb25zOiBBbm5vdGF0aW9ucztcclxuICAgIGNvbGxlY3Rpb25zOiBDb2xsZWN0aW9ucztcclxuXHJcbiAgICAvLyBBZGRpdGlvbmFsXHJcbiAgICBzY29wZUNvbnRleHQ6IFNjb3BlVG9rZW5BbmRTY29wZUlkIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF9kZWZhdWx0RXhhbWluYXRpb25JZDogc3RyaW5nID0gXCJcIjtcclxuICAgIHByaXZhdGUgX2FjdGl2ZUV4YW1pbmF0aW9uSWQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBwcml2YXRlIF90b2tlblJlZmV0Y2hJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBSb290KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIHRoaXMucmF3ID0gbmV3IFJhd0FQSSh0aGlzLmNvbnRleHQub3B0aW9ucy5hcGlVcmwgKyBTY29wZXMuYXBpUGF0aCwge1xyXG4gICAgICAgICAgICBlcnJvckhhbmRsZXI6IHRoaXMucmFpc2VDb25uZWN0aW9uRXJyb3IuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgbWF4UmV0cnlDb3VudDogdGhpcy5jb250ZXh0Lm9wdGlvbnMubWF4UmV0cnlDb3VudCxcclxuICAgICAgICAgICAgbmV4dFJldHJ5SW5NczogdGhpcy5jb250ZXh0Lm9wdGlvbnMubmV4dFJldHJ5SW5Nc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBTdG9yYWdlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBuZXcgQW5ub3RhdGlvbnModGhpcyk7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9ucyh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1c2UoY2FzZUlkOiBzdHJpbmcsIGFwcElkOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvL3RvZG8gY29uc2lkZXIgY2FjaGluZ1xyXG5cclxuICAgICAgICB0aGlzLnJlcXVpcmVzKFwicm9vdDo6dXNlcklkXCIsIHRoaXMuY29udGV4dC51c2VySWQpO1xyXG5cclxuICAgICAgICBjb25zdCBmaW5kRXhhbWluYXRpb24gPSBhc3luYyAoYXBwSWQ6IHN0cmluZyk6XHJcbiAgICAgICAgICAgIFByb21pc2U8V29ya2JlbmNoU2VydmljZUFwaVYzQ3VzdG9tTW9kZWxzRXhhbWluYXRpb25zRXhhbWluYXRpb24+ID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCBleGFtaW5hdGlvbnMgPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICAgIGFwcHM6IFthcHBJZF0sXHJcbiAgICAgICAgICAgICAgICBjcmVhdG9yczogW3RoaXMuY29udGV4dC51c2VySWRdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoZXhhbWluYXRpb25zLml0ZW1fY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXhhbWluYXRpb24gPSBleGFtaW5hdGlvbnMuaXRlbXMuZmluZChleCA9PiBleC5zdGF0ZSA9PT0gXCJPUEVOXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4YW1pbmF0aW9uKSByZXR1cm4gZXhhbWluYXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5leGFtaW5hdGlvbnMuY3JlYXRlKGNhc2VJZCwgYXBwSWQpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBleGFtaW5hdGlvbjtcclxuICAgICAgICBpZiAoYXBwSWQpIHtcclxuICAgICAgICAgICAgZXhhbWluYXRpb24gPSBhd2FpdCBmaW5kRXhhbWluYXRpb24oYXBwSWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fZGVmYXVsdEV4YW1pbmF0aW9uSWQpIHtcclxuICAgICAgICAgICAgZXhhbWluYXRpb24gPSBhd2FpdCB0aGlzLmNvbnRleHQuZXhhbWluYXRpb25zLmdldCh0aGlzLl9kZWZhdWx0RXhhbWluYXRpb25JZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWV4YW1pbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIGxldCBhcHAgPSBhd2FpdCB0aGlzLmNvbnRleHQuYXBwcy5kZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV4YW1pbmF0aW9uID0gYXdhaXQgZmluZEV4YW1pbmF0aW9uKGFwcC5hcHBfaWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0RXhhbWluYXRpb25JZCA9IGV4YW1pbmF0aW9uLmlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5mcm9tKGV4YW1pbmF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2NvcGVUb2tlbigpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlQ29udGV4dD8uYWNjZXNzX3Rva2VuO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZyb20oZXhhbWluYXRpb246IFdvcmtiZW5jaFNlcnZpY2VBcGlWM0N1c3RvbU1vZGVsc0V4YW1pbmF0aW9uc0V4YW1pbmF0aW9uKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlRXhhbWluYXRpb25JZCA9IGV4YW1pbmF0aW9uLmlkO1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gcGFyc2VKd3RUb2tlbih0aGlzLnNjb3BlQ29udGV4dC5hY2Nlc3NfdG9rZW4pIGFzIFNjb3BlVG9rZW47XHJcbiAgICAgICAgLy90aW1lb3V0IHdpdGggMjAgc2Vjb25kcyBzbGFjayBPUiAyODAgc2Vjc1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSB0b2tlbi5leHAqMWUzIC0gRGF0ZS5ub3coKSAtIDIwZTMgfHwgMjgwZTM7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcGVDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZXh0LmV4YW1pbmF0aW9ucy5zY29wZShleGFtaW5hdGlvbi5pZCk7XHJcbiAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgdGhpcy5yYWlzZUV2ZW50KCdpbml0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlRXhhbWluYXRpb25JZCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zY29wZUNvbnRleHQgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLl90b2tlblJlZmV0Y2hJbnRlcnZhbCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX3Rva2VuUmVmZXRjaEludGVydmFsKTtcclxuICAgICAgICAgICAgdGhpcy5fdG9rZW5SZWZldGNoSW50ZXJ2YWwgPSBudWxsO1xyXG4gICAgICAgICAgICAvL3RvZG8gY2xlYXIgYWxsIGNhY2hlZCBkYXRhXHJcbiAgICAgICAgICAgIHRoaXMucmFpc2VFdmVudCgncmVzZXQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmF3UXVlcnkoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9ucz86IFJhd09wdGlvbnMpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIHRoaXMucmVxdWlyZXMoJ3RoaXMuc2NvcGVDb250ZXh0JywgdGhpcy5zY29wZUNvbnRleHQpO1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcclxuICAgICAgICBvcHRpb25zLmhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYEJlYXJlciAke3RoaXMuc2NvcGVDb250ZXh0Py5hY2Nlc3NfdG9rZW59YDtcclxuICAgICAgICBpZiAoZW5kcG9pbnQgJiYgIWVuZHBvaW50LnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICAgICAgICBlbmRwb2ludCA9IGAvJHtlbmRwb2ludH1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmF3Lmh0dHAoYC8ke3RoaXMuc2NvcGVDb250ZXh0Py5zY29wZV9pZH0ke2VuZHBvaW50fWAsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuc3RhdHVzQ29kZSA9PT0gNDAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3BlQ29udGV4dCA9IGF3YWl0IHRoaXMuY29udGV4dC5leGFtaW5hdGlvbnMuc2NvcGUodGhpcy5fYWN0aXZlRXhhbWluYXRpb25JZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yYXcuaHR0cChgLyR7dGhpcy5zY29wZUNvbnRleHQuc2NvcGVfaWR9JHtlbmRwb2ludH1gLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtSb290QVBJLCBSb290Q29udGV4dH0gZnJvbSBcIi4uLy4uL3Jvb3RcIjtcclxuaW1wb3J0IFJvb3QgZnJvbSBcIi4vcm9vdFwiO1xyXG5pbXBvcnQgeyBTbGlkZSB9IGZyb20gXCIuL3R5cGVzL3NsaWRlXCI7XHJcbmltcG9ydCB7IFNsaWRlSW5mbyB9IGZyb20gXCIuL3R5cGVzL3NsaWRlLWluZm9cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlcyBleHRlbmRzIFJvb3RDb250ZXh0IHtcclxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBSb290QVBJO1xyXG4gICAgcHJvdGVjdGVkIGRhdGE6IFNsaWRlSW5mbyB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IFJvb3QpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2xpZGVJbmZvKHNsaWRlSWQ6IHN0cmluZyk6IFByb21pc2U8U2xpZGVJbmZvPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3NsaWRlcy8ke3NsaWRlSWR9L2luZm9gKVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNsaWRlVGh1bWJuYWlsKHNsaWRlSWQ6IHN0cmluZywgbWF4V2lkdGg6IG51bWJlciwgbWF4SGVpZ2h0OiBudW1iZXIsIGZvcm1hdD86IHN0cmluZyk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbnRleHQucmF3UXVlcnkoYC9zbGlkZXMvJHtzbGlkZUlkfS90aHVtYm5haWwvbWF4X3NpemUvJHttYXhXaWR0aH0vJHttYXhIZWlnaHR9YCwge1xyXG4gICAgICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VfZm9ybWF0OiBmb3JtYXRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBcImJsb2JcIlxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2xpZGVMYWJlbChzbGlkZUlkOiBzdHJpbmcsIG1heFdpZHRoOiBudW1iZXIsIG1heEhlaWdodDogbnVtYmVyLCBmb3JtYXQ/OiBzdHJpbmcpOiBQcm9taXNlPEJsb2I+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb250ZXh0LnJhd1F1ZXJ5KGAvc2xpZGVzLyR7c2xpZGVJZH0vbGFiZWwvbWF4X3NpemUvJHttYXhXaWR0aH0vJHttYXhIZWlnaHR9YCwge1xyXG4gICAgICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VfZm9ybWF0OiBmb3JtYXRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBcImJsb2JcIlxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZFRpbGUoc2xpZGVJZDogc3RyaW5nLCBsZXZlbDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgZm9ybWF0Pzogc3RyaW5nKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29udGV4dC5yYXdRdWVyeShgL3NsaWRlcy8ke3NsaWRlSWR9L3RpbGUvbGV2ZWwvJHtsZXZlbH0vdGlsZS8ke3h9LyR7eX1gLCB7XHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZV9mb3JtYXQ6IGZvcm1hdFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6IFwiYmxvYlwiXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0VtcGF0aW9uQVBJT3B0aW9ucywgUmF3QVBJLCBSYXdPcHRpb25zfSBmcm9tIFwiLi4vLi4vYmFzZVwiO1xyXG5pbXBvcnQge1Jvb3RBUEl9IGZyb20gXCIuLi8uLi9yb290XCI7XHJcbmltcG9ydCBTY29wZXMgZnJvbSBcIi4uL3Njb3BlL3Njb3Blc1wiO1xyXG5pbXBvcnQgQXBwcyBmcm9tIFwiLi9hcHBzXCI7XHJcbmltcG9ydCBDYXNlcyBmcm9tIFwiLi9jYXNlc1wiO1xyXG5pbXBvcnQgRXhhbWluYXRpb25zIGZyb20gXCIuL2V4YW1pbmF0aW9uc1wiO1xyXG5pbXBvcnQgeyBwYXJzZUp3dFRva2VufSBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcclxuaW1wb3J0IFNsaWRlcyBmcm9tIFwiLi9zbGlkZXNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvb3QgZXh0ZW5kcyBSb290QVBJIHtcclxuICAgIHN0YXRpYyBhcGlQYXRoID0gJy92Myc7XHJcblxyXG4gICAgLy9pbnRlcmZhY2VcclxuICAgIHByb3RlY3RlZCByYXc6IFJhd0FQSTtcclxuICAgIHNjb3BlczogU2NvcGVzO1xyXG4gICAgdmVyc2lvbjogc3RyaW5nO1xyXG4gICAgcm9vdFVSSTogc3RyaW5nO1xyXG5cclxuICAgIC8vY3VzdG9tXHJcbiAgICBhcHBzOiBBcHBzO1xyXG4gICAgY2FzZXM6IENhc2VzO1xyXG4gICAgZXhhbWluYXRpb25zOiBFeGFtaW5hdGlvbnM7XHJcbiAgICBzbGlkZXM6IFNsaWRlcztcclxuXHJcbiAgICBwcm90ZWN0ZWQgX3VzZXJJZDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIF9hY2Nlc3NUb2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogRW1wYXRpb25BUElPcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gXCJ2M1wiO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHRoaXMub3B0aW9ucy5hbm9ueW1vdXNVc2VySWQ7XHJcbiAgICAgICAgdGhpcy5yb290VVJJID0gdGhpcy5vcHRpb25zLmFwaVVybCArIFJvb3QuYXBpUGF0aDtcclxuICAgICAgICB0aGlzLnJhdyA9IG5ldyBSYXdBUEkodGhpcy5yb290VVJJLCB7XHJcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcjogdGhpcy5yYWlzZUNvbm5lY3Rpb25FcnJvci5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBtYXhSZXRyeUNvdW50OiB0aGlzLm9wdGlvbnMubWF4UmV0cnlDb3VudCxcclxuICAgICAgICAgICAgbmV4dFJldHJ5SW5NczogdGhpcy5vcHRpb25zLm5leHRSZXRyeUluTXNcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNjb3BlcyA9IG5ldyBTY29wZXModGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuYXBwcyA9IG5ldyBBcHBzKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2FzZXMgPSBuZXcgQ2FzZXModGhpcyk7XHJcbiAgICAgICAgdGhpcy5leGFtaW5hdGlvbnMgPSBuZXcgRXhhbWluYXRpb25zKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2xpZGVzID0gbmV3IFNsaWRlcyh0aGlzKVxyXG4gICAgfVxyXG5cclxuICAgIGdldCB1c2VySWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVzZSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICghdXNlcklkIHx8IHVzZXJJZC5sZW5ndGggPiA1MCkgdGhyb3cgXCJJbnZhbGlkIFVzZXIgSUQhIE11c3QgYmUgdmFsaWQgc3RyaW5nIHNob3J0ZXIgdGhhbiA1MCBjaGFyYWN0ZXJzIVwiO1xyXG4gICAgICAgIGlmICh0aGlzLl91c2VySWQgPT09IHVzZXJJZCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLnJhaXNlRXZlbnQoJ2luaXQnKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByYXdRdWVyeShlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSYXdPcHRpb25zPXt9KTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzW1wiVXNlci1JZFwiXSA9IHRoaXMuX3VzZXJJZDtcclxuICAgICAgICBpZiAodGhpcy5fYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBvcHRpb25zLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSB8fCBgQmVhcmVyICR7dGhpcy5fYWNjZXNzVG9rZW59YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3Lmh0dHAoZW5kcG9pbnQsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZyb20odG9rZW46IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuX2FjY2Vzc1Rva2VuID0gdG9rZW47XHJcbiAgICAgICAgY29uc3QgdG9rZW5TdWIgPSBwYXJzZUp3dFRva2VuKHRva2VuKS5zdWI7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2UodG9rZW5TdWIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIC8vdG9kbyBjbGVhciBhbGwgY2FjaGVkIGRhdGFcclxuICAgICAgICAvLyAuLi4gZGVsZXRlIHRoaXMuZXhhbWluYXRpb25zLmRhdGE7XHJcblxyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHRoaXMub3B0aW9ucy5hbm9ueW1vdXNVc2VySWQ7XHJcbiAgICAgICAgdGhpcy5zY29wZXMucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnJhaXNlRXZlbnQoJ3Jlc2V0Jyk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIkV2ZW50U291cmNlIiwiZXZlbnRzIiwiYWRkT25jZUhhbmRsZXIiLCJldmVudE5hbWUiLCJoYW5kbGVyIiwidXNlckRhdGEiLCJ0aW1lcyIsInByaW9yaXR5Iiwic2VsZiIsInRoaXMiLCJjb3VudCIsIm9uY2VIYW5kbGVyIiwiZXZlbnQiLCJyZW1vdmVIYW5kbGVyIiwiYWRkSGFuZGxlciIsImlzRnVuY3Rpb24iLCJpbmRleCIsImxlbmd0aCIsImhhbmRsZXJzIiwiQXJyYXkiLCJpc0FycmF5IiwiaSIsInB1c2giLCJudW1iZXJPZkhhbmRsZXJzIiwicmVtb3ZlQWxsSGFuZGxlcnMiLCJldmVudFR5cGUiLCJnZXRIYW5kbGVyIiwiYXBwbHkiLCJzb3VyY2UiLCJhcmdzIiwiZXZlbnRTb3VyY2UiLCJyYWlzZUV2ZW50IiwiZXZlbnRBcmdzIiwidHlwZSIsIlN0cmluZyIsImNsYXNzMnR5cGUiLCJ0b1N0cmluZyIsIlNUQVRVU19DT0RFUyIsInBhcnNlSnd0VG9rZW4iLCJ0b2tlbiIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzcGxpdCIsInNsZWVwIiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJMb2dnZXIiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwiSFRUUEVycm9yIiwiRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImV4dHJhcyIsInN1cGVyIiwiYXJndW1lbnRzIiwiYXNzaWduIiwibmFtZSIsInN1ZmZpeCIsInJlcGxhY2UiLCJyZWR1Y2UiLCJhY2MiLCJjIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImh0dHBFcnJvclRvTmFtZSIsInN0YXR1c0NvZGUiLCJSYXdBUEkiLCJjb25zdHJ1Y3RvciIsInVybCIsIm9wdGlvbnMiLCJfcXVldWUiLCJfcmV0cnlSb3V0aW5lIiwiX2hhbmRsZXIiLCJlcnJvckhhbmRsZXIiLCJfbWF4UmV0cnlDb3VudCIsIm1heFJldHJ5Q291bnQiLCJfdGltZW91dCIsIm5leHRSZXRyeUluTXMiLCJfcGFyc2VRdWVyeVBhcmFtcyIsInBhcmFtcyIsInVuZGVmaW5lZCIsImsiLCJ2IiwiVVJMU2VhcmNoUGFyYW1zIiwiX3NldFJldHJ5SW4iLCJyZXRyeUNvdW50IiwicmV0cnlUaW1lb3V0IiwiX3JlcGxheSIsImJpbmQiLCJxdWV1ZSIsIl9yZWNvcmRGYWlsZWQiLCJjbGVhclRpbWVvdXQiLCJpdGVtIiwiX2ZldGNoIiwic2hpZnQiLCJlIiwiTWF0aCIsIm1pbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInJlc3VsdCIsInJlc3BvbnNlVHlwZSIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJvayIsImh0dHAiLCJlbmRwb2ludCIsImhhc0JvZHkiLCJzdGFydHNXaXRoIiwicXVlcnkiLCJzdHJpbmdpZnkiLCJlcnIiLCJ0aW1lb3V0IiwiQWJzdHJhY3RBUEkiLCJnZXRDYWxsZXJOYW1lIiwib3JpZyIsInByZXBhcmVTdGFja1RyYWNlIiwic3RhY2siLCJyZXF1aXJlcyIsInJhaXNlQ29ubmVjdGlvbkVycm9yIiwiUm9vdENvbnRleHQiLCJSb290QVBJIiwid29ya2JlbmNoQXBpVXJsIiwiYXBpVXJsIiwiYXBpUm9vdFBhdGgiLCJlbmRzV2l0aCIsImFub255bW91c1VzZXJJZCIsImNhY2hlZCIsIlNjb3BlQ29udGV4dCIsIlNjb3Blc0FQSSIsIkFwcHMiLCJjb250ZXh0IiwiZGF0YSIsIl9kZWZhdWx0QXBwIiwibGlzdCIsInJhd1F1ZXJ5IiwiYXBwcyIsInRpc3N1ZXMiLCJzdGFpbnMiLCJqb2JfbW9kZXMiLCJhcHAiLCJpdGVtcyIsIm5hbWVfc2hvcnQiLCJ2ZW5kb3JfbmFtZSIsImdldE51bWJlciIsInZhcmlhYmxlIiwiTnVtYmVyIiwibWF0Y2hTdHJpbmdPblNlcGFyYXRvckdyb3VwIiwic3RyIiwic2VwYXJhdG9yIiwiZ3JvdXBJZHgiLCJtYXRjaGVzIiwiUmVnRXhwIiwiZXhlYyIsIkNhc2VFeHBsb3JlciIsImlkZW50aWZpZXJTZXBhcmF0b3IiLCJ1c2UiLCJnZXRDYXNlVmFsdWUiLCJjcyIsImdldENhc2VZZWFyIiwiZ2V0Q2FzZU1vbnRoIiwiZ2V0Q2FzZURheSIsImdldENhc2VEZXNjcmlwdGlvbiIsImdldENhc2VUaXNzdWVzIiwiZ2V0Q2FzZVN0YWlucyIsImlzTmFOIiwiZ2V0Q2FzZUlkZW50aWZpZXJQYXJ0IiwiZXZhbHVhdGVDYXNlVmFsdWUiLCJldmFsVmFsdWUiLCJjYXNlVmFsdWUiLCJldmF1bGF0ZUNhc2VZZWFyIiwiZXZhdWxhdGVDYXNlTW9udGgiLCJldmF1bGF0ZUNhc2VEYXkiLCJldmFsdWF0ZUNhc2VEZXNjcmlwdGlvbiIsImV2YWx1YXRlQ2FzZVRpc3N1ZXMiLCJldmFsdWF0ZUNhc2VTdGFpbnMiLCJldmF1bGF0ZUNhc2VJZGVudGlmaWVyUGFydCIsImVwb2NoVGltZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJwYXJ0SWR4IiwicGFydHMiLCJsb2NhbF9pZCIsImRlc2NyaXB0aW9uIiwia2V5cyIsInN0cmluZ1RvTWF0Y2giLCJ0b2tlblN0cmluZyIsInRva2VucyIsImZpbHRlciIsIkJvb2xlYW4iLCJtYXAiLCJzZWFyY2hUZXJtUmVnZXgiLCJqb2luIiwibWF0Y2giLCJtYXRjaFN0cmluZ09uVG9rZW5zIiwiZXZlcnkiLCJ0aXNzdWUiLCJpbmNsdWRlcyIsInN0YWluIiwiaGllcmFyY2h5TGV2ZWwiLCJrZXlJZHgiLCJjYXNlcyIsImxldmVsTmFtZSIsImxhc3RMZXZlbCIsImdyb3VwcyIsImhpZXJhcmNoeSIsInNlYXJjaCIsImZpbHRlcmVkQ2FzZXMiLCJmb3JFYWNoIiwiYWxsVGlzc3VlcyIsIlNldCIsInZhbHVlcyIsInQiLCJhZGQiLCJhbGxTdGFpbnMiLCJTbGlkZUV4cGxvcmVyIiwic2xpZGVzRGF0YSIsIm1hc2tzRGF0YSIsIm1hc2tJZGVudGlmaWVyU2VwYXJhdG9yIiwibWFza0lkZW50aWZpZXJWYWx1ZSIsImdldEFsbFNsaWRlcyIsImNhc2VJZCIsInNsaWRlcyIsImFjdHVhbFNsaWRlcyIsInNsaWRlIiwibWFza3MiLCJDYXNlcyIsImNhc2VFeHBsb3JlciIsInNsaWRlRXhwbG9yZXIiLCJFeGFtaW5hdGlvbnMiLCJjcmVhdGUiLCJhcHBJZCIsImNhc2VfaWQiLCJhcHBfaWQiLCJza2lwIiwibGltaXQiLCJleGFtaW5hdGlvbklkIiwic2NvcGUiLCJTdG9yYWdlIiwiZ2V0UmF3IiwiZmx1c2giLCJjb250ZW50Iiwic2V0IiwidmFsdWVSYXciLCJkYXRhUmF3IiwiZXJhc2UiLCJBbm5vdGF0aW9ucyIsInVwbG9hZCIsImlkIiwidXBkYXRlIiwiZGVsZXRlIiwiZXh0ZXJuYWxJZHMiLCJDb2xsZWN0aW9ucyIsImNvbGxlY3Rpb25JZCIsImNvbGxlY3Rpb24iLCJxdWVyeUl0ZW1zIiwiY3JlYXRlSXRlbXMiLCJkZWxldGVJdGVtIiwiaXRlbUlkIiwiU2NvcGVzIiwic2NvcGVDb250ZXh0IiwiX2RlZmF1bHRFeGFtaW5hdGlvbklkIiwiX2FjdGl2ZUV4YW1pbmF0aW9uSWQiLCJfdG9rZW5SZWZldGNoSW50ZXJ2YWwiLCJyYXciLCJhcGlQYXRoIiwic3RvcmFnZSIsImFubm90YXRpb25zIiwiY29sbGVjdGlvbnMiLCJ1c2VySWQiLCJmaW5kRXhhbWluYXRpb24iLCJleGFtaW5hdGlvbnMiLCJjcmVhdG9ycyIsIml0ZW1fY291bnQiLCJleGFtaW5hdGlvbiIsImZpbmQiLCJleCIsInN0YXRlIiwiZGVmYXVsdCIsImZyb20iLCJzY29wZVRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVzZXQiLCJleHAiLCJub3ciLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzY29wZV9pZCIsIlNsaWRlcyIsInNsaWRlSW5mbyIsInNsaWRlSWQiLCJzbGlkZVRodW1ibmFpbCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiZm9ybWF0IiwiaW1hZ2VfZm9ybWF0Iiwic2xpZGVMYWJlbCIsImxvYWRUaWxlIiwibGV2ZWwiLCJ4IiwieSIsIlJvb3QiLCJfYWNjZXNzVG9rZW4iLCJ2ZXJzaW9uIiwiX3VzZXJJZCIsInJvb3RVUkkiLCJzY29wZXMiLCJ0b2tlblN1YiIsInN1YiJdLCJzb3VyY2VSb290IjoiIn0=